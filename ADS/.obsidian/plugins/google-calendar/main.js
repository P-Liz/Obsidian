/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var rL=Object.create;var vu=Object.defineProperty,nL=Object.defineProperties,iL=Object.getOwnPropertyDescriptor,aL=Object.getOwnPropertyDescriptors,sL=Object.getOwnPropertyNames,a_=Object.getOwnPropertySymbols,oL=Object.getPrototypeOf,s_=Object.prototype.hasOwnProperty,lL=Object.prototype.propertyIsEnumerable;var o_=(t,e,r)=>e in t?vu(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,wn=(t,e)=>{for(var r in e||(e={}))s_.call(e,r)&&o_(t,r,e[r]);if(a_)for(var r of a_(e))lL.call(e,r)&&o_(t,r,e[r]);return t},Vi=(t,e)=>nL(t,aL(e)),l_=t=>vu(t,"__esModule",{value:!0});var hV=typeof require!="undefined"?require:t=>{throw new Error('Dynamic require of "'+t+'" is not supported')};var de=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),uL=(t,e)=>{l_(t);for(var r in e)vu(t,r,{get:e[r],enumerable:!0})},cL=(t,e,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of sL(e))!s_.call(t,n)&&n!=="default"&&vu(t,n,{get:()=>e[n],enumerable:!(r=iL(e,n))||r.enumerable});return t},gt=t=>cL(l_(vu(t!=null?rL(oL(t)):{},"default",t&&t.__esModule&&"default"in t?{get:()=>t.default,enumerable:!0}:{value:t,enumerable:!0})),t);var P=(t,e,r)=>new Promise((n,i)=>{var a=u=>{try{l(r.next(u))}catch(f){i(f)}},s=u=>{try{l(r.throw(u))}catch(f){i(f)}},l=u=>u.done?n(u.value):Promise.resolve(u.value).then(a,s);l((r=r.apply(t,e)).next())});var m0=de((wV,v_)=>{"use strict";var Of=Object.prototype.hasOwnProperty,f_=Object.prototype.toString,d_=Object.defineProperty,h_=Object.getOwnPropertyDescriptor,p_=function(e){return typeof Array.isArray=="function"?Array.isArray(e):f_.call(e)==="[object Array]"},g_=function(e){if(!e||f_.call(e)!=="[object Object]")return!1;var r=Of.call(e,"constructor"),n=e.constructor&&e.constructor.prototype&&Of.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!r&&!n)return!1;var i;for(i in e);return typeof i=="undefined"||Of.call(e,i)},m_=function(e,r){d_&&r.name==="__proto__"?d_(e,r.name,{enumerable:!0,configurable:!0,value:r.newValue,writable:!0}):e[r.name]=r.newValue},y_=function(e,r){if(r==="__proto__")if(Of.call(e,r)){if(h_)return h_(e,r).value}else return;return e[r]};v_.exports=function t(){var e,r,n,i,a,s,l=arguments[0],u=1,f=arguments.length,d=!1;for(typeof l=="boolean"&&(d=l,l=arguments[1]||{},u=2),(l==null||typeof l!="object"&&typeof l!="function")&&(l={});u<f;++u)if(e=arguments[u],e!=null)for(r in e)n=y_(l,r),i=y_(e,r),l!==i&&(d&&i&&(g_(i)||(a=p_(i)))?(a?(a=!1,s=n&&p_(n)?n:[]):s=n&&g_(n)?n:{},m_(l,{name:r,newValue:t(d,s,i)})):typeof i!="undefined"&&m_(l,{name:r,newValue:i}));return l}});var y0=de((jo,__)=>{"use strict";var fL=function(){if(typeof self!="undefined")return self;if(typeof window!="undefined")return window;if(typeof Ta!="undefined")return Ta;throw new Error("unable to locate global object")},Ta=fL();__.exports=jo=Ta.fetch;Ta.fetch&&(jo.default=Ta.fetch.bind(Ta));jo.Headers=Ta.Headers;jo.Request=Ta.Request;jo.Response=Ta.Response});var v0=de((EV,w_)=>{"use strict";var Hi=t=>t!==null&&typeof t=="object"&&typeof t.pipe=="function";Hi.writable=t=>Hi(t)&&t.writable!==!1&&typeof t._write=="function"&&typeof t._writableState=="object";Hi.readable=t=>Hi(t)&&t.readable!==!1&&typeof t._read=="function"&&typeof t._readableState=="object";Hi.duplex=t=>Hi.writable(t)&&Hi.readable(t);Hi.transform=t=>Hi.duplex(t)&&typeof t._transform=="function";w_.exports=Hi});var _0=de(Lf=>{"use strict";Object.defineProperty(Lf,"__esModule",{value:!0});Lf.GaxiosError=void 0;var E_=class extends Error{constructor(e,r,n){super(e);this.response=n,this.config=r,this.code=n.status.toString()}};Lf.GaxiosError=E_});var b_=de(Pf=>{"use strict";Object.defineProperty(Pf,"__esModule",{value:!0});Pf.getRetryConfig=void 0;function dL(t){return P(this,null,function*(){var e;let r=C_(t);if(!t||!t.config||!r&&!t.config.retry)return{shouldRetry:!1};r=r||{},r.currentRetryAttempt=r.currentRetryAttempt||0,r.retry=r.retry===void 0||r.retry===null?3:r.retry,r.httpMethodsToRetry=r.httpMethodsToRetry||["GET","HEAD","PUT","OPTIONS","DELETE"],r.noResponseRetries=r.noResponseRetries===void 0||r.noResponseRetries===null?2:r.noResponseRetries;let n=[[100,199],[429,429],[500,599]];if(r.statusCodesToRetry=r.statusCodesToRetry||n,t.config.retryConfig=r,!(yield(r.shouldRetry||hL)(t)))return{shouldRetry:!1,config:t.config};let s=(r.currentRetryAttempt?0:(e=r.retryDelay)!==null&&e!==void 0?e:100)+(Math.pow(2,r.currentRetryAttempt)-1)/2*1e3;t.config.retryConfig.currentRetryAttempt+=1;let l=new Promise(u=>{setTimeout(u,s)});return r.onRetryAttempt&&r.onRetryAttempt(t),yield l,{shouldRetry:!0,config:t.config}})}Pf.getRetryConfig=dL;function hL(t){let e=C_(t);if(t.name==="AbortError"||!e||e.retry===0||!t.response&&(e.currentRetryAttempt||0)>=e.noResponseRetries||!t.config.method||e.httpMethodsToRetry.indexOf(t.config.method.toUpperCase())<0)return!1;if(t.response&&t.response.status){let r=!1;for(let[n,i]of e.statusCodesToRetry){let a=t.response.status;if(a>=n&&a<=i){r=!0;break}}if(!r)return!1}return e.currentRetryAttempt=e.currentRetryAttempt||0,!(e.currentRetryAttempt>=e.retry)}function C_(t){if(t&&t.config&&t.config.retryConfig)return t.config.retryConfig}});var T_=de((xV,x_)=>{var Yo=1e3,Wo=Yo*60,zo=Wo*60,Vs=zo*24,pL=Vs*7,gL=Vs*365.25;x_.exports=function(t,e){e=e||{};var r=typeof t;if(r==="string"&&t.length>0)return mL(t);if(r==="number"&&isFinite(t))return e.long?vL(t):yL(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function mL(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(!!e){var r=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*gL;case"weeks":case"week":case"w":return r*pL;case"days":case"day":case"d":return r*Vs;case"hours":case"hour":case"hrs":case"hr":case"h":return r*zo;case"minutes":case"minute":case"mins":case"min":case"m":return r*Wo;case"seconds":case"second":case"secs":case"sec":case"s":return r*Yo;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function yL(t){var e=Math.abs(t);return e>=Vs?Math.round(t/Vs)+"d":e>=zo?Math.round(t/zo)+"h":e>=Wo?Math.round(t/Wo)+"m":e>=Yo?Math.round(t/Yo)+"s":t+"ms"}function vL(t){var e=Math.abs(t);return e>=Vs?Mf(t,e,Vs,"day"):e>=zo?Mf(t,e,zo,"hour"):e>=Wo?Mf(t,e,Wo,"minute"):e>=Yo?Mf(t,e,Yo,"second"):t+" ms"}function Mf(t,e,r,n){var i=e>=r*1.5;return Math.round(t/r)+" "+n+(i?"s":"")}});var A_=de((TV,S_)=>{function _L(t){r.debug=r,r.default=r,r.coerce=u,r.disable=a,r.enable=i,r.enabled=s,r.humanize=T_(),r.destroy=f,Object.keys(t).forEach(d=>{r[d]=t[d]}),r.names=[],r.skips=[],r.formatters={};function e(d){let h=0;for(let g=0;g<d.length;g++)h=(h<<5)-h+d.charCodeAt(g),h|=0;return r.colors[Math.abs(h)%r.colors.length]}r.selectColor=e;function r(d){let h,g=null,y,m;function w(..._){if(!w.enabled)return;let E=w,b=Number(new Date),k=b-(h||b);E.diff=k,E.prev=h,E.curr=b,h=b,_[0]=r.coerce(_[0]),typeof _[0]!="string"&&_.unshift("%O");let O=0;_[0]=_[0].replace(/%([a-zA-Z%])/g,(B,ne)=>{if(B==="%%")return"%";O++;let M=r.formatters[ne];if(typeof M=="function"){let G=_[O];B=M.call(E,G),_.splice(O,1),O--}return B}),r.formatArgs.call(E,_),(E.log||r.log).apply(E,_)}return w.namespace=d,w.useColors=r.useColors(),w.color=r.selectColor(d),w.extend=n,w.destroy=r.destroy,Object.defineProperty(w,"enabled",{enumerable:!0,configurable:!1,get:()=>g!==null?g:(y!==r.namespaces&&(y=r.namespaces,m=r.enabled(d)),m),set:_=>{g=_}}),typeof r.init=="function"&&r.init(w),w}function n(d,h){let g=r(this.namespace+(typeof h=="undefined"?":":h)+d);return g.log=this.log,g}function i(d){r.save(d),r.namespaces=d,r.names=[],r.skips=[];let h,g=(typeof d=="string"?d:"").split(/[\s,]+/),y=g.length;for(h=0;h<y;h++)!g[h]||(d=g[h].replace(/\*/g,".*?"),d[0]==="-"?r.skips.push(new RegExp("^"+d.slice(1)+"$")):r.names.push(new RegExp("^"+d+"$")))}function a(){let d=[...r.names.map(l),...r.skips.map(l).map(h=>"-"+h)].join(",");return r.enable(""),d}function s(d){if(d[d.length-1]==="*")return!0;let h,g;for(h=0,g=r.skips.length;h<g;h++)if(r.skips[h].test(d))return!1;for(h=0,g=r.names.length;h<g;h++)if(r.names[h].test(d))return!0;return!1}function l(d){return d.toString().substring(2,d.toString().length-2).replace(/\.\*\?$/,"*")}function u(d){return d instanceof Error?d.stack||d.message:d}function f(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}S_.exports=_L});var Ff=de((jn,Uf)=>{jn.formatArgs=EL;jn.save=CL;jn.load=bL;jn.useColors=wL;jn.storage=xL();jn.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();jn.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function wL(){return typeof window!="undefined"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document!="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function EL(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+Uf.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;t.splice(1,0,e,"color: inherit");let r=0,n=0;t[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(r++,i==="%c"&&(n=r))}),t.splice(n,0,e)}jn.log=console.debug||console.log||(()=>{});function CL(t){try{t?jn.storage.setItem("debug",t):jn.storage.removeItem("debug")}catch(e){}}function bL(){let t;try{t=jn.storage.getItem("debug")}catch(e){}return!t&&typeof process!="undefined"&&"env"in process&&(t=process.env.DEBUG),t}function xL(){try{return localStorage}catch(t){}}Uf.exports=A_()(jn);var{formatters:TL}=Uf.exports;TL.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var k_=de(w0=>{"use strict";Object.defineProperty(w0,"__esModule",{value:!0});function SL(t){return function(e,r){return new Promise((n,i)=>{t.call(this,e,r,(a,s)=>{a?i(a):n(s)})})}}w0.default=SL});var R_=de((C0,N_)=>{"use strict";var I_=C0&&C0.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},AL=require("events"),kL=I_(Ff()),IL=I_(k_()),wu=kL.default("agent-base");function NL(t){return Boolean(t)&&typeof t.addRequest=="function"}function E0(){let{stack:t}=new Error;return typeof t!="string"?!1:t.split(`
`).some(e=>e.indexOf("(https.js:")!==-1||e.indexOf("node:https:")!==-1)}function qf(t,e){return new qf.Agent(t,e)}(function(t){class e extends AL.EventEmitter{constructor(n,i){super();let a=i;typeof n=="function"?this.callback=n:n&&(a=n),this.timeout=null,a&&typeof a.timeout=="number"&&(this.timeout=a.timeout),this.maxFreeSockets=1,this.maxSockets=1,this.maxTotalSockets=1/0,this.sockets={},this.freeSockets={},this.requests={},this.options={}}get defaultPort(){return typeof this.explicitDefaultPort=="number"?this.explicitDefaultPort:E0()?443:80}set defaultPort(n){this.explicitDefaultPort=n}get protocol(){return typeof this.explicitProtocol=="string"?this.explicitProtocol:E0()?"https:":"http:"}set protocol(n){this.explicitProtocol=n}callback(n,i,a){throw new Error('"agent-base" has no default implementation, you must subclass and override `callback()`')}addRequest(n,i){let a=Object.assign({},i);typeof a.secureEndpoint!="boolean"&&(a.secureEndpoint=E0()),a.host==null&&(a.host="localhost"),a.port==null&&(a.port=a.secureEndpoint?443:80),a.protocol==null&&(a.protocol=a.secureEndpoint?"https:":"http:"),a.host&&a.path&&delete a.path,delete a.agent,delete a.hostname,delete a._defaultAgent,delete a.defaultPort,delete a.createConnection,n._last=!0,n.shouldKeepAlive=!1;let s=!1,l=null,u=a.timeout||this.timeout,f=y=>{n._hadError||(n.emit("error",y),n._hadError=!0)},d=()=>{l=null,s=!0;let y=new Error(`A "socket" was not created for HTTP request before ${u}ms`);y.code="ETIMEOUT",f(y)},h=y=>{s||(l!==null&&(clearTimeout(l),l=null),f(y))},g=y=>{if(s)return;if(l!=null&&(clearTimeout(l),l=null),NL(y)){wu("Callback returned another Agent instance %o",y.constructor.name),y.addRequest(n,a);return}if(y){y.once("free",()=>{this.freeSocket(y,a)}),n.onSocket(y);return}let m=new Error(`no Duplex stream was returned to agent-base for \`${n.method} ${n.path}\``);f(m)};if(typeof this.callback!="function"){f(new Error("`callback` is not defined"));return}this.promisifiedCallback||(this.callback.length>=3?(wu("Converting legacy callback function to promise"),this.promisifiedCallback=IL.default(this.callback)):this.promisifiedCallback=this.callback),typeof u=="number"&&u>0&&(l=setTimeout(d,u)),"port"in a&&typeof a.port!="number"&&(a.port=Number(a.port));try{wu("Resolving socket for %o request: %o",a.protocol,`${n.method} ${n.path}`),Promise.resolve(this.promisifiedCallback(n,a)).then(g,h)}catch(y){Promise.reject(y).catch(h)}}freeSocket(n,i){wu("Freeing socket %o %o",n.constructor.name,i),n.destroy()}destroy(){wu("Destroying agent %o",this.constructor.name)}}t.Agent=e,t.prototype=t.Agent.prototype})(qf||(qf={}));N_.exports=qf});var D_=de(Cu=>{"use strict";var RL=Cu&&Cu.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Cu,"__esModule",{value:!0});var DL=RL(Ff()),Eu=DL.default("https-proxy-agent:parse-proxy-response");function BL(t){return new Promise((e,r)=>{let n=0,i=[];function a(){let h=t.read();h?d(h):t.once("readable",a)}function s(){t.removeListener("end",u),t.removeListener("error",f),t.removeListener("close",l),t.removeListener("readable",a)}function l(h){Eu("onclose had error %o",h)}function u(){Eu("onend")}function f(h){s(),Eu("onerror %o",h),r(h)}function d(h){i.push(h),n+=h.length;let g=Buffer.concat(i,n);if(g.indexOf(`\r
\r
`)===-1){Eu("have not received end of HTTP headers yet..."),a();return}let m=g.toString("ascii",0,g.indexOf(`\r
`)),w=+m.split(" ")[1];Eu("got proxy server response: %o",m),e({statusCode:w,buffered:g})}t.on("error",f),t.on("close",l),t.on("end",u),a()})}Cu.default=BL});var P_=de(Hs=>{"use strict";var OL=Hs&&Hs.__awaiter||function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function l(d){try{f(n.next(d))}catch(h){s(h)}}function u(d){try{f(n.throw(d))}catch(h){s(h)}}function f(d){d.done?a(d.value):i(d.value).then(l,u)}f((n=n.apply(t,e||[])).next())})},Qo=Hs&&Hs.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Hs,"__esModule",{value:!0});var B_=Qo(require("net")),O_=Qo(require("tls")),LL=Qo(require("url")),PL=Qo(require("assert")),ML=Qo(Ff()),UL=R_(),FL=Qo(D_()),bu=ML.default("https-proxy-agent:agent"),L_=class extends UL.Agent{constructor(e){let r;if(typeof e=="string"?r=LL.default.parse(e):r=e,!r)throw new Error("an HTTP(S) proxy server `host` and `port` must be specified!");bu("creating new HttpsProxyAgent instance: %o",r);super(r);let n=Object.assign({},r);this.secureProxy=r.secureProxy||VL(n.protocol),n.host=n.hostname||n.host,typeof n.port=="string"&&(n.port=parseInt(n.port,10)),!n.port&&n.host&&(n.port=this.secureProxy?443:80),this.secureProxy&&!("ALPNProtocols"in n)&&(n.ALPNProtocols=["http 1.1"]),n.host&&n.path&&(delete n.path,delete n.pathname),this.proxy=n}callback(e,r){return OL(this,void 0,void 0,function*(){let{proxy:n,secureProxy:i}=this,a;i?(bu("Creating `tls.Socket`: %o",n),a=O_.default.connect(n)):(bu("Creating `net.Socket`: %o",n),a=B_.default.connect(n));let s=Object.assign({},n.headers),u=`CONNECT ${`${r.host}:${r.port}`} HTTP/1.1\r
`;n.auth&&(s["Proxy-Authorization"]=`Basic ${Buffer.from(n.auth).toString("base64")}`);let{host:f,port:d,secureEndpoint:h}=r;GL(d,h)||(f+=`:${d}`),s.Host=f,s.Connection="close";for(let _ of Object.keys(s))u+=`${_}: ${s[_]}\r
`;let g=FL.default(a);a.write(`${u}\r
`);let{statusCode:y,buffered:m}=yield g;if(y===200){if(e.once("socket",qL),r.secureEndpoint){bu("Upgrading socket connection to TLS");let _=r.servername||r.host;return O_.default.connect(Object.assign(Object.assign({},HL(r,"host","hostname","path","port")),{socket:a,servername:_}))}return a}a.destroy();let w=new B_.default.Socket({writable:!1});return w.readable=!0,e.once("socket",_=>{bu("replaying proxy buffer for failed request"),PL.default(_.listenerCount("data")>0),_.push(m),_.push(null)}),w})}};Hs.default=L_;function qL(t){t.resume()}function GL(t,e){return Boolean(!e&&t===80||e&&t===443)}function VL(t){return typeof t=="string"?/^https:?$/i.test(t):!1}function HL(t,...e){let r={},n;for(n in t)e.includes(n)||(r[n]=t[n]);return r}});var S0=de((T0,M_)=>{"use strict";var KL=T0&&T0.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},b0=KL(P_());function x0(t){return new b0.default(t)}(function(t){t.HttpsProxyAgent=b0.default,t.prototype=b0.default.prototype})(x0||(x0={}));M_.exports=x0});var H_=de(Xo=>{"use strict";var Gf=Xo&&Xo.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Xo,"__esModule",{value:!0});Xo.Gaxios=void 0;var jL=Gf(m0()),YL=require("https"),WL=Gf(y0()),zL=Gf(require("querystring")),QL=Gf(v0()),U_=require("url"),XL=_0(),JL=b_(),ZL=e4()?window.fetch:WL.default;function $L(){return typeof window!="undefined"&&!!window}function e4(){return $L()&&!!window.fetch}function t4(){return typeof Buffer!="undefined"}function F_(t,e){return!!q_(t,e)}function q_(t,e){e=e.toLowerCase();for(let r of Object.keys((t==null?void 0:t.headers)||{}))if(e===r.toLowerCase())return t.headers[r]}var A0;function G_(){var t,e,r,n;let i=((t=process==null?void 0:process.env)===null||t===void 0?void 0:t.HTTPS_PROXY)||((e=process==null?void 0:process.env)===null||e===void 0?void 0:e.https_proxy)||((r=process==null?void 0:process.env)===null||r===void 0?void 0:r.HTTP_PROXY)||((n=process==null?void 0:process.env)===null||n===void 0?void 0:n.http_proxy);return i&&(A0=S0()),i}G_();function r4(t){var e;let r=(e=process.env.NO_PROXY)!==null&&e!==void 0?e:process.env.no_proxy;if(!r)return!1;let n=r.split(","),i=new U_.URL(t);return!!n.find(a=>a.startsWith("*.")||a.startsWith(".")?(a=a.replace(/^\*\./,"."),i.hostname.endsWith(a)):a===i.origin||a===i.hostname)}function n4(t){if(!r4(t))return G_()}var V_=class{constructor(e){this.agentCache=new Map,this.defaults=e||{}}request(){return P(this,arguments,function*(e={}){return e=this.validateOpts(e),this._request(e)})}_defaultAdapter(e){return P(this,null,function*(){let n=yield(e.fetchImplementation||ZL)(e.url,e),i=yield this.getResponseData(e,n);return this.translateResponse(e,n,i)})}_request(){return P(this,arguments,function*(e={}){try{let r;if(e.adapter?r=yield e.adapter(e,this._defaultAdapter.bind(this)):r=yield this._defaultAdapter(e),!e.validateStatus(r.status))throw new XL.GaxiosError(`Request failed with status code ${r.status}`,e,r);return r}catch(r){let n=r;n.config=e;let{shouldRetry:i,config:a}=yield(0,JL.getRetryConfig)(n);if(i&&a)return n.config.retryConfig.currentRetryAttempt=a.retryConfig.currentRetryAttempt,this._request(n.config);throw n}})}getResponseData(e,r){return P(this,null,function*(){switch(e.responseType){case"stream":return r.body;case"json":{let n=yield r.text();try{n=JSON.parse(n)}catch(i){}return n}case"arraybuffer":return r.arrayBuffer();case"blob":return r.blob();default:return r.text()}})}validateOpts(e){let r=(0,jL.default)(!0,{},this.defaults,e);if(!r.url)throw new Error("URL is required.");let n=r.baseUrl||r.baseURL;if(n&&(r.url=n+r.url),r.paramsSerializer=r.paramsSerializer||this.paramsSerializer,r.params&&Object.keys(r.params).length>0){let a=r.paramsSerializer(r.params);a.startsWith("?")&&(a=a.slice(1));let s=r.url.includes("?")?"&":"?";r.url=r.url+s+a}if(typeof e.maxContentLength=="number"&&(r.size=e.maxContentLength),typeof e.maxRedirects=="number"&&(r.follow=e.maxRedirects),r.headers=r.headers||{},r.data){let a=typeof FormData=="undefined"?!1:(r==null?void 0:r.data)instanceof FormData;QL.default.readable(r.data)?r.body=r.data:t4()&&Buffer.isBuffer(r.data)?(r.body=r.data,F_(r,"Content-Type")||(r.headers["Content-Type"]="application/json")):typeof r.data=="object"?a||(q_(r,"content-type")==="application/x-www-form-urlencoded"?r.body=r.paramsSerializer(r.data):(F_(r,"Content-Type")||(r.headers["Content-Type"]="application/json"),r.body=JSON.stringify(r.data))):r.body=r.data}r.validateStatus=r.validateStatus||this.validateStatus,r.responseType=r.responseType||"json",!r.headers.Accept&&r.responseType==="json"&&(r.headers.Accept="application/json"),r.method=r.method||"GET";let i=n4(r.url);if(i)if(this.agentCache.has(i))r.agent=this.agentCache.get(i);else{if(r.cert&&r.key){let a=new U_.URL(i);r.agent=new A0({port:a.port,host:a.host,protocol:a.protocol,cert:r.cert,key:r.key})}else r.agent=new A0(i);this.agentCache.set(i,r.agent)}else r.cert&&r.key&&(this.agentCache.has(r.key)?r.agent=this.agentCache.get(r.key):(r.agent=new YL.Agent({cert:r.cert,key:r.key}),this.agentCache.set(r.key,r.agent)));return r}validateStatus(e){return e>=200&&e<300}paramsSerializer(e){return zL.default.stringify(e)}translateResponse(e,r,n){let i={};return r.headers.forEach((a,s)=>{i[s]=a}),{config:e,data:n,headers:i,status:r.status,statusText:r.statusText,request:{responseURL:r.url}}}};Xo.Gaxios=V_});var Jo=de(bi=>{"use strict";Object.defineProperty(bi,"__esModule",{value:!0});bi.request=bi.instance=bi.Gaxios=bi.GaxiosError=void 0;var K_=H_();Object.defineProperty(bi,"Gaxios",{enumerable:!0,get:function(){return K_.Gaxios}});var i4=_0();Object.defineProperty(bi,"GaxiosError",{enumerable:!0,get:function(){return i4.GaxiosError}});bi.instance=new K_.Gaxios;function a4(t){return P(this,null,function*(){return bi.instance.request(t)})}bi.request=a4});var k0=de((j_,Vf)=>{(function(t){"use strict";var e,r=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,n=Math.ceil,i=Math.floor,a="[BigNumber Error] ",s=a+"Number primitive has more than 15 significant digits: ",l=1e14,u=14,f=9007199254740991,d=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],h=1e7,g=1e9;function y(R){var B,ne,M,G=ue.prototype={constructor:ue,toString:null,valueOf:null},re=new ue(1),se=20,ye=4,Ae=-7,Je=21,De=-1e7,me=1e7,te=!1,Fe=1,et=0,ct={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"\xA0",suffix:""},$e="0123456789abcdefghijklmnopqrstuvwxyz",ft=!0;function ue(I,D){var L,j,H,Q,J,Y,X,ie,Z=this;if(!(Z instanceof ue))return new ue(I,D);if(D==null){if(I&&I._isBigNumber===!0){Z.s=I.s,!I.c||I.e>me?Z.c=Z.e=null:I.e<De?Z.c=[Z.e=0]:(Z.e=I.e,Z.c=I.c.slice());return}if((Y=typeof I=="number")&&I*0==0){if(Z.s=1/I<0?(I=-I,-1):1,I===~~I){for(Q=0,J=I;J>=10;J/=10,Q++);Q>me?Z.c=Z.e=null:(Z.e=Q,Z.c=[I]);return}ie=String(I)}else{if(!r.test(ie=String(I)))return M(Z,ie,Y);Z.s=ie.charCodeAt(0)==45?(ie=ie.slice(1),-1):1}(Q=ie.indexOf("."))>-1&&(ie=ie.replace(".","")),(J=ie.search(/e/i))>0?(Q<0&&(Q=J),Q+=+ie.slice(J+1),ie=ie.substring(0,J)):Q<0&&(Q=ie.length)}else{if(E(D,2,$e.length,"Base"),D==10&&ft)return Z=new ue(I),nt(Z,se+Z.e+1,ye);if(ie=String(I),Y=typeof I=="number"){if(I*0!=0)return M(Z,ie,Y,D);if(Z.s=1/I<0?(ie=ie.slice(1),-1):1,ue.DEBUG&&ie.replace(/^0\.0*|\./,"").length>15)throw Error(s+I)}else Z.s=ie.charCodeAt(0)===45?(ie=ie.slice(1),-1):1;for(L=$e.slice(0,D),Q=J=0,X=ie.length;J<X;J++)if(L.indexOf(j=ie.charAt(J))<0){if(j=="."){if(J>Q){Q=X;continue}}else if(!H&&(ie==ie.toUpperCase()&&(ie=ie.toLowerCase())||ie==ie.toLowerCase()&&(ie=ie.toUpperCase()))){H=!0,J=-1,Q=0;continue}return M(Z,String(I),Y,D)}Y=!1,ie=ne(ie,D,10,Z.s),(Q=ie.indexOf("."))>-1?ie=ie.replace(".",""):Q=ie.length}for(J=0;ie.charCodeAt(J)===48;J++);for(X=ie.length;ie.charCodeAt(--X)===48;);if(ie=ie.slice(J,++X)){if(X-=J,Y&&ue.DEBUG&&X>15&&(I>f||I!==i(I)))throw Error(s+Z.s*I);if((Q=Q-J-1)>me)Z.c=Z.e=null;else if(Q<De)Z.c=[Z.e=0];else{if(Z.e=Q,Z.c=[],J=(Q+1)%u,Q<0&&(J+=u),J<X){for(J&&Z.c.push(+ie.slice(0,J)),X-=u;J<X;)Z.c.push(+ie.slice(J,J+=u));J=u-(ie=ie.slice(J)).length}else J-=X;for(;J--;ie+="0");Z.c.push(+ie)}}else Z.c=[Z.e=0]}ue.clone=y,ue.ROUND_UP=0,ue.ROUND_DOWN=1,ue.ROUND_CEIL=2,ue.ROUND_FLOOR=3,ue.ROUND_HALF_UP=4,ue.ROUND_HALF_DOWN=5,ue.ROUND_HALF_EVEN=6,ue.ROUND_HALF_CEIL=7,ue.ROUND_HALF_FLOOR=8,ue.EUCLID=9,ue.config=ue.set=function(I){var D,L;if(I!=null)if(typeof I=="object"){if(I.hasOwnProperty(D="DECIMAL_PLACES")&&(L=I[D],E(L,0,g,D),se=L),I.hasOwnProperty(D="ROUNDING_MODE")&&(L=I[D],E(L,0,8,D),ye=L),I.hasOwnProperty(D="EXPONENTIAL_AT")&&(L=I[D],L&&L.pop?(E(L[0],-g,0,D),E(L[1],0,g,D),Ae=L[0],Je=L[1]):(E(L,-g,g,D),Ae=-(Je=L<0?-L:L))),I.hasOwnProperty(D="RANGE"))if(L=I[D],L&&L.pop)E(L[0],-g,-1,D),E(L[1],1,g,D),De=L[0],me=L[1];else if(E(L,-g,g,D),L)De=-(me=L<0?-L:L);else throw Error(a+D+" cannot be zero: "+L);if(I.hasOwnProperty(D="CRYPTO"))if(L=I[D],L===!!L)if(L)if(typeof crypto!="undefined"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))te=L;else throw te=!L,Error(a+"crypto unavailable");else te=L;else throw Error(a+D+" not true or false: "+L);if(I.hasOwnProperty(D="MODULO_MODE")&&(L=I[D],E(L,0,9,D),Fe=L),I.hasOwnProperty(D="POW_PRECISION")&&(L=I[D],E(L,0,g,D),et=L),I.hasOwnProperty(D="FORMAT"))if(L=I[D],typeof L=="object")ct=L;else throw Error(a+D+" not an object: "+L);if(I.hasOwnProperty(D="ALPHABET"))if(L=I[D],typeof L=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(L))ft=L.slice(0,10)=="0123456789",$e=L;else throw Error(a+D+" invalid: "+L)}else throw Error(a+"Object expected: "+I);return{DECIMAL_PLACES:se,ROUNDING_MODE:ye,EXPONENTIAL_AT:[Ae,Je],RANGE:[De,me],CRYPTO:te,MODULO_MODE:Fe,POW_PRECISION:et,FORMAT:ct,ALPHABET:$e}},ue.isBigNumber=function(I){if(!I||I._isBigNumber!==!0)return!1;if(!ue.DEBUG)return!0;var D,L,j=I.c,H=I.e,Q=I.s;e:if({}.toString.call(j)=="[object Array]"){if((Q===1||Q===-1)&&H>=-g&&H<=g&&H===i(H)){if(j[0]===0){if(H===0&&j.length===1)return!0;break e}if(D=(H+1)%u,D<1&&(D+=u),String(j[0]).length==D){for(D=0;D<j.length;D++)if(L=j[D],L<0||L>=l||L!==i(L))break e;if(L!==0)return!0}}}else if(j===null&&H===null&&(Q===null||Q===1||Q===-1))return!0;throw Error(a+"Invalid BigNumber: "+I)},ue.maximum=ue.max=function(){return Bt(arguments,G.lt)},ue.minimum=ue.min=function(){return Bt(arguments,G.gt)},ue.random=function(){var I=9007199254740992,D=Math.random()*I&2097151?function(){return i(Math.random()*I)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(L){var j,H,Q,J,Y,X=0,ie=[],Z=new ue(re);if(L==null?L=se:E(L,0,g),J=n(L/u),te)if(crypto.getRandomValues){for(j=crypto.getRandomValues(new Uint32Array(J*=2));X<J;)Y=j[X]*131072+(j[X+1]>>>11),Y>=9e15?(H=crypto.getRandomValues(new Uint32Array(2)),j[X]=H[0],j[X+1]=H[1]):(ie.push(Y%1e14),X+=2);X=J/2}else if(crypto.randomBytes){for(j=crypto.randomBytes(J*=7);X<J;)Y=(j[X]&31)*281474976710656+j[X+1]*1099511627776+j[X+2]*4294967296+j[X+3]*16777216+(j[X+4]<<16)+(j[X+5]<<8)+j[X+6],Y>=9e15?crypto.randomBytes(7).copy(j,X):(ie.push(Y%1e14),X+=7);X=J/7}else throw te=!1,Error(a+"crypto unavailable");if(!te)for(;X<J;)Y=D(),Y<9e15&&(ie[X++]=Y%1e14);for(J=ie[--X],L%=u,J&&L&&(Y=d[u-L],ie[X]=i(J/Y)*Y);ie[X]===0;ie.pop(),X--);if(X<0)ie=[Q=0];else{for(Q=-1;ie[0]===0;ie.splice(0,1),Q-=u);for(X=1,Y=ie[0];Y>=10;Y/=10,X++);X<u&&(Q-=u-X)}return Z.e=Q,Z.c=ie,Z}}(),ue.sum=function(){for(var I=1,D=arguments,L=new ue(D[0]);I<D.length;)L=L.plus(D[I++]);return L},ne=function(){var I="0123456789";function D(L,j,H,Q){for(var J,Y=[0],X,ie=0,Z=L.length;ie<Z;){for(X=Y.length;X--;Y[X]*=j);for(Y[0]+=Q.indexOf(L.charAt(ie++)),J=0;J<Y.length;J++)Y[J]>H-1&&(Y[J+1]==null&&(Y[J+1]=0),Y[J+1]+=Y[J]/H|0,Y[J]%=H)}return Y.reverse()}return function(L,j,H,Q,J){var Y,X,ie,Z,he,Le,Ue,ht,Qt=L.indexOf("."),Xt=se,it=ye;for(Qt>=0&&(Z=et,et=0,L=L.replace(".",""),ht=new ue(j),Le=ht.pow(L.length-Qt),et=Z,ht.c=D(O(w(Le.c),Le.e,"0"),10,H,I),ht.e=ht.c.length),Ue=D(L,j,H,J?(Y=$e,I):(Y=I,$e)),ie=Z=Ue.length;Ue[--Z]==0;Ue.pop());if(!Ue[0])return Y.charAt(0);if(Qt<0?--ie:(Le.c=Ue,Le.e=ie,Le.s=Q,Le=B(Le,ht,Xt,it,H),Ue=Le.c,he=Le.r,ie=Le.e),X=ie+Xt+1,Qt=Ue[X],Z=H/2,he=he||X<0||Ue[X+1]!=null,he=it<4?(Qt!=null||he)&&(it==0||it==(Le.s<0?3:2)):Qt>Z||Qt==Z&&(it==4||he||it==6&&Ue[X-1]&1||it==(Le.s<0?8:7)),X<1||!Ue[0])L=he?O(Y.charAt(1),-Xt,Y.charAt(0)):Y.charAt(0);else{if(Ue.length=X,he)for(--H;++Ue[--X]>H;)Ue[X]=0,X||(++ie,Ue=[1].concat(Ue));for(Z=Ue.length;!Ue[--Z];);for(Qt=0,L="";Qt<=Z;L+=Y.charAt(Ue[Qt++]));L=O(L,ie,Y.charAt(0))}return L}}(),B=function(){function I(j,H,Q){var J,Y,X,ie,Z=0,he=j.length,Le=H%h,Ue=H/h|0;for(j=j.slice();he--;)X=j[he]%h,ie=j[he]/h|0,J=Ue*X+ie*Le,Y=Le*X+J%h*h+Z,Z=(Y/Q|0)+(J/h|0)+Ue*ie,j[he]=Y%Q;return Z&&(j=[Z].concat(j)),j}function D(j,H,Q,J){var Y,X;if(Q!=J)X=Q>J?1:-1;else for(Y=X=0;Y<Q;Y++)if(j[Y]!=H[Y]){X=j[Y]>H[Y]?1:-1;break}return X}function L(j,H,Q,J){for(var Y=0;Q--;)j[Q]-=Y,Y=j[Q]<H[Q]?1:0,j[Q]=Y*J+j[Q]-H[Q];for(;!j[0]&&j.length>1;j.splice(0,1));}return function(j,H,Q,J,Y){var X,ie,Z,he,Le,Ue,ht,Qt,Xt,it,Ot,gr,ja,Ns,Rs,kn,pa,un=j.s==H.s?1:-1,Rr=j.c,fr=H.c;if(!Rr||!Rr[0]||!fr||!fr[0])return new ue(!j.s||!H.s||(Rr?fr&&Rr[0]==fr[0]:!fr)?NaN:Rr&&Rr[0]==0||!fr?un*0:un/0);for(Qt=new ue(un),Xt=Qt.c=[],ie=j.e-H.e,un=Q+ie+1,Y||(Y=l,ie=m(j.e/u)-m(H.e/u),un=un/u|0),Z=0;fr[Z]==(Rr[Z]||0);Z++);if(fr[Z]>(Rr[Z]||0)&&ie--,un<0)Xt.push(1),he=!0;else{for(Ns=Rr.length,kn=fr.length,Z=0,un+=2,Le=i(Y/(fr[0]+1)),Le>1&&(fr=I(fr,Le,Y),Rr=I(Rr,Le,Y),kn=fr.length,Ns=Rr.length),ja=kn,it=Rr.slice(0,kn),Ot=it.length;Ot<kn;it[Ot++]=0);pa=fr.slice(),pa=[0].concat(pa),Rs=fr[0],fr[1]>=Y/2&&Rs++;do{if(Le=0,X=D(fr,it,kn,Ot),X<0){if(gr=it[0],kn!=Ot&&(gr=gr*Y+(it[1]||0)),Le=i(gr/Rs),Le>1)for(Le>=Y&&(Le=Y-1),Ue=I(fr,Le,Y),ht=Ue.length,Ot=it.length;D(Ue,it,ht,Ot)==1;)Le--,L(Ue,kn<ht?pa:fr,ht,Y),ht=Ue.length,X=1;else Le==0&&(X=Le=1),Ue=fr.slice(),ht=Ue.length;if(ht<Ot&&(Ue=[0].concat(Ue)),L(it,Ue,Ot,Y),Ot=it.length,X==-1)for(;D(fr,it,kn,Ot)<1;)Le++,L(it,kn<Ot?pa:fr,Ot,Y),Ot=it.length}else X===0&&(Le++,it=[0]);Xt[Z++]=Le,it[0]?it[Ot++]=Rr[ja]||0:(it=[Rr[ja]],Ot=1)}while((ja++<Ns||it[0]!=null)&&un--);he=it[0]!=null,Xt[0]||Xt.splice(0,1)}if(Y==l){for(Z=1,un=Xt[0];un>=10;un/=10,Z++);nt(Qt,Q+(Qt.e=Z+ie*u-1)+1,J,he)}else Qt.e=ie,Qt.r=+he;return Qt}}();function Dt(I,D,L,j){var H,Q,J,Y,X;if(L==null?L=ye:E(L,0,8),!I.c)return I.toString();if(H=I.c[0],J=I.e,D==null)X=w(I.c),X=j==1||j==2&&(J<=Ae||J>=Je)?k(X,J):O(X,J,"0");else if(I=nt(new ue(I),D,L),Q=I.e,X=w(I.c),Y=X.length,j==1||j==2&&(D<=Q||Q<=Ae)){for(;Y<D;X+="0",Y++);X=k(X,Q)}else if(D-=J,X=O(X,Q,"0"),Q+1>Y){if(--D>0)for(X+=".";D--;X+="0");}else if(D+=Q-Y,D>0)for(Q+1==Y&&(X+=".");D--;X+="0");return I.s<0&&H?"-"+X:X}function Bt(I,D){for(var L,j=1,H=new ue(I[0]);j<I.length;j++)if(L=new ue(I[j]),L.s)D.call(H,L)&&(H=L);else{H=L;break}return H}function rt(I,D,L){for(var j=1,H=D.length;!D[--H];D.pop());for(H=D[0];H>=10;H/=10,j++);return(L=j+L*u-1)>me?I.c=I.e=null:L<De?I.c=[I.e=0]:(I.e=L,I.c=D),I}M=function(){var I=/^(-?)0([xbo])(?=\w[\w.]*$)/i,D=/^([^.]+)\.$/,L=/^\.([^.]+)$/,j=/^-?(Infinity|NaN)$/,H=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(Q,J,Y,X){var ie,Z=Y?J:J.replace(H,"");if(j.test(Z))Q.s=isNaN(Z)?null:Z<0?-1:1;else{if(!Y&&(Z=Z.replace(I,function(he,Le,Ue){return ie=(Ue=Ue.toLowerCase())=="x"?16:Ue=="b"?2:8,!X||X==ie?Le:he}),X&&(ie=X,Z=Z.replace(D,"$1").replace(L,"0.$1")),J!=Z))return new ue(Z,ie);if(ue.DEBUG)throw Error(a+"Not a"+(X?" base "+X:"")+" number: "+J);Q.s=null}Q.c=Q.e=null}}();function nt(I,D,L,j){var H,Q,J,Y,X,ie,Z,he=I.c,Le=d;if(he){e:{for(H=1,Y=he[0];Y>=10;Y/=10,H++);if(Q=D-H,Q<0)Q+=u,J=D,X=he[ie=0],Z=X/Le[H-J-1]%10|0;else if(ie=n((Q+1)/u),ie>=he.length)if(j){for(;he.length<=ie;he.push(0));X=Z=0,H=1,Q%=u,J=Q-u+1}else break e;else{for(X=Y=he[ie],H=1;Y>=10;Y/=10,H++);Q%=u,J=Q-u+H,Z=J<0?0:X/Le[H-J-1]%10|0}if(j=j||D<0||he[ie+1]!=null||(J<0?X:X%Le[H-J-1]),j=L<4?(Z||j)&&(L==0||L==(I.s<0?3:2)):Z>5||Z==5&&(L==4||j||L==6&&(Q>0?J>0?X/Le[H-J]:0:he[ie-1])%10&1||L==(I.s<0?8:7)),D<1||!he[0])return he.length=0,j?(D-=I.e+1,he[0]=Le[(u-D%u)%u],I.e=-D||0):he[0]=I.e=0,I;if(Q==0?(he.length=ie,Y=1,ie--):(he.length=ie+1,Y=Le[u-Q],he[ie]=J>0?i(X/Le[H-J]%Le[J])*Y:0),j)for(;;)if(ie==0){for(Q=1,J=he[0];J>=10;J/=10,Q++);for(J=he[0]+=Y,Y=1;J>=10;J/=10,Y++);Q!=Y&&(I.e++,he[0]==l&&(he[0]=1));break}else{if(he[ie]+=Y,he[ie]!=l)break;he[ie--]=0,Y=1}for(Q=he.length;he[--Q]===0;he.pop());}I.e>me?I.c=I.e=null:I.e<De&&(I.c=[I.e=0])}return I}function dt(I){var D,L=I.e;return L===null?I.toString():(D=w(I.c),D=L<=Ae||L>=Je?k(D,L):O(D,L,"0"),I.s<0?"-"+D:D)}return G.absoluteValue=G.abs=function(){var I=new ue(this);return I.s<0&&(I.s=1),I},G.comparedTo=function(I,D){return _(this,new ue(I,D))},G.decimalPlaces=G.dp=function(I,D){var L,j,H,Q=this;if(I!=null)return E(I,0,g),D==null?D=ye:E(D,0,8),nt(new ue(Q),I+Q.e+1,D);if(!(L=Q.c))return null;if(j=((H=L.length-1)-m(this.e/u))*u,H=L[H])for(;H%10==0;H/=10,j--);return j<0&&(j=0),j},G.dividedBy=G.div=function(I,D){return B(this,new ue(I,D),se,ye)},G.dividedToIntegerBy=G.idiv=function(I,D){return B(this,new ue(I,D),0,1)},G.exponentiatedBy=G.pow=function(I,D){var L,j,H,Q,J,Y,X,ie,Z,he=this;if(I=new ue(I),I.c&&!I.isInteger())throw Error(a+"Exponent not an integer: "+dt(I));if(D!=null&&(D=new ue(D)),Y=I.e>14,!he.c||!he.c[0]||he.c[0]==1&&!he.e&&he.c.length==1||!I.c||!I.c[0])return Z=new ue(Math.pow(+dt(he),Y?2-b(I):+dt(I))),D?Z.mod(D):Z;if(X=I.s<0,D){if(D.c?!D.c[0]:!D.s)return new ue(NaN);j=!X&&he.isInteger()&&D.isInteger(),j&&(he=he.mod(D))}else{if(I.e>9&&(he.e>0||he.e<-1||(he.e==0?he.c[0]>1||Y&&he.c[1]>=24e7:he.c[0]<8e13||Y&&he.c[0]<=9999975e7)))return Q=he.s<0&&b(I)?-0:0,he.e>-1&&(Q=1/Q),new ue(X?1/Q:Q);et&&(Q=n(et/u+2))}for(Y?(L=new ue(.5),X&&(I.s=1),ie=b(I)):(H=Math.abs(+dt(I)),ie=H%2),Z=new ue(re);;){if(ie){if(Z=Z.times(he),!Z.c)break;Q?Z.c.length>Q&&(Z.c.length=Q):j&&(Z=Z.mod(D))}if(H){if(H=i(H/2),H===0)break;ie=H%2}else if(I=I.times(L),nt(I,I.e+1,1),I.e>14)ie=b(I);else{if(H=+dt(I),H===0)break;ie=H%2}he=he.times(he),Q?he.c&&he.c.length>Q&&(he.c.length=Q):j&&(he=he.mod(D))}return j?Z:(X&&(Z=re.div(Z)),D?Z.mod(D):Q?nt(Z,et,ye,J):Z)},G.integerValue=function(I){var D=new ue(this);return I==null?I=ye:E(I,0,8),nt(D,D.e+1,I)},G.isEqualTo=G.eq=function(I,D){return _(this,new ue(I,D))===0},G.isFinite=function(){return!!this.c},G.isGreaterThan=G.gt=function(I,D){return _(this,new ue(I,D))>0},G.isGreaterThanOrEqualTo=G.gte=function(I,D){return(D=_(this,new ue(I,D)))===1||D===0},G.isInteger=function(){return!!this.c&&m(this.e/u)>this.c.length-2},G.isLessThan=G.lt=function(I,D){return _(this,new ue(I,D))<0},G.isLessThanOrEqualTo=G.lte=function(I,D){return(D=_(this,new ue(I,D)))===-1||D===0},G.isNaN=function(){return!this.s},G.isNegative=function(){return this.s<0},G.isPositive=function(){return this.s>0},G.isZero=function(){return!!this.c&&this.c[0]==0},G.minus=function(I,D){var L,j,H,Q,J=this,Y=J.s;if(I=new ue(I,D),D=I.s,!Y||!D)return new ue(NaN);if(Y!=D)return I.s=-D,J.plus(I);var X=J.e/u,ie=I.e/u,Z=J.c,he=I.c;if(!X||!ie){if(!Z||!he)return Z?(I.s=-D,I):new ue(he?J:NaN);if(!Z[0]||!he[0])return he[0]?(I.s=-D,I):new ue(Z[0]?J:ye==3?-0:0)}if(X=m(X),ie=m(ie),Z=Z.slice(),Y=X-ie){for((Q=Y<0)?(Y=-Y,H=Z):(ie=X,H=he),H.reverse(),D=Y;D--;H.push(0));H.reverse()}else for(j=(Q=(Y=Z.length)<(D=he.length))?Y:D,Y=D=0;D<j;D++)if(Z[D]!=he[D]){Q=Z[D]<he[D];break}if(Q&&(H=Z,Z=he,he=H,I.s=-I.s),D=(j=he.length)-(L=Z.length),D>0)for(;D--;Z[L++]=0);for(D=l-1;j>Y;){if(Z[--j]<he[j]){for(L=j;L&&!Z[--L];Z[L]=D);--Z[L],Z[j]+=l}Z[j]-=he[j]}for(;Z[0]==0;Z.splice(0,1),--ie);return Z[0]?rt(I,Z,ie):(I.s=ye==3?-1:1,I.c=[I.e=0],I)},G.modulo=G.mod=function(I,D){var L,j,H=this;return I=new ue(I,D),!H.c||!I.s||I.c&&!I.c[0]?new ue(NaN):!I.c||H.c&&!H.c[0]?new ue(H):(Fe==9?(j=I.s,I.s=1,L=B(H,I,0,3),I.s=j,L.s*=j):L=B(H,I,0,Fe),I=H.minus(L.times(I)),!I.c[0]&&Fe==1&&(I.s=H.s),I)},G.multipliedBy=G.times=function(I,D){var L,j,H,Q,J,Y,X,ie,Z,he,Le,Ue,ht,Qt,Xt,it=this,Ot=it.c,gr=(I=new ue(I,D)).c;if(!Ot||!gr||!Ot[0]||!gr[0])return!it.s||!I.s||Ot&&!Ot[0]&&!gr||gr&&!gr[0]&&!Ot?I.c=I.e=I.s=null:(I.s*=it.s,!Ot||!gr?I.c=I.e=null:(I.c=[0],I.e=0)),I;for(j=m(it.e/u)+m(I.e/u),I.s*=it.s,X=Ot.length,he=gr.length,X<he&&(ht=Ot,Ot=gr,gr=ht,H=X,X=he,he=H),H=X+he,ht=[];H--;ht.push(0));for(Qt=l,Xt=h,H=he;--H>=0;){for(L=0,Le=gr[H]%Xt,Ue=gr[H]/Xt|0,J=X,Q=H+J;Q>H;)ie=Ot[--J]%Xt,Z=Ot[J]/Xt|0,Y=Ue*ie+Z*Le,ie=Le*ie+Y%Xt*Xt+ht[Q]+L,L=(ie/Qt|0)+(Y/Xt|0)+Ue*Z,ht[Q--]=ie%Qt;ht[Q]=L}return L?++j:ht.splice(0,1),rt(I,ht,j)},G.negated=function(){var I=new ue(this);return I.s=-I.s||null,I},G.plus=function(I,D){var L,j=this,H=j.s;if(I=new ue(I,D),D=I.s,!H||!D)return new ue(NaN);if(H!=D)return I.s=-D,j.minus(I);var Q=j.e/u,J=I.e/u,Y=j.c,X=I.c;if(!Q||!J){if(!Y||!X)return new ue(H/0);if(!Y[0]||!X[0])return X[0]?I:new ue(Y[0]?j:H*0)}if(Q=m(Q),J=m(J),Y=Y.slice(),H=Q-J){for(H>0?(J=Q,L=X):(H=-H,L=Y),L.reverse();H--;L.push(0));L.reverse()}for(H=Y.length,D=X.length,H-D<0&&(L=X,X=Y,Y=L,D=H),H=0;D;)H=(Y[--D]=Y[D]+X[D]+H)/l|0,Y[D]=l===Y[D]?0:Y[D]%l;return H&&(Y=[H].concat(Y),++J),rt(I,Y,J)},G.precision=G.sd=function(I,D){var L,j,H,Q=this;if(I!=null&&I!==!!I)return E(I,1,g),D==null?D=ye:E(D,0,8),nt(new ue(Q),I,D);if(!(L=Q.c))return null;if(H=L.length-1,j=H*u+1,H=L[H]){for(;H%10==0;H/=10,j--);for(H=L[0];H>=10;H/=10,j++);}return I&&Q.e+1>j&&(j=Q.e+1),j},G.shiftedBy=function(I){return E(I,-f,f),this.times("1e"+I)},G.squareRoot=G.sqrt=function(){var I,D,L,j,H,Q=this,J=Q.c,Y=Q.s,X=Q.e,ie=se+4,Z=new ue("0.5");if(Y!==1||!J||!J[0])return new ue(!Y||Y<0&&(!J||J[0])?NaN:J?Q:1/0);if(Y=Math.sqrt(+dt(Q)),Y==0||Y==1/0?(D=w(J),(D.length+X)%2==0&&(D+="0"),Y=Math.sqrt(+D),X=m((X+1)/2)-(X<0||X%2),Y==1/0?D="5e"+X:(D=Y.toExponential(),D=D.slice(0,D.indexOf("e")+1)+X),L=new ue(D)):L=new ue(Y+""),L.c[0]){for(X=L.e,Y=X+ie,Y<3&&(Y=0);;)if(H=L,L=Z.times(H.plus(B(Q,H,ie,1))),w(H.c).slice(0,Y)===(D=w(L.c)).slice(0,Y))if(L.e<X&&--Y,D=D.slice(Y-3,Y+1),D=="9999"||!j&&D=="4999"){if(!j&&(nt(H,H.e+se+2,0),H.times(H).eq(Q))){L=H;break}ie+=4,Y+=4,j=1}else{(!+D||!+D.slice(1)&&D.charAt(0)=="5")&&(nt(L,L.e+se+2,1),I=!L.times(L).eq(Q));break}}return nt(L,L.e+se+1,ye,I)},G.toExponential=function(I,D){return I!=null&&(E(I,0,g),I++),Dt(this,I,D,1)},G.toFixed=function(I,D){return I!=null&&(E(I,0,g),I=I+this.e+1),Dt(this,I,D)},G.toFormat=function(I,D,L){var j,H=this;if(L==null)I!=null&&D&&typeof D=="object"?(L=D,D=null):I&&typeof I=="object"?(L=I,I=D=null):L=ct;else if(typeof L!="object")throw Error(a+"Argument not an object: "+L);if(j=H.toFixed(I,D),H.c){var Q,J=j.split("."),Y=+L.groupSize,X=+L.secondaryGroupSize,ie=L.groupSeparator||"",Z=J[0],he=J[1],Le=H.s<0,Ue=Le?Z.slice(1):Z,ht=Ue.length;if(X&&(Q=Y,Y=X,X=Q,ht-=Q),Y>0&&ht>0){for(Q=ht%Y||Y,Z=Ue.substr(0,Q);Q<ht;Q+=Y)Z+=ie+Ue.substr(Q,Y);X>0&&(Z+=ie+Ue.slice(Q)),Le&&(Z="-"+Z)}j=he?Z+(L.decimalSeparator||"")+((X=+L.fractionGroupSize)?he.replace(new RegExp("\\d{"+X+"}\\B","g"),"$&"+(L.fractionGroupSeparator||"")):he):Z}return(L.prefix||"")+j+(L.suffix||"")},G.toFraction=function(I){var D,L,j,H,Q,J,Y,X,ie,Z,he,Le,Ue=this,ht=Ue.c;if(I!=null&&(Y=new ue(I),!Y.isInteger()&&(Y.c||Y.s!==1)||Y.lt(re)))throw Error(a+"Argument "+(Y.isInteger()?"out of range: ":"not an integer: ")+dt(Y));if(!ht)return new ue(Ue);for(D=new ue(re),ie=L=new ue(re),j=X=new ue(re),Le=w(ht),Q=D.e=Le.length-Ue.e-1,D.c[0]=d[(J=Q%u)<0?u+J:J],I=!I||Y.comparedTo(D)>0?Q>0?D:ie:Y,J=me,me=1/0,Y=new ue(Le),X.c[0]=0;Z=B(Y,D,0,1),H=L.plus(Z.times(j)),H.comparedTo(I)!=1;)L=j,j=H,ie=X.plus(Z.times(H=ie)),X=H,D=Y.minus(Z.times(H=D)),Y=H;return H=B(I.minus(L),j,0,1),X=X.plus(H.times(ie)),L=L.plus(H.times(j)),X.s=ie.s=Ue.s,Q=Q*2,he=B(ie,j,Q,ye).minus(Ue).abs().comparedTo(B(X,L,Q,ye).minus(Ue).abs())<1?[ie,j]:[X,L],me=J,he},G.toNumber=function(){return+dt(this)},G.toPrecision=function(I,D){return I!=null&&E(I,1,g),Dt(this,I,D,2)},G.toString=function(I){var D,L=this,j=L.s,H=L.e;return H===null?j?(D="Infinity",j<0&&(D="-"+D)):D="NaN":(I==null?D=H<=Ae||H>=Je?k(w(L.c),H):O(w(L.c),H,"0"):I===10&&ft?(L=nt(new ue(L),se+H+1,ye),D=O(w(L.c),L.e,"0")):(E(I,2,$e.length,"Base"),D=ne(O(w(L.c),H,"0"),10,I,j,!0)),j<0&&L.c[0]&&(D="-"+D)),D},G.valueOf=G.toJSON=function(){return dt(this)},G._isBigNumber=!0,R!=null&&ue.set(R),ue}function m(R){var B=R|0;return R>0||R===B?B:B-1}function w(R){for(var B,ne,M=1,G=R.length,re=R[0]+"";M<G;){for(B=R[M++]+"",ne=u-B.length;ne--;B="0"+B);re+=B}for(G=re.length;re.charCodeAt(--G)===48;);return re.slice(0,G+1||1)}function _(R,B){var ne,M,G=R.c,re=B.c,se=R.s,ye=B.s,Ae=R.e,Je=B.e;if(!se||!ye)return null;if(ne=G&&!G[0],M=re&&!re[0],ne||M)return ne?M?0:-ye:se;if(se!=ye)return se;if(ne=se<0,M=Ae==Je,!G||!re)return M?0:!G^ne?1:-1;if(!M)return Ae>Je^ne?1:-1;for(ye=(Ae=G.length)<(Je=re.length)?Ae:Je,se=0;se<ye;se++)if(G[se]!=re[se])return G[se]>re[se]^ne?1:-1;return Ae==Je?0:Ae>Je^ne?1:-1}function E(R,B,ne,M){if(R<B||R>ne||R!==i(R))throw Error(a+(M||"Argument")+(typeof R=="number"?R<B||R>ne?" out of range: ":" not an integer: ":" not a primitive number: ")+String(R))}function b(R){var B=R.c.length-1;return m(R.e/u)==B&&R.c[B]%2!=0}function k(R,B){return(R.length>1?R.charAt(0)+"."+R.slice(1):R)+(B<0?"e":"e+")+B}function O(R,B,ne){var M,G;if(B<0){for(G=ne+".";++B;G+=ne);R=G+R}else if(M=R.length,++B>M){for(G=ne,B-=M;--B;G+=ne);R+=G}else B<M&&(R=R.slice(0,B)+"."+R.slice(B));return R}e=y(),e.default=e.BigNumber=e,typeof define=="function"&&define.amd?define(function(){return e}):typeof Vf!="undefined"&&Vf.exports?Vf.exports=e:(t||(t=typeof self!="undefined"&&self?self:window),t.BigNumber=e)})(j_)});var Q_=de((RV,z_)=>{var Y_=k0(),W_=z_.exports;(function(){"use strict";function t(f){return f<10?"0"+f:f}var e=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,r=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,n,i,a={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},s;function l(f){return r.lastIndex=0,r.test(f)?'"'+f.replace(r,function(d){var h=a[d];return typeof h=="string"?h:"\\u"+("0000"+d.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+f+'"'}function u(f,d){var h,g,y,m,w=n,_,E=d[f],b=E!=null&&(E instanceof Y_||Y_.isBigNumber(E));switch(E&&typeof E=="object"&&typeof E.toJSON=="function"&&(E=E.toJSON(f)),typeof s=="function"&&(E=s.call(d,f,E)),typeof E){case"string":return b?E:l(E);case"number":return isFinite(E)?String(E):"null";case"boolean":case"null":case"bigint":return String(E);case"object":if(!E)return"null";if(n+=i,_=[],Object.prototype.toString.apply(E)==="[object Array]"){for(m=E.length,h=0;h<m;h+=1)_[h]=u(h,E)||"null";return y=_.length===0?"[]":n?`[
`+n+_.join(`,
`+n)+`
`+w+"]":"["+_.join(",")+"]",n=w,y}if(s&&typeof s=="object")for(m=s.length,h=0;h<m;h+=1)typeof s[h]=="string"&&(g=s[h],y=u(g,E),y&&_.push(l(g)+(n?": ":":")+y));else Object.keys(E).forEach(function(k){var O=u(k,E);O&&_.push(l(k)+(n?": ":":")+O)});return y=_.length===0?"{}":n?`{
`+n+_.join(`,
`+n)+`
`+w+"}":"{"+_.join(",")+"}",n=w,y}}typeof W_.stringify!="function"&&(W_.stringify=function(f,d,h){var g;if(n="",i="",typeof h=="number")for(g=0;g<h;g+=1)i+=" ";else typeof h=="string"&&(i=h);if(s=d,d&&typeof d!="function"&&(typeof d!="object"||typeof d.length!="number"))throw new Error("JSON.stringify");return u("",{"":f})})})()});var J_=de((DV,X_)=>{var Hf=null,s4=/(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])/,o4=/(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)/,l4=function(t){"use strict";var e={strict:!1,storeAsString:!1,alwaysParseAsBig:!1,useNativeBigInt:!1,protoAction:"error",constructorAction:"error"};if(t!=null){if(t.strict===!0&&(e.strict=!0),t.storeAsString===!0&&(e.storeAsString=!0),e.alwaysParseAsBig=t.alwaysParseAsBig===!0?t.alwaysParseAsBig:!1,e.useNativeBigInt=t.useNativeBigInt===!0?t.useNativeBigInt:!1,typeof t.constructorAction!="undefined")if(t.constructorAction==="error"||t.constructorAction==="ignore"||t.constructorAction==="preserve")e.constructorAction=t.constructorAction;else throw new Error(`Incorrect value for constructorAction option, must be "error", "ignore" or undefined but passed ${t.constructorAction}`);if(typeof t.protoAction!="undefined")if(t.protoAction==="error"||t.protoAction==="ignore"||t.protoAction==="preserve")e.protoAction=t.protoAction;else throw new Error(`Incorrect value for protoAction option, must be "error", "ignore" or undefined but passed ${t.protoAction}`)}var r,n,i={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},a,s=function(w){throw{name:"SyntaxError",message:w,at:r,text:a}},l=function(w){return w&&w!==n&&s("Expected '"+w+"' instead of '"+n+"'"),n=a.charAt(r),r+=1,n},u=function(){var w,_="";for(n==="-"&&(_="-",l("-"));n>="0"&&n<="9";)_+=n,l();if(n===".")for(_+=".";l()&&n>="0"&&n<="9";)_+=n;if(n==="e"||n==="E")for(_+=n,l(),(n==="-"||n==="+")&&(_+=n,l());n>="0"&&n<="9";)_+=n,l();if(w=+_,!isFinite(w))s("Bad number");else return Hf==null&&(Hf=k0()),_.length>15?e.storeAsString?_:e.useNativeBigInt?BigInt(_):new Hf(_):e.alwaysParseAsBig?e.useNativeBigInt?BigInt(w):new Hf(w):w},f=function(){var w,_,E="",b;if(n==='"')for(var k=r;l();){if(n==='"')return r-1>k&&(E+=a.substring(k,r-1)),l(),E;if(n==="\\"){if(r-1>k&&(E+=a.substring(k,r-1)),l(),n==="u"){for(b=0,_=0;_<4&&(w=parseInt(l(),16),!!isFinite(w));_+=1)b=b*16+w;E+=String.fromCharCode(b)}else if(typeof i[n]=="string")E+=i[n];else break;k=r}}s("Bad string")},d=function(){for(;n&&n<=" ";)l()},h=function(){switch(n){case"t":return l("t"),l("r"),l("u"),l("e"),!0;case"f":return l("f"),l("a"),l("l"),l("s"),l("e"),!1;case"n":return l("n"),l("u"),l("l"),l("l"),null}s("Unexpected '"+n+"'")},g,y=function(){var w=[];if(n==="["){if(l("["),d(),n==="]")return l("]"),w;for(;n;){if(w.push(g()),d(),n==="]")return l("]"),w;l(","),d()}}s("Bad array")},m=function(){var w,_=Object.create(null);if(n==="{"){if(l("{"),d(),n==="}")return l("}"),_;for(;n;){if(w=f(),d(),l(":"),e.strict===!0&&Object.hasOwnProperty.call(_,w)&&s('Duplicate key "'+w+'"'),s4.test(w)===!0?e.protoAction==="error"?s("Object contains forbidden prototype property"):e.protoAction==="ignore"?g():_[w]=g():o4.test(w)===!0?e.constructorAction==="error"?s("Object contains forbidden constructor property"):e.constructorAction==="ignore"?g():_[w]=g():_[w]=g(),d(),n==="}")return l("}"),_;l(","),d()}}s("Bad object")};return g=function(){switch(d(),n){case"{":return m();case"[":return y();case'"':return f();case"-":return u();default:return n>="0"&&n<="9"?u():h()}},function(w,_){var E;return a=w+"",r=0,n=" ",E=g(),d(),n&&s("Syntax error"),typeof _=="function"?function b(k,O){var R,B,ne=k[O];return ne&&typeof ne=="object"&&Object.keys(ne).forEach(function(M){B=b(ne,M),B!==void 0?ne[M]=B:delete ne[M]}),_.call(k,O,ne)}({"":E},""):E}};X_.exports=l4});var ew=de((BV,Kf)=>{var Z_=Q_().stringify,$_=J_();Kf.exports=function(t){return{parse:$_(t),stringify:Z_}};Kf.exports.parse=$_();Kf.exports.stringify=Z_});var Yf=de(Ft=>{"use strict";Object.defineProperty(Ft,"__esModule",{value:!0});Ft.requestTimeout=Ft.resetIsAvailableCache=Ft.isAvailable=Ft.project=Ft.instance=Ft.HEADERS=Ft.HEADER_VALUE=Ft.HEADER_NAME=Ft.SECONDARY_HOST_ADDRESS=Ft.HOST_ADDRESS=Ft.BASE_PATH=void 0;var I0=Jo(),u4=ew();Ft.BASE_PATH="/computeMetadata/v1";Ft.HOST_ADDRESS="http://169.254.169.254";Ft.SECONDARY_HOST_ADDRESS="http://metadata.google.internal.";Ft.HEADER_NAME="Metadata-Flavor";Ft.HEADER_VALUE="Google";Ft.HEADERS=Object.freeze({[Ft.HEADER_NAME]:Ft.HEADER_VALUE});function N0(t){return t||(t=process.env.GCE_METADATA_IP||process.env.GCE_METADATA_HOST||Ft.HOST_ADDRESS),/^https?:\/\//.test(t)||(t=`http://${t}`),new URL(Ft.BASE_PATH,t).href}function c4(t){Object.keys(t).forEach(e=>{switch(e){case"params":case"property":case"headers":break;case"qs":throw new Error("'qs' is not a valid configuration option. Please use 'params' instead.");default:throw new Error(`'${e}' is not a valid configuration option.`)}})}function R0(t,e,r=3,n=!1){return P(this,null,function*(){e=e||{},typeof e=="string"&&(e={property:e});let i="";typeof e=="object"&&e.property&&(i="/"+e.property),c4(e);try{let s=yield(n?f4:I0.request)({url:`${N0()}/${t}${i}`,headers:Object.assign({},Ft.HEADERS,e.headers),retryConfig:{noResponseRetries:r},params:e.params,responseType:"text",timeout:tw()});if(s.headers[Ft.HEADER_NAME.toLowerCase()]!==Ft.HEADER_VALUE)throw new Error(`Invalid response from metadata service: incorrect ${Ft.HEADER_NAME} header.`);if(!s.data)throw new Error("Invalid response from the metadata service");if(typeof s.data=="string")try{return u4.parse(s.data)}catch(l){}return s.data}catch(a){let s=a;throw s.response&&s.response.status!==200&&(s.message=`Unsuccessful response status code. ${s.message}`),a}})}function f4(t){return P(this,null,function*(){let e=Vi(wn({},t),{url:t.url.replace(N0(),N0(Ft.SECONDARY_HOST_ADDRESS))}),r=!1,n=(0,I0.request)(t).then(a=>(r=!0,a)).catch(a=>{if(r)return i;throw r=!0,a}),i=(0,I0.request)(e).then(a=>(r=!0,a)).catch(a=>{if(r)return n;throw r=!0,a});return Promise.race([n,i])})}function d4(t){return R0("instance",t)}Ft.instance=d4;function h4(t){return R0("project",t)}Ft.project=h4;function p4(){return process.env.DETECT_GCP_RETRIES?Number(process.env.DETECT_GCP_RETRIES):0}var jf;function g4(){return P(this,null,function*(){try{return jf===void 0&&(jf=R0("instance",void 0,p4(),!(process.env.GCE_METADATA_IP||process.env.GCE_METADATA_HOST))),yield jf,!0}catch(t){let e=t;if(process.env.DEBUG_AUTH&&console.info(e),e.type==="request-timeout"||e.response&&e.response.status===404)return!1;if(!(e.response&&e.response.status===404)&&(!e.code||!["EHOSTDOWN","EHOSTUNREACH","ENETUNREACH","ENOENT","ENOTFOUND","ECONNREFUSED"].includes(e.code))){let r="UNKNOWN";e.code&&(r=e.code),process.emitWarning(`received unexpected error = ${e.message} code = ${r}`,"MetadataLookupWarning")}return!1}})}Ft.isAvailable=g4;function m4(){jf=void 0}Ft.resetIsAvailableCache=m4;function tw(){return process.env.K_SERVICE||process.env.FUNCTION_NAME?0:3e3}Ft.requestTimeout=tw});var iw=de(Wf=>{"use strict";Wf.byteLength=v4;Wf.toByteArray=w4;Wf.fromByteArray=b4;var Ki=[],si=[],y4=typeof Uint8Array!="undefined"?Uint8Array:Array,D0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(Ks=0,rw=D0.length;Ks<rw;++Ks)Ki[Ks]=D0[Ks],si[D0.charCodeAt(Ks)]=Ks;var Ks,rw;si["-".charCodeAt(0)]=62;si["_".charCodeAt(0)]=63;function nw(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");r===-1&&(r=e);var n=r===e?0:4-r%4;return[r,n]}function v4(t){var e=nw(t),r=e[0],n=e[1];return(r+n)*3/4-n}function _4(t,e,r){return(e+r)*3/4-r}function w4(t){var e,r=nw(t),n=r[0],i=r[1],a=new y4(_4(t,n,i)),s=0,l=i>0?n-4:n,u;for(u=0;u<l;u+=4)e=si[t.charCodeAt(u)]<<18|si[t.charCodeAt(u+1)]<<12|si[t.charCodeAt(u+2)]<<6|si[t.charCodeAt(u+3)],a[s++]=e>>16&255,a[s++]=e>>8&255,a[s++]=e&255;return i===2&&(e=si[t.charCodeAt(u)]<<2|si[t.charCodeAt(u+1)]>>4,a[s++]=e&255),i===1&&(e=si[t.charCodeAt(u)]<<10|si[t.charCodeAt(u+1)]<<4|si[t.charCodeAt(u+2)]>>2,a[s++]=e>>8&255,a[s++]=e&255),a}function E4(t){return Ki[t>>18&63]+Ki[t>>12&63]+Ki[t>>6&63]+Ki[t&63]}function C4(t,e,r){for(var n,i=[],a=e;a<r;a+=3)n=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(t[a+2]&255),i.push(E4(n));return i.join("")}function b4(t){for(var e,r=t.length,n=r%3,i=[],a=16383,s=0,l=r-n;s<l;s+=a)i.push(C4(t,s,s+a>l?l:s+a));return n===1?(e=t[r-1],i.push(Ki[e>>2]+Ki[e<<4&63]+"==")):n===2&&(e=(t[r-2]<<8)+t[r-1],i.push(Ki[e>>10]+Ki[e>>4&63]+Ki[e<<2&63]+"=")),i.join("")}});var sw=de(aw=>{(function(t){function e(){}function r(u,f){if(u=u===void 0?"utf-8":u,f=f===void 0?{fatal:!1}:f,s.indexOf(u.toLowerCase())===-1)throw new RangeError("Failed to construct 'TextDecoder': The encoding label provided ('"+u+"') is invalid.");if(f.fatal)throw Error("Failed to construct 'TextDecoder': the 'fatal' option is unsupported.")}function n(u){return Buffer.from(u.buffer,u.byteOffset,u.byteLength).toString("utf-8")}function i(u){var f=URL.createObjectURL(new Blob([u],{type:"text/plain;charset=UTF-8"}));try{var d=new XMLHttpRequest;return d.open("GET",f,!1),d.send(),d.responseText}catch(h){return a(u)}finally{URL.revokeObjectURL(f)}}function a(u){for(var f=0,d=Math.min(65536,u.length+1),h=new Uint16Array(d),g=[],y=0;;){var m=f<u.length;if(!m||y>=d-1){if(g.push(String.fromCharCode.apply(null,h.subarray(0,y))),!m)return g.join("");u=u.subarray(f),y=f=0}if(m=u[f++],(m&128)==0)h[y++]=m;else if((m&224)==192){var w=u[f++]&63;h[y++]=(m&31)<<6|w}else if((m&240)==224){w=u[f++]&63;var _=u[f++]&63;h[y++]=(m&31)<<12|w<<6|_}else if((m&248)==240){w=u[f++]&63,_=u[f++]&63;var E=u[f++]&63;m=(m&7)<<18|w<<12|_<<6|E,65535<m&&(m-=65536,h[y++]=m>>>10&1023|55296,m=56320|m&1023),h[y++]=m}}}if(t.TextEncoder&&t.TextDecoder)return!1;var s=["utf-8","utf8","unicode-1-1-utf-8"];Object.defineProperty(e.prototype,"encoding",{value:"utf-8"}),e.prototype.encode=function(u,f){if(f=f===void 0?{stream:!1}:f,f.stream)throw Error("Failed to encode: the 'stream' option is unsupported.");f=0;for(var d=u.length,h=0,g=Math.max(32,d+(d>>>1)+7),y=new Uint8Array(g>>>3<<3);f<d;){var m=u.charCodeAt(f++);if(55296<=m&&56319>=m){if(f<d){var w=u.charCodeAt(f);(w&64512)==56320&&(++f,m=((m&1023)<<10)+(w&1023)+65536)}if(55296<=m&&56319>=m)continue}if(h+4>y.length&&(g+=8,g*=1+f/u.length*2,g=g>>>3<<3,w=new Uint8Array(g),w.set(y),y=w),(m&4294967168)==0)y[h++]=m;else{if((m&4294965248)==0)y[h++]=m>>>6&31|192;else if((m&4294901760)==0)y[h++]=m>>>12&15|224,y[h++]=m>>>6&63|128;else if((m&4292870144)==0)y[h++]=m>>>18&7|240,y[h++]=m>>>12&63|128,y[h++]=m>>>6&63|128;else continue;y[h++]=m&63|128}}return y.slice?y.slice(0,h):y.subarray(0,h)},Object.defineProperty(r.prototype,"encoding",{value:"utf-8"}),Object.defineProperty(r.prototype,"fatal",{value:!1}),Object.defineProperty(r.prototype,"ignoreBOM",{value:!1});var l=a;typeof Buffer=="function"&&Buffer.from?l=n:typeof Blob=="function"&&typeof URL=="function"&&typeof URL.createObjectURL=="function"&&(l=i),r.prototype.decode=function(u,f){if(f=f===void 0?{stream:!1}:f,f.stream)throw Error("Failed to decode: the 'stream' option is unsupported.");return u=u instanceof Uint8Array?u:u.buffer instanceof ArrayBuffer?new Uint8Array(u.buffer):new Uint8Array(u),l(u)},t.TextEncoder=e,t.TextDecoder=r})(typeof window!="undefined"?window:typeof global!="undefined"?global:aw)});var ow=de(zf=>{"use strict";Object.defineProperty(zf,"__esModule",{value:!0});zf.BrowserCrypto=void 0;var Zo=iw();typeof process=="undefined"&&typeof TextEncoder=="undefined"&&sw();var x4=$o(),xu=class{constructor(){if(typeof window=="undefined"||window.crypto===void 0||window.crypto.subtle===void 0)throw new Error("SubtleCrypto not found. Make sure it's an https:// website.")}sha256DigestBase64(e){return P(this,null,function*(){let r=new TextEncoder().encode(e),n=yield window.crypto.subtle.digest("SHA-256",r);return Zo.fromByteArray(new Uint8Array(n))})}randomBytesBase64(e){let r=new Uint8Array(e);return window.crypto.getRandomValues(r),Zo.fromByteArray(r)}static padBase64(e){for(;e.length%4!=0;)e+="=";return e}verify(e,r,n){return P(this,null,function*(){let i={name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},a=new TextEncoder().encode(r),s=Zo.toByteArray(xu.padBase64(n)),l=yield window.crypto.subtle.importKey("jwk",e,i,!0,["verify"]);return yield window.crypto.subtle.verify(i,l,s,a)})}sign(e,r){return P(this,null,function*(){let n={name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},i=new TextEncoder().encode(r),a=yield window.crypto.subtle.importKey("jwk",e,n,!0,["sign"]),s=yield window.crypto.subtle.sign(n,a,i);return Zo.fromByteArray(new Uint8Array(s))})}decodeBase64StringUtf8(e){let r=Zo.toByteArray(xu.padBase64(e));return new TextDecoder().decode(r)}encodeBase64StringUtf8(e){let r=new TextEncoder().encode(e);return Zo.fromByteArray(r)}sha256DigestHex(e){return P(this,null,function*(){let r=new TextEncoder().encode(e),n=yield window.crypto.subtle.digest("SHA-256",r);return(0,x4.fromArrayBufferToHex)(n)})}signWithHmacSha256(e,r){return P(this,null,function*(){let n=typeof e=="string"?e:String.fromCharCode(...new Uint16Array(e)),i=new TextEncoder,a=yield window.crypto.subtle.importKey("raw",i.encode(n),{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]);return window.crypto.subtle.sign("HMAC",a,i.encode(r))})}};zf.BrowserCrypto=xu});var uw=de(Qf=>{"use strict";Object.defineProperty(Qf,"__esModule",{value:!0});Qf.NodeCrypto=void 0;var el=require("crypto"),lw=class{sha256DigestBase64(e){return P(this,null,function*(){return el.createHash("sha256").update(e).digest("base64")})}randomBytesBase64(e){return el.randomBytes(e).toString("base64")}verify(e,r,n){return P(this,null,function*(){let i=el.createVerify("sha256");return i.update(r),i.end(),i.verify(e,n,"base64")})}sign(e,r){return P(this,null,function*(){let n=el.createSign("RSA-SHA256");return n.update(r),n.end(),n.sign(e,"base64")})}decodeBase64StringUtf8(e){return Buffer.from(e,"base64").toString("utf-8")}encodeBase64StringUtf8(e){return Buffer.from(e,"utf-8").toString("base64")}sha256DigestHex(e){return P(this,null,function*(){return el.createHash("sha256").update(e).digest("hex")})}signWithHmacSha256(e,r){return P(this,null,function*(){let n=typeof e=="string"?e:S4(e);return T4(el.createHmac("sha256",n).update(r).digest())})}};Qf.NodeCrypto=lw;function T4(t){return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}function S4(t){return Buffer.from(t)}});var $o=de(is=>{"use strict";Object.defineProperty(is,"__esModule",{value:!0});is.fromArrayBufferToHex=is.hasBrowserCrypto=is.createCrypto=void 0;var A4=ow(),k4=uw();function I4(){return cw()?new A4.BrowserCrypto:new k4.NodeCrypto}is.createCrypto=I4;function cw(){return typeof window!="undefined"&&typeof window.crypto!="undefined"&&typeof window.crypto.subtle!="undefined"}is.hasBrowserCrypto=cw;function N4(t){return Array.from(new Uint8Array(t)).map(r=>r.toString(16).padStart(2,"0")).join("")}is.fromArrayBufferToHex=N4});var fw=de(Xf=>{"use strict";Object.defineProperty(Xf,"__esModule",{value:!0});Xf.validate=void 0;function R4(t){let e=[{invalid:"uri",expected:"url"},{invalid:"json",expected:"data"},{invalid:"qs",expected:"params"}];for(let r of e)if(t[r.invalid]){let n=`'${r.invalid}' is not a valid configuration option. Please use '${r.expected}' instead. This library is using Axios for requests. Please see https://github.com/axios/axios to learn more about the valid request options.`;throw new Error(n)}}Xf.validate=R4});var dw=de((GV,D4)=>{D4.exports={_args:[["google-auth-library@8.0.2","/home/runner/work/obsidian-google-calendar/obsidian-google-calendar"]],_from:"google-auth-library@8.0.2",_id:"google-auth-library@8.0.2",_inBundle:!1,_integrity:"sha512-HoG+nWFAThLovKpvcbYzxgn+nBJPTfAwtq0GxPN821nOO+21+8oP7MoEHfd1sbDulUFFGfcjJr2CnJ4YssHcyg==",_location:"/google-auth-library",_phantomChildren:{},_requested:{type:"version",registry:!0,raw:"google-auth-library@8.0.2",name:"google-auth-library",escapedName:"google-auth-library",rawSpec:"8.0.2",saveSpec:null,fetchSpec:"8.0.2"},_requiredBy:["/"],_resolved:"https://registry.npmjs.org/google-auth-library/-/google-auth-library-8.0.2.tgz",_spec:"8.0.2",_where:"/home/runner/work/obsidian-google-calendar/obsidian-google-calendar",author:{name:"Google Inc."},bugs:{url:"https://github.com/googleapis/google-auth-library-nodejs/issues"},dependencies:{arrify:"^2.0.0","base64-js":"^1.3.0","ecdsa-sig-formatter":"^1.0.11","fast-text-encoding":"^1.0.0",gaxios:"^5.0.0","gcp-metadata":"^5.0.0",gtoken:"^5.3.2",jws:"^4.0.0","lru-cache":"^6.0.0"},description:"Google APIs Authentication Client Library for Node.js",devDependencies:{"@compodoc/compodoc":"^1.1.7","@types/base64-js":"^1.2.5","@types/chai":"^4.1.7","@types/jws":"^3.1.0","@types/lru-cache":"^5.0.0","@types/mocha":"^8.0.0","@types/mv":"^2.1.0","@types/ncp":"^2.0.1","@types/node":"^16.0.0","@types/sinon":"^10.0.0","@types/tmp":"^0.2.0","assert-rejects":"^1.0.0",c8:"^7.0.0",chai:"^4.2.0",codecov:"^3.0.2",execa:"^5.0.0",gts:"^3.1.0","is-docker":"^2.0.0",karma:"^6.0.0","karma-chrome-launcher":"^3.0.0","karma-coverage":"^2.0.0","karma-firefox-launcher":"^2.0.0","karma-mocha":"^2.0.0","karma-sourcemap-loader":"^0.3.7","karma-webpack":"^5.0.0",keypair:"^1.0.4",linkinator:"^3.0.3",mocha:"^9.2.2",mv:"^2.1.1",ncp:"^2.0.0",nock:"^13.0.0","null-loader":"^4.0.0",puppeteer:"^13.0.0",sinon:"^13.0.0",tmp:"^0.2.0","ts-loader":"^8.0.0",typescript:"^4.6.3",webpack:"^5.21.2","webpack-cli":"^4.0.0"},engines:{node:">=12"},files:["build/src","!build/src/**/*.map"],homepage:"https://github.com/googleapis/google-auth-library-nodejs#readme",keywords:["google","api","google apis","client","client library"],license:"Apache-2.0",main:"./build/src/index.js",name:"google-auth-library",repository:{type:"git",url:"git+https://github.com/googleapis/google-auth-library-nodejs.git"},scripts:{"browser-test":"karma start",clean:"gts clean",compile:"tsc -p .",docs:"compodoc src/","docs-test":"linkinator docs",fix:"gts fix",lint:"gts check",precompile:"gts clean","predocs-test":"npm run docs",prelint:"cd samples; npm link ../; npm install",prepare:"npm run compile","presystem-test":"npm run compile",pretest:"npm run compile","samples-setup":"cd samples/ && npm link ../ && npm run setup && cd ../","samples-test":"cd samples/ && npm link ../ && npm test && cd ../","system-test":"mocha build/system-test --timeout 60000",test:"c8 mocha build/test",webpack:"webpack"},types:"./build/src/index.d.ts",version:"8.0.2"}});var Tu=de(Jf=>{"use strict";Object.defineProperty(Jf,"__esModule",{value:!0});Jf.DefaultTransporter=void 0;var hw=Jo(),B4=fw(),pw=dw(),gw="google-api-nodejs-client",tl=class{configure(e={}){if(e.headers=e.headers||{},typeof window=="undefined"){let r=e.headers["User-Agent"];r?r.includes(`${gw}/`)||(e.headers["User-Agent"]=`${r} ${tl.USER_AGENT}`):e.headers["User-Agent"]=tl.USER_AGENT;let n=`auth/${pw.version}`;if(e.headers["x-goog-api-client"]&&!e.headers["x-goog-api-client"].includes(n))e.headers["x-goog-api-client"]=`${e.headers["x-goog-api-client"]} ${n}`;else if(!e.headers["x-goog-api-client"]){let i=process.version.replace(/^v/,"");e.headers["x-goog-api-client"]=`gl-node/${i} ${n}`}}return e}request(e,r){e=this.configure(e);try{(0,B4.validate)(e)}catch(n){if(r)return r(n);throw n}if(r)(0,hw.request)(e).then(n=>{r(null,n)},n=>{r(this.processError(n))});else return(0,hw.request)(e).catch(n=>{throw this.processError(n)})}processError(e){let r=e.response,n=e,i=r?r.data:null;return r&&i&&i.error&&r.status!==200?typeof i.error=="string"?(n.message=i.error,n.code=r.status.toString()):Array.isArray(i.error.errors)?(n.message=i.error.errors.map(a=>a.message).join(`
`),n.code=i.error.code,n.errors=i.error.errors):(n.message=i.error.message,n.code=i.error.code||r.status):r&&r.status>=400&&(n.message=i,n.code=r.status.toString()),n}};Jf.DefaultTransporter=tl;tl.USER_AGENT=`${gw}/${pw.version}`});var yw=de((HV,mw)=>{"use strict";var O4=t=>t==null?[]:Array.isArray(t)?t:typeof t=="string"?[t]:typeof t[Symbol.iterator]=="function"?[...t]:[t];mw.exports=O4});var rl=de((B0,_w)=>{var Zf=require("buffer"),ji=Zf.Buffer;function vw(t,e){for(var r in t)e[r]=t[r]}ji.from&&ji.alloc&&ji.allocUnsafe&&ji.allocUnsafeSlow?_w.exports=Zf:(vw(Zf,B0),B0.Buffer=js);function js(t,e,r){return ji(t,e,r)}js.prototype=Object.create(ji.prototype);vw(ji,js);js.from=function(t,e,r){if(typeof t=="number")throw new TypeError("Argument must not be a number");return ji(t,e,r)};js.alloc=function(t,e,r){if(typeof t!="number")throw new TypeError("Argument must be a number");var n=ji(t);return e!==void 0?typeof r=="string"?n.fill(e,r):n.fill(e):n.fill(0),n};js.allocUnsafe=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return ji(t)};js.allocUnsafeSlow=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return Zf.SlowBuffer(t)}});var Ew=de((KV,ww)=>{"use strict";function O0(t){var e=(t/8|0)+(t%8==0?0:1);return e}var L4={ES256:O0(256),ES384:O0(384),ES512:O0(521)};function P4(t){var e=L4[t];if(e)return e;throw new Error('Unknown algorithm "'+t+'"')}ww.exports=P4});var L0=de((jV,Aw)=>{"use strict";var $f=rl().Buffer,Cw=Ew(),ed=128,bw=0,M4=32,U4=16,F4=2,xw=U4|M4|bw<<6,td=F4|bw<<6;function q4(t){return t.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Tw(t){if($f.isBuffer(t))return t;if(typeof t=="string")return $f.from(t,"base64");throw new TypeError("ECDSA signature must be a Base64 string or a Buffer")}function G4(t,e){t=Tw(t);var r=Cw(e),n=r+1,i=t.length,a=0;if(t[a++]!==xw)throw new Error('Could not find expected "seq"');var s=t[a++];if(s===(ed|1)&&(s=t[a++]),i-a<s)throw new Error('"seq" specified length of "'+s+'", only "'+(i-a)+'" remaining');if(t[a++]!==td)throw new Error('Could not find expected "int" for "r"');var l=t[a++];if(i-a-2<l)throw new Error('"r" specified length of "'+l+'", only "'+(i-a-2)+'" available');if(n<l)throw new Error('"r" specified length of "'+l+'", max of "'+n+'" is acceptable');var u=a;if(a+=l,t[a++]!==td)throw new Error('Could not find expected "int" for "s"');var f=t[a++];if(i-a!==f)throw new Error('"s" specified length of "'+f+'", expected "'+(i-a)+'"');if(n<f)throw new Error('"s" specified length of "'+f+'", max of "'+n+'" is acceptable');var d=a;if(a+=f,a!==i)throw new Error('Expected to consume entire buffer, but "'+(i-a)+'" bytes remain');var h=r-l,g=r-f,y=$f.allocUnsafe(h+l+g+f);for(a=0;a<h;++a)y[a]=0;t.copy(y,a,u+Math.max(-h,0),u+l),a=r;for(var m=a;a<m+g;++a)y[a]=0;return t.copy(y,a,d+Math.max(-g,0),d+f),y=y.toString("base64"),y=q4(y),y}function Sw(t,e,r){for(var n=0;e+n<r&&t[e+n]===0;)++n;var i=t[e+n]>=ed;return i&&--n,n}function V4(t,e){t=Tw(t);var r=Cw(e),n=t.length;if(n!==r*2)throw new TypeError('"'+e+'" signatures must be "'+r*2+'" bytes, saw "'+n+'"');var i=Sw(t,0,r),a=Sw(t,r,t.length),s=r-i,l=r-a,u=1+1+s+1+1+l,f=u<ed,d=$f.allocUnsafe((f?2:3)+u),h=0;return d[h++]=xw,f?d[h++]=u:(d[h++]=ed|1,d[h++]=u&255),d[h++]=td,d[h++]=s,i<0?(d[h++]=0,h+=t.copy(d,h,0,r)):h+=t.copy(d,h,i,r),d[h++]=td,d[h++]=l,a<0?(d[h++]=0,t.copy(d,h,r)):t.copy(d,h,r+a),d}Aw.exports={derToJose:G4,joseToDer:V4}});var Su=de(rd=>{"use strict";Object.defineProperty(rd,"__esModule",{value:!0});rd.AuthClient=void 0;var H4=require("events"),K4=Tu(),kw=class extends H4.EventEmitter{constructor(){super(...arguments);this.transporter=new K4.DefaultTransporter,this.credentials={},this.eagerRefreshThresholdMillis=5*60*1e3,this.forceRefreshOnFailure=!1}setCredentials(e){this.credentials=e}addSharedMetadataHeaders(e){return!e["x-goog-user-project"]&&this.quotaProjectId&&(e["x-goog-user-project"]=this.quotaProjectId),e}};rd.AuthClient=kw});var P0=de(nd=>{"use strict";Object.defineProperty(nd,"__esModule",{value:!0});nd.LoginTicket=void 0;var Iw=class{constructor(e,r){this.envelope=e,this.payload=r}getEnvelope(){return this.envelope}getPayload(){return this.payload}getUserId(){let e=this.getPayload();return e&&e.sub?e.sub:null}getAttributes(){return{envelope:this.getEnvelope(),payload:this.getPayload()}}};nd.LoginTicket=Iw});var Ys=de(Yi=>{"use strict";Object.defineProperty(Yi,"__esModule",{value:!0});Yi.OAuth2Client=Yi.CertificateFormat=Yi.CodeChallengeMethod=void 0;var id=require("querystring"),j4=require("stream"),Y4=L0(),M0=$o(),W4=Su(),z4=P0(),Q4;(function(t){t.Plain="plain",t.S256="S256"})(Q4=Yi.CodeChallengeMethod||(Yi.CodeChallengeMethod={}));var as;(function(t){t.PEM="PEM",t.JWK="JWK"})(as=Yi.CertificateFormat||(Yi.CertificateFormat={}));var nr=class extends W4.AuthClient{constructor(e,r,n){super();this.certificateCache={},this.certificateExpiry=null,this.certificateCacheFormat=as.PEM,this.refreshTokenPromises=new Map;let i=e&&typeof e=="object"?e:{clientId:e,clientSecret:r,redirectUri:n};this._clientId=i.clientId,this._clientSecret=i.clientSecret,this.redirectUri=i.redirectUri,this.eagerRefreshThresholdMillis=i.eagerRefreshThresholdMillis||5*60*1e3,this.forceRefreshOnFailure=!!i.forceRefreshOnFailure}generateAuthUrl(e={}){if(e.code_challenge_method&&!e.code_challenge)throw new Error("If a code_challenge_method is provided, code_challenge must be included.");return e.response_type=e.response_type||"code",e.client_id=e.client_id||this._clientId,e.redirect_uri=e.redirect_uri||this.redirectUri,e.scope instanceof Array&&(e.scope=e.scope.join(" ")),nr.GOOGLE_OAUTH2_AUTH_BASE_URL_+"?"+id.stringify(e)}generateCodeVerifier(){throw new Error("generateCodeVerifier is removed, please use generateCodeVerifierAsync instead.")}generateCodeVerifierAsync(){return P(this,null,function*(){let e=(0,M0.createCrypto)(),n=e.randomBytesBase64(96).replace(/\+/g,"~").replace(/=/g,"_").replace(/\//g,"-"),a=(yield e.sha256DigestBase64(n)).split("=")[0].replace(/\+/g,"-").replace(/\//g,"_");return{codeVerifier:n,codeChallenge:a}})}getToken(e,r){let n=typeof e=="string"?{code:e}:e;if(r)this.getTokenAsync(n).then(i=>r(null,i.tokens,i.res),i=>r(i,null,i.response));else return this.getTokenAsync(n)}getTokenAsync(e){return P(this,null,function*(){let r=nr.GOOGLE_OAUTH2_TOKEN_URL_,n={code:e.code,client_id:e.client_id||this._clientId,client_secret:this._clientSecret,redirect_uri:e.redirect_uri||this.redirectUri,grant_type:"authorization_code",code_verifier:e.codeVerifier},i=yield this.transporter.request({method:"POST",url:r,data:id.stringify(n),headers:{"Content-Type":"application/x-www-form-urlencoded"}}),a=i.data;return i.data&&i.data.expires_in&&(a.expiry_date=new Date().getTime()+i.data.expires_in*1e3,delete a.expires_in),this.emit("tokens",a),{tokens:a,res:i}})}refreshToken(e){return P(this,null,function*(){if(!e)return this.refreshTokenNoCache(e);if(this.refreshTokenPromises.has(e))return this.refreshTokenPromises.get(e);let r=this.refreshTokenNoCache(e).then(n=>(this.refreshTokenPromises.delete(e),n),n=>{throw this.refreshTokenPromises.delete(e),n});return this.refreshTokenPromises.set(e,r),r})}refreshTokenNoCache(e){return P(this,null,function*(){if(!e)throw new Error("No refresh token is set.");let r=nr.GOOGLE_OAUTH2_TOKEN_URL_,n={refresh_token:e,client_id:this._clientId,client_secret:this._clientSecret,grant_type:"refresh_token"},i=yield this.transporter.request({method:"POST",url:r,data:id.stringify(n),headers:{"Content-Type":"application/x-www-form-urlencoded"}}),a=i.data;return i.data&&i.data.expires_in&&(a.expiry_date=new Date().getTime()+i.data.expires_in*1e3,delete a.expires_in),this.emit("tokens",a),{tokens:a,res:i}})}refreshAccessToken(e){if(e)this.refreshAccessTokenAsync().then(r=>e(null,r.credentials,r.res),e);else return this.refreshAccessTokenAsync()}refreshAccessTokenAsync(){return P(this,null,function*(){let e=yield this.refreshToken(this.credentials.refresh_token),r=e.tokens;return r.refresh_token=this.credentials.refresh_token,this.credentials=r,{credentials:this.credentials,res:e.res}})}getAccessToken(e){if(e)this.getAccessTokenAsync().then(r=>e(null,r.token,r.res),e);else return this.getAccessTokenAsync()}getAccessTokenAsync(){return P(this,null,function*(){if(!this.credentials.access_token||this.isTokenExpiring()){if(!this.credentials.refresh_token)if(this.refreshHandler){let n=yield this.processAndValidateRefreshHandler();if(n==null?void 0:n.access_token)return this.setCredentials(n),{token:this.credentials.access_token}}else throw new Error("No refresh token or refresh handler callback is set.");let r=yield this.refreshAccessTokenAsync();if(!r.credentials||r.credentials&&!r.credentials.access_token)throw new Error("Could not refresh access token.");return{token:r.credentials.access_token,res:r.res}}else return{token:this.credentials.access_token}})}getRequestHeaders(e){return P(this,null,function*(){return(yield this.getRequestMetadataAsync(e)).headers})}getRequestMetadataAsync(e){return P(this,null,function*(){let r=this.credentials;if(!r.access_token&&!r.refresh_token&&!this.apiKey&&!this.refreshHandler)throw new Error("No access, refresh token, API key or refresh handler callback is set.");if(r.access_token&&!this.isTokenExpiring()){r.token_type=r.token_type||"Bearer";let l={Authorization:r.token_type+" "+r.access_token};return{headers:this.addSharedMetadataHeaders(l)}}if(this.refreshHandler){let l=yield this.processAndValidateRefreshHandler();if(l==null?void 0:l.access_token){this.setCredentials(l);let u={Authorization:"Bearer "+this.credentials.access_token};return{headers:this.addSharedMetadataHeaders(u)}}}if(this.apiKey)return{headers:{"X-Goog-Api-Key":this.apiKey}};let n=null,i=null;try{n=yield this.refreshToken(r.refresh_token),i=n.tokens}catch(l){let u=l;throw u.response&&(u.response.status===403||u.response.status===404)&&(u.message=`Could not refresh access token: ${u.message}`),u}let a=this.credentials;a.token_type=a.token_type||"Bearer",i.refresh_token=a.refresh_token,this.credentials=i;let s={Authorization:a.token_type+" "+i.access_token};return{headers:this.addSharedMetadataHeaders(s),res:n.res}})}static getRevokeTokenUrl(e){let r=id.stringify({token:e});return`${nr.GOOGLE_OAUTH2_REVOKE_URL_}?${r}`}revokeToken(e,r){let n={url:nr.getRevokeTokenUrl(e),method:"POST"};if(r)this.transporter.request(n).then(i=>r(null,i),r);else return this.transporter.request(n)}revokeCredentials(e){if(e)this.revokeCredentialsAsync().then(r=>e(null,r),e);else return this.revokeCredentialsAsync()}revokeCredentialsAsync(){return P(this,null,function*(){let e=this.credentials.access_token;if(this.credentials={},e)return this.revokeToken(e);throw new Error("No access token to revoke.")})}request(e,r){if(r)this.requestAsync(e).then(n=>r(null,n),n=>r(n,n.response));else return this.requestAsync(e)}requestAsync(e,r=!1){return P(this,null,function*(){let n;try{let i=yield this.getRequestMetadataAsync(e.url);e.headers=e.headers||{},i.headers&&i.headers["x-goog-user-project"]&&(e.headers["x-goog-user-project"]=i.headers["x-goog-user-project"]),i.headers&&i.headers.Authorization&&(e.headers.Authorization=i.headers.Authorization),this.apiKey&&(e.headers["X-Goog-Api-Key"]=this.apiKey),n=yield this.transporter.request(e)}catch(i){let a=i.response;if(a){let s=a.status,l=this.credentials&&this.credentials.access_token&&this.credentials.refresh_token&&(!this.credentials.expiry_date||this.forceRefreshOnFailure),u=this.credentials&&this.credentials.access_token&&!this.credentials.refresh_token&&(!this.credentials.expiry_date||this.forceRefreshOnFailure)&&this.refreshHandler,f=a.config.data instanceof j4.Readable,d=s===401||s===403;if(!r&&d&&!f&&l)return yield this.refreshAccessTokenAsync(),this.requestAsync(e,!0);if(!r&&d&&!f&&u){let h=yield this.processAndValidateRefreshHandler();return(h==null?void 0:h.access_token)&&this.setCredentials(h),this.requestAsync(e,!0)}}throw i}return n})}verifyIdToken(e,r){if(r&&typeof r!="function")throw new Error("This method accepts an options object as the first parameter, which includes the idToken, audience, and maxExpiry.");if(r)this.verifyIdTokenAsync(e).then(n=>r(null,n),r);else return this.verifyIdTokenAsync(e)}verifyIdTokenAsync(e){return P(this,null,function*(){if(!e.idToken)throw new Error("The verifyIdToken method requires an ID Token");let r=yield this.getFederatedSignonCertsAsync();return yield this.verifySignedJwtWithCertsAsync(e.idToken,r.certs,e.audience,nr.ISSUERS_,e.maxExpiry)})}getTokenInfo(e){return P(this,null,function*(){let{data:r}=yield this.transporter.request({method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:`Bearer ${e}`},url:nr.GOOGLE_TOKEN_INFO_URL}),n=Object.assign({expiry_date:new Date().getTime()+r.expires_in*1e3,scopes:r.scope.split(" ")},r);return delete n.expires_in,delete n.scope,n})}getFederatedSignonCerts(e){if(e)this.getFederatedSignonCertsAsync().then(r=>e(null,r.certs,r.res),e);else return this.getFederatedSignonCertsAsync()}getFederatedSignonCertsAsync(){return P(this,null,function*(){let e=new Date().getTime(),r=(0,M0.hasBrowserCrypto)()?as.JWK:as.PEM;if(this.certificateExpiry&&e<this.certificateExpiry.getTime()&&this.certificateCacheFormat===r)return{certs:this.certificateCache,format:r};let n,i;switch(r){case as.PEM:i=nr.GOOGLE_OAUTH2_FEDERATED_SIGNON_PEM_CERTS_URL_;break;case as.JWK:i=nr.GOOGLE_OAUTH2_FEDERATED_SIGNON_JWK_CERTS_URL_;break;default:throw new Error(`Unsupported certificate format ${r}`)}try{n=yield this.transporter.request({url:i})}catch(f){throw f instanceof Error&&(f.message=`Failed to retrieve verification certificates: ${f.message}`),f}let a=n?n.headers["cache-control"]:void 0,s=-1;if(a){let d=new RegExp("max-age=([0-9]*)").exec(a);d&&d.length===2&&(s=Number(d[1])*1e3)}let l={};switch(r){case as.PEM:l=n.data;break;case as.JWK:for(let f of n.data.keys)l[f.kid]=f;break;default:throw new Error(`Unsupported certificate format ${r}`)}let u=new Date;return this.certificateExpiry=s===-1?null:new Date(u.getTime()+s),this.certificateCache=l,this.certificateCacheFormat=r,{certs:l,format:r,res:n}})}getIapPublicKeys(e){if(e)this.getIapPublicKeysAsync().then(r=>e(null,r.pubkeys,r.res),e);else return this.getIapPublicKeysAsync()}getIapPublicKeysAsync(){return P(this,null,function*(){let e,r=nr.GOOGLE_OAUTH2_IAP_PUBLIC_KEY_URL_;try{e=yield this.transporter.request({url:r})}catch(n){throw n instanceof Error&&(n.message=`Failed to retrieve verification certificates: ${n.message}`),n}return{pubkeys:e.data,res:e}})}verifySignedJwtWithCerts(){throw new Error("verifySignedJwtWithCerts is removed, please use verifySignedJwtWithCertsAsync instead.")}verifySignedJwtWithCertsAsync(e,r,n,i,a){return P(this,null,function*(){let s=(0,M0.createCrypto)();a||(a=nr.MAX_TOKEN_LIFETIME_SECS_);let l=e.split(".");if(l.length!==3)throw new Error("Wrong number of segments in token: "+e);let u=l[0]+"."+l[1],f=l[2],d,h;try{d=JSON.parse(s.decodeBase64StringUtf8(l[0]))}catch(k){throw k instanceof Error&&(k.message=`Can't parse token envelope: ${l[0]}': ${k.message}`),k}if(!d)throw new Error("Can't parse token envelope: "+l[0]);try{h=JSON.parse(s.decodeBase64StringUtf8(l[1]))}catch(k){throw k instanceof Error&&(k.message=`Can't parse token payload '${l[0]}`),k}if(!h)throw new Error("Can't parse token payload: "+l[1]);if(!Object.prototype.hasOwnProperty.call(r,d.kid))throw new Error("No pem found for envelope: "+JSON.stringify(d));let g=r[d.kid];if(d.alg==="ES256"&&(f=Y4.joseToDer(f,"ES256").toString("base64")),!(yield s.verify(g,u,f)))throw new Error("Invalid token signature: "+e);if(!h.iat)throw new Error("No issue time in token: "+JSON.stringify(h));if(!h.exp)throw new Error("No expiration time in token: "+JSON.stringify(h));let m=Number(h.iat);if(isNaN(m))throw new Error("iat field using invalid format");let w=Number(h.exp);if(isNaN(w))throw new Error("exp field using invalid format");let _=new Date().getTime()/1e3;if(w>=_+a)throw new Error("Expiration time too far in future: "+JSON.stringify(h));let E=m-nr.CLOCK_SKEW_SECS_,b=w+nr.CLOCK_SKEW_SECS_;if(_<E)throw new Error("Token used too early, "+_+" < "+E+": "+JSON.stringify(h));if(_>b)throw new Error("Token used too late, "+_+" > "+b+": "+JSON.stringify(h));if(i&&i.indexOf(h.iss)<0)throw new Error("Invalid issuer, expected one of ["+i+"], but got "+h.iss);if(typeof n!="undefined"&&n!==null){let k=h.aud,O=!1;if(n.constructor===Array?O=n.indexOf(k)>-1:O=k===n,!O)throw new Error("Wrong recipient, payload audience != requiredAudience")}return new z4.LoginTicket(d,h)})}processAndValidateRefreshHandler(){return P(this,null,function*(){if(this.refreshHandler){let e=yield this.refreshHandler();if(!e.access_token)throw new Error("No access token is returned by the refreshHandler callback.");return e}})}isTokenExpiring(){let e=this.credentials.expiry_date;return e?e<=new Date().getTime()+this.eagerRefreshThresholdMillis:!1}};Yi.OAuth2Client=nr;nr.GOOGLE_TOKEN_INFO_URL="https://oauth2.googleapis.com/tokeninfo";nr.GOOGLE_OAUTH2_AUTH_BASE_URL_="https://accounts.google.com/o/oauth2/v2/auth";nr.GOOGLE_OAUTH2_TOKEN_URL_="https://oauth2.googleapis.com/token";nr.GOOGLE_OAUTH2_REVOKE_URL_="https://oauth2.googleapis.com/revoke";nr.GOOGLE_OAUTH2_FEDERATED_SIGNON_PEM_CERTS_URL_="https://www.googleapis.com/oauth2/v1/certs";nr.GOOGLE_OAUTH2_FEDERATED_SIGNON_JWK_CERTS_URL_="https://www.googleapis.com/oauth2/v3/certs";nr.GOOGLE_OAUTH2_IAP_PUBLIC_KEY_URL_="https://www.gstatic.com/iap/verify/public_key";nr.CLOCK_SKEW_SECS_=300;nr.MAX_TOKEN_LIFETIME_SECS_=86400;nr.ISSUERS_=["accounts.google.com","https://accounts.google.com"]});var U0=de(ad=>{"use strict";Object.defineProperty(ad,"__esModule",{value:!0});ad.Compute=void 0;var X4=yw(),J4=Jo(),Nw=Yf(),Z4=Ys(),Rw=class extends Z4.OAuth2Client{constructor(e={}){super(e);this.credentials={expiry_date:1,refresh_token:"compute-placeholder"},this.serviceAccountEmail=e.serviceAccountEmail||"default",this.scopes=X4(e.scopes)}refreshTokenNoCache(e){return P(this,null,function*(){let r=`service-accounts/${this.serviceAccountEmail}/token`,n;try{let a={property:r};this.scopes.length>0&&(a.params={scopes:this.scopes.join(",")}),n=yield Nw.instance(a)}catch(a){throw a instanceof J4.GaxiosError&&(a.message=`Could not refresh access token: ${a.message}`,this.wrapError(a)),a}let i=n;return n&&n.expires_in&&(i.expiry_date=new Date().getTime()+n.expires_in*1e3,delete i.expires_in),this.emit("tokens",i),{tokens:i,res:null}})}fetchIdToken(e){return P(this,null,function*(){let r=`service-accounts/${this.serviceAccountEmail}/identity?format=full&audience=${e}`,n;try{let i={property:r};n=yield Nw.instance(i)}catch(i){throw i instanceof Error&&(i.message=`Could not fetch ID token: ${i.message}`),i}return n})}wrapError(e){let r=e.response;r&&r.status&&(e.code=r.status.toString(),r.status===403?e.message="A Forbidden error was returned while attempting to retrieve an access token for the Compute Engine built-in service account. This may be because the Compute Engine instance does not have the correct permission scopes specified: "+e.message:r.status===404&&(e.message="A Not Found error was returned while attempting to retrieve an accesstoken for the Compute Engine built-in service account. This may be because the Compute Engine instance does not have any permission scopes specified: "+e.message))}};ad.Compute=Rw});var F0=de(sd=>{"use strict";Object.defineProperty(sd,"__esModule",{value:!0});sd.IdTokenClient=void 0;var $4=Ys(),Dw=class extends $4.OAuth2Client{constructor(e){super();this.targetAudience=e.targetAudience,this.idTokenProvider=e.idTokenProvider}getRequestMetadataAsync(e){return P(this,null,function*(){if(!this.credentials.id_token||(this.credentials.expiry_date||0)<Date.now()){let n=yield this.idTokenProvider.fetchIdToken(this.targetAudience);this.credentials={id_token:n,expiry_date:this.getIdTokenExpiryDate(n)}}return{headers:{Authorization:"Bearer "+this.credentials.id_token}}})}getIdTokenExpiryDate(e){let r=e.split(".")[1];if(r)return JSON.parse(Buffer.from(r,"base64").toString("ascii")).exp*1e3}};sd.IdTokenClient=Dw});var q0=de(Sa=>{"use strict";Object.defineProperty(Sa,"__esModule",{value:!0});Sa.getEnv=Sa.clear=Sa.GCPEnv=void 0;var Bw=Yf(),ss;(function(t){t.APP_ENGINE="APP_ENGINE",t.KUBERNETES_ENGINE="KUBERNETES_ENGINE",t.CLOUD_FUNCTIONS="CLOUD_FUNCTIONS",t.COMPUTE_ENGINE="COMPUTE_ENGINE",t.CLOUD_RUN="CLOUD_RUN",t.NONE="NONE"})(ss=Sa.GCPEnv||(Sa.GCPEnv={}));var Au;function eP(){Au=void 0}Sa.clear=eP;function tP(){return P(this,null,function*(){return Au||(Au=rP(),Au)})}Sa.getEnv=tP;function rP(){return P(this,null,function*(){let t=ss.NONE;return nP()?t=ss.APP_ENGINE:iP()?t=ss.CLOUD_FUNCTIONS:(yield oP())?(yield sP())?t=ss.KUBERNETES_ENGINE:aP()?t=ss.CLOUD_RUN:t=ss.COMPUTE_ENGINE:t=ss.NONE,t})}function nP(){return!!(process.env.GAE_SERVICE||process.env.GAE_MODULE_NAME)}function iP(){return!!(process.env.FUNCTION_NAME||process.env.FUNCTION_TARGET)}function aP(){return!!process.env.K_CONFIGURATION}function sP(){return P(this,null,function*(){try{return yield Bw.instance("attributes/cluster-name"),!0}catch(t){return!1}})}function oP(){return P(this,null,function*(){return Bw.isAvailable()})}});var G0=de(od=>{"use strict";Object.defineProperty(od,"__esModule",{value:!0});od.GaxiosError=void 0;var Ow=class extends Error{constructor(e,r,n){super(e);this.response=n,this.config=r,this.code=n.status.toString()}};od.GaxiosError=Ow});var Pw=de(ld=>{"use strict";Object.defineProperty(ld,"__esModule",{value:!0});ld.getRetryConfig=void 0;function lP(t){return P(this,null,function*(){var e;let r=Lw(t);if(!t||!t.config||!r&&!t.config.retry)return{shouldRetry:!1};r=r||{},r.currentRetryAttempt=r.currentRetryAttempt||0,r.retry=r.retry===void 0||r.retry===null?3:r.retry,r.httpMethodsToRetry=r.httpMethodsToRetry||["GET","HEAD","PUT","OPTIONS","DELETE"],r.noResponseRetries=r.noResponseRetries===void 0||r.noResponseRetries===null?2:r.noResponseRetries;let n=[[100,199],[429,429],[500,599]];if(r.statusCodesToRetry=r.statusCodesToRetry||n,t.config.retryConfig=r,!(yield(r.shouldRetry||uP)(t)))return{shouldRetry:!1,config:t.config};let s=(r.currentRetryAttempt?0:(e=r.retryDelay)!==null&&e!==void 0?e:100)+(Math.pow(2,r.currentRetryAttempt)-1)/2*1e3;t.config.retryConfig.currentRetryAttempt+=1;let l=new Promise(u=>{setTimeout(u,s)});return r.onRetryAttempt&&r.onRetryAttempt(t),yield l,{shouldRetry:!0,config:t.config}})}ld.getRetryConfig=lP;function uP(t){let e=Lw(t);if(t.name==="AbortError"||!e||e.retry===0||!t.response&&(e.currentRetryAttempt||0)>=e.noResponseRetries||!t.config.method||e.httpMethodsToRetry.indexOf(t.config.method.toUpperCase())<0)return!1;if(t.response&&t.response.status){let r=!1;for(let[n,i]of e.statusCodesToRetry){let a=t.response.status;if(a>=n&&a<=i){r=!0;break}}if(!r)return!1}return e.currentRetryAttempt=e.currentRetryAttempt||0,!(e.currentRetryAttempt>=e.retry)}function Lw(t){if(t&&t.config&&t.config.retryConfig)return t.config.retryConfig}});var Vw=de(nl=>{"use strict";var ud=nl&&nl.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(nl,"__esModule",{value:!0});nl.Gaxios=void 0;var cP=ud(m0()),fP=require("https"),dP=ud(y0()),hP=ud(require("querystring")),pP=ud(v0()),Mw=require("url"),gP=G0(),mP=Pw(),yP=_P()?window.fetch:dP.default;function vP(){return typeof window!="undefined"&&!!window}function _P(){return vP()&&!!window.fetch}function wP(){return typeof Buffer!="undefined"}function Uw(t,e){return!!Fw(t,e)}function Fw(t,e){e=e.toLowerCase();for(let r of Object.keys((t==null?void 0:t.headers)||{}))if(e===r.toLowerCase())return t.headers[r]}var V0;function qw(){let t=process.env.HTTPS_PROXY||process.env.https_proxy||process.env.HTTP_PROXY||process.env.http_proxy;return t&&(V0=S0()),t}qw();function EP(t){var e;let r=(e=process.env.NO_PROXY)!==null&&e!==void 0?e:process.env.no_proxy;if(!r)return!1;let n=r.split(","),i=new Mw.URL(t);return!!n.find(a=>a.startsWith("*.")||a.startsWith(".")?(a=a.replace(/^\*\./,"."),i.hostname.endsWith(a)):a===i.origin||a===i.hostname)}function CP(t){if(!EP(t))return qw()}var Gw=class{constructor(e){this.agentCache=new Map,this.defaults=e||{}}request(){return P(this,arguments,function*(e={}){return e=this.validateOpts(e),this._request(e)})}_defaultAdapter(e){return P(this,null,function*(){let n=yield(e.fetchImplementation||yP)(e.url,e),i=yield this.getResponseData(e,n);return this.translateResponse(e,n,i)})}_request(){return P(this,arguments,function*(e={}){try{let r;if(e.adapter?r=yield e.adapter(e,this._defaultAdapter.bind(this)):r=yield this._defaultAdapter(e),!e.validateStatus(r.status))throw new gP.GaxiosError(`Request failed with status code ${r.status}`,e,r);return r}catch(r){let n=r;n.config=e;let{shouldRetry:i,config:a}=yield mP.getRetryConfig(r);if(i&&a)return n.config.retryConfig.currentRetryAttempt=a.retryConfig.currentRetryAttempt,this._request(n.config);throw n}})}getResponseData(e,r){return P(this,null,function*(){switch(e.responseType){case"stream":return r.body;case"json":{let n=yield r.text();try{n=JSON.parse(n)}catch(i){}return n}case"arraybuffer":return r.arrayBuffer();case"blob":return r.blob();default:return r.text()}})}validateOpts(e){let r=cP.default(!0,{},this.defaults,e);if(!r.url)throw new Error("URL is required.");let n=r.baseUrl||r.baseURL;if(n&&(r.url=n+r.url),r.paramsSerializer=r.paramsSerializer||this.paramsSerializer,r.params&&Object.keys(r.params).length>0){let a=r.paramsSerializer(r.params);a.startsWith("?")&&(a=a.slice(1));let s=r.url.includes("?")?"&":"?";r.url=r.url+s+a}if(typeof e.maxContentLength=="number"&&(r.size=e.maxContentLength),typeof e.maxRedirects=="number"&&(r.follow=e.maxRedirects),r.headers=r.headers||{},r.data){let a=typeof FormData=="undefined"?!1:(r==null?void 0:r.data)instanceof FormData;pP.default.readable(r.data)?r.body=r.data:wP()&&Buffer.isBuffer(r.data)?(r.body=r.data,Uw(r,"Content-Type")||(r.headers["Content-Type"]="application/json")):typeof r.data=="object"?a||(Fw(r,"content-type")==="application/x-www-form-urlencoded"?r.body=r.paramsSerializer(r.data):(Uw(r,"Content-Type")||(r.headers["Content-Type"]="application/json"),r.body=JSON.stringify(r.data))):r.body=r.data}r.validateStatus=r.validateStatus||this.validateStatus,r.responseType=r.responseType||"json",!r.headers.Accept&&r.responseType==="json"&&(r.headers.Accept="application/json"),r.method=r.method||"GET";let i=CP(r.url);if(i)if(this.agentCache.has(i))r.agent=this.agentCache.get(i);else{if(r.cert&&r.key){let a=new Mw.URL(i);r.agent=new V0({port:a.port,host:a.host,protocol:a.protocol,cert:r.cert,key:r.key})}else r.agent=new V0(i);this.agentCache.set(i,r.agent)}else r.cert&&r.key&&(this.agentCache.has(r.key)?r.agent=this.agentCache.get(r.key):(r.agent=new fP.Agent({cert:r.cert,key:r.key}),this.agentCache.set(r.key,r.agent)));return r}validateStatus(e){return e>=200&&e<300}paramsSerializer(e){return hP.default.stringify(e)}translateResponse(e,r,n){let i={};return r.headers.forEach((a,s)=>{i[s]=a}),{config:e,data:n,headers:i,status:r.status,statusText:r.statusText,request:{responseURL:r.url}}}};nl.Gaxios=Gw});var Kw=de(Wi=>{"use strict";Object.defineProperty(Wi,"__esModule",{value:!0});Wi.request=Wi.instance=Wi.Gaxios=void 0;var Hw=Vw();Object.defineProperty(Wi,"Gaxios",{enumerable:!0,get:function(){return Hw.Gaxios}});var bP=G0();Object.defineProperty(Wi,"GaxiosError",{enumerable:!0,get:function(){return bP.GaxiosError}});Wi.instance=new Hw.Gaxios;function xP(t){return P(this,null,function*(){return Wi.instance.request(t)})}Wi.request=xP});var H0=de((r7,jw)=>{var cd=rl().Buffer,TP=require("stream"),SP=require("util");function fd(t){if(this.buffer=null,this.writable=!0,this.readable=!0,!t)return this.buffer=cd.alloc(0),this;if(typeof t.pipe=="function")return this.buffer=cd.alloc(0),t.pipe(this),this;if(t.length||typeof t=="object")return this.buffer=t,this.writable=!1,process.nextTick(function(){this.emit("end",t),this.readable=!1,this.emit("close")}.bind(this)),this;throw new TypeError("Unexpected data type ("+typeof t+")")}SP.inherits(fd,TP);fd.prototype.write=function(e){this.buffer=cd.concat([this.buffer,cd.from(e)]),this.emit("data",e)};fd.prototype.end=function(e){e&&this.write(e),this.emit("end",e),this.emit("close"),this.writable=!1,this.readable=!1};jw.exports=fd});var Ww=de((n7,Yw)=>{"use strict";var ku=require("buffer").Buffer,K0=require("buffer").SlowBuffer;Yw.exports=dd;function dd(t,e){if(!ku.isBuffer(t)||!ku.isBuffer(e)||t.length!==e.length)return!1;for(var r=0,n=0;n<t.length;n++)r|=t[n]^e[n];return r===0}dd.install=function(){ku.prototype.equal=K0.prototype.equal=function(e){return dd(this,e)}};var AP=ku.prototype.equal,kP=K0.prototype.equal;dd.restore=function(){ku.prototype.equal=AP,K0.prototype.equal=kP}});var W0=de((i7,rE)=>{var IP=Ww(),il=rl().Buffer,zi=require("crypto"),zw=L0(),Qw=require("util"),NP=`"%s" is not a valid algorithm.
  Supported algorithms are:
  "HS256", "HS384", "HS512", "RS256", "RS384", "RS512", "PS256", "PS384", "PS512", "ES256", "ES384", "ES512" and "none".`,Iu="secret must be a string or buffer",al="key must be a string or a buffer",RP="key must be a string, a buffer or an object",j0=typeof zi.createPublicKey=="function";j0&&(al+=" or a KeyObject",Iu+="or a KeyObject");function Xw(t){if(!il.isBuffer(t)&&typeof t!="string"&&(!j0||typeof t!="object"||typeof t.type!="string"||typeof t.asymmetricKeyType!="string"||typeof t.export!="function"))throw xi(al)}function Jw(t){if(!il.isBuffer(t)&&typeof t!="string"&&typeof t!="object")throw xi(RP)}function DP(t){if(!il.isBuffer(t)){if(typeof t=="string")return t;if(!j0||typeof t!="object"||t.type!=="secret"||typeof t.export!="function")throw xi(Iu)}}function Y0(t){return t.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Zw(t){t=t.toString();var e=4-t.length%4;if(e!==4)for(var r=0;r<e;++r)t+="=";return t.replace(/\-/g,"+").replace(/_/g,"/")}function xi(t){var e=[].slice.call(arguments,1),r=Qw.format.bind(Qw,t).apply(null,e);return new TypeError(r)}function BP(t){return il.isBuffer(t)||typeof t=="string"}function Nu(t){return BP(t)||(t=JSON.stringify(t)),t}function $w(t){return function(r,n){DP(n),r=Nu(r);var i=zi.createHmac("sha"+t,n),a=(i.update(r),i.digest("base64"));return Y0(a)}}function OP(t){return function(r,n,i){var a=$w(t)(r,i);return IP(il.from(n),il.from(a))}}function eE(t){return function(r,n){Jw(n),r=Nu(r);var i=zi.createSign("RSA-SHA"+t),a=(i.update(r),i.sign(n,"base64"));return Y0(a)}}function tE(t){return function(r,n,i){Xw(i),r=Nu(r),n=Zw(n);var a=zi.createVerify("RSA-SHA"+t);return a.update(r),a.verify(i,n,"base64")}}function LP(t){return function(r,n){Jw(n),r=Nu(r);var i=zi.createSign("RSA-SHA"+t),a=(i.update(r),i.sign({key:n,padding:zi.constants.RSA_PKCS1_PSS_PADDING,saltLength:zi.constants.RSA_PSS_SALTLEN_DIGEST},"base64"));return Y0(a)}}function PP(t){return function(r,n,i){Xw(i),r=Nu(r),n=Zw(n);var a=zi.createVerify("RSA-SHA"+t);return a.update(r),a.verify({key:i,padding:zi.constants.RSA_PKCS1_PSS_PADDING,saltLength:zi.constants.RSA_PSS_SALTLEN_DIGEST},n,"base64")}}function MP(t){var e=eE(t);return function(){var n=e.apply(null,arguments);return n=zw.derToJose(n,"ES"+t),n}}function UP(t){var e=tE(t);return function(n,i,a){i=zw.joseToDer(i,"ES"+t).toString("base64");var s=e(n,i,a);return s}}function FP(){return function(){return""}}function qP(){return function(e,r){return r===""}}rE.exports=function(e){var r={hs:$w,rs:eE,ps:LP,es:MP,none:FP},n={hs:OP,rs:tE,ps:PP,es:UP,none:qP},i=e.match(/^(RS|PS|ES|HS)(256|384|512)$|^(none)$/);if(!i)throw xi(NP,e);var a=(i[1]||i[3]).toLowerCase(),s=i[2];return{sign:r[a](s),verify:n[a](s)}}});var z0=de((a7,nE)=>{var GP=require("buffer").Buffer;nE.exports=function(e){return typeof e=="string"?e:typeof e=="number"||GP.isBuffer(e)?e.toString():JSON.stringify(e)}});var uE=de((s7,lE)=>{var VP=rl().Buffer,iE=H0(),HP=W0(),KP=require("stream"),aE=z0(),Q0=require("util");function sE(t,e){return VP.from(t,e).toString("base64").replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function jP(t,e,r){r=r||"utf8";var n=sE(aE(t),"binary"),i=sE(aE(e),r);return Q0.format("%s.%s",n,i)}function oE(t){var e=t.header,r=t.payload,n=t.secret||t.privateKey,i=t.encoding,a=HP(e.alg),s=jP(e,r,i),l=a.sign(s,n);return Q0.format("%s.%s",s,l)}function hd(t){var e=t.secret||t.privateKey||t.key,r=new iE(e);this.readable=!0,this.header=t.header,this.encoding=t.encoding,this.secret=this.privateKey=this.key=r,this.payload=new iE(t.payload),this.secret.once("close",function(){!this.payload.writable&&this.readable&&this.sign()}.bind(this)),this.payload.once("close",function(){!this.secret.writable&&this.readable&&this.sign()}.bind(this))}Q0.inherits(hd,KP);hd.prototype.sign=function(){try{var e=oE({header:this.header,payload:this.payload.buffer,secret:this.secret.buffer,encoding:this.encoding});return this.emit("done",e),this.emit("data",e),this.emit("end"),this.readable=!1,e}catch(r){this.readable=!1,this.emit("error",r),this.emit("close")}};hd.sign=oE;lE.exports=hd});var _E=de((o7,vE)=>{var cE=rl().Buffer,fE=H0(),YP=W0(),WP=require("stream"),dE=z0(),zP=require("util"),QP=/^[a-zA-Z0-9\-_]+?\.[a-zA-Z0-9\-_]+?\.([a-zA-Z0-9\-_]+)?$/;function XP(t){return Object.prototype.toString.call(t)==="[object Object]"}function JP(t){if(XP(t))return t;try{return JSON.parse(t)}catch(e){return}}function hE(t){var e=t.split(".",1)[0];return JP(cE.from(e,"base64").toString("binary"))}function ZP(t){return t.split(".",2).join(".")}function pE(t){return t.split(".")[2]}function $P(t,e){e=e||"utf8";var r=t.split(".")[1];return cE.from(r,"base64").toString(e)}function gE(t){return QP.test(t)&&!!hE(t)}function mE(t,e,r){if(!e){var n=new Error("Missing algorithm parameter for jws.verify");throw n.code="MISSING_ALGORITHM",n}t=dE(t);var i=pE(t),a=ZP(t),s=YP(e);return s.verify(a,i,r)}function yE(t,e){if(e=e||{},t=dE(t),!gE(t))return null;var r=hE(t);if(!r)return null;var n=$P(t);return(r.typ==="JWT"||e.json)&&(n=JSON.parse(n,e.encoding)),{header:r,payload:n,signature:pE(t)}}function sl(t){t=t||{};var e=t.secret||t.publicKey||t.key,r=new fE(e);this.readable=!0,this.algorithm=t.algorithm,this.encoding=t.encoding,this.secret=this.publicKey=this.key=r,this.signature=new fE(t.signature),this.secret.once("close",function(){!this.signature.writable&&this.readable&&this.verify()}.bind(this)),this.signature.once("close",function(){!this.secret.writable&&this.readable&&this.verify()}.bind(this))}zP.inherits(sl,WP);sl.prototype.verify=function(){try{var e=mE(this.signature.buffer,this.algorithm,this.key.buffer),r=yE(this.signature.buffer,this.encoding);return this.emit("done",e,r),this.emit("data",e),this.emit("end"),this.readable=!1,e}catch(n){this.readable=!1,this.emit("error",n),this.emit("close")}};sl.decode=yE;sl.isValid=gE;sl.verify=mE;vE.exports=sl});var X0=de(os=>{var wE=uE(),pd=_E(),e6=["HS256","HS384","HS512","RS256","RS384","RS512","PS256","PS384","PS512","ES256","ES384","ES512"];os.ALGORITHMS=e6;os.sign=wE.sign;os.verify=pd.verify;os.decode=pd.decode;os.isValid=pd.isValid;os.createSign=function(e){return new wE(e)};os.createVerify=function(e){return new pd(e)}});var vt=de((u7,EE)=>{EE.exports={options:{usePureJavaScript:!1}}});var xE=de((c7,bE)=>{var J0={};bE.exports=J0;var CE={};J0.encode=function(t,e,r){if(typeof e!="string")throw new TypeError('"alphabet" must be a string.');if(r!==void 0&&typeof r!="number")throw new TypeError('"maxline" must be a number.');var n="";if(!(t instanceof Uint8Array))n=t6(t,e);else{var i=0,a=e.length,s=e.charAt(0),l=[0];for(i=0;i<t.length;++i){for(var u=0,f=t[i];u<l.length;++u)f+=l[u]<<8,l[u]=f%a,f=f/a|0;for(;f>0;)l.push(f%a),f=f/a|0}for(i=0;t[i]===0&&i<t.length-1;++i)n+=s;for(i=l.length-1;i>=0;--i)n+=e[l[i]]}if(r){var d=new RegExp(".{1,"+r+"}","g");n=n.match(d).join(`\r
`)}return n};J0.decode=function(t,e){if(typeof t!="string")throw new TypeError('"input" must be a string.');if(typeof e!="string")throw new TypeError('"alphabet" must be a string.');var r=CE[e];if(!r){r=CE[e]=[];for(var n=0;n<e.length;++n)r[e.charCodeAt(n)]=n}t=t.replace(/\s/g,"");for(var i=e.length,a=e.charAt(0),s=[0],n=0;n<t.length;n++){var l=r[t.charCodeAt(n)];if(l===void 0)return;for(var u=0,f=l;u<s.length;++u)f+=s[u]*i,s[u]=f&255,f>>=8;for(;f>0;)s.push(f&255),f>>=8}for(var d=0;t[d]===a&&d<t.length-1;++d)s.push(0);return typeof Buffer!="undefined"?Buffer.from(s.reverse()):new Uint8Array(s.reverse())};function t6(t,e){var r=0,n=e.length,i=e.charAt(0),a=[0];for(r=0;r<t.length();++r){for(var s=0,l=t.at(r);s<a.length;++s)l+=a[s]<<8,a[s]=l%n,l=l/n|0;for(;l>0;)a.push(l%n),l=l/n|0}var u="";for(r=0;t.at(r)===0&&r<t.length()-1;++r)u+=i;for(r=a.length-1;r>=0;--r)u+=e[a[r]];return u}});var qt=de((f7,kE)=>{var TE=vt(),SE=xE(),K=kE.exports=TE.util=TE.util||{};(function(){if(typeof process!="undefined"&&process.nextTick&&!process.browser){K.nextTick=process.nextTick,typeof setImmediate=="function"?K.setImmediate=setImmediate:K.setImmediate=K.nextTick;return}if(typeof setImmediate=="function"){K.setImmediate=function(){return setImmediate.apply(void 0,arguments)},K.nextTick=function(l){return setImmediate(l)};return}if(K.setImmediate=function(l){setTimeout(l,0)},typeof window!="undefined"&&typeof window.postMessage=="function"){let l=function(u){if(u.source===window&&u.data===t){u.stopPropagation();var f=e.slice();e.length=0,f.forEach(function(d){d()})}};var s=l,t="forge.setImmediate",e=[];K.setImmediate=function(u){e.push(u),e.length===1&&window.postMessage(t,"*")},window.addEventListener("message",l,!0)}if(typeof MutationObserver!="undefined"){var r=Date.now(),n=!0,i=document.createElement("div"),e=[];new MutationObserver(function(){var u=e.slice();e.length=0,u.forEach(function(f){f()})}).observe(i,{attributes:!0});var a=K.setImmediate;K.setImmediate=function(u){Date.now()-r>15?(r=Date.now(),a(u)):(e.push(u),e.length===1&&i.setAttribute("a",n=!n))}}K.nextTick=K.setImmediate})();K.isNodejs=typeof process!="undefined"&&process.versions&&process.versions.node;K.globalScope=function(){return K.isNodejs?global:typeof self=="undefined"?window:self}();K.isArray=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};K.isArrayBuffer=function(t){return typeof ArrayBuffer!="undefined"&&t instanceof ArrayBuffer};K.isArrayBufferView=function(t){return t&&K.isArrayBuffer(t.buffer)&&t.byteLength!==void 0};function Ru(t){if(!(t===8||t===16||t===24||t===32))throw new Error("Only 8, 16, 24, or 32 bits supported: "+t)}K.ByteBuffer=Z0;function Z0(t){if(this.data="",this.read=0,typeof t=="string")this.data=t;else if(K.isArrayBuffer(t)||K.isArrayBufferView(t))if(typeof Buffer!="undefined"&&t instanceof Buffer)this.data=t.toString("binary");else{var e=new Uint8Array(t);try{this.data=String.fromCharCode.apply(null,e)}catch(n){for(var r=0;r<e.length;++r)this.putByte(e[r])}}else(t instanceof Z0||typeof t=="object"&&typeof t.data=="string"&&typeof t.read=="number")&&(this.data=t.data,this.read=t.read);this._constructedStringLength=0}K.ByteStringBuffer=Z0;var r6=4096;K.ByteStringBuffer.prototype._optimizeConstructedString=function(t){this._constructedStringLength+=t,this._constructedStringLength>r6&&(this.data.substr(0,1),this._constructedStringLength=0)};K.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read};K.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0};K.ByteStringBuffer.prototype.putByte=function(t){return this.putBytes(String.fromCharCode(t))};K.ByteStringBuffer.prototype.fillWithByte=function(t,e){t=String.fromCharCode(t);for(var r=this.data;e>0;)e&1&&(r+=t),e>>>=1,e>0&&(t+=t);return this.data=r,this._optimizeConstructedString(e),this};K.ByteStringBuffer.prototype.putBytes=function(t){return this.data+=t,this._optimizeConstructedString(t.length),this};K.ByteStringBuffer.prototype.putString=function(t){return this.putBytes(K.encodeUtf8(t))};K.ByteStringBuffer.prototype.putInt16=function(t){return this.putBytes(String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};K.ByteStringBuffer.prototype.putInt24=function(t){return this.putBytes(String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};K.ByteStringBuffer.prototype.putInt32=function(t){return this.putBytes(String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};K.ByteStringBuffer.prototype.putInt16Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255))};K.ByteStringBuffer.prototype.putInt24Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255))};K.ByteStringBuffer.prototype.putInt32Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>24&255))};K.ByteStringBuffer.prototype.putInt=function(t,e){Ru(e);var r="";do e-=8,r+=String.fromCharCode(t>>e&255);while(e>0);return this.putBytes(r)};K.ByteStringBuffer.prototype.putSignedInt=function(t,e){return t<0&&(t+=2<<e-1),this.putInt(t,e)};K.ByteStringBuffer.prototype.putBuffer=function(t){return this.putBytes(t.getBytes())};K.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)};K.ByteStringBuffer.prototype.getInt16=function(){var t=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,t};K.ByteStringBuffer.prototype.getInt24=function(){var t=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,t};K.ByteStringBuffer.prototype.getInt32=function(){var t=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,t};K.ByteStringBuffer.prototype.getInt16Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,t};K.ByteStringBuffer.prototype.getInt24Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,t};K.ByteStringBuffer.prototype.getInt32Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,t};K.ByteStringBuffer.prototype.getInt=function(t){Ru(t);var e=0;do e=(e<<8)+this.data.charCodeAt(this.read++),t-=8;while(t>0);return e};K.ByteStringBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),r=2<<t-2;return e>=r&&(e-=r<<1),e};K.ByteStringBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):t===0?e="":(e=this.read===0?this.data:this.data.slice(this.read),this.clear()),e};K.ByteStringBuffer.prototype.bytes=function(t){return typeof t=="undefined"?this.data.slice(this.read):this.data.slice(this.read,this.read+t)};K.ByteStringBuffer.prototype.at=function(t){return this.data.charCodeAt(this.read+t)};K.ByteStringBuffer.prototype.setAt=function(t,e){return this.data=this.data.substr(0,this.read+t)+String.fromCharCode(e)+this.data.substr(this.read+t+1),this};K.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)};K.ByteStringBuffer.prototype.copy=function(){var t=K.createBuffer(this.data);return t.read=this.read,t};K.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this};K.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this};K.ByteStringBuffer.prototype.truncate=function(t){var e=Math.max(0,this.length()-t);return this.data=this.data.substr(this.read,e),this.read=0,this};K.ByteStringBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.length;++e){var r=this.data.charCodeAt(e);r<16&&(t+="0"),t+=r.toString(16)}return t};K.ByteStringBuffer.prototype.toString=function(){return K.decodeUtf8(this.bytes())};function n6(t,e){e=e||{},this.read=e.readOffset||0,this.growSize=e.growSize||1024;var r=K.isArrayBuffer(t),n=K.isArrayBufferView(t);if(r||n){r?this.data=new DataView(t):this.data=new DataView(t.buffer,t.byteOffset,t.byteLength),this.write="writeOffset"in e?e.writeOffset:this.data.byteLength;return}this.data=new DataView(new ArrayBuffer(0)),this.write=0,t!=null&&this.putBytes(t),"writeOffset"in e&&(this.write=e.writeOffset)}K.DataBuffer=n6;K.DataBuffer.prototype.length=function(){return this.write-this.read};K.DataBuffer.prototype.isEmpty=function(){return this.length()<=0};K.DataBuffer.prototype.accommodate=function(t,e){if(this.length()>=t)return this;e=Math.max(e||this.growSize,t);var r=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),n=new Uint8Array(this.length()+e);return n.set(r),this.data=new DataView(n.buffer),this};K.DataBuffer.prototype.putByte=function(t){return this.accommodate(1),this.data.setUint8(this.write++,t),this};K.DataBuffer.prototype.fillWithByte=function(t,e){this.accommodate(e);for(var r=0;r<e;++r)this.data.setUint8(t);return this};K.DataBuffer.prototype.putBytes=function(t,e){if(K.isArrayBufferView(t)){var r=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),n=r.byteLength-r.byteOffset;this.accommodate(n);var i=new Uint8Array(this.data.buffer,this.write);return i.set(r),this.write+=n,this}if(K.isArrayBuffer(t)){var r=new Uint8Array(t);this.accommodate(r.byteLength);var i=new Uint8Array(this.data.buffer);return i.set(r,this.write),this.write+=r.byteLength,this}if(t instanceof K.DataBuffer||typeof t=="object"&&typeof t.read=="number"&&typeof t.write=="number"&&K.isArrayBufferView(t.data)){var r=new Uint8Array(t.data.byteLength,t.read,t.length());this.accommodate(r.byteLength);var i=new Uint8Array(t.data.byteLength,this.write);return i.set(r),this.write+=r.byteLength,this}if(t instanceof K.ByteStringBuffer&&(t=t.data,e="binary"),e=e||"binary",typeof t=="string"){var a;if(e==="hex")return this.accommodate(Math.ceil(t.length/2)),a=new Uint8Array(this.data.buffer,this.write),this.write+=K.binary.hex.decode(t,a,this.write),this;if(e==="base64")return this.accommodate(Math.ceil(t.length/4)*3),a=new Uint8Array(this.data.buffer,this.write),this.write+=K.binary.base64.decode(t,a,this.write),this;if(e==="utf8"&&(t=K.encodeUtf8(t),e="binary"),e==="binary"||e==="raw")return this.accommodate(t.length),a=new Uint8Array(this.data.buffer,this.write),this.write+=K.binary.raw.decode(a),this;if(e==="utf16")return this.accommodate(t.length*2),a=new Uint16Array(this.data.buffer,this.write),this.write+=K.text.utf16.encode(a),this;throw new Error("Invalid encoding: "+e)}throw Error("Invalid parameter: "+t)};K.DataBuffer.prototype.putBuffer=function(t){return this.putBytes(t),t.clear(),this};K.DataBuffer.prototype.putString=function(t){return this.putBytes(t,"utf16")};K.DataBuffer.prototype.putInt16=function(t){return this.accommodate(2),this.data.setInt16(this.write,t),this.write+=2,this};K.DataBuffer.prototype.putInt24=function(t){return this.accommodate(3),this.data.setInt16(this.write,t>>8&65535),this.data.setInt8(this.write,t>>16&255),this.write+=3,this};K.DataBuffer.prototype.putInt32=function(t){return this.accommodate(4),this.data.setInt32(this.write,t),this.write+=4,this};K.DataBuffer.prototype.putInt16Le=function(t){return this.accommodate(2),this.data.setInt16(this.write,t,!0),this.write+=2,this};K.DataBuffer.prototype.putInt24Le=function(t){return this.accommodate(3),this.data.setInt8(this.write,t>>16&255),this.data.setInt16(this.write,t>>8&65535,!0),this.write+=3,this};K.DataBuffer.prototype.putInt32Le=function(t){return this.accommodate(4),this.data.setInt32(this.write,t,!0),this.write+=4,this};K.DataBuffer.prototype.putInt=function(t,e){Ru(e),this.accommodate(e/8);do e-=8,this.data.setInt8(this.write++,t>>e&255);while(e>0);return this};K.DataBuffer.prototype.putSignedInt=function(t,e){return Ru(e),this.accommodate(e/8),t<0&&(t+=2<<e-1),this.putInt(t,e)};K.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)};K.DataBuffer.prototype.getInt16=function(){var t=this.data.getInt16(this.read);return this.read+=2,t};K.DataBuffer.prototype.getInt24=function(){var t=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,t};K.DataBuffer.prototype.getInt32=function(){var t=this.data.getInt32(this.read);return this.read+=4,t};K.DataBuffer.prototype.getInt16Le=function(){var t=this.data.getInt16(this.read,!0);return this.read+=2,t};K.DataBuffer.prototype.getInt24Le=function(){var t=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,t};K.DataBuffer.prototype.getInt32Le=function(){var t=this.data.getInt32(this.read,!0);return this.read+=4,t};K.DataBuffer.prototype.getInt=function(t){Ru(t);var e=0;do e=(e<<8)+this.data.getInt8(this.read++),t-=8;while(t>0);return e};K.DataBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),r=2<<t-2;return e>=r&&(e-=r<<1),e};K.DataBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):t===0?e="":(e=this.read===0?this.data:this.data.slice(this.read),this.clear()),e};K.DataBuffer.prototype.bytes=function(t){return typeof t=="undefined"?this.data.slice(this.read):this.data.slice(this.read,this.read+t)};K.DataBuffer.prototype.at=function(t){return this.data.getUint8(this.read+t)};K.DataBuffer.prototype.setAt=function(t,e){return this.data.setUint8(t,e),this};K.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)};K.DataBuffer.prototype.copy=function(){return new K.DataBuffer(this)};K.DataBuffer.prototype.compact=function(){if(this.read>0){var t=new Uint8Array(this.data.buffer,this.read),e=new Uint8Array(t.byteLength);e.set(t),this.data=new DataView(e),this.write-=this.read,this.read=0}return this};K.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this};K.DataBuffer.prototype.truncate=function(t){return this.write=Math.max(0,this.length()-t),this.read=Math.min(this.read,this.write),this};K.DataBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.byteLength;++e){var r=this.data.getUint8(e);r<16&&(t+="0"),t+=r.toString(16)}return t};K.DataBuffer.prototype.toString=function(t){var e=new Uint8Array(this.data,this.read,this.length());if(t=t||"utf8",t==="binary"||t==="raw")return K.binary.raw.encode(e);if(t==="hex")return K.binary.hex.encode(e);if(t==="base64")return K.binary.base64.encode(e);if(t==="utf8")return K.text.utf8.decode(e);if(t==="utf16")return K.text.utf16.decode(e);throw new Error("Invalid encoding: "+t)};K.createBuffer=function(t,e){return e=e||"raw",t!==void 0&&e==="utf8"&&(t=K.encodeUtf8(t)),new K.ByteBuffer(t)};K.fillString=function(t,e){for(var r="";e>0;)e&1&&(r+=t),e>>>=1,e>0&&(t+=t);return r};K.xorBytes=function(t,e,r){for(var n="",i="",a="",s=0,l=0;r>0;--r,++s)i=t.charCodeAt(s)^e.charCodeAt(s),l>=10&&(n+=a,a="",l=0),a+=String.fromCharCode(i),++l;return n+=a,n};K.hexToBytes=function(t){var e="",r=0;for(t.length&!0&&(r=1,e+=String.fromCharCode(parseInt(t[0],16)));r<t.length;r+=2)e+=String.fromCharCode(parseInt(t.substr(r,2),16));return e};K.bytesToHex=function(t){return K.createBuffer(t).toHex()};K.int32ToBytes=function(t){return String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255)};var ls="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",us=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],AE="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";K.encode64=function(t,e){for(var r="",n="",i,a,s,l=0;l<t.length;)i=t.charCodeAt(l++),a=t.charCodeAt(l++),s=t.charCodeAt(l++),r+=ls.charAt(i>>2),r+=ls.charAt((i&3)<<4|a>>4),isNaN(a)?r+="==":(r+=ls.charAt((a&15)<<2|s>>6),r+=isNaN(s)?"=":ls.charAt(s&63)),e&&r.length>e&&(n+=r.substr(0,e)+`\r
`,r=r.substr(e));return n+=r,n};K.decode64=function(t){t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var e="",r,n,i,a,s=0;s<t.length;)r=us[t.charCodeAt(s++)-43],n=us[t.charCodeAt(s++)-43],i=us[t.charCodeAt(s++)-43],a=us[t.charCodeAt(s++)-43],e+=String.fromCharCode(r<<2|n>>4),i!==64&&(e+=String.fromCharCode((n&15)<<4|i>>2),a!==64&&(e+=String.fromCharCode((i&3)<<6|a)));return e};K.encodeUtf8=function(t){return unescape(encodeURIComponent(t))};K.decodeUtf8=function(t){return decodeURIComponent(escape(t))};K.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:SE.encode,decode:SE.decode}};K.binary.raw.encode=function(t){return String.fromCharCode.apply(null,t)};K.binary.raw.decode=function(t,e,r){var n=e;n||(n=new Uint8Array(t.length)),r=r||0;for(var i=r,a=0;a<t.length;++a)n[i++]=t.charCodeAt(a);return e?i-r:n};K.binary.hex.encode=K.bytesToHex;K.binary.hex.decode=function(t,e,r){var n=e;n||(n=new Uint8Array(Math.ceil(t.length/2))),r=r||0;var i=0,a=r;for(t.length&1&&(i=1,n[a++]=parseInt(t[0],16));i<t.length;i+=2)n[a++]=parseInt(t.substr(i,2),16);return e?a-r:n};K.binary.base64.encode=function(t,e){for(var r="",n="",i,a,s,l=0;l<t.byteLength;)i=t[l++],a=t[l++],s=t[l++],r+=ls.charAt(i>>2),r+=ls.charAt((i&3)<<4|a>>4),isNaN(a)?r+="==":(r+=ls.charAt((a&15)<<2|s>>6),r+=isNaN(s)?"=":ls.charAt(s&63)),e&&r.length>e&&(n+=r.substr(0,e)+`\r
`,r=r.substr(e));return n+=r,n};K.binary.base64.decode=function(t,e,r){var n=e;n||(n=new Uint8Array(Math.ceil(t.length/4)*3)),t=t.replace(/[^A-Za-z0-9\+\/\=]/g,""),r=r||0;for(var i,a,s,l,u=0,f=r;u<t.length;)i=us[t.charCodeAt(u++)-43],a=us[t.charCodeAt(u++)-43],s=us[t.charCodeAt(u++)-43],l=us[t.charCodeAt(u++)-43],n[f++]=i<<2|a>>4,s!==64&&(n[f++]=(a&15)<<4|s>>2,l!==64&&(n[f++]=(s&3)<<6|l));return e?f-r:n.subarray(0,f)};K.binary.base58.encode=function(t,e){return K.binary.baseN.encode(t,AE,e)};K.binary.base58.decode=function(t,e){return K.binary.baseN.decode(t,AE,e)};K.text={utf8:{},utf16:{}};K.text.utf8.encode=function(t,e,r){t=K.encodeUtf8(t);var n=e;n||(n=new Uint8Array(t.length)),r=r||0;for(var i=r,a=0;a<t.length;++a)n[i++]=t.charCodeAt(a);return e?i-r:n};K.text.utf8.decode=function(t){return K.decodeUtf8(String.fromCharCode.apply(null,t))};K.text.utf16.encode=function(t,e,r){var n=e;n||(n=new Uint8Array(t.length*2));var i=new Uint16Array(n.buffer);r=r||0;for(var a=r,s=r,l=0;l<t.length;++l)i[s++]=t.charCodeAt(l),a+=2;return e?a-r:n};K.text.utf16.decode=function(t){return String.fromCharCode.apply(null,new Uint16Array(t.buffer))};K.deflate=function(t,e,r){if(e=K.decode64(t.deflate(K.encode64(e)).rval),r){var n=2,i=e.charCodeAt(1);i&32&&(n=6),e=e.substring(n,e.length-4)}return e};K.inflate=function(t,e,r){var n=t.inflate(K.encode64(e)).rval;return n===null?null:K.decode64(n)};var $0=function(t,e,r){if(!t)throw new Error("WebStorage not available.");var n;if(r===null?n=t.removeItem(e):(r=K.encode64(JSON.stringify(r)),n=t.setItem(e,r)),typeof n!="undefined"&&n.rval!==!0){var i=new Error(n.error.message);throw i.id=n.error.id,i.name=n.error.name,i}},eg=function(t,e){if(!t)throw new Error("WebStorage not available.");var r=t.getItem(e);if(t.init)if(r.rval===null){if(r.error){var n=new Error(r.error.message);throw n.id=r.error.id,n.name=r.error.name,n}r=null}else r=r.rval;return r!==null&&(r=JSON.parse(K.decode64(r))),r},i6=function(t,e,r,n){var i=eg(t,e);i===null&&(i={}),i[r]=n,$0(t,e,i)},a6=function(t,e,r){var n=eg(t,e);return n!==null&&(n=r in n?n[r]:null),n},s6=function(t,e,r){var n=eg(t,e);if(n!==null&&r in n){delete n[r];var i=!0;for(var a in n){i=!1;break}i&&(n=null),$0(t,e,n)}},o6=function(t,e){$0(t,e,null)},gd=function(t,e,r){var n=null;typeof r=="undefined"&&(r=["web","flash"]);var i,a=!1,s=null;for(var l in r){i=r[l];try{if(i==="flash"||i==="both"){if(e[0]===null)throw new Error("Flash local storage not available.");n=t.apply(this,e),a=i==="flash"}(i==="web"||i==="both")&&(e[0]=localStorage,n=t.apply(this,e),a=!0)}catch(u){s=u}if(a)break}if(!a)throw s;return n};K.setItem=function(t,e,r,n,i){gd(i6,arguments,i)};K.getItem=function(t,e,r,n){return gd(a6,arguments,n)};K.removeItem=function(t,e,r,n){gd(s6,arguments,n)};K.clearItems=function(t,e,r){gd(o6,arguments,r)};K.isEmpty=function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0};K.format=function(t){for(var e=/%./g,r,n,i=0,a=[],s=0;r=e.exec(t);){n=t.substring(s,e.lastIndex-2),n.length>0&&a.push(n),s=e.lastIndex;var l=r[0][1];switch(l){case"s":case"o":i<arguments.length?a.push(arguments[i+++1]):a.push("<?>");break;case"%":a.push("%");break;default:a.push("<%"+l+"?>")}}return a.push(t.substring(s)),a.join("")};K.formatNumber=function(t,e,r,n){var i=t,a=isNaN(e=Math.abs(e))?2:e,s=r===void 0?",":r,l=n===void 0?".":n,u=i<0?"-":"",f=parseInt(i=Math.abs(+i||0).toFixed(a),10)+"",d=f.length>3?f.length%3:0;return u+(d?f.substr(0,d)+l:"")+f.substr(d).replace(/(\d{3})(?=\d)/g,"$1"+l)+(a?s+Math.abs(i-f).toFixed(a).slice(2):"")};K.formatSize=function(t){return t>=1073741824?t=K.formatNumber(t/1073741824,2,".","")+" GiB":t>=1048576?t=K.formatNumber(t/1048576,2,".","")+" MiB":t>=1024?t=K.formatNumber(t/1024,0)+" KiB":t=K.formatNumber(t,0)+" bytes",t};K.bytesFromIP=function(t){return t.indexOf(".")!==-1?K.bytesFromIPv4(t):t.indexOf(":")!==-1?K.bytesFromIPv6(t):null};K.bytesFromIPv4=function(t){if(t=t.split("."),t.length!==4)return null;for(var e=K.createBuffer(),r=0;r<t.length;++r){var n=parseInt(t[r],10);if(isNaN(n))return null;e.putByte(n)}return e.getBytes()};K.bytesFromIPv6=function(t){var e=0;t=t.split(":").filter(function(s){return s.length===0&&++e,!0});for(var r=(8-t.length+e)*2,n=K.createBuffer(),i=0;i<8;++i){if(!t[i]||t[i].length===0){n.fillWithByte(0,r),r=0;continue}var a=K.hexToBytes(t[i]);a.length<2&&n.putByte(0),n.putBytes(a)}return n.getBytes()};K.bytesToIP=function(t){return t.length===4?K.bytesToIPv4(t):t.length===16?K.bytesToIPv6(t):null};K.bytesToIPv4=function(t){if(t.length!==4)return null;for(var e=[],r=0;r<t.length;++r)e.push(t.charCodeAt(r));return e.join(".")};K.bytesToIPv6=function(t){if(t.length!==16)return null;for(var e=[],r=[],n=0,i=0;i<t.length;i+=2){for(var a=K.bytesToHex(t[i]+t[i+1]);a[0]==="0"&&a!=="0";)a=a.substr(1);if(a==="0"){var s=r[r.length-1],l=e.length;!s||l!==s.end+1?r.push({start:l,end:l}):(s.end=l,s.end-s.start>r[n].end-r[n].start&&(n=r.length-1))}e.push(a)}if(r.length>0){var u=r[n];u.end-u.start>0&&(e.splice(u.start,u.end-u.start+1,""),u.start===0&&e.unshift(""),u.end===7&&e.push(""))}return e.join(":")};K.estimateCores=function(t,e){if(typeof t=="function"&&(e=t,t={}),t=t||{},"cores"in K&&!t.update)return e(null,K.cores);if(typeof navigator!="undefined"&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return K.cores=navigator.hardwareConcurrency,e(null,K.cores);if(typeof Worker=="undefined")return K.cores=1,e(null,K.cores);if(typeof Blob=="undefined")return K.cores=2,e(null,K.cores);var r=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",function(s){for(var l=Date.now(),u=l+4;Date.now()<u;);self.postMessage({st:l,et:u})})}.toString(),")()"],{type:"application/javascript"}));n([],5,16);function n(s,l,u){if(l===0){var f=Math.floor(s.reduce(function(d,h){return d+h},0)/s.length);return K.cores=Math.max(1,f),URL.revokeObjectURL(r),e(null,K.cores)}i(u,function(d,h){s.push(a(u,h)),n(s,l-1,u)})}function i(s,l){for(var u=[],f=[],d=0;d<s;++d){var h=new Worker(r);h.addEventListener("message",function(g){if(f.push(g.data),f.length===s){for(var y=0;y<s;++y)u[y].terminate();l(null,f)}}),u.push(h)}for(var d=0;d<s;++d)u[d].postMessage(d)}function a(s,l){for(var u=[],f=0;f<s;++f)for(var d=l[f],h=u[f]=[],g=0;g<s;++g)if(f!==g){var y=l[g];(d.st>y.st&&d.st<y.et||y.st>d.st&&y.st<d.et)&&h.push(g)}return u.reduce(function(m,w){return Math.max(m,w.length)},0)}}});var md=de((d7,IE)=>{var Gr=vt();qt();IE.exports=Gr.cipher=Gr.cipher||{};Gr.cipher.algorithms=Gr.cipher.algorithms||{};Gr.cipher.createCipher=function(t,e){var r=t;if(typeof r=="string"&&(r=Gr.cipher.getAlgorithm(r),r&&(r=r())),!r)throw new Error("Unsupported algorithm: "+t);return new Gr.cipher.BlockCipher({algorithm:r,key:e,decrypt:!1})};Gr.cipher.createDecipher=function(t,e){var r=t;if(typeof r=="string"&&(r=Gr.cipher.getAlgorithm(r),r&&(r=r())),!r)throw new Error("Unsupported algorithm: "+t);return new Gr.cipher.BlockCipher({algorithm:r,key:e,decrypt:!0})};Gr.cipher.registerAlgorithm=function(t,e){t=t.toUpperCase(),Gr.cipher.algorithms[t]=e};Gr.cipher.getAlgorithm=function(t){return t=t.toUpperCase(),t in Gr.cipher.algorithms?Gr.cipher.algorithms[t]:null};var tg=Gr.cipher.BlockCipher=function(t){this.algorithm=t.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=t.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=t.decrypt,this.algorithm.initialize(t)};tg.prototype.start=function(t){t=t||{};var e={};for(var r in t)e[r]=t[r];e.decrypt=this._decrypt,this._finish=!1,this._input=Gr.util.createBuffer(),this.output=t.output||Gr.util.createBuffer(),this.mode.start(e)};tg.prototype.update=function(t){for(t&&this._input.putBuffer(t);!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish;);this._input.compact()};tg.prototype.finish=function(t){t&&(this.mode.name==="ECB"||this.mode.name==="CBC")&&(this.mode.pad=function(r){return t(this.blockSize,r,!1)},this.mode.unpad=function(r){return t(this.blockSize,r,!0)});var e={};return e.decrypt=this._decrypt,e.overflow=this._input.length()%this.blockSize,!(!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,e)||(this._finish=!0,this.update(),this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,e))||this.mode.afterFinish&&!this.mode.afterFinish(this.output,e))}});var ng=de((h7,NE)=>{var Vr=vt();qt();Vr.cipher=Vr.cipher||{};var xt=NE.exports=Vr.cipher.modes=Vr.cipher.modes||{};xt.ecb=function(t){t=t||{},this.name="ECB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};xt.ecb.prototype.start=function(t){};xt.ecb.prototype.encrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._outBlock[n])};xt.ecb.prototype.decrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._outBlock[n])};xt.ecb.prototype.pad=function(t,e){var r=t.length()===this.blockSize?this.blockSize:this.blockSize-t.length();return t.fillWithByte(r,r),!0};xt.ecb.prototype.unpad=function(t,e){if(e.overflow>0)return!1;var r=t.length(),n=t.at(r-1);return n>this.blockSize<<2?!1:(t.truncate(n),!0)};xt.cbc=function(t){t=t||{},this.name="CBC",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};xt.cbc.prototype.start=function(t){if(t.iv===null){if(!this._prev)throw new Error("Invalid IV parameter.");this._iv=this._prev.slice(0)}else if("iv"in t)this._iv=yd(t.iv,this.blockSize),this._prev=this._iv.slice(0);else throw new Error("Invalid IV parameter.")};xt.cbc.prototype.encrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=this._prev[n]^t.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._outBlock[n]);this._prev=this._outBlock};xt.cbc.prototype.decrypt=function(t,e,r){if(t.length()<this.blockSize&&!(r&&t.length()>0))return!0;for(var n=0;n<this._ints;++n)this._inBlock[n]=t.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var n=0;n<this._ints;++n)e.putInt32(this._prev[n]^this._outBlock[n]);this._prev=this._inBlock.slice(0)};xt.cbc.prototype.pad=function(t,e){var r=t.length()===this.blockSize?this.blockSize:this.blockSize-t.length();return t.fillWithByte(r,r),!0};xt.cbc.prototype.unpad=function(t,e){if(e.overflow>0)return!1;var r=t.length(),n=t.at(r-1);return n>this.blockSize<<2?!1:(t.truncate(n),!0)};xt.cfb=function(t){t=t||{},this.name="CFB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialBlock=new Array(this._ints),this._partialOutput=Vr.util.createBuffer(),this._partialBytes=0};xt.cfb.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=yd(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};xt.cfb.prototype.encrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)this._inBlock[i]=t.getInt32()^this._outBlock[i],e.putInt32(this._inBlock[i]);return}var a=(this.blockSize-n)%this.blockSize;a>0&&(a=this.blockSize-a),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialBlock[i]=t.getInt32()^this._outBlock[i],this._partialOutput.putInt32(this._partialBlock[i]);if(a>0)t.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),a>0&&!r)return e.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=a,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};xt.cfb.prototype.decrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)this._inBlock[i]=t.getInt32(),e.putInt32(this._inBlock[i]^this._outBlock[i]);return}var a=(this.blockSize-n)%this.blockSize;a>0&&(a=this.blockSize-a),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialBlock[i]=t.getInt32(),this._partialOutput.putInt32(this._partialBlock[i]^this._outBlock[i]);if(a>0)t.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),a>0&&!r)return e.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=a,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};xt.ofb=function(t){t=t||{},this.name="OFB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=Vr.util.createBuffer(),this._partialBytes=0};xt.ofb.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=yd(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};xt.ofb.prototype.encrypt=function(t,e,r){var n=t.length();if(t.length()===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)e.putInt32(t.getInt32()^this._outBlock[i]),this._inBlock[i]=this._outBlock[i];return}var a=(this.blockSize-n)%this.blockSize;a>0&&(a=this.blockSize-a),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(t.getInt32()^this._outBlock[i]);if(a>0)t.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._outBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),a>0&&!r)return e.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=a,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0};xt.ofb.prototype.decrypt=xt.ofb.prototype.encrypt;xt.ctr=function(t){t=t||{},this.name="CTR",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=Vr.util.createBuffer(),this._partialBytes=0};xt.ctr.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=yd(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};xt.ctr.prototype.encrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize)for(var i=0;i<this._ints;++i)e.putInt32(t.getInt32()^this._outBlock[i]);else{var a=(this.blockSize-n)%this.blockSize;a>0&&(a=this.blockSize-a),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(t.getInt32()^this._outBlock[i]);if(a>0&&(t.read-=this.blockSize),this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),a>0&&!r)return e.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=a,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}vd(this._inBlock)};xt.ctr.prototype.decrypt=xt.ctr.prototype.encrypt;xt.gcm=function(t){t=t||{},this.name="GCM",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints),this._partialOutput=Vr.util.createBuffer(),this._partialBytes=0,this._R=3774873600};xt.gcm.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");var e=Vr.util.createBuffer(t.iv);this._cipherLength=0;var r;if("additionalData"in t?r=Vr.util.createBuffer(t.additionalData):r=Vr.util.createBuffer(),"tagLength"in t?this._tagLength=t.tagLength:this._tagLength=128,this._tag=null,t.decrypt&&(this._tag=Vr.util.createBuffer(t.tag).getBytes(),this._tag.length!==this._tagLength/8))throw new Error("Authentication tag does not match tag length.");this._hashBlock=new Array(this._ints),this.tag=null,this._hashSubkey=new Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var n=e.length();if(n===12)this._j0=[e.getInt32(),e.getInt32(),e.getInt32(),1];else{for(this._j0=[0,0,0,0];e.length()>0;)this._j0=this.ghash(this._hashSubkey,this._j0,[e.getInt32(),e.getInt32(),e.getInt32(),e.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(rg(n*8)))}this._inBlock=this._j0.slice(0),vd(this._inBlock),this._partialBytes=0,r=Vr.util.createBuffer(r),this._aDataLength=rg(r.length()*8);var i=r.length()%this.blockSize;for(i&&r.fillWithByte(0,this.blockSize-i),this._s=[0,0,0,0];r.length()>0;)this._s=this.ghash(this._hashSubkey,this._s,[r.getInt32(),r.getInt32(),r.getInt32(),r.getInt32()])};xt.gcm.prototype.encrypt=function(t,e,r){var n=t.length();if(n===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&n>=this.blockSize){for(var i=0;i<this._ints;++i)e.putInt32(this._outBlock[i]^=t.getInt32());this._cipherLength+=this.blockSize}else{var a=(this.blockSize-n)%this.blockSize;a>0&&(a=this.blockSize-a),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(t.getInt32()^this._outBlock[i]);if(a<=0||r){if(r){var s=n%this.blockSize;this._cipherLength+=s,this._partialOutput.truncate(this.blockSize-s)}else this._cipherLength+=this.blockSize;for(var i=0;i<this._ints;++i)this._outBlock[i]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),a>0&&!r)return t.read-=this.blockSize,e.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=a,!0;e.putBytes(this._partialOutput.getBytes(n-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),vd(this._inBlock)};xt.gcm.prototype.decrypt=function(t,e,r){var n=t.length();if(n<this.blockSize&&!(r&&n>0))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),vd(this._inBlock),this._hashBlock[0]=t.getInt32(),this._hashBlock[1]=t.getInt32(),this._hashBlock[2]=t.getInt32(),this._hashBlock[3]=t.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var i=0;i<this._ints;++i)e.putInt32(this._outBlock[i]^this._hashBlock[i]);n<this.blockSize?this._cipherLength+=n%this.blockSize:this._cipherLength+=this.blockSize};xt.gcm.prototype.afterFinish=function(t,e){var r=!0;e.decrypt&&e.overflow&&t.truncate(this.blockSize-e.overflow),this.tag=Vr.util.createBuffer();var n=this._aDataLength.concat(rg(this._cipherLength*8));this._s=this.ghash(this._hashSubkey,this._s,n);var i=[];this.cipher.encrypt(this._j0,i);for(var a=0;a<this._ints;++a)this.tag.putInt32(this._s[a]^i[a]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),e.decrypt&&this.tag.bytes()!==this._tag&&(r=!1),r};xt.gcm.prototype.multiply=function(t,e){for(var r=[0,0,0,0],n=e.slice(0),i=0;i<128;++i){var a=t[i/32|0]&1<<31-i%32;a&&(r[0]^=n[0],r[1]^=n[1],r[2]^=n[2],r[3]^=n[3]),this.pow(n,n)}return r};xt.gcm.prototype.pow=function(t,e){for(var r=t[3]&1,n=3;n>0;--n)e[n]=t[n]>>>1|(t[n-1]&1)<<31;e[0]=t[0]>>>1,r&&(e[0]^=this._R)};xt.gcm.prototype.tableMultiply=function(t){for(var e=[0,0,0,0],r=0;r<32;++r){var n=r/8|0,i=t[n]>>>(7-r%8)*4&15,a=this._m[r][i];e[0]^=a[0],e[1]^=a[1],e[2]^=a[2],e[3]^=a[3]}return e};xt.gcm.prototype.ghash=function(t,e,r){return e[0]^=r[0],e[1]^=r[1],e[2]^=r[2],e[3]^=r[3],this.tableMultiply(e)};xt.gcm.prototype.generateHashTable=function(t,e){for(var r=8/e,n=4*r,i=16*r,a=new Array(i),s=0;s<i;++s){var l=[0,0,0,0],u=s/n|0,f=(n-1-s%n)*e;l[u]=1<<e-1<<f,a[s]=this.generateSubHashTable(this.multiply(l,t),e)}return a};xt.gcm.prototype.generateSubHashTable=function(t,e){var r=1<<e,n=r>>>1,i=new Array(r);i[n]=t.slice(0);for(var a=n>>>1;a>0;)this.pow(i[2*a],i[a]=[]),a>>=1;for(a=2;a<n;){for(var s=1;s<a;++s){var l=i[a],u=i[s];i[a+s]=[l[0]^u[0],l[1]^u[1],l[2]^u[2],l[3]^u[3]]}a*=2}for(i[0]=[0,0,0,0],a=n+1;a<r;++a){var f=i[a^n];i[a]=[t[0]^f[0],t[1]^f[1],t[2]^f[2],t[3]^f[3]]}return i};function yd(t,e){if(typeof t=="string"&&(t=Vr.util.createBuffer(t)),Vr.util.isArray(t)&&t.length>4){var r=t;t=Vr.util.createBuffer();for(var n=0;n<r.length;++n)t.putByte(r[n])}if(t.length()<e)throw new Error("Invalid IV length; got "+t.length()+" bytes and expected "+e+" bytes.");if(!Vr.util.isArray(t)){for(var i=[],a=e/4,n=0;n<a;++n)i.push(t.getInt32());t=i}return t}function vd(t){t[t.length-1]=t[t.length-1]+1&4294967295}function rg(t){return[t/4294967296|0,t&4294967295]}});var cs=de((p7,OE)=>{var ir=vt();md();ng();qt();OE.exports=ir.aes=ir.aes||{};ir.aes.startEncrypting=function(t,e,r,n){var i=_d({key:t,output:r,decrypt:!1,mode:n});return i.start(e),i};ir.aes.createEncryptionCipher=function(t,e){return _d({key:t,output:null,decrypt:!1,mode:e})};ir.aes.startDecrypting=function(t,e,r,n){var i=_d({key:t,output:r,decrypt:!0,mode:n});return i.start(e),i};ir.aes.createDecryptionCipher=function(t,e){return _d({key:t,output:null,decrypt:!0,mode:e})};ir.aes.Algorithm=function(t,e){ig||DE();var r=this;r.name=t,r.mode=new e({blockSize:16,cipher:{encrypt:function(n,i){return sg(r._w,n,i,!1)},decrypt:function(n,i){return sg(r._w,n,i,!0)}}}),r._init=!1};ir.aes.Algorithm.prototype.initialize=function(t){if(!this._init){var e=t.key,r;if(typeof e=="string"&&(e.length===16||e.length===24||e.length===32))e=ir.util.createBuffer(e);else if(ir.util.isArray(e)&&(e.length===16||e.length===24||e.length===32)){r=e,e=ir.util.createBuffer();for(var n=0;n<r.length;++n)e.putByte(r[n])}if(!ir.util.isArray(e)){r=e,e=[];var i=r.length();if(i===16||i===24||i===32){i=i>>>2;for(var n=0;n<i;++n)e.push(r.getInt32())}}if(!ir.util.isArray(e)||!(e.length===4||e.length===6||e.length===8))throw new Error("Invalid key parameter.");var a=this.mode.name,s=["CFB","OFB","CTR","GCM"].indexOf(a)!==-1;this._w=BE(e,t.decrypt&&!s),this._init=!0}};ir.aes._expandKey=function(t,e){return ig||DE(),BE(t,e)};ir.aes._updateBlock=sg;ol("AES-ECB",ir.cipher.modes.ecb);ol("AES-CBC",ir.cipher.modes.cbc);ol("AES-CFB",ir.cipher.modes.cfb);ol("AES-OFB",ir.cipher.modes.ofb);ol("AES-CTR",ir.cipher.modes.ctr);ol("AES-GCM",ir.cipher.modes.gcm);function ol(t,e){var r=function(){return new ir.aes.Algorithm(t,e)};ir.cipher.registerAlgorithm(t,r)}var ig=!1,ll=4,En,ag,RE,Ws,Ti;function DE(){ig=!0,RE=[0,1,2,4,8,16,32,64,128,27,54];for(var t=new Array(256),e=0;e<128;++e)t[e]=e<<1,t[e+128]=e+128<<1^283;En=new Array(256),ag=new Array(256),Ws=new Array(4),Ti=new Array(4);for(var e=0;e<4;++e)Ws[e]=new Array(256),Ti[e]=new Array(256);for(var r=0,n=0,i,a,s,l,u,f,d,e=0;e<256;++e){l=n^n<<1^n<<2^n<<3^n<<4,l=l>>8^l&255^99,En[r]=l,ag[l]=r,u=t[l],i=t[r],a=t[i],s=t[a],f=u<<24^l<<16^l<<8^(l^u),d=(i^a^s)<<24^(r^s)<<16^(r^a^s)<<8^(r^i^s);for(var h=0;h<4;++h)Ws[h][r]=f,Ti[h][l]=d,f=f<<24|f>>>8,d=d<<24|d>>>8;r===0?r=n=1:(r=i^t[t[t[i^s]]],n^=t[t[n]])}}function BE(t,e){for(var r=t.slice(0),n,i=1,a=r.length,s=a+6+1,l=ll*s,u=a;u<l;++u)n=r[u-1],u%a==0?(n=En[n>>>16&255]<<24^En[n>>>8&255]<<16^En[n&255]<<8^En[n>>>24]^RE[i]<<24,i++):a>6&&u%a==4&&(n=En[n>>>24]<<24^En[n>>>16&255]<<16^En[n>>>8&255]<<8^En[n&255]),r[u]=r[u-a]^n;if(e){var f,d=Ti[0],h=Ti[1],g=Ti[2],y=Ti[3],m=r.slice(0);l=r.length;for(var u=0,w=l-ll;u<l;u+=ll,w-=ll)if(u===0||u===l-ll)m[u]=r[w],m[u+1]=r[w+3],m[u+2]=r[w+2],m[u+3]=r[w+1];else for(var _=0;_<ll;++_)f=r[w+_],m[u+(3&-_)]=d[En[f>>>24]]^h[En[f>>>16&255]]^g[En[f>>>8&255]]^y[En[f&255]];r=m}return r}function sg(t,e,r,n){var i=t.length/4-1,a,s,l,u,f;n?(a=Ti[0],s=Ti[1],l=Ti[2],u=Ti[3],f=ag):(a=Ws[0],s=Ws[1],l=Ws[2],u=Ws[3],f=En);var d,h,g,y,m,w,_;d=e[0]^t[0],h=e[n?3:1]^t[1],g=e[2]^t[2],y=e[n?1:3]^t[3];for(var E=3,b=1;b<i;++b)m=a[d>>>24]^s[h>>>16&255]^l[g>>>8&255]^u[y&255]^t[++E],w=a[h>>>24]^s[g>>>16&255]^l[y>>>8&255]^u[d&255]^t[++E],_=a[g>>>24]^s[y>>>16&255]^l[d>>>8&255]^u[h&255]^t[++E],y=a[y>>>24]^s[d>>>16&255]^l[h>>>8&255]^u[g&255]^t[++E],d=m,h=w,g=_;r[0]=f[d>>>24]<<24^f[h>>>16&255]<<16^f[g>>>8&255]<<8^f[y&255]^t[++E],r[n?3:1]=f[h>>>24]<<24^f[g>>>16&255]<<16^f[y>>>8&255]<<8^f[d&255]^t[++E],r[2]=f[g>>>24]<<24^f[y>>>16&255]<<16^f[d>>>8&255]<<8^f[h&255]^t[++E],r[n?1:3]=f[y>>>24]<<24^f[d>>>16&255]<<16^f[h>>>8&255]<<8^f[g&255]^t[++E]}function _d(t){t=t||{};var e=(t.mode||"CBC").toUpperCase(),r="AES-"+e,n;t.decrypt?n=ir.cipher.createDecipher(r,t.key):n=ir.cipher.createCipher(r,t.key);var i=n.start;return n.start=function(a,s){var l=null;s instanceof ir.util.ByteBuffer&&(l=s,s={}),s=s||{},s.output=l,s.iv=a,i.call(n,s)},n}});var fs=de((g7,LE)=>{var Du=vt();Du.pki=Du.pki||{};var og=LE.exports=Du.pki.oids=Du.oids=Du.oids||{};function Ee(t,e){og[t]=e,og[e]=t}function jt(t,e){og[t]=e}Ee("1.2.840.113549.1.1.1","rsaEncryption");Ee("1.2.840.113549.1.1.4","md5WithRSAEncryption");Ee("1.2.840.113549.1.1.5","sha1WithRSAEncryption");Ee("1.2.840.113549.1.1.7","RSAES-OAEP");Ee("1.2.840.113549.1.1.8","mgf1");Ee("1.2.840.113549.1.1.9","pSpecified");Ee("1.2.840.113549.1.1.10","RSASSA-PSS");Ee("1.2.840.113549.1.1.11","sha256WithRSAEncryption");Ee("1.2.840.113549.1.1.12","sha384WithRSAEncryption");Ee("1.2.840.113549.1.1.13","sha512WithRSAEncryption");Ee("1.3.101.112","EdDSA25519");Ee("1.2.840.10040.4.3","dsa-with-sha1");Ee("1.3.14.3.2.7","desCBC");Ee("1.3.14.3.2.26","sha1");Ee("1.3.14.3.2.29","sha1WithRSASignature");Ee("2.16.840.1.101.3.4.2.1","sha256");Ee("2.16.840.1.101.3.4.2.2","sha384");Ee("2.16.840.1.101.3.4.2.3","sha512");Ee("2.16.840.1.101.3.4.2.4","sha224");Ee("2.16.840.1.101.3.4.2.5","sha512-224");Ee("2.16.840.1.101.3.4.2.6","sha512-256");Ee("1.2.840.113549.2.2","md2");Ee("1.2.840.113549.2.5","md5");Ee("1.2.840.113549.1.7.1","data");Ee("1.2.840.113549.1.7.2","signedData");Ee("1.2.840.113549.1.7.3","envelopedData");Ee("1.2.840.113549.1.7.4","signedAndEnvelopedData");Ee("1.2.840.113549.1.7.5","digestedData");Ee("1.2.840.113549.1.7.6","encryptedData");Ee("1.2.840.113549.1.9.1","emailAddress");Ee("1.2.840.113549.1.9.2","unstructuredName");Ee("1.2.840.113549.1.9.3","contentType");Ee("1.2.840.113549.1.9.4","messageDigest");Ee("1.2.840.113549.1.9.5","signingTime");Ee("1.2.840.113549.1.9.6","counterSignature");Ee("1.2.840.113549.1.9.7","challengePassword");Ee("1.2.840.113549.1.9.8","unstructuredAddress");Ee("1.2.840.113549.1.9.14","extensionRequest");Ee("1.2.840.113549.1.9.20","friendlyName");Ee("1.2.840.113549.1.9.21","localKeyId");Ee("1.2.840.113549.1.9.22.1","x509Certificate");Ee("1.2.840.113549.1.12.10.1.1","keyBag");Ee("1.2.840.113549.1.12.10.1.2","pkcs8ShroudedKeyBag");Ee("1.2.840.113549.1.12.10.1.3","certBag");Ee("1.2.840.113549.1.12.10.1.4","crlBag");Ee("1.2.840.113549.1.12.10.1.5","secretBag");Ee("1.2.840.113549.1.12.10.1.6","safeContentsBag");Ee("1.2.840.113549.1.5.13","pkcs5PBES2");Ee("1.2.840.113549.1.5.12","pkcs5PBKDF2");Ee("1.2.840.113549.1.12.1.1","pbeWithSHAAnd128BitRC4");Ee("1.2.840.113549.1.12.1.2","pbeWithSHAAnd40BitRC4");Ee("1.2.840.113549.1.12.1.3","pbeWithSHAAnd3-KeyTripleDES-CBC");Ee("1.2.840.113549.1.12.1.4","pbeWithSHAAnd2-KeyTripleDES-CBC");Ee("1.2.840.113549.1.12.1.5","pbeWithSHAAnd128BitRC2-CBC");Ee("1.2.840.113549.1.12.1.6","pbewithSHAAnd40BitRC2-CBC");Ee("1.2.840.113549.2.7","hmacWithSHA1");Ee("1.2.840.113549.2.8","hmacWithSHA224");Ee("1.2.840.113549.2.9","hmacWithSHA256");Ee("1.2.840.113549.2.10","hmacWithSHA384");Ee("1.2.840.113549.2.11","hmacWithSHA512");Ee("1.2.840.113549.3.7","des-EDE3-CBC");Ee("2.16.840.1.101.3.4.1.2","aes128-CBC");Ee("2.16.840.1.101.3.4.1.22","aes192-CBC");Ee("2.16.840.1.101.3.4.1.42","aes256-CBC");Ee("2.5.4.3","commonName");Ee("2.5.4.4","surname");Ee("2.5.4.5","serialNumber");Ee("2.5.4.6","countryName");Ee("2.5.4.7","localityName");Ee("2.5.4.8","stateOrProvinceName");Ee("2.5.4.9","streetAddress");Ee("2.5.4.10","organizationName");Ee("2.5.4.11","organizationalUnitName");Ee("2.5.4.12","title");Ee("2.5.4.13","description");Ee("2.5.4.15","businessCategory");Ee("2.5.4.17","postalCode");Ee("2.5.4.42","givenName");Ee("1.3.6.1.4.1.311.60.2.1.2","jurisdictionOfIncorporationStateOrProvinceName");Ee("1.3.6.1.4.1.311.60.2.1.3","jurisdictionOfIncorporationCountryName");Ee("2.16.840.1.113730.1.1","nsCertType");Ee("2.16.840.1.113730.1.13","nsComment");jt("2.5.29.1","authorityKeyIdentifier");jt("2.5.29.2","keyAttributes");jt("2.5.29.3","certificatePolicies");jt("2.5.29.4","keyUsageRestriction");jt("2.5.29.5","policyMapping");jt("2.5.29.6","subtreesConstraint");jt("2.5.29.7","subjectAltName");jt("2.5.29.8","issuerAltName");jt("2.5.29.9","subjectDirectoryAttributes");jt("2.5.29.10","basicConstraints");jt("2.5.29.11","nameConstraints");jt("2.5.29.12","policyConstraints");jt("2.5.29.13","basicConstraints");Ee("2.5.29.14","subjectKeyIdentifier");Ee("2.5.29.15","keyUsage");jt("2.5.29.16","privateKeyUsagePeriod");Ee("2.5.29.17","subjectAltName");Ee("2.5.29.18","issuerAltName");Ee("2.5.29.19","basicConstraints");jt("2.5.29.20","cRLNumber");jt("2.5.29.21","cRLReason");jt("2.5.29.22","expirationDate");jt("2.5.29.23","instructionCode");jt("2.5.29.24","invalidityDate");jt("2.5.29.25","cRLDistributionPoints");jt("2.5.29.26","issuingDistributionPoint");jt("2.5.29.27","deltaCRLIndicator");jt("2.5.29.28","issuingDistributionPoint");jt("2.5.29.29","certificateIssuer");jt("2.5.29.30","nameConstraints");Ee("2.5.29.31","cRLDistributionPoints");Ee("2.5.29.32","certificatePolicies");jt("2.5.29.33","policyMappings");jt("2.5.29.34","policyConstraints");Ee("2.5.29.35","authorityKeyIdentifier");jt("2.5.29.36","policyConstraints");Ee("2.5.29.37","extKeyUsage");jt("2.5.29.46","freshestCRL");jt("2.5.29.54","inhibitAnyPolicy");Ee("1.3.6.1.4.1.11129.2.4.2","timestampList");Ee("1.3.6.1.5.5.7.1.1","authorityInfoAccess");Ee("1.3.6.1.5.5.7.3.1","serverAuth");Ee("1.3.6.1.5.5.7.3.2","clientAuth");Ee("1.3.6.1.5.5.7.3.3","codeSigning");Ee("1.3.6.1.5.5.7.3.4","emailProtection");Ee("1.3.6.1.5.5.7.3.8","timeStamping")});var Si=de((m7,ME)=>{var lr=vt();qt();fs();var ke=ME.exports=lr.asn1=lr.asn1||{};ke.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192};ke.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30};ke.create=function(t,e,r,n,i){if(lr.util.isArray(n)){for(var a=[],s=0;s<n.length;++s)n[s]!==void 0&&a.push(n[s]);n=a}var l={tagClass:t,type:e,constructed:r,composed:r||lr.util.isArray(n),value:n};return i&&"bitStringContents"in i&&(l.bitStringContents=i.bitStringContents,l.original=ke.copy(l)),l};ke.copy=function(t,e){var r;if(lr.util.isArray(t)){r=[];for(var n=0;n<t.length;++n)r.push(ke.copy(t[n],e));return r}return typeof t=="string"?t:(r={tagClass:t.tagClass,type:t.type,constructed:t.constructed,composed:t.composed,value:ke.copy(t.value,e)},e&&!e.excludeBitStringContents&&(r.bitStringContents=t.bitStringContents),r)};ke.equals=function(t,e,r){if(lr.util.isArray(t)){if(!lr.util.isArray(e)||t.length!==e.length)return!1;for(var n=0;n<t.length;++n)if(!ke.equals(t[n],e[n]))return!1;return!0}if(typeof t!=typeof e)return!1;if(typeof t=="string")return t===e;var i=t.tagClass===e.tagClass&&t.type===e.type&&t.constructed===e.constructed&&t.composed===e.composed&&ke.equals(t.value,e.value);return r&&r.includeBitStringContents&&(i=i&&t.bitStringContents===e.bitStringContents),i};ke.getBerValueLength=function(t){var e=t.getByte();if(e!==128){var r,n=e&128;return n?r=t.getInt((e&127)<<3):r=e,r}};function Bu(t,e,r){if(r>e){var n=new Error("Too few bytes to parse DER.");throw n.available=t.length(),n.remaining=e,n.requested=r,n}}var l6=function(t,e){var r=t.getByte();if(e--,r!==128){var n,i=r&128;if(!i)n=r;else{var a=r&127;Bu(t,e,a),n=t.getInt(a<<3)}if(n<0)throw new Error("Negative length: "+n);return n}};ke.fromDer=function(t,e){e===void 0&&(e={strict:!0,parseAllBytes:!0,decodeBitStrings:!0}),typeof e=="boolean"&&(e={strict:e,parseAllBytes:!0,decodeBitStrings:!0}),"strict"in e||(e.strict=!0),"parseAllBytes"in e||(e.parseAllBytes=!0),"decodeBitStrings"in e||(e.decodeBitStrings=!0),typeof t=="string"&&(t=lr.util.createBuffer(t));var r=t.length(),n=wd(t,t.length(),0,e);if(e.parseAllBytes&&t.length()!==0){var i=new Error("Unparsed DER bytes remain after ASN.1 parsing.");throw i.byteCount=r,i.remaining=t.length(),i}return n};function wd(t,e,r,n){var i;Bu(t,e,2);var a=t.getByte();e--;var s=a&192,l=a&31;i=t.length();var u=l6(t,e);if(e-=i-t.length(),u!==void 0&&u>e){if(n.strict){var f=new Error("Too few bytes to read ASN.1 value.");throw f.available=t.length(),f.remaining=e,f.requested=u,f}u=e}var d,h,g=(a&32)==32;if(g)if(d=[],u===void 0)for(;;){if(Bu(t,e,2),t.bytes(2)===String.fromCharCode(0,0)){t.getBytes(2),e-=2;break}i=t.length(),d.push(wd(t,e,r+1,n)),e-=i-t.length()}else for(;u>0;)i=t.length(),d.push(wd(t,u,r+1,n)),e-=i-t.length(),u-=i-t.length();if(d===void 0&&s===ke.Class.UNIVERSAL&&l===ke.Type.BITSTRING&&(h=t.bytes(u)),d===void 0&&n.decodeBitStrings&&s===ke.Class.UNIVERSAL&&l===ke.Type.BITSTRING&&u>1){var y=t.read,m=e,w=0;if(l===ke.Type.BITSTRING&&(Bu(t,e,1),w=t.getByte(),e--),w===0)try{i=t.length();var _={strict:!0,decodeBitStrings:!0},E=wd(t,e,r+1,_),b=i-t.length();e-=b,l==ke.Type.BITSTRING&&b++;var k=E.tagClass;b===u&&(k===ke.Class.UNIVERSAL||k===ke.Class.CONTEXT_SPECIFIC)&&(d=[E])}catch(R){}d===void 0&&(t.read=y,e=m)}if(d===void 0){if(u===void 0){if(n.strict)throw new Error("Non-constructed ASN.1 object of indefinite length.");u=e}if(l===ke.Type.BMPSTRING)for(d="";u>0;u-=2)Bu(t,e,2),d+=String.fromCharCode(t.getInt16()),e-=2;else d=t.getBytes(u),e-=u}var O=h===void 0?null:{bitStringContents:h};return ke.create(s,l,g,d,O)}ke.toDer=function(t){var e=lr.util.createBuffer(),r=t.tagClass|t.type,n=lr.util.createBuffer(),i=!1;if("bitStringContents"in t&&(i=!0,t.original&&(i=ke.equals(t,t.original))),i)n.putBytes(t.bitStringContents);else if(t.composed){t.constructed?r|=32:n.putByte(0);for(var a=0;a<t.value.length;++a)t.value[a]!==void 0&&n.putBuffer(ke.toDer(t.value[a]))}else if(t.type===ke.Type.BMPSTRING)for(var a=0;a<t.value.length;++a)n.putInt16(t.value.charCodeAt(a));else t.type===ke.Type.INTEGER&&t.value.length>1&&(t.value.charCodeAt(0)===0&&(t.value.charCodeAt(1)&128)==0||t.value.charCodeAt(0)===255&&(t.value.charCodeAt(1)&128)==128)?n.putBytes(t.value.substr(1)):n.putBytes(t.value);if(e.putByte(r),n.length()<=127)e.putByte(n.length()&127);else{var s=n.length(),l="";do l+=String.fromCharCode(s&255),s=s>>>8;while(s>0);e.putByte(l.length|128);for(var a=l.length-1;a>=0;--a)e.putByte(l.charCodeAt(a))}return e.putBuffer(n),e};ke.oidToDer=function(t){var e=t.split("."),r=lr.util.createBuffer();r.putByte(40*parseInt(e[0],10)+parseInt(e[1],10));for(var n,i,a,s,l=2;l<e.length;++l){n=!0,i=[],a=parseInt(e[l],10);do s=a&127,a=a>>>7,n||(s|=128),i.push(s),n=!1;while(a>0);for(var u=i.length-1;u>=0;--u)r.putByte(i[u])}return r};ke.derToOid=function(t){var e;typeof t=="string"&&(t=lr.util.createBuffer(t));var r=t.getByte();e=Math.floor(r/40)+"."+r%40;for(var n=0;t.length()>0;)r=t.getByte(),n=n<<7,r&128?n+=r&127:(e+="."+(n+r),n=0);return e};ke.utcTimeToDate=function(t){var e=new Date,r=parseInt(t.substr(0,2),10);r=r>=50?1900+r:2e3+r;var n=parseInt(t.substr(2,2),10)-1,i=parseInt(t.substr(4,2),10),a=parseInt(t.substr(6,2),10),s=parseInt(t.substr(8,2),10),l=0;if(t.length>11){var u=t.charAt(10),f=10;u!=="+"&&u!=="-"&&(l=parseInt(t.substr(10,2),10),f+=2)}if(e.setUTCFullYear(r,n,i),e.setUTCHours(a,s,l,0),f&&(u=t.charAt(f),u==="+"||u==="-")){var d=parseInt(t.substr(f+1,2),10),h=parseInt(t.substr(f+4,2),10),g=d*60+h;g*=6e4,u==="+"?e.setTime(+e-g):e.setTime(+e+g)}return e};ke.generalizedTimeToDate=function(t){var e=new Date,r=parseInt(t.substr(0,4),10),n=parseInt(t.substr(4,2),10)-1,i=parseInt(t.substr(6,2),10),a=parseInt(t.substr(8,2),10),s=parseInt(t.substr(10,2),10),l=parseInt(t.substr(12,2),10),u=0,f=0,d=!1;t.charAt(t.length-1)==="Z"&&(d=!0);var h=t.length-5,g=t.charAt(h);if(g==="+"||g==="-"){var y=parseInt(t.substr(h+1,2),10),m=parseInt(t.substr(h+4,2),10);f=y*60+m,f*=6e4,g==="+"&&(f*=-1),d=!0}return t.charAt(14)==="."&&(u=parseFloat(t.substr(14),10)*1e3),d?(e.setUTCFullYear(r,n,i),e.setUTCHours(a,s,l,u),e.setTime(+e+f)):(e.setFullYear(r,n,i),e.setHours(a,s,l,u)),e};ke.dateToUtcTime=function(t){if(typeof t=="string")return t;var e="",r=[];r.push((""+t.getUTCFullYear()).substr(2)),r.push(""+(t.getUTCMonth()+1)),r.push(""+t.getUTCDate()),r.push(""+t.getUTCHours()),r.push(""+t.getUTCMinutes()),r.push(""+t.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(e+="0"),e+=r[n];return e+="Z",e};ke.dateToGeneralizedTime=function(t){if(typeof t=="string")return t;var e="",r=[];r.push(""+t.getUTCFullYear()),r.push(""+(t.getUTCMonth()+1)),r.push(""+t.getUTCDate()),r.push(""+t.getUTCHours()),r.push(""+t.getUTCMinutes()),r.push(""+t.getUTCSeconds());for(var n=0;n<r.length;++n)r[n].length<2&&(e+="0"),e+=r[n];return e+="Z",e};ke.integerToDer=function(t){var e=lr.util.createBuffer();if(t>=-128&&t<128)return e.putSignedInt(t,8);if(t>=-32768&&t<32768)return e.putSignedInt(t,16);if(t>=-8388608&&t<8388608)return e.putSignedInt(t,24);if(t>=-2147483648&&t<2147483648)return e.putSignedInt(t,32);var r=new Error("Integer too large; max is 32-bits.");throw r.integer=t,r};ke.derToInteger=function(t){typeof t=="string"&&(t=lr.util.createBuffer(t));var e=t.length()*8;if(e>32)throw new Error("Integer too large; max is 32-bits.");return t.getSignedInt(e)};ke.validate=function(t,e,r,n){var i=!1;if((t.tagClass===e.tagClass||typeof e.tagClass=="undefined")&&(t.type===e.type||typeof e.type=="undefined"))if(t.constructed===e.constructed||typeof e.constructed=="undefined"){if(i=!0,e.value&&lr.util.isArray(e.value))for(var a=0,s=0;i&&s<e.value.length;++s)i=e.value[s].optional||!1,t.value[a]&&(i=ke.validate(t.value[a],e.value[s],r,n),i?++a:e.value[s].optional&&(i=!0)),!i&&n&&n.push("["+e.name+'] Tag class "'+e.tagClass+'", type "'+e.type+'" expected value length "'+e.value.length+'", got "'+t.value.length+'"');if(i&&r&&(e.capture&&(r[e.capture]=t.value),e.captureAsn1&&(r[e.captureAsn1]=t),e.captureBitStringContents&&"bitStringContents"in t&&(r[e.captureBitStringContents]=t.bitStringContents),e.captureBitStringValue&&"bitStringContents"in t)){var l;if(t.bitStringContents.length<2)r[e.captureBitStringValue]="";else{var u=t.bitStringContents.charCodeAt(0);if(u!==0)throw new Error("captureBitStringValue only supported for zero unused bits");r[e.captureBitStringValue]=t.bitStringContents.slice(1)}}}else n&&n.push("["+e.name+'] Expected constructed "'+e.constructed+'", got "'+t.constructed+'"');else n&&(t.tagClass!==e.tagClass&&n.push("["+e.name+'] Expected tag class "'+e.tagClass+'", got "'+t.tagClass+'"'),t.type!==e.type&&n.push("["+e.name+'] Expected type "'+e.type+'", got "'+t.type+'"'));return i};var PE=/[^\\u0000-\\u00ff]/;ke.prettyPrint=function(t,e,r){var n="";e=e||0,r=r||2,e>0&&(n+=`
`);for(var i="",a=0;a<e*r;++a)i+=" ";switch(n+=i+"Tag: ",t.tagClass){case ke.Class.UNIVERSAL:n+="Universal:";break;case ke.Class.APPLICATION:n+="Application:";break;case ke.Class.CONTEXT_SPECIFIC:n+="Context-Specific:";break;case ke.Class.PRIVATE:n+="Private:";break}if(t.tagClass===ke.Class.UNIVERSAL)switch(n+=t.type,t.type){case ke.Type.NONE:n+=" (None)";break;case ke.Type.BOOLEAN:n+=" (Boolean)";break;case ke.Type.INTEGER:n+=" (Integer)";break;case ke.Type.BITSTRING:n+=" (Bit string)";break;case ke.Type.OCTETSTRING:n+=" (Octet string)";break;case ke.Type.NULL:n+=" (Null)";break;case ke.Type.OID:n+=" (Object Identifier)";break;case ke.Type.ODESC:n+=" (Object Descriptor)";break;case ke.Type.EXTERNAL:n+=" (External or Instance of)";break;case ke.Type.REAL:n+=" (Real)";break;case ke.Type.ENUMERATED:n+=" (Enumerated)";break;case ke.Type.EMBEDDED:n+=" (Embedded PDV)";break;case ke.Type.UTF8:n+=" (UTF8)";break;case ke.Type.ROID:n+=" (Relative Object Identifier)";break;case ke.Type.SEQUENCE:n+=" (Sequence)";break;case ke.Type.SET:n+=" (Set)";break;case ke.Type.PRINTABLESTRING:n+=" (Printable String)";break;case ke.Type.IA5String:n+=" (IA5String (ASCII))";break;case ke.Type.UTCTIME:n+=" (UTC time)";break;case ke.Type.GENERALIZEDTIME:n+=" (Generalized time)";break;case ke.Type.BMPSTRING:n+=" (BMP String)";break}else n+=t.type;if(n+=`
`,n+=i+"Constructed: "+t.constructed+`
`,t.composed){for(var s=0,l="",a=0;a<t.value.length;++a)t.value[a]!==void 0&&(s+=1,l+=ke.prettyPrint(t.value[a],e+1,r),a+1<t.value.length&&(l+=","));n+=i+"Sub values: "+s+l}else{if(n+=i+"Value: ",t.type===ke.Type.OID){var u=ke.derToOid(t.value);n+=u,lr.pki&&lr.pki.oids&&u in lr.pki.oids&&(n+=" ("+lr.pki.oids[u]+") ")}if(t.type===ke.Type.INTEGER)try{n+=ke.derToInteger(t.value)}catch(d){n+="0x"+lr.util.bytesToHex(t.value)}else if(t.type===ke.Type.BITSTRING){if(t.value.length>1?n+="0x"+lr.util.bytesToHex(t.value.slice(1)):n+="(none)",t.value.length>0){var f=t.value.charCodeAt(0);f==1?n+=" (1 unused bit shown)":f>1&&(n+=" ("+f+" unused bits shown)")}}else if(t.type===ke.Type.OCTETSTRING)PE.test(t.value)||(n+="("+t.value+") "),n+="0x"+lr.util.bytesToHex(t.value);else if(t.type===ke.Type.UTF8)try{n+=lr.util.decodeUtf8(t.value)}catch(d){if(d.message==="URI malformed")n+="0x"+lr.util.bytesToHex(t.value)+" (malformed UTF8)";else throw d}else t.type===ke.Type.PRINTABLESTRING||t.type===ke.Type.IA5String?n+=t.value:PE.test(t.value)?n+="0x"+lr.util.bytesToHex(t.value):t.value.length===0?n+="[null]":n+=t.value}return n}});var Qi=de((y7,UE)=>{var Ed=vt();UE.exports=Ed.md=Ed.md||{};Ed.md.algorithms=Ed.md.algorithms||{}});var ul=de((v7,FE)=>{var Aa=vt();Qi();qt();var u6=FE.exports=Aa.hmac=Aa.hmac||{};u6.create=function(){var t=null,e=null,r=null,n=null,i={};return i.start=function(a,s){if(a!==null)if(typeof a=="string")if(a=a.toLowerCase(),a in Aa.md.algorithms)e=Aa.md.algorithms[a].create();else throw new Error('Unknown hash algorithm "'+a+'"');else e=a;if(s===null)s=t;else{if(typeof s=="string")s=Aa.util.createBuffer(s);else if(Aa.util.isArray(s)){var l=s;s=Aa.util.createBuffer();for(var u=0;u<l.length;++u)s.putByte(l[u])}var f=s.length();f>e.blockLength&&(e.start(),e.update(s.bytes()),s=e.digest()),r=Aa.util.createBuffer(),n=Aa.util.createBuffer(),f=s.length();for(var u=0;u<f;++u){var l=s.at(u);r.putByte(54^l),n.putByte(92^l)}if(f<e.blockLength)for(var l=e.blockLength-f,u=0;u<l;++u)r.putByte(54),n.putByte(92);t=s,r=r.bytes(),n=n.bytes()}e.start(),e.update(r)},i.update=function(a){e.update(a)},i.getMac=function(){var a=e.digest().bytes();return e.start(),e.update(n),e.update(a),e.digest()},i.digest=i.getMac,i}});var bd=de((_7,HE)=>{var Xi=vt();Qi();qt();var qE=HE.exports=Xi.md5=Xi.md5||{};Xi.md.md5=Xi.md.algorithms.md5=qE;qE.create=function(){GE||c6();var t=null,e=Xi.util.createBuffer(),r=new Array(16),n={algorithm:"md5",blockLength:64,digestLength:16,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,a=0;a<i;++a)n.fullMessageLength.push(0);return e=Xi.util.createBuffer(),t={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878},n},n.start(),n.update=function(i,a){a==="utf8"&&(i=Xi.util.encodeUtf8(i));var s=i.length;n.messageLength+=s,s=[s/4294967296>>>0,s>>>0];for(var l=n.fullMessageLength.length-1;l>=0;--l)n.fullMessageLength[l]+=s[1],s[1]=s[0]+(n.fullMessageLength[l]/4294967296>>>0),n.fullMessageLength[l]=n.fullMessageLength[l]>>>0,s[0]=s[1]/4294967296>>>0;return e.putBytes(i),VE(t,r,e),(e.read>2048||e.length()===0)&&e.compact(),n},n.digest=function(){var i=Xi.util.createBuffer();i.putBytes(e.bytes());var a=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,s=a&n.blockLength-1;i.putBytes(lg.substr(0,n.blockLength-s));for(var l,u=0,f=n.fullMessageLength.length-1;f>=0;--f)l=n.fullMessageLength[f]*8+u,u=l/4294967296>>>0,i.putInt32Le(l>>>0);var d={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3};VE(d,r,i);var h=Xi.util.createBuffer();return h.putInt32Le(d.h0),h.putInt32Le(d.h1),h.putInt32Le(d.h2),h.putInt32Le(d.h3),h},n};var lg=null,Cd=null,Ou=null,cl=null,GE=!1;function c6(){lg=String.fromCharCode(128),lg+=Xi.util.fillString(String.fromCharCode(0),64),Cd=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,1,6,11,0,5,10,15,4,9,14,3,8,13,2,7,12,5,8,11,14,1,4,7,10,13,0,3,6,9,12,15,2,0,7,14,5,12,3,10,1,8,15,6,13,4,11,2,9],Ou=[7,12,17,22,7,12,17,22,7,12,17,22,7,12,17,22,5,9,14,20,5,9,14,20,5,9,14,20,5,9,14,20,4,11,16,23,4,11,16,23,4,11,16,23,4,11,16,23,6,10,15,21,6,10,15,21,6,10,15,21,6,10,15,21],cl=new Array(64);for(var t=0;t<64;++t)cl[t]=Math.floor(Math.abs(Math.sin(t+1))*4294967296);GE=!0}function VE(t,e,r){for(var n,i,a,s,l,u,f,d,h=r.length();h>=64;){for(i=t.h0,a=t.h1,s=t.h2,l=t.h3,d=0;d<16;++d)e[d]=r.getInt32Le(),u=l^a&(s^l),n=i+u+cl[d]+e[d],f=Ou[d],i=l,l=s,s=a,a+=n<<f|n>>>32-f;for(;d<32;++d)u=s^l&(a^s),n=i+u+cl[d]+e[Cd[d]],f=Ou[d],i=l,l=s,s=a,a+=n<<f|n>>>32-f;for(;d<48;++d)u=a^s^l,n=i+u+cl[d]+e[Cd[d]],f=Ou[d],i=l,l=s,s=a,a+=n<<f|n>>>32-f;for(;d<64;++d)u=s^(a|~l),n=i+u+cl[d]+e[Cd[d]],f=Ou[d],i=l,l=s,s=a,a+=n<<f|n>>>32-f;t.h0=t.h0+i|0,t.h1=t.h1+a|0,t.h2=t.h2+s|0,t.h3=t.h3+l|0,h-=64}}});var zs=de((w7,jE)=>{var xd=vt();qt();var KE=jE.exports=xd.pem=xd.pem||{};KE.encode=function(t,e){e=e||{};var r="-----BEGIN "+t.type+`-----\r
`,n;if(t.procType&&(n={name:"Proc-Type",values:[String(t.procType.version),t.procType.type]},r+=Td(n)),t.contentDomain&&(n={name:"Content-Domain",values:[t.contentDomain]},r+=Td(n)),t.dekInfo&&(n={name:"DEK-Info",values:[t.dekInfo.algorithm]},t.dekInfo.parameters&&n.values.push(t.dekInfo.parameters),r+=Td(n)),t.headers)for(var i=0;i<t.headers.length;++i)r+=Td(t.headers[i]);return t.procType&&(r+=`\r
`),r+=xd.util.encode64(t.body,e.maxline||64)+`\r
`,r+="-----END "+t.type+`-----\r
`,r};KE.decode=function(t){for(var e=[],r=/\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g,n=/([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/,i=/\r?\n/,a;a=r.exec(t),!!a;){var s=a[1];s==="NEW CERTIFICATE REQUEST"&&(s="CERTIFICATE REQUEST");var l={type:s,procType:null,contentDomain:null,dekInfo:null,headers:[],body:xd.util.decode64(a[3])};if(e.push(l),!!a[2]){for(var u=a[2].split(i),f=0;a&&f<u.length;){for(var d=u[f].replace(/\s+$/,""),h=f+1;h<u.length;++h){var g=u[h];if(!/\s/.test(g[0]))break;d+=g,f=h}if(a=d.match(n),a){for(var y={name:a[1],values:[]},m=a[2].split(","),w=0;w<m.length;++w)y.values.push(f6(m[w]));if(l.procType)if(!l.contentDomain&&y.name==="Content-Domain")l.contentDomain=m[0]||"";else if(!l.dekInfo&&y.name==="DEK-Info"){if(y.values.length===0)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');l.dekInfo={algorithm:m[0],parameters:m[1]||null}}else l.headers.push(y);else{if(y.name!=="Proc-Type")throw new Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');if(y.values.length!==2)throw new Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');l.procType={version:m[0],type:m[1]}}}++f}if(l.procType==="ENCRYPTED"&&!l.dekInfo)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".')}}if(e.length===0)throw new Error("Invalid PEM formatted message.");return e};function Td(t){for(var e=t.name+": ",r=[],n=function(u,f){return" "+f},i=0;i<t.values.length;++i)r.push(t.values[i].replace(/^(\S+\r\n)/,n));e+=r.join(",")+`\r
`;for(var a=0,s=-1,i=0;i<e.length;++i,++a)if(a>65&&s!==-1){var l=e[s];l===","?(++s,e=e.substr(0,s)+`\r
 `+e.substr(s)):e=e.substr(0,s)+`\r
`+l+e.substr(s+1),a=i-s-1,s=-1,++i}else(e[i]===" "||e[i]==="	"||e[i]===",")&&(s=i);return e}function f6(t){return t.replace(/^\s+/,"")}});var Lu=de((E7,WE)=>{var hr=vt();md();ng();qt();WE.exports=hr.des=hr.des||{};hr.des.startEncrypting=function(t,e,r,n){var i=Sd({key:t,output:r,decrypt:!1,mode:n||(e===null?"ECB":"CBC")});return i.start(e),i};hr.des.createEncryptionCipher=function(t,e){return Sd({key:t,output:null,decrypt:!1,mode:e})};hr.des.startDecrypting=function(t,e,r,n){var i=Sd({key:t,output:r,decrypt:!0,mode:n||(e===null?"ECB":"CBC")});return i.start(e),i};hr.des.createDecryptionCipher=function(t,e){return Sd({key:t,output:null,decrypt:!0,mode:e})};hr.des.Algorithm=function(t,e){var r=this;r.name=t,r.mode=new e({blockSize:8,cipher:{encrypt:function(n,i){return YE(r._keys,n,i,!1)},decrypt:function(n,i){return YE(r._keys,n,i,!0)}}}),r._init=!1};hr.des.Algorithm.prototype.initialize=function(t){if(!this._init){var e=hr.util.createBuffer(t.key);if(this.name.indexOf("3DES")===0&&e.length()!==24)throw new Error("Invalid Triple-DES key size: "+e.length()*8);this._keys=w6(e),this._init=!0}};Ji("DES-ECB",hr.cipher.modes.ecb);Ji("DES-CBC",hr.cipher.modes.cbc);Ji("DES-CFB",hr.cipher.modes.cfb);Ji("DES-OFB",hr.cipher.modes.ofb);Ji("DES-CTR",hr.cipher.modes.ctr);Ji("3DES-ECB",hr.cipher.modes.ecb);Ji("3DES-CBC",hr.cipher.modes.cbc);Ji("3DES-CFB",hr.cipher.modes.cfb);Ji("3DES-OFB",hr.cipher.modes.ofb);Ji("3DES-CTR",hr.cipher.modes.ctr);function Ji(t,e){var r=function(){return new hr.des.Algorithm(t,e)};hr.cipher.registerAlgorithm(t,r)}var d6=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],h6=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],p6=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],g6=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],m6=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],y6=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],v6=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],_6=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696];function w6(t){for(var e=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],r=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],n=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],i=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],a=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],s=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],l=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],u=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],f=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],d=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],h=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],g=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],y=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],m=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],w=t.length()>8?3:1,_=[],E=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],b=0,k,O=0;O<w;O++){var R=t.getInt32(),B=t.getInt32();k=(R>>>4^B)&252645135,B^=k,R^=k<<4,k=(B>>>-16^R)&65535,R^=k,B^=k<<-16,k=(R>>>2^B)&858993459,B^=k,R^=k<<2,k=(B>>>-16^R)&65535,R^=k,B^=k<<-16,k=(R>>>1^B)&1431655765,B^=k,R^=k<<1,k=(B>>>8^R)&16711935,R^=k,B^=k<<8,k=(R>>>1^B)&1431655765,B^=k,R^=k<<1,k=R<<8|B>>>20&240,R=B<<24|B<<8&16711680|B>>>8&65280|B>>>24&240,B=k;for(var ne=0;ne<E.length;++ne){E[ne]?(R=R<<2|R>>>26,B=B<<2|B>>>26):(R=R<<1|R>>>27,B=B<<1|B>>>27),R&=-15,B&=-15;var M=e[R>>>28]|r[R>>>24&15]|n[R>>>20&15]|i[R>>>16&15]|a[R>>>12&15]|s[R>>>8&15]|l[R>>>4&15],G=u[B>>>28]|f[B>>>24&15]|d[B>>>20&15]|h[B>>>16&15]|g[B>>>12&15]|y[B>>>8&15]|m[B>>>4&15];k=(G>>>16^M)&65535,_[b++]=M^k,_[b++]=G^k<<16}}return _}function YE(t,e,r,n){var i=t.length===32?3:9,a;i===3?a=n?[30,-2,-2]:[0,32,2]:a=n?[94,62,-2,32,64,2,30,-2,-2]:[0,32,2,62,30,-2,64,96,2];var s,l=e[0],u=e[1];s=(l>>>4^u)&252645135,u^=s,l^=s<<4,s=(l>>>16^u)&65535,u^=s,l^=s<<16,s=(u>>>2^l)&858993459,l^=s,u^=s<<2,s=(u>>>8^l)&16711935,l^=s,u^=s<<8,s=(l>>>1^u)&1431655765,u^=s,l^=s<<1,l=l<<1|l>>>31,u=u<<1|u>>>31;for(var f=0;f<i;f+=3){for(var d=a[f+1],h=a[f+2],g=a[f];g!=d;g+=h){var y=u^t[g],m=(u>>>4|u<<28)^t[g+1];s=l,l=u,u=s^(h6[y>>>24&63]|g6[y>>>16&63]|y6[y>>>8&63]|_6[y&63]|d6[m>>>24&63]|p6[m>>>16&63]|m6[m>>>8&63]|v6[m&63])}s=l,l=u,u=s}l=l>>>1|l<<31,u=u>>>1|u<<31,s=(l>>>1^u)&1431655765,u^=s,l^=s<<1,s=(u>>>8^l)&16711935,l^=s,u^=s<<8,s=(u>>>2^l)&858993459,l^=s,u^=s<<2,s=(l>>>16^u)&65535,u^=s,l^=s<<16,s=(l>>>4^u)&252645135,u^=s,l^=s<<4,r[0]=l,r[1]=u}function Sd(t){t=t||{};var e=(t.mode||"CBC").toUpperCase(),r="DES-"+e,n;t.decrypt?n=hr.cipher.createDecipher(r,t.key):n=hr.cipher.createCipher(r,t.key);var i=n.start;return n.start=function(a,s){var l=null;s instanceof hr.util.ByteBuffer&&(l=s,s={}),s=s||{},s.output=l,s.iv=a,i.call(n,s)},n}});var Ad=de((C7,zE)=>{var Cn=vt();ul();Qi();qt();var E6=Cn.pkcs5=Cn.pkcs5||{},ka;Cn.util.isNodejs&&!Cn.options.usePureJavaScript&&(ka=require("crypto"));zE.exports=Cn.pbkdf2=E6.pbkdf2=function(t,e,r,n,i,a){if(typeof i=="function"&&(a=i,i=null),Cn.util.isNodejs&&!Cn.options.usePureJavaScript&&ka.pbkdf2&&(i===null||typeof i!="object")&&(ka.pbkdf2Sync.length>4||!i||i==="sha1"))return typeof i!="string"&&(i="sha1"),t=Buffer.from(t,"binary"),e=Buffer.from(e,"binary"),a?ka.pbkdf2Sync.length===4?ka.pbkdf2(t,e,r,n,function(k,O){if(k)return a(k);a(null,O.toString("binary"))}):ka.pbkdf2(t,e,r,n,i,function(k,O){if(k)return a(k);a(null,O.toString("binary"))}):ka.pbkdf2Sync.length===4?ka.pbkdf2Sync(t,e,r,n).toString("binary"):ka.pbkdf2Sync(t,e,r,n,i).toString("binary");if((typeof i=="undefined"||i===null)&&(i="sha1"),typeof i=="string"){if(!(i in Cn.md.algorithms))throw new Error("Unknown hash algorithm: "+i);i=Cn.md[i].create()}var s=i.digestLength;if(n>4294967295*s){var l=new Error("Derived key is too long.");if(a)return a(l);throw l}var u=Math.ceil(n/s),f=n-(u-1)*s,d=Cn.hmac.create();d.start(i,t);var h="",g,y,m;if(!a){for(var w=1;w<=u;++w){d.start(null,null),d.update(e),d.update(Cn.util.int32ToBytes(w)),g=m=d.digest().getBytes();for(var _=2;_<=r;++_)d.start(null,null),d.update(m),y=d.digest().getBytes(),g=Cn.util.xorBytes(g,y,s),m=y;h+=w<u?g:g.substr(0,f)}return h}var w=1,_;function E(){if(w>u)return a(null,h);d.start(null,null),d.update(e),d.update(Cn.util.int32ToBytes(w)),g=m=d.digest().getBytes(),_=2,b()}function b(){if(_<=r)return d.start(null,null),d.update(m),y=d.digest().getBytes(),g=Cn.util.xorBytes(g,y,s),m=y,++_,Cn.util.setImmediate(b);h+=w<u?g:g.substr(0,f),++w,E()}E()}});var cg=de((b7,$E)=>{var Zi=vt();Qi();qt();var QE=$E.exports=Zi.sha256=Zi.sha256||{};Zi.md.sha256=Zi.md.algorithms.sha256=QE;QE.create=function(){XE||C6();var t=null,e=Zi.util.createBuffer(),r=new Array(64),n={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,a=0;a<i;++a)n.fullMessageLength.push(0);return e=Zi.util.createBuffer(),t={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},n},n.start(),n.update=function(i,a){a==="utf8"&&(i=Zi.util.encodeUtf8(i));var s=i.length;n.messageLength+=s,s=[s/4294967296>>>0,s>>>0];for(var l=n.fullMessageLength.length-1;l>=0;--l)n.fullMessageLength[l]+=s[1],s[1]=s[0]+(n.fullMessageLength[l]/4294967296>>>0),n.fullMessageLength[l]=n.fullMessageLength[l]>>>0,s[0]=s[1]/4294967296>>>0;return e.putBytes(i),ZE(t,r,e),(e.read>2048||e.length()===0)&&e.compact(),n},n.digest=function(){var i=Zi.util.createBuffer();i.putBytes(e.bytes());var a=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,s=a&n.blockLength-1;i.putBytes(ug.substr(0,n.blockLength-s));for(var l,u,f=n.fullMessageLength[0]*8,d=0;d<n.fullMessageLength.length-1;++d)l=n.fullMessageLength[d+1]*8,u=l/4294967296>>>0,f+=u,i.putInt32(f>>>0),f=l>>>0;i.putInt32(f);var h={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3,h4:t.h4,h5:t.h5,h6:t.h6,h7:t.h7};ZE(h,r,i);var g=Zi.util.createBuffer();return g.putInt32(h.h0),g.putInt32(h.h1),g.putInt32(h.h2),g.putInt32(h.h3),g.putInt32(h.h4),g.putInt32(h.h5),g.putInt32(h.h6),g.putInt32(h.h7),g},n};var ug=null,XE=!1,JE=null;function C6(){ug=String.fromCharCode(128),ug+=Zi.util.fillString(String.fromCharCode(0),64),JE=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],XE=!0}function ZE(t,e,r){for(var n,i,a,s,l,u,f,d,h,g,y,m,w,_,E,b=r.length();b>=64;){for(f=0;f<16;++f)e[f]=r.getInt32();for(;f<64;++f)n=e[f-2],n=(n>>>17|n<<15)^(n>>>19|n<<13)^n>>>10,i=e[f-15],i=(i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3,e[f]=n+e[f-7]+i+e[f-16]|0;for(d=t.h0,h=t.h1,g=t.h2,y=t.h3,m=t.h4,w=t.h5,_=t.h6,E=t.h7,f=0;f<64;++f)s=(m>>>6|m<<26)^(m>>>11|m<<21)^(m>>>25|m<<7),l=_^m&(w^_),a=(d>>>2|d<<30)^(d>>>13|d<<19)^(d>>>22|d<<10),u=d&h|g&(d^h),n=E+s+l+JE[f]+e[f],i=a+u,E=_,_=w,w=m,m=y+n>>>0,y=g,g=h,h=d,d=n+i>>>0;t.h0=t.h0+d|0,t.h1=t.h1+h|0,t.h2=t.h2+g|0,t.h3=t.h3+y|0,t.h4=t.h4+m|0,t.h5=t.h5+w|0,t.h6=t.h6+_|0,t.h7=t.h7+E|0,b-=64}}});var fg=de((x7,eC)=>{var $i=vt();qt();var kd=null;$i.util.isNodejs&&!$i.options.usePureJavaScript&&!process.versions["node-webkit"]&&(kd=require("crypto"));var b6=eC.exports=$i.prng=$i.prng||{};b6.create=function(t){for(var e={plugin:t,key:null,seed:null,time:null,reseeds:0,generated:0,keyBytes:""},r=t.md,n=new Array(32),i=0;i<32;++i)n[i]=r.create();e.pools=n,e.pool=0,e.generate=function(f,d){if(!d)return e.generateSync(f);var h=e.plugin.cipher,g=e.plugin.increment,y=e.plugin.formatKey,m=e.plugin.formatSeed,w=$i.util.createBuffer();e.key=null,_();function _(E){if(E)return d(E);if(w.length()>=f)return d(null,w.getBytes(f));if(e.generated>1048575&&(e.key=null),e.key===null)return $i.util.nextTick(function(){a(_)});var b=h(e.key,e.seed);e.generated+=b.length,w.putBytes(b),e.key=y(h(e.key,g(e.seed))),e.seed=m(h(e.key,e.seed)),$i.util.setImmediate(_)}},e.generateSync=function(f){var d=e.plugin.cipher,h=e.plugin.increment,g=e.plugin.formatKey,y=e.plugin.formatSeed;e.key=null;for(var m=$i.util.createBuffer();m.length()<f;){e.generated>1048575&&(e.key=null),e.key===null&&s();var w=d(e.key,e.seed);e.generated+=w.length,m.putBytes(w),e.key=g(d(e.key,h(e.seed))),e.seed=y(d(e.key,e.seed))}return m.getBytes(f)};function a(f){if(e.pools[0].messageLength>=32)return l(),f();var d=32-e.pools[0].messageLength<<5;e.seedFile(d,function(h,g){if(h)return f(h);e.collect(g),l(),f()})}function s(){if(e.pools[0].messageLength>=32)return l();var f=32-e.pools[0].messageLength<<5;e.collect(e.seedFileSync(f)),l()}function l(){e.reseeds=e.reseeds===4294967295?0:e.reseeds+1;var f=e.plugin.md.create();f.update(e.keyBytes);for(var d=1,h=0;h<32;++h)e.reseeds%d==0&&(f.update(e.pools[h].digest().getBytes()),e.pools[h].start()),d=d<<1;e.keyBytes=f.digest().getBytes(),f.start(),f.update(e.keyBytes);var g=f.digest().getBytes();e.key=e.plugin.formatKey(e.keyBytes),e.seed=e.plugin.formatSeed(g),e.generated=0}function u(f){var d=null,h=$i.util.globalScope,g=h.crypto||h.msCrypto;g&&g.getRandomValues&&(d=function(R){return g.getRandomValues(R)});var y=$i.util.createBuffer();if(d)for(;y.length()<f;){var m=Math.max(1,Math.min(f-y.length(),65536)/4),w=new Uint32Array(Math.floor(m));try{d(w);for(var _=0;_<w.length;++_)y.putInt32(w[_])}catch(R){if(!(typeof QuotaExceededError!="undefined"&&R instanceof QuotaExceededError))throw R}}if(y.length()<f)for(var E,b,k,O=Math.floor(Math.random()*65536);y.length()<f;){b=16807*(O&65535),E=16807*(O>>16),b+=(E&32767)<<16,b+=E>>15,b=(b&2147483647)+(b>>31),O=b&4294967295;for(var _=0;_<3;++_)k=O>>>(_<<3),k^=Math.floor(Math.random()*256),y.putByte(k&255)}return y.getBytes(f)}return kd?(e.seedFile=function(f,d){kd.randomBytes(f,function(h,g){if(h)return d(h);d(null,g.toString())})},e.seedFileSync=function(f){return kd.randomBytes(f).toString()}):(e.seedFile=function(f,d){try{d(null,u(f))}catch(h){d(h)}},e.seedFileSync=u),e.collect=function(f){for(var d=f.length,h=0;h<d;++h)e.pools[e.pool].update(f.substr(h,1)),e.pool=e.pool===31?0:e.pool+1},e.collectInt=function(f,d){for(var h="",g=0;g<d;g+=8)h+=String.fromCharCode(f>>g&255);e.collect(h)},e.registerWorker=function(f){if(f===self)e.seedFile=function(h,g){function y(m){var w=m.data;w.forge&&w.forge.prng&&(self.removeEventListener("message",y),g(w.forge.prng.err,w.forge.prng.bytes))}self.addEventListener("message",y),self.postMessage({forge:{prng:{needed:h}}})};else{var d=function(h){var g=h.data;g.forge&&g.forge.prng&&e.seedFile(g.forge.prng.needed,function(y,m){f.postMessage({forge:{prng:{err:y,bytes:m}}})})};f.addEventListener("message",d)}},e}});var oi=de((T7,dg)=>{var Hr=vt();cs();cg();fg();qt();(function(){if(Hr.random&&Hr.random.getBytes){dg.exports=Hr.random;return}(function(t){var e={},r=new Array(4),n=Hr.util.createBuffer();e.formatKey=function(h){var g=Hr.util.createBuffer(h);return h=new Array(4),h[0]=g.getInt32(),h[1]=g.getInt32(),h[2]=g.getInt32(),h[3]=g.getInt32(),Hr.aes._expandKey(h,!1)},e.formatSeed=function(h){var g=Hr.util.createBuffer(h);return h=new Array(4),h[0]=g.getInt32(),h[1]=g.getInt32(),h[2]=g.getInt32(),h[3]=g.getInt32(),h},e.cipher=function(h,g){return Hr.aes._updateBlock(h,g,r,!1),n.putInt32(r[0]),n.putInt32(r[1]),n.putInt32(r[2]),n.putInt32(r[3]),n.getBytes()},e.increment=function(h){return++h[3],h},e.md=Hr.md.sha256;function i(){var h=Hr.prng.create(e);return h.getBytes=function(g,y){return h.generate(g,y)},h.getBytesSync=function(g){return h.generate(g)},h}var a=i(),s=null,l=Hr.util.globalScope,u=l.crypto||l.msCrypto;if(u&&u.getRandomValues&&(s=function(h){return u.getRandomValues(h)}),Hr.options.usePureJavaScript||!Hr.util.isNodejs&&!s){if(typeof window=="undefined"||window.document===void 0,a.collectInt(+new Date,32),typeof navigator!="undefined"){var f="";for(var d in navigator)try{typeof navigator[d]=="string"&&(f+=navigator[d])}catch(h){}a.collect(f),f=null}t&&(t().mousemove(function(h){a.collectInt(h.clientX,16),a.collectInt(h.clientY,16)}),t().keypress(function(h){a.collectInt(h.charCode,8)}))}if(!Hr.random)Hr.random=a;else for(var d in a)Hr.random[d]=a[d];Hr.random.createInstance=i,dg.exports=Hr.random})(typeof jQuery!="undefined"?jQuery:null)})()});var pg=de((S7,nC)=>{var Bn=vt();qt();var hg=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173],tC=[1,2,3,5],x6=function(t,e){return t<<e&65535|(t&65535)>>16-e},T6=function(t,e){return(t&65535)>>e|t<<16-e&65535};nC.exports=Bn.rc2=Bn.rc2||{};Bn.rc2.expandKey=function(t,e){typeof t=="string"&&(t=Bn.util.createBuffer(t)),e=e||128;var r=t,n=t.length(),i=e,a=Math.ceil(i/8),s=255>>(i&7),l;for(l=n;l<128;l++)r.putByte(hg[r.at(l-1)+r.at(l-n)&255]);for(r.setAt(128-a,hg[r.at(128-a)&s]),l=127-a;l>=0;l--)r.setAt(l,hg[r.at(l+1)^r.at(l+a)]);return r};var rC=function(t,e,r){var n=!1,i=null,a=null,s=null,l,u,f,d,h=[];for(t=Bn.rc2.expandKey(t,e),f=0;f<64;f++)h.push(t.getInt16Le());r?(l=function(m){for(f=0;f<4;f++)m[f]+=h[d]+(m[(f+3)%4]&m[(f+2)%4])+(~m[(f+3)%4]&m[(f+1)%4]),m[f]=x6(m[f],tC[f]),d++},u=function(m){for(f=0;f<4;f++)m[f]+=h[m[(f+3)%4]&63]}):(l=function(m){for(f=3;f>=0;f--)m[f]=T6(m[f],tC[f]),m[f]-=h[d]+(m[(f+3)%4]&m[(f+2)%4])+(~m[(f+3)%4]&m[(f+1)%4]),d--},u=function(m){for(f=3;f>=0;f--)m[f]-=h[m[(f+3)%4]&63]});var g=function(m){var w=[];for(f=0;f<4;f++){var _=i.getInt16Le();s!==null&&(r?_^=s.getInt16Le():s.putInt16Le(_)),w.push(_&65535)}d=r?0:63;for(var E=0;E<m.length;E++)for(var b=0;b<m[E][0];b++)m[E][1](w);for(f=0;f<4;f++)s!==null&&(r?s.putInt16Le(w[f]):w[f]^=s.getInt16Le()),a.putInt16Le(w[f])},y=null;return y={start:function(m,w){m&&typeof m=="string"&&(m=Bn.util.createBuffer(m)),n=!1,i=Bn.util.createBuffer(),a=w||new Bn.util.createBuffer,s=m,y.output=a},update:function(m){for(n||i.putBuffer(m);i.length()>=8;)g([[5,l],[1,u],[6,l],[1,u],[5,l]])},finish:function(m){var w=!0;if(r)if(m)w=m(8,i,!r);else{var _=i.length()===8?8:8-i.length();i.fillWithByte(_,_)}if(w&&(n=!0,y.update()),!r&&(w=i.length()===0,w))if(m)w=m(8,a,!r);else{var E=a.length(),b=a.at(E-1);b>E?w=!1:a.truncate(b)}return w}},y};Bn.rc2.startEncrypting=function(t,e,r){var n=Bn.rc2.createEncryptionCipher(t,128);return n.start(e,r),n};Bn.rc2.createEncryptionCipher=function(t,e){return rC(t,e,!0)};Bn.rc2.startDecrypting=function(t,e,r){var n=Bn.rc2.createDecryptionCipher(t,128);return n.start(e,r),n};Bn.rc2.createDecryptionCipher=function(t,e){return rC(t,e,!1)}});var Mu=de((A7,fC)=>{var gg=vt();fC.exports=gg.jsbn=gg.jsbn||{};var Ia,S6=244837814094590,iC=(S6&16777215)==15715070;function ve(t,e,r){this.data=[],t!=null&&(typeof t=="number"?this.fromNumber(t,e,r):e==null&&typeof t!="string"?this.fromString(t,256):this.fromString(t,e))}gg.jsbn.BigInteger=ve;function Gt(){return new ve(null)}function A6(t,e,r,n,i,a){for(;--a>=0;){var s=e*this.data[t++]+r.data[n]+i;i=Math.floor(s/67108864),r.data[n++]=s&67108863}return i}function k6(t,e,r,n,i,a){for(var s=e&32767,l=e>>15;--a>=0;){var u=this.data[t]&32767,f=this.data[t++]>>15,d=l*u+f*s;u=s*u+((d&32767)<<15)+r.data[n]+(i&1073741823),i=(u>>>30)+(d>>>15)+l*f+(i>>>30),r.data[n++]=u&1073741823}return i}function aC(t,e,r,n,i,a){for(var s=e&16383,l=e>>14;--a>=0;){var u=this.data[t]&16383,f=this.data[t++]>>14,d=l*u+f*s;u=s*u+((d&16383)<<14)+r.data[n]+i,i=(u>>28)+(d>>14)+l*f,r.data[n++]=u&268435455}return i}typeof navigator=="undefined"?(ve.prototype.am=aC,Ia=28):iC&&navigator.appName=="Microsoft Internet Explorer"?(ve.prototype.am=k6,Ia=30):iC&&navigator.appName!="Netscape"?(ve.prototype.am=A6,Ia=26):(ve.prototype.am=aC,Ia=28);ve.prototype.DB=Ia;ve.prototype.DM=(1<<Ia)-1;ve.prototype.DV=1<<Ia;var mg=52;ve.prototype.FV=Math.pow(2,mg);ve.prototype.F1=mg-Ia;ve.prototype.F2=2*Ia-mg;var I6="0123456789abcdefghijklmnopqrstuvwxyz",Id=new Array,fl,li;fl="0".charCodeAt(0);for(li=0;li<=9;++li)Id[fl++]=li;fl="a".charCodeAt(0);for(li=10;li<36;++li)Id[fl++]=li;fl="A".charCodeAt(0);for(li=10;li<36;++li)Id[fl++]=li;function sC(t){return I6.charAt(t)}function oC(t,e){var r=Id[t.charCodeAt(e)];return r==null?-1:r}function N6(t){for(var e=this.t-1;e>=0;--e)t.data[e]=this.data[e];t.t=this.t,t.s=this.s}function R6(t){this.t=1,this.s=t<0?-1:0,t>0?this.data[0]=t:t<-1?this.data[0]=t+this.DV:this.t=0}function ds(t){var e=Gt();return e.fromInt(t),e}function D6(t,e){var r;if(e==16)r=4;else if(e==8)r=3;else if(e==256)r=8;else if(e==2)r=1;else if(e==32)r=5;else if(e==4)r=2;else{this.fromRadix(t,e);return}this.t=0,this.s=0;for(var n=t.length,i=!1,a=0;--n>=0;){var s=r==8?t[n]&255:oC(t,n);if(s<0){t.charAt(n)=="-"&&(i=!0);continue}i=!1,a==0?this.data[this.t++]=s:a+r>this.DB?(this.data[this.t-1]|=(s&(1<<this.DB-a)-1)<<a,this.data[this.t++]=s>>this.DB-a):this.data[this.t-1]|=s<<a,a+=r,a>=this.DB&&(a-=this.DB)}r==8&&(t[0]&128)!=0&&(this.s=-1,a>0&&(this.data[this.t-1]|=(1<<this.DB-a)-1<<a)),this.clamp(),i&&ve.ZERO.subTo(this,this)}function B6(){for(var t=this.s&this.DM;this.t>0&&this.data[this.t-1]==t;)--this.t}function O6(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(t==16)e=4;else if(t==8)e=3;else if(t==2)e=1;else if(t==32)e=5;else if(t==4)e=2;else return this.toRadix(t);var r=(1<<e)-1,n,i=!1,a="",s=this.t,l=this.DB-s*this.DB%e;if(s-- >0)for(l<this.DB&&(n=this.data[s]>>l)>0&&(i=!0,a=sC(n));s>=0;)l<e?(n=(this.data[s]&(1<<l)-1)<<e-l,n|=this.data[--s]>>(l+=this.DB-e)):(n=this.data[s]>>(l-=e)&r,l<=0&&(l+=this.DB,--s)),n>0&&(i=!0),i&&(a+=sC(n));return i?a:"0"}function L6(){var t=Gt();return ve.ZERO.subTo(this,t),t}function P6(){return this.s<0?this.negate():this}function M6(t){var e=this.s-t.s;if(e!=0)return e;var r=this.t;if(e=r-t.t,e!=0)return this.s<0?-e:e;for(;--r>=0;)if((e=this.data[r]-t.data[r])!=0)return e;return 0}function Nd(t){var e=1,r;return(r=t>>>16)!=0&&(t=r,e+=16),(r=t>>8)!=0&&(t=r,e+=8),(r=t>>4)!=0&&(t=r,e+=4),(r=t>>2)!=0&&(t=r,e+=2),(r=t>>1)!=0&&(t=r,e+=1),e}function U6(){return this.t<=0?0:this.DB*(this.t-1)+Nd(this.data[this.t-1]^this.s&this.DM)}function F6(t,e){var r;for(r=this.t-1;r>=0;--r)e.data[r+t]=this.data[r];for(r=t-1;r>=0;--r)e.data[r]=0;e.t=this.t+t,e.s=this.s}function q6(t,e){for(var r=t;r<this.t;++r)e.data[r-t]=this.data[r];e.t=Math.max(this.t-t,0),e.s=this.s}function G6(t,e){var r=t%this.DB,n=this.DB-r,i=(1<<n)-1,a=Math.floor(t/this.DB),s=this.s<<r&this.DM,l;for(l=this.t-1;l>=0;--l)e.data[l+a+1]=this.data[l]>>n|s,s=(this.data[l]&i)<<r;for(l=a-1;l>=0;--l)e.data[l]=0;e.data[a]=s,e.t=this.t+a+1,e.s=this.s,e.clamp()}function V6(t,e){e.s=this.s;var r=Math.floor(t/this.DB);if(r>=this.t){e.t=0;return}var n=t%this.DB,i=this.DB-n,a=(1<<n)-1;e.data[0]=this.data[r]>>n;for(var s=r+1;s<this.t;++s)e.data[s-r-1]|=(this.data[s]&a)<<i,e.data[s-r]=this.data[s]>>n;n>0&&(e.data[this.t-r-1]|=(this.s&a)<<i),e.t=this.t-r,e.clamp()}function H6(t,e){for(var r=0,n=0,i=Math.min(t.t,this.t);r<i;)n+=this.data[r]-t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n-=t.s;r<this.t;)n+=this.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<t.t;)n-=t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n-=t.s}e.s=n<0?-1:0,n<-1?e.data[r++]=this.DV+n:n>0&&(e.data[r++]=n),e.t=r,e.clamp()}function K6(t,e){var r=this.abs(),n=t.abs(),i=r.t;for(e.t=i+n.t;--i>=0;)e.data[i]=0;for(i=0;i<n.t;++i)e.data[i+r.t]=r.am(0,n.data[i],e,i,0,r.t);e.s=0,e.clamp(),this.s!=t.s&&ve.ZERO.subTo(e,e)}function j6(t){for(var e=this.abs(),r=t.t=2*e.t;--r>=0;)t.data[r]=0;for(r=0;r<e.t-1;++r){var n=e.am(r,e.data[r],t,2*r,0,1);(t.data[r+e.t]+=e.am(r+1,2*e.data[r],t,2*r+1,n,e.t-r-1))>=e.DV&&(t.data[r+e.t]-=e.DV,t.data[r+e.t+1]=1)}t.t>0&&(t.data[t.t-1]+=e.am(r,e.data[r],t,2*r,0,1)),t.s=0,t.clamp()}function Y6(t,e,r){var n=t.abs();if(!(n.t<=0)){var i=this.abs();if(i.t<n.t){e!=null&&e.fromInt(0),r!=null&&this.copyTo(r);return}r==null&&(r=Gt());var a=Gt(),s=this.s,l=t.s,u=this.DB-Nd(n.data[n.t-1]);u>0?(n.lShiftTo(u,a),i.lShiftTo(u,r)):(n.copyTo(a),i.copyTo(r));var f=a.t,d=a.data[f-1];if(d!=0){var h=d*(1<<this.F1)+(f>1?a.data[f-2]>>this.F2:0),g=this.FV/h,y=(1<<this.F1)/h,m=1<<this.F2,w=r.t,_=w-f,E=e==null?Gt():e;for(a.dlShiftTo(_,E),r.compareTo(E)>=0&&(r.data[r.t++]=1,r.subTo(E,r)),ve.ONE.dlShiftTo(f,E),E.subTo(a,a);a.t<f;)a.data[a.t++]=0;for(;--_>=0;){var b=r.data[--w]==d?this.DM:Math.floor(r.data[w]*g+(r.data[w-1]+m)*y);if((r.data[w]+=a.am(0,b,r,_,0,f))<b)for(a.dlShiftTo(_,E),r.subTo(E,r);r.data[w]<--b;)r.subTo(E,r)}e!=null&&(r.drShiftTo(f,e),s!=l&&ve.ZERO.subTo(e,e)),r.t=f,r.clamp(),u>0&&r.rShiftTo(u,r),s<0&&ve.ZERO.subTo(r,r)}}}function W6(t){var e=Gt();return this.abs().divRemTo(t,null,e),this.s<0&&e.compareTo(ve.ZERO)>0&&t.subTo(e,e),e}function Qs(t){this.m=t}function z6(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t}function Q6(t){return t}function X6(t){t.divRemTo(this.m,null,t)}function J6(t,e,r){t.multiplyTo(e,r),this.reduce(r)}function Z6(t,e){t.squareTo(e),this.reduce(e)}Qs.prototype.convert=z6;Qs.prototype.revert=Q6;Qs.prototype.reduce=X6;Qs.prototype.mulTo=J6;Qs.prototype.sqrTo=Z6;function $6(){if(this.t<1)return 0;var t=this.data[0];if((t&1)==0)return 0;var e=t&3;return e=e*(2-(t&15)*e)&15,e=e*(2-(t&255)*e)&255,e=e*(2-((t&65535)*e&65535))&65535,e=e*(2-t*e%this.DV)%this.DV,e>0?this.DV-e:-e}function Xs(t){this.m=t,this.mp=t.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function eM(t){var e=Gt();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(ve.ZERO)>0&&this.m.subTo(e,e),e}function tM(t){var e=Gt();return t.copyTo(e),this.reduce(e),e}function rM(t){for(;t.t<=this.mt2;)t.data[t.t++]=0;for(var e=0;e<this.m.t;++e){var r=t.data[e]&32767,n=r*this.mpl+((r*this.mph+(t.data[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(r=e+this.m.t,t.data[r]+=this.m.am(0,n,t,e,0,this.m.t);t.data[r]>=t.DV;)t.data[r]-=t.DV,t.data[++r]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)}function nM(t,e){t.squareTo(e),this.reduce(e)}function iM(t,e,r){t.multiplyTo(e,r),this.reduce(r)}Xs.prototype.convert=eM;Xs.prototype.revert=tM;Xs.prototype.reduce=rM;Xs.prototype.mulTo=iM;Xs.prototype.sqrTo=nM;function aM(){return(this.t>0?this.data[0]&1:this.s)==0}function sM(t,e){if(t>4294967295||t<1)return ve.ONE;var r=Gt(),n=Gt(),i=e.convert(this),a=Nd(t)-1;for(i.copyTo(r);--a>=0;)if(e.sqrTo(r,n),(t&1<<a)>0)e.mulTo(n,i,r);else{var s=r;r=n,n=s}return e.revert(r)}function oM(t,e){var r;return t<256||e.isEven()?r=new Qs(e):r=new Xs(e),this.exp(t,r)}ve.prototype.copyTo=N6;ve.prototype.fromInt=R6;ve.prototype.fromString=D6;ve.prototype.clamp=B6;ve.prototype.dlShiftTo=F6;ve.prototype.drShiftTo=q6;ve.prototype.lShiftTo=G6;ve.prototype.rShiftTo=V6;ve.prototype.subTo=H6;ve.prototype.multiplyTo=K6;ve.prototype.squareTo=j6;ve.prototype.divRemTo=Y6;ve.prototype.invDigit=$6;ve.prototype.isEven=aM;ve.prototype.exp=sM;ve.prototype.toString=O6;ve.prototype.negate=L6;ve.prototype.abs=P6;ve.prototype.compareTo=M6;ve.prototype.bitLength=U6;ve.prototype.mod=W6;ve.prototype.modPowInt=oM;ve.ZERO=ds(0);ve.ONE=ds(1);function lM(){var t=Gt();return this.copyTo(t),t}function uM(){if(this.s<0){if(this.t==1)return this.data[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this.data[0];if(this.t==0)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]}function cM(){return this.t==0?this.s:this.data[0]<<24>>24}function fM(){return this.t==0?this.s:this.data[0]<<16>>16}function dM(t){return Math.floor(Math.LN2*this.DB/Math.log(t))}function hM(){return this.s<0?-1:this.t<=0||this.t==1&&this.data[0]<=0?0:1}function pM(t){if(t==null&&(t=10),this.signum()==0||t<2||t>36)return"0";var e=this.chunkSize(t),r=Math.pow(t,e),n=ds(r),i=Gt(),a=Gt(),s="";for(this.divRemTo(n,i,a);i.signum()>0;)s=(r+a.intValue()).toString(t).substr(1)+s,i.divRemTo(n,i,a);return a.intValue().toString(t)+s}function gM(t,e){this.fromInt(0),e==null&&(e=10);for(var r=this.chunkSize(e),n=Math.pow(e,r),i=!1,a=0,s=0,l=0;l<t.length;++l){var u=oC(t,l);if(u<0){t.charAt(l)=="-"&&this.signum()==0&&(i=!0);continue}s=e*s+u,++a>=r&&(this.dMultiply(n),this.dAddOffset(s,0),a=0,s=0)}a>0&&(this.dMultiply(Math.pow(e,a)),this.dAddOffset(s,0)),i&&ve.ZERO.subTo(this,this)}function mM(t,e,r){if(typeof e=="number")if(t<2)this.fromInt(1);else for(this.fromNumber(t,r),this.testBit(t-1)||this.bitwiseTo(ve.ONE.shiftLeft(t-1),yg,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(e);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(ve.ONE.shiftLeft(t-1),this);else{var n=new Array,i=t&7;n.length=(t>>3)+1,e.nextBytes(n),i>0?n[0]&=(1<<i)-1:n[0]=0,this.fromString(n,256)}}function yM(){var t=this.t,e=new Array;e[0]=this.s;var r=this.DB-t*this.DB%8,n,i=0;if(t-- >0)for(r<this.DB&&(n=this.data[t]>>r)!=(this.s&this.DM)>>r&&(e[i++]=n|this.s<<this.DB-r);t>=0;)r<8?(n=(this.data[t]&(1<<r)-1)<<8-r,n|=this.data[--t]>>(r+=this.DB-8)):(n=this.data[t]>>(r-=8)&255,r<=0&&(r+=this.DB,--t)),(n&128)!=0&&(n|=-256),i==0&&(this.s&128)!=(n&128)&&++i,(i>0||n!=this.s)&&(e[i++]=n);return e}function vM(t){return this.compareTo(t)==0}function _M(t){return this.compareTo(t)<0?this:t}function wM(t){return this.compareTo(t)>0?this:t}function EM(t,e,r){var n,i,a=Math.min(t.t,this.t);for(n=0;n<a;++n)r.data[n]=e(this.data[n],t.data[n]);if(t.t<this.t){for(i=t.s&this.DM,n=a;n<this.t;++n)r.data[n]=e(this.data[n],i);r.t=this.t}else{for(i=this.s&this.DM,n=a;n<t.t;++n)r.data[n]=e(i,t.data[n]);r.t=t.t}r.s=e(this.s,t.s),r.clamp()}function CM(t,e){return t&e}function bM(t){var e=Gt();return this.bitwiseTo(t,CM,e),e}function yg(t,e){return t|e}function xM(t){var e=Gt();return this.bitwiseTo(t,yg,e),e}function lC(t,e){return t^e}function TM(t){var e=Gt();return this.bitwiseTo(t,lC,e),e}function uC(t,e){return t&~e}function SM(t){var e=Gt();return this.bitwiseTo(t,uC,e),e}function AM(){for(var t=Gt(),e=0;e<this.t;++e)t.data[e]=this.DM&~this.data[e];return t.t=this.t,t.s=~this.s,t}function kM(t){var e=Gt();return t<0?this.rShiftTo(-t,e):this.lShiftTo(t,e),e}function IM(t){var e=Gt();return t<0?this.lShiftTo(-t,e):this.rShiftTo(t,e),e}function NM(t){if(t==0)return-1;var e=0;return(t&65535)==0&&(t>>=16,e+=16),(t&255)==0&&(t>>=8,e+=8),(t&15)==0&&(t>>=4,e+=4),(t&3)==0&&(t>>=2,e+=2),(t&1)==0&&++e,e}function RM(){for(var t=0;t<this.t;++t)if(this.data[t]!=0)return t*this.DB+NM(this.data[t]);return this.s<0?this.t*this.DB:-1}function DM(t){for(var e=0;t!=0;)t&=t-1,++e;return e}function BM(){for(var t=0,e=this.s&this.DM,r=0;r<this.t;++r)t+=DM(this.data[r]^e);return t}function OM(t){var e=Math.floor(t/this.DB);return e>=this.t?this.s!=0:(this.data[e]&1<<t%this.DB)!=0}function LM(t,e){var r=ve.ONE.shiftLeft(t);return this.bitwiseTo(r,e,r),r}function PM(t){return this.changeBit(t,yg)}function MM(t){return this.changeBit(t,uC)}function UM(t){return this.changeBit(t,lC)}function FM(t,e){for(var r=0,n=0,i=Math.min(t.t,this.t);r<i;)n+=this.data[r]+t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n+=t.s;r<this.t;)n+=this.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;r<t.t;)n+=t.data[r],e.data[r++]=n&this.DM,n>>=this.DB;n+=t.s}e.s=n<0?-1:0,n>0?e.data[r++]=n:n<-1&&(e.data[r++]=this.DV+n),e.t=r,e.clamp()}function qM(t){var e=Gt();return this.addTo(t,e),e}function GM(t){var e=Gt();return this.subTo(t,e),e}function VM(t){var e=Gt();return this.multiplyTo(t,e),e}function HM(t){var e=Gt();return this.divRemTo(t,e,null),e}function KM(t){var e=Gt();return this.divRemTo(t,null,e),e}function jM(t){var e=Gt(),r=Gt();return this.divRemTo(t,e,r),new Array(e,r)}function YM(t){this.data[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()}function WM(t,e){if(t!=0){for(;this.t<=e;)this.data[this.t++]=0;for(this.data[e]+=t;this.data[e]>=this.DV;)this.data[e]-=this.DV,++e>=this.t&&(this.data[this.t++]=0),++this.data[e]}}function Pu(){}function cC(t){return t}function zM(t,e,r){t.multiplyTo(e,r)}function QM(t,e){t.squareTo(e)}Pu.prototype.convert=cC;Pu.prototype.revert=cC;Pu.prototype.mulTo=zM;Pu.prototype.sqrTo=QM;function XM(t){return this.exp(t,new Pu)}function JM(t,e,r){var n=Math.min(this.t+t.t,e);for(r.s=0,r.t=n;n>0;)r.data[--n]=0;var i;for(i=r.t-this.t;n<i;++n)r.data[n+this.t]=this.am(0,t.data[n],r,n,0,this.t);for(i=Math.min(t.t,e);n<i;++n)this.am(0,t.data[n],r,n,0,e-n);r.clamp()}function ZM(t,e,r){--e;var n=r.t=this.t+t.t-e;for(r.s=0;--n>=0;)r.data[n]=0;for(n=Math.max(e-this.t,0);n<t.t;++n)r.data[this.t+n-e]=this.am(e-n,t.data[n],r,0,0,this.t+n-e);r.clamp(),r.drShiftTo(1,r)}function dl(t){this.r2=Gt(),this.q3=Gt(),ve.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}function $M(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=Gt();return t.copyTo(e),this.reduce(e),e}function e5(t){return t}function t5(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);t.compareTo(this.m)>=0;)t.subTo(this.m,t)}function r5(t,e){t.squareTo(e),this.reduce(e)}function n5(t,e,r){t.multiplyTo(e,r),this.reduce(r)}dl.prototype.convert=$M;dl.prototype.revert=e5;dl.prototype.reduce=t5;dl.prototype.mulTo=n5;dl.prototype.sqrTo=r5;function i5(t,e){var r=t.bitLength(),n,i=ds(1),a;if(r<=0)return i;r<18?n=1:r<48?n=3:r<144?n=4:r<768?n=5:n=6,r<8?a=new Qs(e):e.isEven()?a=new dl(e):a=new Xs(e);var s=new Array,l=3,u=n-1,f=(1<<n)-1;if(s[1]=a.convert(this),n>1){var d=Gt();for(a.sqrTo(s[1],d);l<=f;)s[l]=Gt(),a.mulTo(d,s[l-2],s[l]),l+=2}var h=t.t-1,g,y=!0,m=Gt(),w;for(r=Nd(t.data[h])-1;h>=0;){for(r>=u?g=t.data[h]>>r-u&f:(g=(t.data[h]&(1<<r+1)-1)<<u-r,h>0&&(g|=t.data[h-1]>>this.DB+r-u)),l=n;(g&1)==0;)g>>=1,--l;if((r-=l)<0&&(r+=this.DB,--h),y)s[g].copyTo(i),y=!1;else{for(;l>1;)a.sqrTo(i,m),a.sqrTo(m,i),l-=2;l>0?a.sqrTo(i,m):(w=i,i=m,m=w),a.mulTo(m,s[g],i)}for(;h>=0&&(t.data[h]&1<<r)==0;)a.sqrTo(i,m),w=i,i=m,m=w,--r<0&&(r=this.DB-1,--h)}return a.revert(i)}function a5(t){var e=this.s<0?this.negate():this.clone(),r=t.s<0?t.negate():t.clone();if(e.compareTo(r)<0){var n=e;e=r,r=n}var i=e.getLowestSetBit(),a=r.getLowestSetBit();if(a<0)return e;for(i<a&&(a=i),a>0&&(e.rShiftTo(a,e),r.rShiftTo(a,r));e.signum()>0;)(i=e.getLowestSetBit())>0&&e.rShiftTo(i,e),(i=r.getLowestSetBit())>0&&r.rShiftTo(i,r),e.compareTo(r)>=0?(e.subTo(r,e),e.rShiftTo(1,e)):(r.subTo(e,r),r.rShiftTo(1,r));return a>0&&r.lShiftTo(a,r),r}function s5(t){if(t<=0)return 0;var e=this.DV%t,r=this.s<0?t-1:0;if(this.t>0)if(e==0)r=this.data[0]%t;else for(var n=this.t-1;n>=0;--n)r=(e*r+this.data[n])%t;return r}function o5(t){var e=t.isEven();if(this.isEven()&&e||t.signum()==0)return ve.ZERO;for(var r=t.clone(),n=this.clone(),i=ds(1),a=ds(0),s=ds(0),l=ds(1);r.signum()!=0;){for(;r.isEven();)r.rShiftTo(1,r),e?((!i.isEven()||!a.isEven())&&(i.addTo(this,i),a.subTo(t,a)),i.rShiftTo(1,i)):a.isEven()||a.subTo(t,a),a.rShiftTo(1,a);for(;n.isEven();)n.rShiftTo(1,n),e?((!s.isEven()||!l.isEven())&&(s.addTo(this,s),l.subTo(t,l)),s.rShiftTo(1,s)):l.isEven()||l.subTo(t,l),l.rShiftTo(1,l);r.compareTo(n)>=0?(r.subTo(n,r),e&&i.subTo(s,i),a.subTo(l,a)):(n.subTo(r,n),e&&s.subTo(i,s),l.subTo(a,l))}if(n.compareTo(ve.ONE)!=0)return ve.ZERO;if(l.compareTo(t)>=0)return l.subtract(t);if(l.signum()<0)l.addTo(t,l);else return l;return l.signum()<0?l.add(t):l}var Ai=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],l5=(1<<26)/Ai[Ai.length-1];function u5(t){var e,r=this.abs();if(r.t==1&&r.data[0]<=Ai[Ai.length-1]){for(e=0;e<Ai.length;++e)if(r.data[0]==Ai[e])return!0;return!1}if(r.isEven())return!1;for(e=1;e<Ai.length;){for(var n=Ai[e],i=e+1;i<Ai.length&&n<l5;)n*=Ai[i++];for(n=r.modInt(n);e<i;)if(n%Ai[e++]==0)return!1}return r.millerRabin(t)}function c5(t){var e=this.subtract(ve.ONE),r=e.getLowestSetBit();if(r<=0)return!1;for(var n=e.shiftRight(r),i=f5(),a,s=0;s<t;++s){do a=new ve(this.bitLength(),i);while(a.compareTo(ve.ONE)<=0||a.compareTo(e)>=0);var l=a.modPow(n,this);if(l.compareTo(ve.ONE)!=0&&l.compareTo(e)!=0){for(var u=1;u++<r&&l.compareTo(e)!=0;)if(l=l.modPowInt(2,this),l.compareTo(ve.ONE)==0)return!1;if(l.compareTo(e)!=0)return!1}}return!0}function f5(){return{nextBytes:function(t){for(var e=0;e<t.length;++e)t[e]=Math.floor(Math.random()*256)}}}ve.prototype.chunkSize=dM;ve.prototype.toRadix=pM;ve.prototype.fromRadix=gM;ve.prototype.fromNumber=mM;ve.prototype.bitwiseTo=EM;ve.prototype.changeBit=LM;ve.prototype.addTo=FM;ve.prototype.dMultiply=YM;ve.prototype.dAddOffset=WM;ve.prototype.multiplyLowerTo=JM;ve.prototype.multiplyUpperTo=ZM;ve.prototype.modInt=s5;ve.prototype.millerRabin=c5;ve.prototype.clone=lM;ve.prototype.intValue=uM;ve.prototype.byteValue=cM;ve.prototype.shortValue=fM;ve.prototype.signum=hM;ve.prototype.toByteArray=yM;ve.prototype.equals=vM;ve.prototype.min=_M;ve.prototype.max=wM;ve.prototype.and=bM;ve.prototype.or=xM;ve.prototype.xor=TM;ve.prototype.andNot=SM;ve.prototype.not=AM;ve.prototype.shiftLeft=kM;ve.prototype.shiftRight=IM;ve.prototype.getLowestSetBit=RM;ve.prototype.bitCount=BM;ve.prototype.testBit=OM;ve.prototype.setBit=PM;ve.prototype.clearBit=MM;ve.prototype.flipBit=UM;ve.prototype.add=qM;ve.prototype.subtract=GM;ve.prototype.multiply=VM;ve.prototype.divide=HM;ve.prototype.remainder=KM;ve.prototype.divideAndRemainder=jM;ve.prototype.modPow=i5;ve.prototype.modInverse=o5;ve.prototype.pow=XM;ve.prototype.gcd=a5;ve.prototype.isProbablePrime=u5});var hl=de((k7,gC)=>{var ea=vt();Qi();qt();var dC=gC.exports=ea.sha1=ea.sha1||{};ea.md.sha1=ea.md.algorithms.sha1=dC;dC.create=function(){hC||d5();var t=null,e=ea.util.createBuffer(),r=new Array(80),n={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength64=[];for(var i=n.messageLengthSize/4,a=0;a<i;++a)n.fullMessageLength.push(0);return e=ea.util.createBuffer(),t={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},n},n.start(),n.update=function(i,a){a==="utf8"&&(i=ea.util.encodeUtf8(i));var s=i.length;n.messageLength+=s,s=[s/4294967296>>>0,s>>>0];for(var l=n.fullMessageLength.length-1;l>=0;--l)n.fullMessageLength[l]+=s[1],s[1]=s[0]+(n.fullMessageLength[l]/4294967296>>>0),n.fullMessageLength[l]=n.fullMessageLength[l]>>>0,s[0]=s[1]/4294967296>>>0;return e.putBytes(i),pC(t,r,e),(e.read>2048||e.length()===0)&&e.compact(),n},n.digest=function(){var i=ea.util.createBuffer();i.putBytes(e.bytes());var a=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,s=a&n.blockLength-1;i.putBytes(vg.substr(0,n.blockLength-s));for(var l,u,f=n.fullMessageLength[0]*8,d=0;d<n.fullMessageLength.length-1;++d)l=n.fullMessageLength[d+1]*8,u=l/4294967296>>>0,f+=u,i.putInt32(f>>>0),f=l>>>0;i.putInt32(f);var h={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3,h4:t.h4};pC(h,r,i);var g=ea.util.createBuffer();return g.putInt32(h.h0),g.putInt32(h.h1),g.putInt32(h.h2),g.putInt32(h.h3),g.putInt32(h.h4),g},n};var vg=null,hC=!1;function d5(){vg=String.fromCharCode(128),vg+=ea.util.fillString(String.fromCharCode(0),64),hC=!0}function pC(t,e,r){for(var n,i,a,s,l,u,f,d,h=r.length();h>=64;){for(i=t.h0,a=t.h1,s=t.h2,l=t.h3,u=t.h4,d=0;d<16;++d)n=r.getInt32(),e[d]=n,f=l^a&(s^l),n=(i<<5|i>>>27)+f+u+1518500249+n,u=l,l=s,s=(a<<30|a>>>2)>>>0,a=i,i=n;for(;d<20;++d)n=e[d-3]^e[d-8]^e[d-14]^e[d-16],n=n<<1|n>>>31,e[d]=n,f=l^a&(s^l),n=(i<<5|i>>>27)+f+u+1518500249+n,u=l,l=s,s=(a<<30|a>>>2)>>>0,a=i,i=n;for(;d<32;++d)n=e[d-3]^e[d-8]^e[d-14]^e[d-16],n=n<<1|n>>>31,e[d]=n,f=a^s^l,n=(i<<5|i>>>27)+f+u+1859775393+n,u=l,l=s,s=(a<<30|a>>>2)>>>0,a=i,i=n;for(;d<40;++d)n=e[d-6]^e[d-16]^e[d-28]^e[d-32],n=n<<2|n>>>30,e[d]=n,f=a^s^l,n=(i<<5|i>>>27)+f+u+1859775393+n,u=l,l=s,s=(a<<30|a>>>2)>>>0,a=i,i=n;for(;d<60;++d)n=e[d-6]^e[d-16]^e[d-28]^e[d-32],n=n<<2|n>>>30,e[d]=n,f=a&s|l&(a^s),n=(i<<5|i>>>27)+f+u+2400959708+n,u=l,l=s,s=(a<<30|a>>>2)>>>0,a=i,i=n;for(;d<80;++d)n=e[d-6]^e[d-16]^e[d-28]^e[d-32],n=n<<2|n>>>30,e[d]=n,f=a^s^l,n=(i<<5|i>>>27)+f+u+3395469782+n,u=l,l=s,s=(a<<30|a>>>2)>>>0,a=i,i=n;t.h0=t.h0+i|0,t.h1=t.h1+a|0,t.h2=t.h2+s|0,t.h3=t.h3+l|0,t.h4=t.h4+u|0,h-=64}}});var _g=de((I7,yC)=>{var ta=vt();qt();oi();hl();var mC=yC.exports=ta.pkcs1=ta.pkcs1||{};mC.encode_rsa_oaep=function(t,e,r){var n,i,a,s;typeof r=="string"?(n=r,i=arguments[3]||void 0,a=arguments[4]||void 0):r&&(n=r.label||void 0,i=r.seed||void 0,a=r.md||void 0,r.mgf1&&r.mgf1.md&&(s=r.mgf1.md)),a?a.start():a=ta.md.sha1.create(),s||(s=a);var l=Math.ceil(t.n.bitLength()/8),u=l-2*a.digestLength-2;if(e.length>u){var f=new Error("RSAES-OAEP input message length is too long.");throw f.length=e.length,f.maxLength=u,f}n||(n=""),a.update(n,"raw");for(var d=a.digest(),h="",g=u-e.length,y=0;y<g;y++)h+="\0";var m=d.getBytes()+h+""+e;if(!i)i=ta.random.getBytes(a.digestLength);else if(i.length!==a.digestLength){var f=new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.");throw f.seedLength=i.length,f.digestLength=a.digestLength,f}var w=Rd(i,l-a.digestLength-1,s),_=ta.util.xorBytes(m,w,m.length),E=Rd(_,a.digestLength,s),b=ta.util.xorBytes(i,E,i.length);return"\0"+b+_};mC.decode_rsa_oaep=function(t,e,r){var n,i,a;typeof r=="string"?(n=r,i=arguments[3]||void 0):r&&(n=r.label||void 0,i=r.md||void 0,r.mgf1&&r.mgf1.md&&(a=r.mgf1.md));var s=Math.ceil(t.n.bitLength()/8);if(e.length!==s){var _=new Error("RSAES-OAEP encoded message length is invalid.");throw _.length=e.length,_.expectedLength=s,_}if(i===void 0?i=ta.md.sha1.create():i.start(),a||(a=i),s<2*i.digestLength+2)throw new Error("RSAES-OAEP key is too short for the hash function.");n||(n=""),i.update(n,"raw");for(var l=i.digest().getBytes(),u=e.charAt(0),f=e.substring(1,i.digestLength+1),d=e.substring(1+i.digestLength),h=Rd(d,i.digestLength,a),g=ta.util.xorBytes(f,h,f.length),y=Rd(g,s-i.digestLength-1,a),m=ta.util.xorBytes(d,y,d.length),w=m.substring(0,i.digestLength),_=u!=="\0",E=0;E<i.digestLength;++E)_|=l.charAt(E)!==w.charAt(E);for(var b=1,k=i.digestLength,O=i.digestLength;O<m.length;O++){var R=m.charCodeAt(O),B=R&1^1,ne=b?65534:0;_|=R&ne,b=b&B,k+=b}if(_||m.charCodeAt(k)!==1)throw new Error("Invalid RSAES-OAEP padding.");return m.substring(k+1)};function Rd(t,e,r){r||(r=ta.md.sha1.create());for(var n="",i=Math.ceil(e/r.digestLength),a=0;a<i;++a){var s=String.fromCharCode(a>>24&255,a>>16&255,a>>8&255,a&255);r.start(),r.update(t+s),n+=r.digest().getBytes()}return n.substring(0,e)}});var Eg=de((N7,wg)=>{var hs=vt();qt();Mu();oi();(function(){if(hs.prime){wg.exports=hs.prime;return}var t=wg.exports=hs.prime=hs.prime||{},e=hs.jsbn.BigInteger,r=[6,4,2,4,2,4,6,2],n=new e(null);n.fromInt(30);var i=function(h,g){return h|g};t.generateProbablePrime=function(h,g,y){typeof g=="function"&&(y=g,g={}),g=g||{};var m=g.algorithm||"PRIMEINC";typeof m=="string"&&(m={name:m}),m.options=m.options||{};var w=g.prng||hs.random,_={nextBytes:function(E){for(var b=w.getBytesSync(E.length),k=0;k<E.length;++k)E[k]=b.charCodeAt(k)}};if(m.name==="PRIMEINC")return a(h,_,m.options,y);throw new Error("Invalid prime generation algorithm: "+m.name)};function a(h,g,y,m){return"workers"in y?u(h,g,y,m):s(h,g,y,m)}function s(h,g,y,m){var w=f(h,g),_=0,E=d(w.bitLength());"millerRabinTests"in y&&(E=y.millerRabinTests);var b=10;"maxBlockTime"in y&&(b=y.maxBlockTime),l(w,h,g,_,E,b,m)}function l(h,g,y,m,w,_,E){var b=+new Date;do{if(h.bitLength()>g&&(h=f(g,y)),h.isProbablePrime(w))return E(null,h);h.dAddOffset(r[m++%8],0)}while(_<0||+new Date-b<_);hs.util.setImmediate(function(){l(h,g,y,m,w,_,E)})}function u(h,g,y,m){if(typeof Worker=="undefined")return s(h,g,y,m);var w=f(h,g),_=y.workers,E=y.workLoad||100,b=E*30/8,k=y.workerScript||"forge/prime.worker.js";if(_===-1)return hs.util.estimateCores(function(R,B){R&&(B=2),_=B-1,O()});O();function O(){_=Math.max(1,_);for(var R=[],B=0;B<_;++B)R[B]=new Worker(k);for(var ne=_,B=0;B<_;++B)R[B].addEventListener("message",G);var M=!1;function G(re){if(!M){--ne;var se=re.data;if(se.found){for(var ye=0;ye<R.length;++ye)R[ye].terminate();return M=!0,m(null,new e(se.prime,16))}w.bitLength()>h&&(w=f(h,g));var Ae=w.toString(16);re.target.postMessage({hex:Ae,workLoad:E}),w.dAddOffset(b,0)}}}}function f(h,g){var y=new e(h,g),m=h-1;return y.testBit(m)||y.bitwiseTo(e.ONE.shiftLeft(m),i,y),y.dAddOffset(31-y.mod(n).byteValue(),0),y}function d(h){return h<=100?27:h<=150?18:h<=200?15:h<=250?12:h<=300?9:h<=350?8:h<=400?7:h<=500?6:h<=600?5:h<=800?4:h<=1250?3:2}})()});var Uu=de((R7,xC)=>{var qe=vt();Si();Mu();fs();_g();Eg();oi();qt();typeof Mt=="undefined"&&(Mt=qe.jsbn.BigInteger);var Mt,Cg=qe.util.isNodejs?require("crypto"):null,$=qe.asn1,ui=qe.util;qe.pki=qe.pki||{};xC.exports=qe.pki.rsa=qe.rsa=qe.rsa||{};var st=qe.pki,h5=[6,4,2,4,2,4,6,2],p5={name:"PrivateKeyInfo",tagClass:$.Class.UNIVERSAL,type:$.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:$.Class.UNIVERSAL,type:$.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:$.Class.UNIVERSAL,type:$.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:$.Class.UNIVERSAL,type:$.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:$.Class.UNIVERSAL,type:$.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},g5={name:"RSAPrivateKey",tagClass:$.Class.UNIVERSAL,type:$.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:$.Class.UNIVERSAL,type:$.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:$.Class.UNIVERSAL,type:$.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:$.Class.UNIVERSAL,type:$.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:$.Class.UNIVERSAL,type:$.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",tagClass:$.Class.UNIVERSAL,type:$.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:$.Class.UNIVERSAL,type:$.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:$.Class.UNIVERSAL,type:$.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:$.Class.UNIVERSAL,type:$.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:$.Class.UNIVERSAL,type:$.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},m5={name:"RSAPublicKey",tagClass:$.Class.UNIVERSAL,type:$.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:$.Class.UNIVERSAL,type:$.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:$.Class.UNIVERSAL,type:$.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},y5=qe.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:$.Class.UNIVERSAL,type:$.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:$.Class.UNIVERSAL,type:$.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:$.Class.UNIVERSAL,type:$.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:$.Class.UNIVERSAL,type:$.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:$.Class.UNIVERSAL,type:$.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]},v5={name:"DigestInfo",tagClass:$.Class.UNIVERSAL,type:$.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm",tagClass:$.Class.UNIVERSAL,type:$.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm.algorithmIdentifier",tagClass:$.Class.UNIVERSAL,type:$.Type.OID,constructed:!1,capture:"algorithmIdentifier"},{name:"DigestInfo.DigestAlgorithm.parameters",tagClass:$.Class.UNIVERSAL,type:$.Type.NULL,capture:"parameters",optional:!0,constructed:!1}]},{name:"DigestInfo.digest",tagClass:$.Class.UNIVERSAL,type:$.Type.OCTETSTRING,constructed:!1,capture:"digest"}]},_5=function(t){var e;if(t.algorithm in st.oids)e=st.oids[t.algorithm];else{var r=new Error("Unknown message digest algorithm.");throw r.algorithm=t.algorithm,r}var n=$.oidToDer(e).getBytes(),i=$.create($.Class.UNIVERSAL,$.Type.SEQUENCE,!0,[]),a=$.create($.Class.UNIVERSAL,$.Type.SEQUENCE,!0,[]);a.value.push($.create($.Class.UNIVERSAL,$.Type.OID,!1,n)),a.value.push($.create($.Class.UNIVERSAL,$.Type.NULL,!1,""));var s=$.create($.Class.UNIVERSAL,$.Type.OCTETSTRING,!1,t.digest().getBytes());return i.value.push(a),i.value.push(s),$.toDer(i).getBytes()},vC=function(t,e,r){if(r)return t.modPow(e.e,e.n);if(!e.p||!e.q)return t.modPow(e.d,e.n);e.dP||(e.dP=e.d.mod(e.p.subtract(Mt.ONE))),e.dQ||(e.dQ=e.d.mod(e.q.subtract(Mt.ONE))),e.qInv||(e.qInv=e.q.modInverse(e.p));var n;do n=new Mt(qe.util.bytesToHex(qe.random.getBytes(e.n.bitLength()/8)),16);while(n.compareTo(e.n)>=0||!n.gcd(e.n).equals(Mt.ONE));t=t.multiply(n.modPow(e.e,e.n)).mod(e.n);for(var i=t.mod(e.p).modPow(e.dP,e.p),a=t.mod(e.q).modPow(e.dQ,e.q);i.compareTo(a)<0;)i=i.add(e.p);var s=i.subtract(a).multiply(e.qInv).mod(e.p).multiply(e.q).add(a);return s=s.multiply(n.modInverse(e.n)).mod(e.n),s};st.rsa.encrypt=function(t,e,r){var n=r,i,a=Math.ceil(e.n.bitLength()/8);r!==!1&&r!==!0?(n=r===2,i=_C(t,e,r)):(i=qe.util.createBuffer(),i.putBytes(t));for(var s=new Mt(i.toHex(),16),l=vC(s,e,n),u=l.toString(16),f=qe.util.createBuffer(),d=a-Math.ceil(u.length/2);d>0;)f.putByte(0),--d;return f.putBytes(qe.util.hexToBytes(u)),f.getBytes()};st.rsa.decrypt=function(t,e,r,n){var i=Math.ceil(e.n.bitLength()/8);if(t.length!==i){var a=new Error("Encrypted message length is invalid.");throw a.length=t.length,a.expected=i,a}var s=new Mt(qe.util.createBuffer(t).toHex(),16);if(s.compareTo(e.n)>=0)throw new Error("Encrypted message is invalid.");for(var l=vC(s,e,r),u=l.toString(16),f=qe.util.createBuffer(),d=i-Math.ceil(u.length/2);d>0;)f.putByte(0),--d;return f.putBytes(qe.util.hexToBytes(u)),n!==!1?Dd(f.getBytes(),e,r):f.getBytes()};st.rsa.createKeyPairGenerationState=function(t,e,r){typeof t=="string"&&(t=parseInt(t,10)),t=t||2048,r=r||{};var n=r.prng||qe.random,i={nextBytes:function(l){for(var u=n.getBytesSync(l.length),f=0;f<l.length;++f)l[f]=u.charCodeAt(f)}},a=r.algorithm||"PRIMEINC",s;if(a==="PRIMEINC")s={algorithm:a,state:0,bits:t,rng:i,eInt:e||65537,e:new Mt(null),p:null,q:null,qBits:t>>1,pBits:t-(t>>1),pqState:0,num:null,keys:null},s.e.fromInt(s.eInt);else throw new Error("Invalid key generation algorithm: "+a);return s};st.rsa.stepKeyPairGenerationState=function(t,e){"algorithm"in t||(t.algorithm="PRIMEINC");var r=new Mt(null);r.fromInt(30);for(var n=0,i=function(h,g){return h|g},a=+new Date,s,l=0;t.keys===null&&(e<=0||l<e);){if(t.state===0){var u=t.p===null?t.pBits:t.qBits,f=u-1;t.pqState===0?(t.num=new Mt(u,t.rng),t.num.testBit(f)||t.num.bitwiseTo(Mt.ONE.shiftLeft(f),i,t.num),t.num.dAddOffset(31-t.num.mod(r).byteValue(),0),n=0,++t.pqState):t.pqState===1?t.num.bitLength()>u?t.pqState=0:t.num.isProbablePrime(E5(t.num.bitLength()))?++t.pqState:t.num.dAddOffset(h5[n++%8],0):t.pqState===2?t.pqState=t.num.subtract(Mt.ONE).gcd(t.e).compareTo(Mt.ONE)===0?3:0:t.pqState===3&&(t.pqState=0,t.p===null?t.p=t.num:t.q=t.num,t.p!==null&&t.q!==null&&++t.state,t.num=null)}else if(t.state===1)t.p.compareTo(t.q)<0&&(t.num=t.p,t.p=t.q,t.q=t.num),++t.state;else if(t.state===2)t.p1=t.p.subtract(Mt.ONE),t.q1=t.q.subtract(Mt.ONE),t.phi=t.p1.multiply(t.q1),++t.state;else if(t.state===3)t.phi.gcd(t.e).compareTo(Mt.ONE)===0?++t.state:(t.p=null,t.q=null,t.state=0);else if(t.state===4)t.n=t.p.multiply(t.q),t.n.bitLength()===t.bits?++t.state:(t.q=null,t.state=0);else if(t.state===5){var d=t.e.modInverse(t.phi);t.keys={privateKey:st.rsa.setPrivateKey(t.n,t.e,d,t.p,t.q,d.mod(t.p1),d.mod(t.q1),t.q.modInverse(t.p)),publicKey:st.rsa.setPublicKey(t.n,t.e)}}s=+new Date,l+=s-a,a=s}return t.keys!==null};st.rsa.generateKeyPair=function(t,e,r,n){if(arguments.length===1?typeof t=="object"?(r=t,t=void 0):typeof t=="function"&&(n=t,t=void 0):arguments.length===2?typeof t=="number"?typeof e=="function"?(n=e,e=void 0):typeof e!="number"&&(r=e,e=void 0):(r=t,n=e,t=void 0,e=void 0):arguments.length===3&&(typeof e=="number"?typeof r=="function"&&(n=r,r=void 0):(n=r,r=e,e=void 0)),r=r||{},t===void 0&&(t=r.bits||2048),e===void 0&&(e=r.e||65537),!qe.options.usePureJavaScript&&!r.prng&&t>=256&&t<=16384&&(e===65537||e===3)){if(n){if(wC("generateKeyPair"))return Cg.generateKeyPair("rsa",{modulusLength:t,publicExponent:e,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}},function(l,u,f){if(l)return n(l);n(null,{privateKey:st.privateKeyFromPem(f),publicKey:st.publicKeyFromPem(u)})});if(EC("generateKey")&&EC("exportKey"))return ui.globalScope.crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:bC(e),hash:{name:"SHA-256"}},!0,["sign","verify"]).then(function(l){return ui.globalScope.crypto.subtle.exportKey("pkcs8",l.privateKey)}).then(void 0,function(l){n(l)}).then(function(l){if(l){var u=st.privateKeyFromAsn1($.fromDer(qe.util.createBuffer(l)));n(null,{privateKey:u,publicKey:st.setRsaPublicKey(u.n,u.e)})}});if(CC("generateKey")&&CC("exportKey")){var i=ui.globalScope.msCrypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:bC(e),hash:{name:"SHA-256"}},!0,["sign","verify"]);i.oncomplete=function(l){var u=l.target.result,f=ui.globalScope.msCrypto.subtle.exportKey("pkcs8",u.privateKey);f.oncomplete=function(d){var h=d.target.result,g=st.privateKeyFromAsn1($.fromDer(qe.util.createBuffer(h)));n(null,{privateKey:g,publicKey:st.setRsaPublicKey(g.n,g.e)})},f.onerror=function(d){n(d)}},i.onerror=function(l){n(l)};return}}else if(wC("generateKeyPairSync")){var a=Cg.generateKeyPairSync("rsa",{modulusLength:t,publicExponent:e,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}});return{privateKey:st.privateKeyFromPem(a.privateKey),publicKey:st.publicKeyFromPem(a.publicKey)}}}var s=st.rsa.createKeyPairGenerationState(t,e,r);if(!n)return st.rsa.stepKeyPairGenerationState(s,0),s.keys;w5(s,r,n)};st.setRsaPublicKey=st.rsa.setPublicKey=function(t,e){var r={n:t,e};return r.encrypt=function(n,i,a){if(typeof i=="string"?i=i.toUpperCase():i===void 0&&(i="RSAES-PKCS1-V1_5"),i==="RSAES-PKCS1-V1_5")i={encode:function(l,u,f){return _C(l,u,2).getBytes()}};else if(i==="RSA-OAEP"||i==="RSAES-OAEP")i={encode:function(l,u){return qe.pkcs1.encode_rsa_oaep(u,l,a)}};else if(["RAW","NONE","NULL",null].indexOf(i)!==-1)i={encode:function(l){return l}};else if(typeof i=="string")throw new Error('Unsupported encryption scheme: "'+i+'".');var s=i.encode(n,r,!0);return st.rsa.encrypt(s,r,!0)},r.verify=function(n,i,a,s){typeof a=="string"?a=a.toUpperCase():a===void 0&&(a="RSASSA-PKCS1-V1_5"),s===void 0&&(s={_parseAllDigestBytes:!0}),"_parseAllDigestBytes"in s||(s._parseAllDigestBytes=!0),a==="RSASSA-PKCS1-V1_5"?a={verify:function(u,f){f=Dd(f,r,!0);var d=$.fromDer(f,{parseAllBytes:s._parseAllDigestBytes}),h={},g=[];if(!$.validate(d,v5,h,g)){var y=new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value.");throw y.errors=g,y}var m=$.derToOid(h.algorithmIdentifier);if(!(m===qe.oids.md2||m===qe.oids.md5||m===qe.oids.sha1||m===qe.oids.sha224||m===qe.oids.sha256||m===qe.oids.sha384||m===qe.oids.sha512||m===qe.oids["sha512-224"]||m===qe.oids["sha512-256"])){var y=new Error("Unknown RSASSA-PKCS1-v1_5 DigestAlgorithm identifier.");throw y.oid=m,y}if((m===qe.oids.md2||m===qe.oids.md5)&&!("parameters"in h))throw new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value. Missing algorithm identifer NULL parameters.");return u===h.digest}}:(a==="NONE"||a==="NULL"||a===null)&&(a={verify:function(u,f){return f=Dd(f,r,!0),u===f}});var l=st.rsa.decrypt(i,r,!0,!1);return a.verify(n,l,r.n.bitLength())},r};st.setRsaPrivateKey=st.rsa.setPrivateKey=function(t,e,r,n,i,a,s,l){var u={n:t,e,d:r,p:n,q:i,dP:a,dQ:s,qInv:l};return u.decrypt=function(f,d,h){typeof d=="string"?d=d.toUpperCase():d===void 0&&(d="RSAES-PKCS1-V1_5");var g=st.rsa.decrypt(f,u,!1,!1);if(d==="RSAES-PKCS1-V1_5")d={decode:Dd};else if(d==="RSA-OAEP"||d==="RSAES-OAEP")d={decode:function(y,m){return qe.pkcs1.decode_rsa_oaep(m,y,h)}};else if(["RAW","NONE","NULL",null].indexOf(d)!==-1)d={decode:function(y){return y}};else throw new Error('Unsupported encryption scheme: "'+d+'".');return d.decode(g,u,!1)},u.sign=function(f,d){var h=!1;typeof d=="string"&&(d=d.toUpperCase()),d===void 0||d==="RSASSA-PKCS1-V1_5"?(d={encode:_5},h=1):(d==="NONE"||d==="NULL"||d===null)&&(d={encode:function(){return f}},h=1);var g=d.encode(f,u.n.bitLength());return st.rsa.encrypt(g,u,h)},u};st.wrapRsaPrivateKey=function(t){return $.create($.Class.UNIVERSAL,$.Type.SEQUENCE,!0,[$.create($.Class.UNIVERSAL,$.Type.INTEGER,!1,$.integerToDer(0).getBytes()),$.create($.Class.UNIVERSAL,$.Type.SEQUENCE,!0,[$.create($.Class.UNIVERSAL,$.Type.OID,!1,$.oidToDer(st.oids.rsaEncryption).getBytes()),$.create($.Class.UNIVERSAL,$.Type.NULL,!1,"")]),$.create($.Class.UNIVERSAL,$.Type.OCTETSTRING,!1,$.toDer(t).getBytes())])};st.privateKeyFromAsn1=function(t){var e={},r=[];if($.validate(t,p5,e,r)&&(t=$.fromDer(qe.util.createBuffer(e.privateKey))),e={},r=[],!$.validate(t,g5,e,r)){var n=new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");throw n.errors=r,n}var i,a,s,l,u,f,d,h;return i=qe.util.createBuffer(e.privateKeyModulus).toHex(),a=qe.util.createBuffer(e.privateKeyPublicExponent).toHex(),s=qe.util.createBuffer(e.privateKeyPrivateExponent).toHex(),l=qe.util.createBuffer(e.privateKeyPrime1).toHex(),u=qe.util.createBuffer(e.privateKeyPrime2).toHex(),f=qe.util.createBuffer(e.privateKeyExponent1).toHex(),d=qe.util.createBuffer(e.privateKeyExponent2).toHex(),h=qe.util.createBuffer(e.privateKeyCoefficient).toHex(),st.setRsaPrivateKey(new Mt(i,16),new Mt(a,16),new Mt(s,16),new Mt(l,16),new Mt(u,16),new Mt(f,16),new Mt(d,16),new Mt(h,16))};st.privateKeyToAsn1=st.privateKeyToRSAPrivateKey=function(t){return $.create($.Class.UNIVERSAL,$.Type.SEQUENCE,!0,[$.create($.Class.UNIVERSAL,$.Type.INTEGER,!1,$.integerToDer(0).getBytes()),$.create($.Class.UNIVERSAL,$.Type.INTEGER,!1,ra(t.n)),$.create($.Class.UNIVERSAL,$.Type.INTEGER,!1,ra(t.e)),$.create($.Class.UNIVERSAL,$.Type.INTEGER,!1,ra(t.d)),$.create($.Class.UNIVERSAL,$.Type.INTEGER,!1,ra(t.p)),$.create($.Class.UNIVERSAL,$.Type.INTEGER,!1,ra(t.q)),$.create($.Class.UNIVERSAL,$.Type.INTEGER,!1,ra(t.dP)),$.create($.Class.UNIVERSAL,$.Type.INTEGER,!1,ra(t.dQ)),$.create($.Class.UNIVERSAL,$.Type.INTEGER,!1,ra(t.qInv))])};st.publicKeyFromAsn1=function(t){var e={},r=[];if($.validate(t,y5,e,r)){var n=$.derToOid(e.publicKeyOid);if(n!==st.oids.rsaEncryption){var i=new Error("Cannot read public key. Unknown OID.");throw i.oid=n,i}t=e.rsaPublicKey}if(r=[],!$.validate(t,m5,e,r)){var i=new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.");throw i.errors=r,i}var a=qe.util.createBuffer(e.publicKeyModulus).toHex(),s=qe.util.createBuffer(e.publicKeyExponent).toHex();return st.setRsaPublicKey(new Mt(a,16),new Mt(s,16))};st.publicKeyToAsn1=st.publicKeyToSubjectPublicKeyInfo=function(t){return $.create($.Class.UNIVERSAL,$.Type.SEQUENCE,!0,[$.create($.Class.UNIVERSAL,$.Type.SEQUENCE,!0,[$.create($.Class.UNIVERSAL,$.Type.OID,!1,$.oidToDer(st.oids.rsaEncryption).getBytes()),$.create($.Class.UNIVERSAL,$.Type.NULL,!1,"")]),$.create($.Class.UNIVERSAL,$.Type.BITSTRING,!1,[st.publicKeyToRSAPublicKey(t)])])};st.publicKeyToRSAPublicKey=function(t){return $.create($.Class.UNIVERSAL,$.Type.SEQUENCE,!0,[$.create($.Class.UNIVERSAL,$.Type.INTEGER,!1,ra(t.n)),$.create($.Class.UNIVERSAL,$.Type.INTEGER,!1,ra(t.e))])};function _C(t,e,r){var n=qe.util.createBuffer(),i=Math.ceil(e.n.bitLength()/8);if(t.length>i-11){var a=new Error("Message is too long for PKCS#1 v1.5 padding.");throw a.length=t.length,a.max=i-11,a}n.putByte(0),n.putByte(r);var s=i-3-t.length,l;if(r===0||r===1){l=r===0?0:255;for(var u=0;u<s;++u)n.putByte(l)}else for(;s>0;){for(var f=0,d=qe.random.getBytes(s),u=0;u<s;++u)l=d.charCodeAt(u),l===0?++f:n.putByte(l);s=f}return n.putByte(0),n.putBytes(t),n}function Dd(t,e,r,n){var i=Math.ceil(e.n.bitLength()/8),a=qe.util.createBuffer(t),s=a.getByte(),l=a.getByte();if(s!==0||r&&l!==0&&l!==1||!r&&l!=2||r&&l===0&&typeof n=="undefined")throw new Error("Encryption block is invalid.");var u=0;if(l===0){u=i-3-n;for(var f=0;f<u;++f)if(a.getByte()!==0)throw new Error("Encryption block is invalid.")}else if(l===1)for(u=0;a.length()>1;){if(a.getByte()!==255){--a.read;break}++u}else if(l===2)for(u=0;a.length()>1;){if(a.getByte()===0){--a.read;break}++u}var d=a.getByte();if(d!==0||u!==i-3-a.length())throw new Error("Encryption block is invalid.");return a.getBytes()}function w5(t,e,r){typeof e=="function"&&(r=e,e={}),e=e||{};var n={algorithm:{name:e.algorithm||"PRIMEINC",options:{workers:e.workers||2,workLoad:e.workLoad||100,workerScript:e.workerScript}}};"prng"in e&&(n.prng=e.prng),i();function i(){a(t.pBits,function(l,u){if(l)return r(l);if(t.p=u,t.q!==null)return s(l,t.q);a(t.qBits,s)})}function a(l,u){qe.prime.generateProbablePrime(l,n,u)}function s(l,u){if(l)return r(l);if(t.q=u,t.p.compareTo(t.q)<0){var f=t.p;t.p=t.q,t.q=f}if(t.p.subtract(Mt.ONE).gcd(t.e).compareTo(Mt.ONE)!==0){t.p=null,i();return}if(t.q.subtract(Mt.ONE).gcd(t.e).compareTo(Mt.ONE)!==0){t.q=null,a(t.qBits,s);return}if(t.p1=t.p.subtract(Mt.ONE),t.q1=t.q.subtract(Mt.ONE),t.phi=t.p1.multiply(t.q1),t.phi.gcd(t.e).compareTo(Mt.ONE)!==0){t.p=t.q=null,i();return}if(t.n=t.p.multiply(t.q),t.n.bitLength()!==t.bits){t.q=null,a(t.qBits,s);return}var d=t.e.modInverse(t.phi);t.keys={privateKey:st.rsa.setPrivateKey(t.n,t.e,d,t.p,t.q,d.mod(t.p1),d.mod(t.q1),t.q.modInverse(t.p)),publicKey:st.rsa.setPublicKey(t.n,t.e)},r(null,t.keys)}}function ra(t){var e=t.toString(16);e[0]>="8"&&(e="00"+e);var r=qe.util.hexToBytes(e);return r.length>1&&(r.charCodeAt(0)===0&&(r.charCodeAt(1)&128)==0||r.charCodeAt(0)===255&&(r.charCodeAt(1)&128)==128)?r.substr(1):r}function E5(t){return t<=100?27:t<=150?18:t<=200?15:t<=250?12:t<=300?9:t<=350?8:t<=400?7:t<=500?6:t<=600?5:t<=800?4:t<=1250?3:2}function wC(t){return qe.util.isNodejs&&typeof Cg[t]=="function"}function EC(t){return typeof ui.globalScope!="undefined"&&typeof ui.globalScope.crypto=="object"&&typeof ui.globalScope.crypto.subtle=="object"&&typeof ui.globalScope.crypto.subtle[t]=="function"}function CC(t){return typeof ui.globalScope!="undefined"&&typeof ui.globalScope.msCrypto=="object"&&typeof ui.globalScope.msCrypto.subtle=="object"&&typeof ui.globalScope.msCrypto.subtle[t]=="function"}function bC(t){for(var e=qe.util.hexToBytes(t.toString(16)),r=new Uint8Array(e.length),n=0;n<e.length;++n)r[n]=e.charCodeAt(n);return r}});var bg=de((D7,IC)=>{var Re=vt();cs();Si();Lu();Qi();fs();Ad();zs();oi();pg();Uu();qt();typeof TC=="undefined"&&(TC=Re.jsbn.BigInteger);var TC,ce=Re.asn1,mt=Re.pki=Re.pki||{};IC.exports=mt.pbe=Re.pbe=Re.pbe||{};var Js=mt.oids,C5={name:"EncryptedPrivateKeyInfo",tagClass:ce.Class.UNIVERSAL,type:ce.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedPrivateKeyInfo.encryptionAlgorithm",tagClass:ce.Class.UNIVERSAL,type:ce.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:ce.Class.UNIVERSAL,type:ce.Type.OID,constructed:!1,capture:"encryptionOid"},{name:"AlgorithmIdentifier.parameters",tagClass:ce.Class.UNIVERSAL,type:ce.Type.SEQUENCE,constructed:!0,captureAsn1:"encryptionParams"}]},{name:"EncryptedPrivateKeyInfo.encryptedData",tagClass:ce.Class.UNIVERSAL,type:ce.Type.OCTETSTRING,constructed:!1,capture:"encryptedData"}]},b5={name:"PBES2Algorithms",tagClass:ce.Class.UNIVERSAL,type:ce.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc",tagClass:ce.Class.UNIVERSAL,type:ce.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc.oid",tagClass:ce.Class.UNIVERSAL,type:ce.Type.OID,constructed:!1,capture:"kdfOid"},{name:"PBES2Algorithms.params",tagClass:ce.Class.UNIVERSAL,type:ce.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.params.salt",tagClass:ce.Class.UNIVERSAL,type:ce.Type.OCTETSTRING,constructed:!1,capture:"kdfSalt"},{name:"PBES2Algorithms.params.iterationCount",tagClass:ce.Class.UNIVERSAL,type:ce.Type.INTEGER,constructed:!1,capture:"kdfIterationCount"},{name:"PBES2Algorithms.params.keyLength",tagClass:ce.Class.UNIVERSAL,type:ce.Type.INTEGER,constructed:!1,optional:!0,capture:"keyLength"},{name:"PBES2Algorithms.params.prf",tagClass:ce.Class.UNIVERSAL,type:ce.Type.SEQUENCE,constructed:!0,optional:!0,value:[{name:"PBES2Algorithms.params.prf.algorithm",tagClass:ce.Class.UNIVERSAL,type:ce.Type.OID,constructed:!1,capture:"prfOid"}]}]}]},{name:"PBES2Algorithms.encryptionScheme",tagClass:ce.Class.UNIVERSAL,type:ce.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.encryptionScheme.oid",tagClass:ce.Class.UNIVERSAL,type:ce.Type.OID,constructed:!1,capture:"encOid"},{name:"PBES2Algorithms.encryptionScheme.iv",tagClass:ce.Class.UNIVERSAL,type:ce.Type.OCTETSTRING,constructed:!1,capture:"encIv"}]}]},x5={name:"pkcs-12PbeParams",tagClass:ce.Class.UNIVERSAL,type:ce.Type.SEQUENCE,constructed:!0,value:[{name:"pkcs-12PbeParams.salt",tagClass:ce.Class.UNIVERSAL,type:ce.Type.OCTETSTRING,constructed:!1,capture:"salt"},{name:"pkcs-12PbeParams.iterations",tagClass:ce.Class.UNIVERSAL,type:ce.Type.INTEGER,constructed:!1,capture:"iterations"}]};mt.encryptPrivateKeyInfo=function(t,e,r){r=r||{},r.saltSize=r.saltSize||8,r.count=r.count||2048,r.algorithm=r.algorithm||"aes128",r.prfAlgorithm=r.prfAlgorithm||"sha1";var n=Re.random.getBytesSync(r.saltSize),i=r.count,a=ce.integerToDer(i),s,l,u;if(r.algorithm.indexOf("aes")===0||r.algorithm==="des"){var f,d,h;switch(r.algorithm){case"aes128":s=16,f=16,d=Js["aes128-CBC"],h=Re.aes.createEncryptionCipher;break;case"aes192":s=24,f=16,d=Js["aes192-CBC"],h=Re.aes.createEncryptionCipher;break;case"aes256":s=32,f=16,d=Js["aes256-CBC"],h=Re.aes.createEncryptionCipher;break;case"des":s=8,f=8,d=Js.desCBC,h=Re.des.createEncryptionCipher;break;default:var g=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw g.algorithm=r.algorithm,g}var y="hmacWith"+r.prfAlgorithm.toUpperCase(),m=kC(y),w=Re.pkcs5.pbkdf2(e,n,i,s,m),_=Re.random.getBytesSync(f),E=h(w);E.start(_),E.update(ce.toDer(t)),E.finish(),u=E.output.getBytes();var b=T5(n,a,s,y);l=ce.create(ce.Class.UNIVERSAL,ce.Type.SEQUENCE,!0,[ce.create(ce.Class.UNIVERSAL,ce.Type.OID,!1,ce.oidToDer(Js.pkcs5PBES2).getBytes()),ce.create(ce.Class.UNIVERSAL,ce.Type.SEQUENCE,!0,[ce.create(ce.Class.UNIVERSAL,ce.Type.SEQUENCE,!0,[ce.create(ce.Class.UNIVERSAL,ce.Type.OID,!1,ce.oidToDer(Js.pkcs5PBKDF2).getBytes()),b]),ce.create(ce.Class.UNIVERSAL,ce.Type.SEQUENCE,!0,[ce.create(ce.Class.UNIVERSAL,ce.Type.OID,!1,ce.oidToDer(d).getBytes()),ce.create(ce.Class.UNIVERSAL,ce.Type.OCTETSTRING,!1,_)])])])}else if(r.algorithm==="3des"){s=24;var k=new Re.util.ByteBuffer(n),w=mt.pbe.generatePkcs12Key(e,k,1,i,s),_=mt.pbe.generatePkcs12Key(e,k,2,i,s),E=Re.des.createEncryptionCipher(w);E.start(_),E.update(ce.toDer(t)),E.finish(),u=E.output.getBytes(),l=ce.create(ce.Class.UNIVERSAL,ce.Type.SEQUENCE,!0,[ce.create(ce.Class.UNIVERSAL,ce.Type.OID,!1,ce.oidToDer(Js["pbeWithSHAAnd3-KeyTripleDES-CBC"]).getBytes()),ce.create(ce.Class.UNIVERSAL,ce.Type.SEQUENCE,!0,[ce.create(ce.Class.UNIVERSAL,ce.Type.OCTETSTRING,!1,n),ce.create(ce.Class.UNIVERSAL,ce.Type.INTEGER,!1,a.getBytes())])])}else{var g=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw g.algorithm=r.algorithm,g}var O=ce.create(ce.Class.UNIVERSAL,ce.Type.SEQUENCE,!0,[l,ce.create(ce.Class.UNIVERSAL,ce.Type.OCTETSTRING,!1,u)]);return O};mt.decryptPrivateKeyInfo=function(t,e){var r=null,n={},i=[];if(!ce.validate(t,C5,n,i)){var a=new Error("Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw a.errors=i,a}var s=ce.derToOid(n.encryptionOid),l=mt.pbe.getCipher(s,n.encryptionParams,e),u=Re.util.createBuffer(n.encryptedData);return l.update(u),l.finish()&&(r=ce.fromDer(l.output)),r};mt.encryptedPrivateKeyToPem=function(t,e){var r={type:"ENCRYPTED PRIVATE KEY",body:ce.toDer(t).getBytes()};return Re.pem.encode(r,{maxline:e})};mt.encryptedPrivateKeyFromPem=function(t){var e=Re.pem.decode(t)[0];if(e.type!=="ENCRYPTED PRIVATE KEY"){var r=new Error('Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".');throw r.headerType=e.type,r}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert encrypted private key from PEM; PEM is encrypted.");return ce.fromDer(e.body)};mt.encryptRsaPrivateKey=function(t,e,r){if(r=r||{},!r.legacy){var n=mt.wrapRsaPrivateKey(mt.privateKeyToAsn1(t));return n=mt.encryptPrivateKeyInfo(n,e,r),mt.encryptedPrivateKeyToPem(n)}var i,a,s,l;switch(r.algorithm){case"aes128":i="AES-128-CBC",s=16,a=Re.random.getBytesSync(16),l=Re.aes.createEncryptionCipher;break;case"aes192":i="AES-192-CBC",s=24,a=Re.random.getBytesSync(16),l=Re.aes.createEncryptionCipher;break;case"aes256":i="AES-256-CBC",s=32,a=Re.random.getBytesSync(16),l=Re.aes.createEncryptionCipher;break;case"3des":i="DES-EDE3-CBC",s=24,a=Re.random.getBytesSync(8),l=Re.des.createEncryptionCipher;break;case"des":i="DES-CBC",s=8,a=Re.random.getBytesSync(8),l=Re.des.createEncryptionCipher;break;default:var u=new Error('Could not encrypt RSA private key; unsupported encryption algorithm "'+r.algorithm+'".');throw u.algorithm=r.algorithm,u}var f=Re.pbe.opensslDeriveBytes(e,a.substr(0,8),s),d=l(f);d.start(a),d.update(ce.toDer(mt.privateKeyToAsn1(t))),d.finish();var h={type:"RSA PRIVATE KEY",procType:{version:"4",type:"ENCRYPTED"},dekInfo:{algorithm:i,parameters:Re.util.bytesToHex(a).toUpperCase()},body:d.output.getBytes()};return Re.pem.encode(h)};mt.decryptRsaPrivateKey=function(t,e){var r=null,n=Re.pem.decode(t)[0];if(n.type!=="ENCRYPTED PRIVATE KEY"&&n.type!=="PRIVATE KEY"&&n.type!=="RSA PRIVATE KEY"){var i=new Error('Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".');throw i.headerType=i,i}if(n.procType&&n.procType.type==="ENCRYPTED"){var a,s;switch(n.dekInfo.algorithm){case"DES-CBC":a=8,s=Re.des.createDecryptionCipher;break;case"DES-EDE3-CBC":a=24,s=Re.des.createDecryptionCipher;break;case"AES-128-CBC":a=16,s=Re.aes.createDecryptionCipher;break;case"AES-192-CBC":a=24,s=Re.aes.createDecryptionCipher;break;case"AES-256-CBC":a=32,s=Re.aes.createDecryptionCipher;break;case"RC2-40-CBC":a=5,s=function(h){return Re.rc2.createDecryptionCipher(h,40)};break;case"RC2-64-CBC":a=8,s=function(h){return Re.rc2.createDecryptionCipher(h,64)};break;case"RC2-128-CBC":a=16,s=function(h){return Re.rc2.createDecryptionCipher(h,128)};break;default:var i=new Error('Could not decrypt private key; unsupported encryption algorithm "'+n.dekInfo.algorithm+'".');throw i.algorithm=n.dekInfo.algorithm,i}var l=Re.util.hexToBytes(n.dekInfo.parameters),u=Re.pbe.opensslDeriveBytes(e,l.substr(0,8),a),f=s(u);if(f.start(l),f.update(Re.util.createBuffer(n.body)),f.finish())r=f.output.getBytes();else return r}else r=n.body;return n.type==="ENCRYPTED PRIVATE KEY"?r=mt.decryptPrivateKeyInfo(ce.fromDer(r),e):r=ce.fromDer(r),r!==null&&(r=mt.privateKeyFromAsn1(r)),r};mt.pbe.generatePkcs12Key=function(t,e,r,n,i,a){var s,l;if(typeof a=="undefined"||a===null){if(!("sha1"in Re.md))throw new Error('"sha1" hash algorithm unavailable.');a=Re.md.sha1.create()}var u=a.digestLength,f=a.blockLength,d=new Re.util.ByteBuffer,h=new Re.util.ByteBuffer;if(t!=null){for(l=0;l<t.length;l++)h.putInt16(t.charCodeAt(l));h.putInt16(0)}var g=h.length(),y=e.length(),m=new Re.util.ByteBuffer;m.fillWithByte(r,f);var w=f*Math.ceil(y/f),_=new Re.util.ByteBuffer;for(l=0;l<w;l++)_.putByte(e.at(l%y));var E=f*Math.ceil(g/f),b=new Re.util.ByteBuffer;for(l=0;l<E;l++)b.putByte(h.at(l%g));var k=_;k.putBuffer(b);for(var O=Math.ceil(i/u),R=1;R<=O;R++){var B=new Re.util.ByteBuffer;B.putBytes(m.bytes()),B.putBytes(k.bytes());for(var ne=0;ne<n;ne++)a.start(),a.update(B.getBytes()),B=a.digest();var M=new Re.util.ByteBuffer;for(l=0;l<f;l++)M.putByte(B.at(l%u));var G=Math.ceil(y/f)+Math.ceil(g/f),re=new Re.util.ByteBuffer;for(s=0;s<G;s++){var se=new Re.util.ByteBuffer(k.getBytes(f)),ye=511;for(l=M.length()-1;l>=0;l--)ye=ye>>8,ye+=M.at(l)+se.at(l),se.setAt(l,ye&255);re.putBuffer(se)}k=re,d.putBuffer(B)}return d.truncate(d.length()-i),d};mt.pbe.getCipher=function(t,e,r){switch(t){case mt.oids.pkcs5PBES2:return mt.pbe.getCipherForPBES2(t,e,r);case mt.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:case mt.oids["pbewithSHAAnd40BitRC2-CBC"]:return mt.pbe.getCipherForPKCS12PBE(t,e,r);default:var n=new Error("Cannot read encrypted PBE data block. Unsupported OID.");throw n.oid=t,n.supportedOids=["pkcs5PBES2","pbeWithSHAAnd3-KeyTripleDES-CBC","pbewithSHAAnd40BitRC2-CBC"],n}};mt.pbe.getCipherForPBES2=function(t,e,r){var n={},i=[];if(!ce.validate(e,b5,n,i)){var a=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw a.errors=i,a}if(t=ce.derToOid(n.kdfOid),t!==mt.oids.pkcs5PBKDF2){var a=new Error("Cannot read encrypted private key. Unsupported key derivation function OID.");throw a.oid=t,a.supportedOids=["pkcs5PBKDF2"],a}if(t=ce.derToOid(n.encOid),t!==mt.oids["aes128-CBC"]&&t!==mt.oids["aes192-CBC"]&&t!==mt.oids["aes256-CBC"]&&t!==mt.oids["des-EDE3-CBC"]&&t!==mt.oids.desCBC){var a=new Error("Cannot read encrypted private key. Unsupported encryption scheme OID.");throw a.oid=t,a.supportedOids=["aes128-CBC","aes192-CBC","aes256-CBC","des-EDE3-CBC","desCBC"],a}var s=n.kdfSalt,l=Re.util.createBuffer(n.kdfIterationCount);l=l.getInt(l.length()<<3);var u,f;switch(mt.oids[t]){case"aes128-CBC":u=16,f=Re.aes.createDecryptionCipher;break;case"aes192-CBC":u=24,f=Re.aes.createDecryptionCipher;break;case"aes256-CBC":u=32,f=Re.aes.createDecryptionCipher;break;case"des-EDE3-CBC":u=24,f=Re.des.createDecryptionCipher;break;case"desCBC":u=8,f=Re.des.createDecryptionCipher;break}var d=AC(n.prfOid),h=Re.pkcs5.pbkdf2(r,s,l,u,d),g=n.encIv,y=f(h);return y.start(g),y};mt.pbe.getCipherForPKCS12PBE=function(t,e,r){var n={},i=[];if(!ce.validate(e,x5,n,i)){var a=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw a.errors=i,a}var s=Re.util.createBuffer(n.salt),l=Re.util.createBuffer(n.iterations);l=l.getInt(l.length()<<3);var u,f,d;switch(t){case mt.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:u=24,f=8,d=Re.des.startDecrypting;break;case mt.oids["pbewithSHAAnd40BitRC2-CBC"]:u=5,f=8,d=function(w,_){var E=Re.rc2.createDecryptionCipher(w,40);return E.start(_,null),E};break;default:var a=new Error("Cannot read PKCS #12 PBE data block. Unsupported OID.");throw a.oid=t,a}var h=AC(n.prfOid),g=mt.pbe.generatePkcs12Key(r,s,1,l,u,h);h.start();var y=mt.pbe.generatePkcs12Key(r,s,2,l,f,h);return d(g,y)};mt.pbe.opensslDeriveBytes=function(t,e,r,n){if(typeof n=="undefined"||n===null){if(!("md5"in Re.md))throw new Error('"md5" hash algorithm unavailable.');n=Re.md.md5.create()}e===null&&(e="");for(var i=[SC(n,t+e)],a=16,s=1;a<r;++s,a+=16)i.push(SC(n,i[s-1]+t+e));return i.join("").substr(0,r)};function SC(t,e){return t.start().update(e).digest().getBytes()}function AC(t){var e;if(!t)e="hmacWithSHA1";else if(e=mt.oids[ce.derToOid(t)],!e){var r=new Error("Unsupported PRF OID.");throw r.oid=t,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}return kC(e)}function kC(t){var e=Re.md;switch(t){case"hmacWithSHA224":e=Re.md.sha512;case"hmacWithSHA1":case"hmacWithSHA256":case"hmacWithSHA384":case"hmacWithSHA512":t=t.substr(8).toLowerCase();break;default:var r=new Error("Unsupported PRF algorithm.");throw r.algorithm=t,r.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],r}if(!e||!(t in e))throw new Error("Unknown hash algorithm: "+t);return e[t].create()}function T5(t,e,r,n){var i=ce.create(ce.Class.UNIVERSAL,ce.Type.SEQUENCE,!0,[ce.create(ce.Class.UNIVERSAL,ce.Type.OCTETSTRING,!1,t),ce.create(ce.Class.UNIVERSAL,ce.Type.INTEGER,!1,e.getBytes())]);return n!=="hmacWithSHA1"&&i.value.push(ce.create(ce.Class.UNIVERSAL,ce.Type.INTEGER,!1,Re.util.hexToBytes(r.toString(16))),ce.create(ce.Class.UNIVERSAL,ce.Type.SEQUENCE,!0,[ce.create(ce.Class.UNIVERSAL,ce.Type.OID,!1,ce.oidToDer(mt.oids[n]).getBytes()),ce.create(ce.Class.UNIVERSAL,ce.Type.NULL,!1,"")])),i}});var xg=de((B7,DC)=>{var pl=vt();Si();qt();var Ie=pl.asn1,gl=DC.exports=pl.pkcs7asn1=pl.pkcs7asn1||{};pl.pkcs7=pl.pkcs7||{};pl.pkcs7.asn1=gl;var NC={name:"ContentInfo",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.ContentType",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:Ie.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,captureAsn1:"content"}]};gl.contentInfoValidator=NC;var RC={name:"EncryptedContentInfo",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentType",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.OID,constructed:!1,capture:"contentType"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentEncryptionAlgorithm.algorithm",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm.parameter",tagClass:Ie.Class.UNIVERSAL,captureAsn1:"encParameter"}]},{name:"EncryptedContentInfo.encryptedContent",tagClass:Ie.Class.CONTEXT_SPECIFIC,type:0,capture:"encryptedContent",captureAsn1:"encryptedContentAsn1"}]};gl.envelopedDataValidator={name:"EnvelopedData",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SEQUENCE,constructed:!0,value:[{name:"EnvelopedData.Version",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.INTEGER,constructed:!1,capture:"version"},{name:"EnvelopedData.RecipientInfos",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SET,constructed:!0,captureAsn1:"recipientInfos"}].concat(RC)};gl.encryptedDataValidator={name:"EncryptedData",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedData.Version",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.INTEGER,constructed:!1,capture:"version"}].concat(RC)};var S5={name:"SignerInfo",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.version",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.INTEGER,constructed:!1},{name:"SignerInfo.issuerAndSerialNumber",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.issuerAndSerialNumber.issuer",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"SignerInfo.issuerAndSerialNumber.serialNumber",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"SignerInfo.digestAlgorithm",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.digestAlgorithm.algorithm",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.OID,constructed:!1,capture:"digestAlgorithm"},{name:"SignerInfo.digestAlgorithm.parameter",tagClass:Ie.Class.UNIVERSAL,constructed:!1,captureAsn1:"digestParameter",optional:!0}]},{name:"SignerInfo.authenticatedAttributes",tagClass:Ie.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"authenticatedAttributes"},{name:"SignerInfo.digestEncryptionAlgorithm",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SEQUENCE,constructed:!0,capture:"signatureAlgorithm"},{name:"SignerInfo.encryptedDigest",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.OCTETSTRING,constructed:!1,capture:"signature"},{name:"SignerInfo.unauthenticatedAttributes",tagClass:Ie.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,capture:"unauthenticatedAttributes"}]};gl.signedDataValidator={name:"SignedData",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SEQUENCE,constructed:!0,value:[{name:"SignedData.Version",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.INTEGER,constructed:!1,capture:"version"},{name:"SignedData.DigestAlgorithms",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SET,constructed:!0,captureAsn1:"digestAlgorithms"},NC,{name:"SignedData.Certificates",tagClass:Ie.Class.CONTEXT_SPECIFIC,type:0,optional:!0,captureAsn1:"certificates"},{name:"SignedData.CertificateRevocationLists",tagClass:Ie.Class.CONTEXT_SPECIFIC,type:1,optional:!0,captureAsn1:"crls"},{name:"SignedData.SignerInfos",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SET,capture:"signerInfos",optional:!0,value:[S5]}]};gl.recipientInfoValidator={name:"RecipientInfo",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.version",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.INTEGER,constructed:!1,capture:"version"},{name:"RecipientInfo.issuerAndSerial",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.issuerAndSerial.issuer",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"RecipientInfo.issuerAndSerial.serialNumber",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"RecipientInfo.keyEncryptionAlgorithm",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.keyEncryptionAlgorithm.algorithm",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"RecipientInfo.keyEncryptionAlgorithm.parameter",tagClass:Ie.Class.UNIVERSAL,constructed:!1,captureAsn1:"encParameter",optional:!0}]},{name:"RecipientInfo.encryptedKey",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.OCTETSTRING,constructed:!1,capture:"encKey"}]}});var Tg=de((O7,BC)=>{var Zs=vt();qt();Zs.mgf=Zs.mgf||{};var A5=BC.exports=Zs.mgf.mgf1=Zs.mgf1=Zs.mgf1||{};A5.create=function(t){var e={generate:function(r,n){for(var i=new Zs.util.ByteBuffer,a=Math.ceil(n/t.digestLength),s=0;s<a;s++){var l=new Zs.util.ByteBuffer;l.putInt32(s),t.start(),t.update(r+l.getBytes()),i.putBuffer(t.digest())}return i.truncate(i.length()-n),i.getBytes()}};return e}});var LC=de((L7,OC)=>{var Bd=vt();Tg();OC.exports=Bd.mgf=Bd.mgf||{};Bd.mgf.mgf1=Bd.mgf1});var Od=de((P7,PC)=>{var $s=vt();oi();qt();var k5=PC.exports=$s.pss=$s.pss||{};k5.create=function(t){arguments.length===3&&(t={md:arguments[0],mgf:arguments[1],saltLength:arguments[2]});var e=t.md,r=t.mgf,n=e.digestLength,i=t.salt||null;typeof i=="string"&&(i=$s.util.createBuffer(i));var a;if("saltLength"in t)a=t.saltLength;else if(i!==null)a=i.length();else throw new Error("Salt length not specified or specific salt not given.");if(i!==null&&i.length()!==a)throw new Error("Given salt length does not match length of given salt.");var s=t.prng||$s.random,l={};return l.encode=function(u,f){var d,h=f-1,g=Math.ceil(h/8),y=u.digest().getBytes();if(g<n+a+2)throw new Error("Message is too long to encrypt.");var m;i===null?m=s.getBytesSync(a):m=i.bytes();var w=new $s.util.ByteBuffer;w.fillWithByte(0,8),w.putBytes(y),w.putBytes(m),e.start(),e.update(w.getBytes());var _=e.digest().getBytes(),E=new $s.util.ByteBuffer;E.fillWithByte(0,g-a-n-2),E.putByte(1),E.putBytes(m);var b=E.getBytes(),k=g-n-1,O=r.generate(_,k),R="";for(d=0;d<k;d++)R+=String.fromCharCode(b.charCodeAt(d)^O.charCodeAt(d));var B=65280>>8*g-h&255;return R=String.fromCharCode(R.charCodeAt(0)&~B)+R.substr(1),R+_+String.fromCharCode(188)},l.verify=function(u,f,d){var h,g=d-1,y=Math.ceil(g/8);if(f=f.substr(-y),y<n+a+2)throw new Error("Inconsistent parameters to PSS signature verification.");if(f.charCodeAt(y-1)!==188)throw new Error("Encoded message does not end in 0xBC.");var m=y-n-1,w=f.substr(0,m),_=f.substr(m,n),E=65280>>8*y-g&255;if((w.charCodeAt(0)&E)!=0)throw new Error("Bits beyond keysize not zero as expected.");var b=r.generate(_,m),k="";for(h=0;h<m;h++)k+=String.fromCharCode(w.charCodeAt(h)^b.charCodeAt(h));k=String.fromCharCode(k.charCodeAt(0)&~E)+k.substr(1);var O=y-n-a-2;for(h=0;h<O;h++)if(k.charCodeAt(h)!==0)throw new Error("Leftmost octets not zero as expected");if(k.charCodeAt(O)!==1)throw new Error("Inconsistent PSS signature, 0x01 marker not found");var R=k.substr(-a),B=new $s.util.ByteBuffer;B.fillWithByte(0,8),B.putBytes(u),B.putBytes(R),e.start(),e.update(B.getBytes());var ne=e.digest().getBytes();return _===ne},l}});var Md=de((M7,GC)=>{var Ge=vt();cs();Si();Lu();Qi();LC();fs();zs();Od();Uu();qt();var x=Ge.asn1,xe=GC.exports=Ge.pki=Ge.pki||{},Ut=xe.oids,Er={};Er.CN=Ut.commonName;Er.commonName="CN";Er.C=Ut.countryName;Er.countryName="C";Er.L=Ut.localityName;Er.localityName="L";Er.ST=Ut.stateOrProvinceName;Er.stateOrProvinceName="ST";Er.O=Ut.organizationName;Er.organizationName="O";Er.OU=Ut.organizationalUnitName;Er.organizationalUnitName="OU";Er.E=Ut.emailAddress;Er.emailAddress="E";var MC=Ge.pki.rsa.publicKeyValidator,I5={name:"Certificate",tagClass:x.Class.UNIVERSAL,type:x.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate",tagClass:x.Class.UNIVERSAL,type:x.Type.SEQUENCE,constructed:!0,captureAsn1:"tbsCertificate",value:[{name:"Certificate.TBSCertificate.version",tagClass:x.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.version.integer",tagClass:x.Class.UNIVERSAL,type:x.Type.INTEGER,constructed:!1,capture:"certVersion"}]},{name:"Certificate.TBSCertificate.serialNumber",tagClass:x.Class.UNIVERSAL,type:x.Type.INTEGER,constructed:!1,capture:"certSerialNumber"},{name:"Certificate.TBSCertificate.signature",tagClass:x.Class.UNIVERSAL,type:x.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.signature.algorithm",tagClass:x.Class.UNIVERSAL,type:x.Type.OID,constructed:!1,capture:"certinfoSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:x.Class.UNIVERSAL,optional:!0,captureAsn1:"certinfoSignatureParams"}]},{name:"Certificate.TBSCertificate.issuer",tagClass:x.Class.UNIVERSAL,type:x.Type.SEQUENCE,constructed:!0,captureAsn1:"certIssuer"},{name:"Certificate.TBSCertificate.validity",tagClass:x.Class.UNIVERSAL,type:x.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.validity.notBefore (utc)",tagClass:x.Class.UNIVERSAL,type:x.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity1UTCTime"},{name:"Certificate.TBSCertificate.validity.notBefore (generalized)",tagClass:x.Class.UNIVERSAL,type:x.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity2GeneralizedTime"},{name:"Certificate.TBSCertificate.validity.notAfter (utc)",tagClass:x.Class.UNIVERSAL,type:x.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity3UTCTime"},{name:"Certificate.TBSCertificate.validity.notAfter (generalized)",tagClass:x.Class.UNIVERSAL,type:x.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity4GeneralizedTime"}]},{name:"Certificate.TBSCertificate.subject",tagClass:x.Class.UNIVERSAL,type:x.Type.SEQUENCE,constructed:!0,captureAsn1:"certSubject"},MC,{name:"Certificate.TBSCertificate.issuerUniqueID",tagClass:x.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.issuerUniqueID.id",tagClass:x.Class.UNIVERSAL,type:x.Type.BITSTRING,constructed:!1,captureBitStringValue:"certIssuerUniqueId"}]},{name:"Certificate.TBSCertificate.subjectUniqueID",tagClass:x.Class.CONTEXT_SPECIFIC,type:2,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.subjectUniqueID.id",tagClass:x.Class.UNIVERSAL,type:x.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSubjectUniqueId"}]},{name:"Certificate.TBSCertificate.extensions",tagClass:x.Class.CONTEXT_SPECIFIC,type:3,constructed:!0,captureAsn1:"certExtensions",optional:!0}]},{name:"Certificate.signatureAlgorithm",tagClass:x.Class.UNIVERSAL,type:x.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.signatureAlgorithm.algorithm",tagClass:x.Class.UNIVERSAL,type:x.Type.OID,constructed:!1,capture:"certSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:x.Class.UNIVERSAL,optional:!0,captureAsn1:"certSignatureParams"}]},{name:"Certificate.signatureValue",tagClass:x.Class.UNIVERSAL,type:x.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSignature"}]},N5={name:"rsapss",tagClass:x.Class.UNIVERSAL,type:x.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.hashAlgorithm",tagClass:x.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier",tagClass:x.Class.UNIVERSAL,type:x.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier.algorithm",tagClass:x.Class.UNIVERSAL,type:x.Type.OID,constructed:!1,capture:"hashOid"}]}]},{name:"rsapss.maskGenAlgorithm",tagClass:x.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier",tagClass:x.Class.UNIVERSAL,type:x.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.algorithm",tagClass:x.Class.UNIVERSAL,type:x.Type.OID,constructed:!1,capture:"maskGenOid"},{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params",tagClass:x.Class.UNIVERSAL,type:x.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params.algorithm",tagClass:x.Class.UNIVERSAL,type:x.Type.OID,constructed:!1,capture:"maskGenHashOid"}]}]}]},{name:"rsapss.saltLength",tagClass:x.Class.CONTEXT_SPECIFIC,type:2,optional:!0,value:[{name:"rsapss.saltLength.saltLength",tagClass:x.Class.UNIVERSAL,type:x.Class.INTEGER,constructed:!1,capture:"saltLength"}]},{name:"rsapss.trailerField",tagClass:x.Class.CONTEXT_SPECIFIC,type:3,optional:!0,value:[{name:"rsapss.trailer.trailer",tagClass:x.Class.UNIVERSAL,type:x.Class.INTEGER,constructed:!1,capture:"trailer"}]}]},R5={name:"CertificationRequestInfo",tagClass:x.Class.UNIVERSAL,type:x.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfo",value:[{name:"CertificationRequestInfo.integer",tagClass:x.Class.UNIVERSAL,type:x.Type.INTEGER,constructed:!1,capture:"certificationRequestInfoVersion"},{name:"CertificationRequestInfo.subject",tagClass:x.Class.UNIVERSAL,type:x.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfoSubject"},MC,{name:"CertificationRequestInfo.attributes",tagClass:x.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"certificationRequestInfoAttributes",value:[{name:"CertificationRequestInfo.attributes",tagClass:x.Class.UNIVERSAL,type:x.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequestInfo.attributes.type",tagClass:x.Class.UNIVERSAL,type:x.Type.OID,constructed:!1},{name:"CertificationRequestInfo.attributes.value",tagClass:x.Class.UNIVERSAL,type:x.Type.SET,constructed:!0}]}]}]},D5={name:"CertificationRequest",tagClass:x.Class.UNIVERSAL,type:x.Type.SEQUENCE,constructed:!0,captureAsn1:"csr",value:[R5,{name:"CertificationRequest.signatureAlgorithm",tagClass:x.Class.UNIVERSAL,type:x.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequest.signatureAlgorithm.algorithm",tagClass:x.Class.UNIVERSAL,type:x.Type.OID,constructed:!1,capture:"csrSignatureOid"},{name:"CertificationRequest.signatureAlgorithm.parameters",tagClass:x.Class.UNIVERSAL,optional:!0,captureAsn1:"csrSignatureParams"}]},{name:"CertificationRequest.signature",tagClass:x.Class.UNIVERSAL,type:x.Type.BITSTRING,constructed:!1,captureBitStringValue:"csrSignature"}]};xe.RDNAttributesAsArray=function(t,e){for(var r=[],n,i,a,s=0;s<t.value.length;++s){n=t.value[s];for(var l=0;l<n.value.length;++l)a={},i=n.value[l],a.type=x.derToOid(i.value[0].value),a.value=i.value[1].value,a.valueTagClass=i.value[1].type,a.type in Ut&&(a.name=Ut[a.type],a.name in Er&&(a.shortName=Er[a.name])),e&&(e.update(a.type),e.update(a.value)),r.push(a)}return r};xe.CRIAttributesAsArray=function(t){for(var e=[],r=0;r<t.length;++r)for(var n=t[r],i=x.derToOid(n.value[0].value),a=n.value[1].value,s=0;s<a.length;++s){var l={};if(l.type=i,l.value=a[s].value,l.valueTagClass=a[s].type,l.type in Ut&&(l.name=Ut[l.type],l.name in Er&&(l.shortName=Er[l.name])),l.type===Ut.extensionRequest){l.extensions=[];for(var u=0;u<l.value.length;++u)l.extensions.push(xe.certificateExtensionFromAsn1(l.value[u]))}e.push(l)}return e};function ps(t,e){typeof e=="string"&&(e={shortName:e});for(var r=null,n,i=0;r===null&&i<t.attributes.length;++i)n=t.attributes[i],(e.type&&e.type===n.type||e.name&&e.name===n.name||e.shortName&&e.shortName===n.shortName)&&(r=n);return r}var Ld=function(t,e,r){var n={};if(t!==Ut["RSASSA-PSS"])return n;r&&(n={hash:{algorithmOid:Ut.sha1},mgf:{algorithmOid:Ut.mgf1,hash:{algorithmOid:Ut.sha1}},saltLength:20});var i={},a=[];if(!x.validate(e,N5,i,a)){var s=new Error("Cannot read RSASSA-PSS parameter block.");throw s.errors=a,s}return i.hashOid!==void 0&&(n.hash=n.hash||{},n.hash.algorithmOid=x.derToOid(i.hashOid)),i.maskGenOid!==void 0&&(n.mgf=n.mgf||{},n.mgf.algorithmOid=x.derToOid(i.maskGenOid),n.mgf.hash=n.mgf.hash||{},n.mgf.hash.algorithmOid=x.derToOid(i.maskGenHashOid)),i.saltLength!==void 0&&(n.saltLength=i.saltLength.charCodeAt(0)),n},Pd=function(t){switch(Ut[t.signatureOid]){case"sha1WithRSAEncryption":case"sha1WithRSASignature":return Ge.md.sha1.create();case"md5WithRSAEncryption":return Ge.md.md5.create();case"sha256WithRSAEncryption":return Ge.md.sha256.create();case"sha384WithRSAEncryption":return Ge.md.sha384.create();case"sha512WithRSAEncryption":return Ge.md.sha512.create();case"RSASSA-PSS":return Ge.md.sha256.create();default:var e=new Error("Could not compute "+t.type+" digest. Unknown signature OID.");throw e.signatureOid=t.signatureOid,e}},UC=function(t){var e=t.certificate,r;switch(e.signatureOid){case Ut.sha1WithRSAEncryption:case Ut.sha1WithRSASignature:break;case Ut["RSASSA-PSS"]:var n,i;if(n=Ut[e.signatureParameters.mgf.hash.algorithmOid],n===void 0||Ge.md[n]===void 0){var a=new Error("Unsupported MGF hash function.");throw a.oid=e.signatureParameters.mgf.hash.algorithmOid,a.name=n,a}if(i=Ut[e.signatureParameters.mgf.algorithmOid],i===void 0||Ge.mgf[i]===void 0){var a=new Error("Unsupported MGF function.");throw a.oid=e.signatureParameters.mgf.algorithmOid,a.name=i,a}if(i=Ge.mgf[i].create(Ge.md[n].create()),n=Ut[e.signatureParameters.hash.algorithmOid],n===void 0||Ge.md[n]===void 0){var a=new Error("Unsupported RSASSA-PSS hash function.");throw a.oid=e.signatureParameters.hash.algorithmOid,a.name=n,a}r=Ge.pss.create(Ge.md[n].create(),i,e.signatureParameters.saltLength);break}return e.publicKey.verify(t.md.digest().getBytes(),t.signature,r)};xe.certificateFromPem=function(t,e,r){var n=Ge.pem.decode(t)[0];if(n.type!=="CERTIFICATE"&&n.type!=="X509 CERTIFICATE"&&n.type!=="TRUSTED CERTIFICATE"){var i=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw i.headerType=n.type,i}if(n.procType&&n.procType.type==="ENCRYPTED")throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var a=x.fromDer(n.body,r);return xe.certificateFromAsn1(a,e)};xe.certificateToPem=function(t,e){var r={type:"CERTIFICATE",body:x.toDer(xe.certificateToAsn1(t)).getBytes()};return Ge.pem.encode(r,{maxline:e})};xe.publicKeyFromPem=function(t){var e=Ge.pem.decode(t)[0];if(e.type!=="PUBLIC KEY"&&e.type!=="RSA PUBLIC KEY"){var r=new Error('Could not convert public key from PEM; PEM header type is not "PUBLIC KEY" or "RSA PUBLIC KEY".');throw r.headerType=e.type,r}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert public key from PEM; PEM is encrypted.");var n=x.fromDer(e.body);return xe.publicKeyFromAsn1(n)};xe.publicKeyToPem=function(t,e){var r={type:"PUBLIC KEY",body:x.toDer(xe.publicKeyToAsn1(t)).getBytes()};return Ge.pem.encode(r,{maxline:e})};xe.publicKeyToRSAPublicKeyPem=function(t,e){var r={type:"RSA PUBLIC KEY",body:x.toDer(xe.publicKeyToRSAPublicKey(t)).getBytes()};return Ge.pem.encode(r,{maxline:e})};xe.getPublicKeyFingerprint=function(t,e){e=e||{};var r=e.md||Ge.md.sha1.create(),n=e.type||"RSAPublicKey",i;switch(n){case"RSAPublicKey":i=x.toDer(xe.publicKeyToRSAPublicKey(t)).getBytes();break;case"SubjectPublicKeyInfo":i=x.toDer(xe.publicKeyToAsn1(t)).getBytes();break;default:throw new Error('Unknown fingerprint type "'+e.type+'".')}r.start(),r.update(i);var a=r.digest();if(e.encoding==="hex"){var s=a.toHex();return e.delimiter?s.match(/.{2}/g).join(e.delimiter):s}else{if(e.encoding==="binary")return a.getBytes();if(e.encoding)throw new Error('Unknown encoding "'+e.encoding+'".')}return a};xe.certificationRequestFromPem=function(t,e,r){var n=Ge.pem.decode(t)[0];if(n.type!=="CERTIFICATE REQUEST"){var i=new Error('Could not convert certification request from PEM; PEM header type is not "CERTIFICATE REQUEST".');throw i.headerType=n.type,i}if(n.procType&&n.procType.type==="ENCRYPTED")throw new Error("Could not convert certification request from PEM; PEM is encrypted.");var a=x.fromDer(n.body,r);return xe.certificationRequestFromAsn1(a,e)};xe.certificationRequestToPem=function(t,e){var r={type:"CERTIFICATE REQUEST",body:x.toDer(xe.certificationRequestToAsn1(t)).getBytes()};return Ge.pem.encode(r,{maxline:e})};xe.createCertificate=function(){var t={};return t.version=2,t.serialNumber="00",t.signatureOid=null,t.signature=null,t.siginfo={},t.siginfo.algorithmOid=null,t.validity={},t.validity.notBefore=new Date,t.validity.notAfter=new Date,t.issuer={},t.issuer.getField=function(e){return ps(t.issuer,e)},t.issuer.addField=function(e){ci([e]),t.issuer.attributes.push(e)},t.issuer.attributes=[],t.issuer.hash=null,t.subject={},t.subject.getField=function(e){return ps(t.subject,e)},t.subject.addField=function(e){ci([e]),t.subject.attributes.push(e)},t.subject.attributes=[],t.subject.hash=null,t.extensions=[],t.publicKey=null,t.md=null,t.setSubject=function(e,r){ci(e),t.subject.attributes=e,delete t.subject.uniqueId,r&&(t.subject.uniqueId=r),t.subject.hash=null},t.setIssuer=function(e,r){ci(e),t.issuer.attributes=e,delete t.issuer.uniqueId,r&&(t.issuer.uniqueId=r),t.issuer.hash=null},t.setExtensions=function(e){for(var r=0;r<e.length;++r)FC(e[r],{cert:t});t.extensions=e},t.getExtension=function(e){typeof e=="string"&&(e={name:e});for(var r=null,n,i=0;r===null&&i<t.extensions.length;++i)n=t.extensions[i],(e.id&&n.id===e.id||e.name&&n.name===e.name)&&(r=n);return r},t.sign=function(e,r){t.md=r||Ge.md.sha1.create();var n=Ut[t.md.algorithm+"WithRSAEncryption"];if(!n){var i=new Error("Could not compute certificate digest. Unknown message digest algorithm OID.");throw i.algorithm=t.md.algorithm,i}t.signatureOid=t.siginfo.algorithmOid=n,t.tbsCertificate=xe.getTBSCertificate(t);var a=x.toDer(t.tbsCertificate);t.md.update(a.getBytes()),t.signature=e.sign(t.md)},t.verify=function(e){var r=!1;if(!t.issued(e)){var n=e.issuer,i=t.subject,a=new Error("The parent certificate did not issue the given child certificate; the child certificate's issuer does not match the parent's subject.");throw a.expectedIssuer=i.attributes,a.actualIssuer=n.attributes,a}var s=e.md;if(s===null){s=Pd({signatureOid:e.signatureOid,type:"certificate"});var l=e.tbsCertificate||xe.getTBSCertificate(e),u=x.toDer(l);s.update(u.getBytes())}return s!==null&&(r=UC({certificate:t,md:s,signature:e.signature})),r},t.isIssuer=function(e){var r=!1,n=t.issuer,i=e.subject;if(n.hash&&i.hash)r=n.hash===i.hash;else if(n.attributes.length===i.attributes.length){r=!0;for(var a,s,l=0;r&&l<n.attributes.length;++l)a=n.attributes[l],s=i.attributes[l],(a.type!==s.type||a.value!==s.value)&&(r=!1)}return r},t.issued=function(e){return e.isIssuer(t)},t.generateSubjectKeyIdentifier=function(){return xe.getPublicKeyFingerprint(t.publicKey,{type:"RSAPublicKey"})},t.verifySubjectKeyIdentifier=function(){for(var e=Ut.subjectKeyIdentifier,r=0;r<t.extensions.length;++r){var n=t.extensions[r];if(n.id===e){var i=t.generateSubjectKeyIdentifier().getBytes();return Ge.util.hexToBytes(n.subjectKeyIdentifier)===i}}return!1},t};xe.certificateFromAsn1=function(t,e){var r={},n=[];if(!x.validate(t,I5,r,n)){var i=new Error("Cannot read X.509 certificate. ASN.1 object is not an X509v3 Certificate.");throw i.errors=n,i}var a=x.derToOid(r.publicKeyOid);if(a!==xe.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var s=xe.createCertificate();s.version=r.certVersion?r.certVersion.charCodeAt(0):0;var l=Ge.util.createBuffer(r.certSerialNumber);s.serialNumber=l.toHex(),s.signatureOid=Ge.asn1.derToOid(r.certSignatureOid),s.signatureParameters=Ld(s.signatureOid,r.certSignatureParams,!0),s.siginfo.algorithmOid=Ge.asn1.derToOid(r.certinfoSignatureOid),s.siginfo.parameters=Ld(s.siginfo.algorithmOid,r.certinfoSignatureParams,!1),s.signature=r.certSignature;var u=[];if(r.certValidity1UTCTime!==void 0&&u.push(x.utcTimeToDate(r.certValidity1UTCTime)),r.certValidity2GeneralizedTime!==void 0&&u.push(x.generalizedTimeToDate(r.certValidity2GeneralizedTime)),r.certValidity3UTCTime!==void 0&&u.push(x.utcTimeToDate(r.certValidity3UTCTime)),r.certValidity4GeneralizedTime!==void 0&&u.push(x.generalizedTimeToDate(r.certValidity4GeneralizedTime)),u.length>2)throw new Error("Cannot read notBefore/notAfter validity times; more than two times were provided in the certificate.");if(u.length<2)throw new Error("Cannot read notBefore/notAfter validity times; they were not provided as either UTCTime or GeneralizedTime.");if(s.validity.notBefore=u[0],s.validity.notAfter=u[1],s.tbsCertificate=r.tbsCertificate,e){s.md=Pd({signatureOid:s.signatureOid,type:"certificate"});var f=x.toDer(s.tbsCertificate);s.md.update(f.getBytes())}var d=Ge.md.sha1.create(),h=x.toDer(r.certIssuer);d.update(h.getBytes()),s.issuer.getField=function(m){return ps(s.issuer,m)},s.issuer.addField=function(m){ci([m]),s.issuer.attributes.push(m)},s.issuer.attributes=xe.RDNAttributesAsArray(r.certIssuer),r.certIssuerUniqueId&&(s.issuer.uniqueId=r.certIssuerUniqueId),s.issuer.hash=d.digest().toHex();var g=Ge.md.sha1.create(),y=x.toDer(r.certSubject);return g.update(y.getBytes()),s.subject.getField=function(m){return ps(s.subject,m)},s.subject.addField=function(m){ci([m]),s.subject.attributes.push(m)},s.subject.attributes=xe.RDNAttributesAsArray(r.certSubject),r.certSubjectUniqueId&&(s.subject.uniqueId=r.certSubjectUniqueId),s.subject.hash=g.digest().toHex(),r.certExtensions?s.extensions=xe.certificateExtensionsFromAsn1(r.certExtensions):s.extensions=[],s.publicKey=xe.publicKeyFromAsn1(r.subjectPublicKeyInfo),s};xe.certificateExtensionsFromAsn1=function(t){for(var e=[],r=0;r<t.value.length;++r)for(var n=t.value[r],i=0;i<n.value.length;++i)e.push(xe.certificateExtensionFromAsn1(n.value[i]));return e};xe.certificateExtensionFromAsn1=function(t){var e={};if(e.id=x.derToOid(t.value[0].value),e.critical=!1,t.value[1].type===x.Type.BOOLEAN?(e.critical=t.value[1].value.charCodeAt(0)!==0,e.value=t.value[2].value):e.value=t.value[1].value,e.id in Ut){if(e.name=Ut[e.id],e.name==="keyUsage"){var r=x.fromDer(e.value),n=0,i=0;r.value.length>1&&(n=r.value.charCodeAt(1),i=r.value.length>2?r.value.charCodeAt(2):0),e.digitalSignature=(n&128)==128,e.nonRepudiation=(n&64)==64,e.keyEncipherment=(n&32)==32,e.dataEncipherment=(n&16)==16,e.keyAgreement=(n&8)==8,e.keyCertSign=(n&4)==4,e.cRLSign=(n&2)==2,e.encipherOnly=(n&1)==1,e.decipherOnly=(i&128)==128}else if(e.name==="basicConstraints"){var r=x.fromDer(e.value);r.value.length>0&&r.value[0].type===x.Type.BOOLEAN?e.cA=r.value[0].value.charCodeAt(0)!==0:e.cA=!1;var a=null;r.value.length>0&&r.value[0].type===x.Type.INTEGER?a=r.value[0].value:r.value.length>1&&(a=r.value[1].value),a!==null&&(e.pathLenConstraint=x.derToInteger(a))}else if(e.name==="extKeyUsage")for(var r=x.fromDer(e.value),s=0;s<r.value.length;++s){var l=x.derToOid(r.value[s].value);l in Ut?e[Ut[l]]=!0:e[l]=!0}else if(e.name==="nsCertType"){var r=x.fromDer(e.value),n=0;r.value.length>1&&(n=r.value.charCodeAt(1)),e.client=(n&128)==128,e.server=(n&64)==64,e.email=(n&32)==32,e.objsign=(n&16)==16,e.reserved=(n&8)==8,e.sslCA=(n&4)==4,e.emailCA=(n&2)==2,e.objCA=(n&1)==1}else if(e.name==="subjectAltName"||e.name==="issuerAltName"){e.altNames=[];for(var u,r=x.fromDer(e.value),f=0;f<r.value.length;++f){u=r.value[f];var d={type:u.type,value:u.value};switch(e.altNames.push(d),u.type){case 1:case 2:case 6:break;case 7:d.ip=Ge.util.bytesToIP(u.value);break;case 8:d.oid=x.derToOid(u.value);break;default:}}}else if(e.name==="subjectKeyIdentifier"){var r=x.fromDer(e.value);e.subjectKeyIdentifier=Ge.util.bytesToHex(r.value)}}return e};xe.certificationRequestFromAsn1=function(t,e){var r={},n=[];if(!x.validate(t,D5,r,n)){var i=new Error("Cannot read PKCS#10 certificate request. ASN.1 object is not a PKCS#10 CertificationRequest.");throw i.errors=n,i}var a=x.derToOid(r.publicKeyOid);if(a!==xe.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var s=xe.createCertificationRequest();if(s.version=r.csrVersion?r.csrVersion.charCodeAt(0):0,s.signatureOid=Ge.asn1.derToOid(r.csrSignatureOid),s.signatureParameters=Ld(s.signatureOid,r.csrSignatureParams,!0),s.siginfo.algorithmOid=Ge.asn1.derToOid(r.csrSignatureOid),s.siginfo.parameters=Ld(s.siginfo.algorithmOid,r.csrSignatureParams,!1),s.signature=r.csrSignature,s.certificationRequestInfo=r.certificationRequestInfo,e){s.md=Pd({signatureOid:s.signatureOid,type:"certification request"});var l=x.toDer(s.certificationRequestInfo);s.md.update(l.getBytes())}var u=Ge.md.sha1.create();return s.subject.getField=function(f){return ps(s.subject,f)},s.subject.addField=function(f){ci([f]),s.subject.attributes.push(f)},s.subject.attributes=xe.RDNAttributesAsArray(r.certificationRequestInfoSubject,u),s.subject.hash=u.digest().toHex(),s.publicKey=xe.publicKeyFromAsn1(r.subjectPublicKeyInfo),s.getAttribute=function(f){return ps(s,f)},s.addAttribute=function(f){ci([f]),s.attributes.push(f)},s.attributes=xe.CRIAttributesAsArray(r.certificationRequestInfoAttributes||[]),s};xe.createCertificationRequest=function(){var t={};return t.version=0,t.signatureOid=null,t.signature=null,t.siginfo={},t.siginfo.algorithmOid=null,t.subject={},t.subject.getField=function(e){return ps(t.subject,e)},t.subject.addField=function(e){ci([e]),t.subject.attributes.push(e)},t.subject.attributes=[],t.subject.hash=null,t.publicKey=null,t.attributes=[],t.getAttribute=function(e){return ps(t,e)},t.addAttribute=function(e){ci([e]),t.attributes.push(e)},t.md=null,t.setSubject=function(e){ci(e),t.subject.attributes=e,t.subject.hash=null},t.setAttributes=function(e){ci(e),t.attributes=e},t.sign=function(e,r){t.md=r||Ge.md.sha1.create();var n=Ut[t.md.algorithm+"WithRSAEncryption"];if(!n){var i=new Error("Could not compute certification request digest. Unknown message digest algorithm OID.");throw i.algorithm=t.md.algorithm,i}t.signatureOid=t.siginfo.algorithmOid=n,t.certificationRequestInfo=xe.getCertificationRequestInfo(t);var a=x.toDer(t.certificationRequestInfo);t.md.update(a.getBytes()),t.signature=e.sign(t.md)},t.verify=function(){var e=!1,r=t.md;if(r===null){r=Pd({signatureOid:t.signatureOid,type:"certification request"});var n=t.certificationRequestInfo||xe.getCertificationRequestInfo(t),i=x.toDer(n);r.update(i.getBytes())}return r!==null&&(e=UC({certificate:t,md:r,signature:t.signature})),e},t};function ml(t){for(var e=x.create(x.Class.UNIVERSAL,x.Type.SEQUENCE,!0,[]),r,n,i=t.attributes,a=0;a<i.length;++a){r=i[a];var s=r.value,l=x.Type.PRINTABLESTRING;"valueTagClass"in r&&(l=r.valueTagClass,l===x.Type.UTF8&&(s=Ge.util.encodeUtf8(s))),n=x.create(x.Class.UNIVERSAL,x.Type.SET,!0,[x.create(x.Class.UNIVERSAL,x.Type.SEQUENCE,!0,[x.create(x.Class.UNIVERSAL,x.Type.OID,!1,x.oidToDer(r.type).getBytes()),x.create(x.Class.UNIVERSAL,l,!1,s)])]),e.value.push(n)}return e}function ci(t){for(var e,r=0;r<t.length;++r){if(e=t[r],typeof e.name=="undefined"&&(e.type&&e.type in xe.oids?e.name=xe.oids[e.type]:e.shortName&&e.shortName in Er&&(e.name=xe.oids[Er[e.shortName]])),typeof e.type=="undefined")if(e.name&&e.name in xe.oids)e.type=xe.oids[e.name];else{var n=new Error("Attribute type not specified.");throw n.attribute=e,n}if(typeof e.shortName=="undefined"&&e.name&&e.name in Er&&(e.shortName=Er[e.name]),e.type===Ut.extensionRequest&&(e.valueConstructed=!0,e.valueTagClass=x.Type.SEQUENCE,!e.value&&e.extensions)){e.value=[];for(var i=0;i<e.extensions.length;++i)e.value.push(xe.certificateExtensionToAsn1(FC(e.extensions[i])))}if(typeof e.value=="undefined"){var n=new Error("Attribute value not specified.");throw n.attribute=e,n}}}function FC(t,e){if(e=e||{},typeof t.name=="undefined"&&t.id&&t.id in xe.oids&&(t.name=xe.oids[t.id]),typeof t.id=="undefined")if(t.name&&t.name in xe.oids)t.id=xe.oids[t.name];else{var r=new Error("Extension ID not specified.");throw r.extension=t,r}if(typeof t.value!="undefined")return t;if(t.name==="keyUsage"){var n=0,i=0,a=0;t.digitalSignature&&(i|=128,n=7),t.nonRepudiation&&(i|=64,n=6),t.keyEncipherment&&(i|=32,n=5),t.dataEncipherment&&(i|=16,n=4),t.keyAgreement&&(i|=8,n=3),t.keyCertSign&&(i|=4,n=2),t.cRLSign&&(i|=2,n=1),t.encipherOnly&&(i|=1,n=0),t.decipherOnly&&(a|=128,n=7);var s=String.fromCharCode(n);a!==0?s+=String.fromCharCode(i)+String.fromCharCode(a):i!==0&&(s+=String.fromCharCode(i)),t.value=x.create(x.Class.UNIVERSAL,x.Type.BITSTRING,!1,s)}else if(t.name==="basicConstraints")t.value=x.create(x.Class.UNIVERSAL,x.Type.SEQUENCE,!0,[]),t.cA&&t.value.value.push(x.create(x.Class.UNIVERSAL,x.Type.BOOLEAN,!1,String.fromCharCode(255))),"pathLenConstraint"in t&&t.value.value.push(x.create(x.Class.UNIVERSAL,x.Type.INTEGER,!1,x.integerToDer(t.pathLenConstraint).getBytes()));else if(t.name==="extKeyUsage"){t.value=x.create(x.Class.UNIVERSAL,x.Type.SEQUENCE,!0,[]);var l=t.value.value;for(var u in t)t[u]===!0&&(u in Ut?l.push(x.create(x.Class.UNIVERSAL,x.Type.OID,!1,x.oidToDer(Ut[u]).getBytes())):u.indexOf(".")!==-1&&l.push(x.create(x.Class.UNIVERSAL,x.Type.OID,!1,x.oidToDer(u).getBytes())))}else if(t.name==="nsCertType"){var n=0,i=0;t.client&&(i|=128,n=7),t.server&&(i|=64,n=6),t.email&&(i|=32,n=5),t.objsign&&(i|=16,n=4),t.reserved&&(i|=8,n=3),t.sslCA&&(i|=4,n=2),t.emailCA&&(i|=2,n=1),t.objCA&&(i|=1,n=0);var s=String.fromCharCode(n);i!==0&&(s+=String.fromCharCode(i)),t.value=x.create(x.Class.UNIVERSAL,x.Type.BITSTRING,!1,s)}else if(t.name==="subjectAltName"||t.name==="issuerAltName"){t.value=x.create(x.Class.UNIVERSAL,x.Type.SEQUENCE,!0,[]);for(var f,d=0;d<t.altNames.length;++d){f=t.altNames[d];var s=f.value;if(f.type===7&&f.ip){if(s=Ge.util.bytesFromIP(f.ip),s===null){var r=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw r.extension=t,r}}else f.type===8&&(f.oid?s=x.oidToDer(x.oidToDer(f.oid)):s=x.oidToDer(s));t.value.value.push(x.create(x.Class.CONTEXT_SPECIFIC,f.type,!1,s))}}else if(t.name==="nsComment"&&e.cert){if(!/^[\x00-\x7F]*$/.test(t.comment)||t.comment.length<1||t.comment.length>128)throw new Error('Invalid "nsComment" content.');t.value=x.create(x.Class.UNIVERSAL,x.Type.IA5STRING,!1,t.comment)}else if(t.name==="subjectKeyIdentifier"&&e.cert){var h=e.cert.generateSubjectKeyIdentifier();t.subjectKeyIdentifier=h.toHex(),t.value=x.create(x.Class.UNIVERSAL,x.Type.OCTETSTRING,!1,h.getBytes())}else if(t.name==="authorityKeyIdentifier"&&e.cert){t.value=x.create(x.Class.UNIVERSAL,x.Type.SEQUENCE,!0,[]);var l=t.value.value;if(t.keyIdentifier){var g=t.keyIdentifier===!0?e.cert.generateSubjectKeyIdentifier().getBytes():t.keyIdentifier;l.push(x.create(x.Class.CONTEXT_SPECIFIC,0,!1,g))}if(t.authorityCertIssuer){var y=[x.create(x.Class.CONTEXT_SPECIFIC,4,!0,[ml(t.authorityCertIssuer===!0?e.cert.issuer:t.authorityCertIssuer)])];l.push(x.create(x.Class.CONTEXT_SPECIFIC,1,!0,y))}if(t.serialNumber){var m=Ge.util.hexToBytes(t.serialNumber===!0?e.cert.serialNumber:t.serialNumber);l.push(x.create(x.Class.CONTEXT_SPECIFIC,2,!1,m))}}else if(t.name==="cRLDistributionPoints"){t.value=x.create(x.Class.UNIVERSAL,x.Type.SEQUENCE,!0,[]);for(var l=t.value.value,w=x.create(x.Class.UNIVERSAL,x.Type.SEQUENCE,!0,[]),_=x.create(x.Class.CONTEXT_SPECIFIC,0,!0,[]),f,d=0;d<t.altNames.length;++d){f=t.altNames[d];var s=f.value;if(f.type===7&&f.ip){if(s=Ge.util.bytesFromIP(f.ip),s===null){var r=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw r.extension=t,r}}else f.type===8&&(f.oid?s=x.oidToDer(x.oidToDer(f.oid)):s=x.oidToDer(s));_.value.push(x.create(x.Class.CONTEXT_SPECIFIC,f.type,!1,s))}w.value.push(x.create(x.Class.CONTEXT_SPECIFIC,0,!0,[_])),l.push(w)}if(typeof t.value=="undefined"){var r=new Error("Extension value not specified.");throw r.extension=t,r}return t}function Sg(t,e){switch(t){case Ut["RSASSA-PSS"]:var r=[];return e.hash.algorithmOid!==void 0&&r.push(x.create(x.Class.CONTEXT_SPECIFIC,0,!0,[x.create(x.Class.UNIVERSAL,x.Type.SEQUENCE,!0,[x.create(x.Class.UNIVERSAL,x.Type.OID,!1,x.oidToDer(e.hash.algorithmOid).getBytes()),x.create(x.Class.UNIVERSAL,x.Type.NULL,!1,"")])])),e.mgf.algorithmOid!==void 0&&r.push(x.create(x.Class.CONTEXT_SPECIFIC,1,!0,[x.create(x.Class.UNIVERSAL,x.Type.SEQUENCE,!0,[x.create(x.Class.UNIVERSAL,x.Type.OID,!1,x.oidToDer(e.mgf.algorithmOid).getBytes()),x.create(x.Class.UNIVERSAL,x.Type.SEQUENCE,!0,[x.create(x.Class.UNIVERSAL,x.Type.OID,!1,x.oidToDer(e.mgf.hash.algorithmOid).getBytes()),x.create(x.Class.UNIVERSAL,x.Type.NULL,!1,"")])])])),e.saltLength!==void 0&&r.push(x.create(x.Class.CONTEXT_SPECIFIC,2,!0,[x.create(x.Class.UNIVERSAL,x.Type.INTEGER,!1,x.integerToDer(e.saltLength).getBytes())])),x.create(x.Class.UNIVERSAL,x.Type.SEQUENCE,!0,r);default:return x.create(x.Class.UNIVERSAL,x.Type.NULL,!1,"")}}function B5(t){var e=x.create(x.Class.CONTEXT_SPECIFIC,0,!0,[]);if(t.attributes.length===0)return e;for(var r=t.attributes,n=0;n<r.length;++n){var i=r[n],a=i.value,s=x.Type.UTF8;"valueTagClass"in i&&(s=i.valueTagClass),s===x.Type.UTF8&&(a=Ge.util.encodeUtf8(a));var l=!1;"valueConstructed"in i&&(l=i.valueConstructed);var u=x.create(x.Class.UNIVERSAL,x.Type.SEQUENCE,!0,[x.create(x.Class.UNIVERSAL,x.Type.OID,!1,x.oidToDer(i.type).getBytes()),x.create(x.Class.UNIVERSAL,x.Type.SET,!0,[x.create(x.Class.UNIVERSAL,s,l,a)])]);e.value.push(u)}return e}var O5=new Date("1950-01-01T00:00:00Z"),L5=new Date("2050-01-01T00:00:00Z");function qC(t){return t>=O5&&t<L5?x.create(x.Class.UNIVERSAL,x.Type.UTCTIME,!1,x.dateToUtcTime(t)):x.create(x.Class.UNIVERSAL,x.Type.GENERALIZEDTIME,!1,x.dateToGeneralizedTime(t))}xe.getTBSCertificate=function(t){var e=qC(t.validity.notBefore),r=qC(t.validity.notAfter),n=x.create(x.Class.UNIVERSAL,x.Type.SEQUENCE,!0,[x.create(x.Class.CONTEXT_SPECIFIC,0,!0,[x.create(x.Class.UNIVERSAL,x.Type.INTEGER,!1,x.integerToDer(t.version).getBytes())]),x.create(x.Class.UNIVERSAL,x.Type.INTEGER,!1,Ge.util.hexToBytes(t.serialNumber)),x.create(x.Class.UNIVERSAL,x.Type.SEQUENCE,!0,[x.create(x.Class.UNIVERSAL,x.Type.OID,!1,x.oidToDer(t.siginfo.algorithmOid).getBytes()),Sg(t.siginfo.algorithmOid,t.siginfo.parameters)]),ml(t.issuer),x.create(x.Class.UNIVERSAL,x.Type.SEQUENCE,!0,[e,r]),ml(t.subject),xe.publicKeyToAsn1(t.publicKey)]);return t.issuer.uniqueId&&n.value.push(x.create(x.Class.CONTEXT_SPECIFIC,1,!0,[x.create(x.Class.UNIVERSAL,x.Type.BITSTRING,!1,String.fromCharCode(0)+t.issuer.uniqueId)])),t.subject.uniqueId&&n.value.push(x.create(x.Class.CONTEXT_SPECIFIC,2,!0,[x.create(x.Class.UNIVERSAL,x.Type.BITSTRING,!1,String.fromCharCode(0)+t.subject.uniqueId)])),t.extensions.length>0&&n.value.push(xe.certificateExtensionsToAsn1(t.extensions)),n};xe.getCertificationRequestInfo=function(t){var e=x.create(x.Class.UNIVERSAL,x.Type.SEQUENCE,!0,[x.create(x.Class.UNIVERSAL,x.Type.INTEGER,!1,x.integerToDer(t.version).getBytes()),ml(t.subject),xe.publicKeyToAsn1(t.publicKey),B5(t)]);return e};xe.distinguishedNameToAsn1=function(t){return ml(t)};xe.certificateToAsn1=function(t){var e=t.tbsCertificate||xe.getTBSCertificate(t);return x.create(x.Class.UNIVERSAL,x.Type.SEQUENCE,!0,[e,x.create(x.Class.UNIVERSAL,x.Type.SEQUENCE,!0,[x.create(x.Class.UNIVERSAL,x.Type.OID,!1,x.oidToDer(t.signatureOid).getBytes()),Sg(t.signatureOid,t.signatureParameters)]),x.create(x.Class.UNIVERSAL,x.Type.BITSTRING,!1,String.fromCharCode(0)+t.signature)])};xe.certificateExtensionsToAsn1=function(t){var e=x.create(x.Class.CONTEXT_SPECIFIC,3,!0,[]),r=x.create(x.Class.UNIVERSAL,x.Type.SEQUENCE,!0,[]);e.value.push(r);for(var n=0;n<t.length;++n)r.value.push(xe.certificateExtensionToAsn1(t[n]));return e};xe.certificateExtensionToAsn1=function(t){var e=x.create(x.Class.UNIVERSAL,x.Type.SEQUENCE,!0,[]);e.value.push(x.create(x.Class.UNIVERSAL,x.Type.OID,!1,x.oidToDer(t.id).getBytes())),t.critical&&e.value.push(x.create(x.Class.UNIVERSAL,x.Type.BOOLEAN,!1,String.fromCharCode(255)));var r=t.value;return typeof t.value!="string"&&(r=x.toDer(r).getBytes()),e.value.push(x.create(x.Class.UNIVERSAL,x.Type.OCTETSTRING,!1,r)),e};xe.certificationRequestToAsn1=function(t){var e=t.certificationRequestInfo||xe.getCertificationRequestInfo(t);return x.create(x.Class.UNIVERSAL,x.Type.SEQUENCE,!0,[e,x.create(x.Class.UNIVERSAL,x.Type.SEQUENCE,!0,[x.create(x.Class.UNIVERSAL,x.Type.OID,!1,x.oidToDer(t.signatureOid).getBytes()),Sg(t.signatureOid,t.signatureParameters)]),x.create(x.Class.UNIVERSAL,x.Type.BITSTRING,!1,String.fromCharCode(0)+t.signature)])};xe.createCaStore=function(t){var e={certs:{}};e.getIssuer=function(s){var l=r(s.issuer);return l},e.addCertificate=function(s){if(typeof s=="string"&&(s=Ge.pki.certificateFromPem(s)),n(s.subject),!e.hasCertificate(s))if(s.subject.hash in e.certs){var l=e.certs[s.subject.hash];Ge.util.isArray(l)||(l=[l]),l.push(s),e.certs[s.subject.hash]=l}else e.certs[s.subject.hash]=s},e.hasCertificate=function(s){typeof s=="string"&&(s=Ge.pki.certificateFromPem(s));var l=r(s.subject);if(!l)return!1;Ge.util.isArray(l)||(l=[l]);for(var u=x.toDer(xe.certificateToAsn1(s)).getBytes(),f=0;f<l.length;++f){var d=x.toDer(xe.certificateToAsn1(l[f])).getBytes();if(u===d)return!0}return!1},e.listAllCertificates=function(){var s=[];for(var l in e.certs)if(e.certs.hasOwnProperty(l)){var u=e.certs[l];if(!Ge.util.isArray(u))s.push(u);else for(var f=0;f<u.length;++f)s.push(u[f])}return s},e.removeCertificate=function(s){var l;if(typeof s=="string"&&(s=Ge.pki.certificateFromPem(s)),n(s.subject),!e.hasCertificate(s))return null;var u=r(s.subject);if(!Ge.util.isArray(u))return l=e.certs[s.subject.hash],delete e.certs[s.subject.hash],l;for(var f=x.toDer(xe.certificateToAsn1(s)).getBytes(),d=0;d<u.length;++d){var h=x.toDer(xe.certificateToAsn1(u[d])).getBytes();f===h&&(l=u[d],u.splice(d,1))}return u.length===0&&delete e.certs[s.subject.hash],l};function r(s){return n(s),e.certs[s.hash]||null}function n(s){if(!s.hash){var l=Ge.md.sha1.create();s.attributes=xe.RDNAttributesAsArray(ml(s),l),s.hash=l.digest().toHex()}}if(t)for(var i=0;i<t.length;++i){var a=t[i];e.addCertificate(a)}return e};xe.certificateError={bad_certificate:"forge.pki.BadCertificate",unsupported_certificate:"forge.pki.UnsupportedCertificate",certificate_revoked:"forge.pki.CertificateRevoked",certificate_expired:"forge.pki.CertificateExpired",certificate_unknown:"forge.pki.CertificateUnknown",unknown_ca:"forge.pki.UnknownCertificateAuthority"};xe.verifyCertificateChain=function(t,e,r){typeof r=="function"&&(r={verify:r}),r=r||{},e=e.slice(0);var n=e.slice(0),i=r.validityCheckDate;typeof i=="undefined"&&(i=new Date);var a=!0,s=null,l=0;do{var u=e.shift(),f=null,d=!1;if(i&&(i<u.validity.notBefore||i>u.validity.notAfter)&&(s={message:"Certificate is not valid yet or has expired.",error:xe.certificateError.certificate_expired,notBefore:u.validity.notBefore,notAfter:u.validity.notAfter,now:i}),s===null){if(f=e[0]||t.getIssuer(u),f===null&&u.isIssuer(u)&&(d=!0,f=u),f){var h=f;Ge.util.isArray(h)||(h=[h]);for(var g=!1;!g&&h.length>0;){f=h.shift();try{g=f.verify(u)}catch(R){}}g||(s={message:"Certificate signature is invalid.",error:xe.certificateError.bad_certificate})}s===null&&(!f||d)&&!t.hasCertificate(u)&&(s={message:"Certificate is not trusted.",error:xe.certificateError.unknown_ca})}if(s===null&&f&&!u.isIssuer(f)&&(s={message:"Certificate issuer is invalid.",error:xe.certificateError.bad_certificate}),s===null)for(var y={keyUsage:!0,basicConstraints:!0},m=0;s===null&&m<u.extensions.length;++m){var w=u.extensions[m];w.critical&&!(w.name in y)&&(s={message:"Certificate has an unsupported critical extension.",error:xe.certificateError.unsupported_certificate})}if(s===null&&(!a||e.length===0&&(!f||d))){var _=u.getExtension("basicConstraints"),E=u.getExtension("keyUsage");if(E!==null&&(!E.keyCertSign||_===null)&&(s={message:"Certificate keyUsage or basicConstraints conflict or indicate that the certificate is not a CA. If the certificate is the only one in the chain or isn't the first then the certificate must be a valid CA.",error:xe.certificateError.bad_certificate}),s===null&&_!==null&&!_.cA&&(s={message:"Certificate basicConstraints indicates the certificate is not a CA.",error:xe.certificateError.bad_certificate}),s===null&&E!==null&&"pathLenConstraint"in _){var b=l-1;b>_.pathLenConstraint&&(s={message:"Certificate basicConstraints pathLenConstraint violated.",error:xe.certificateError.bad_certificate})}}var k=s===null?!0:s.error,O=r.verify?r.verify(k,l,n):k;if(O===!0)s=null;else throw k===!0&&(s={message:"The application rejected the certificate.",error:xe.certificateError.bad_certificate}),(O||O===0)&&(typeof O=="object"&&!Ge.util.isArray(O)?(O.message&&(s.message=O.message),O.error&&(s.error=O.error)):typeof O=="string"&&(s.error=O)),s;a=!1,++l}while(e.length>0);return!0}});var kg=de((U7,HC)=>{var ar=vt();Si();ul();fs();xg();bg();oi();Uu();hl();qt();Md();var F=ar.asn1,Tt=ar.pki,Fu=HC.exports=ar.pkcs12=ar.pkcs12||{},VC={name:"ContentInfo",tagClass:F.Class.UNIVERSAL,type:F.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.contentType",tagClass:F.Class.UNIVERSAL,type:F.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:F.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"content"}]},P5={name:"PFX",tagClass:F.Class.UNIVERSAL,type:F.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.version",tagClass:F.Class.UNIVERSAL,type:F.Type.INTEGER,constructed:!1,capture:"version"},VC,{name:"PFX.macData",tagClass:F.Class.UNIVERSAL,type:F.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"mac",value:[{name:"PFX.macData.mac",tagClass:F.Class.UNIVERSAL,type:F.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm",tagClass:F.Class.UNIVERSAL,type:F.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm.algorithm",tagClass:F.Class.UNIVERSAL,type:F.Type.OID,constructed:!1,capture:"macAlgorithm"},{name:"PFX.macData.mac.digestAlgorithm.parameters",tagClass:F.Class.UNIVERSAL,captureAsn1:"macAlgorithmParameters"}]},{name:"PFX.macData.mac.digest",tagClass:F.Class.UNIVERSAL,type:F.Type.OCTETSTRING,constructed:!1,capture:"macDigest"}]},{name:"PFX.macData.macSalt",tagClass:F.Class.UNIVERSAL,type:F.Type.OCTETSTRING,constructed:!1,capture:"macSalt"},{name:"PFX.macData.iterations",tagClass:F.Class.UNIVERSAL,type:F.Type.INTEGER,constructed:!1,optional:!0,capture:"macIterations"}]}]},M5={name:"SafeBag",tagClass:F.Class.UNIVERSAL,type:F.Type.SEQUENCE,constructed:!0,value:[{name:"SafeBag.bagId",tagClass:F.Class.UNIVERSAL,type:F.Type.OID,constructed:!1,capture:"bagId"},{name:"SafeBag.bagValue",tagClass:F.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"bagValue"},{name:"SafeBag.bagAttributes",tagClass:F.Class.UNIVERSAL,type:F.Type.SET,constructed:!0,optional:!0,capture:"bagAttributes"}]},U5={name:"Attribute",tagClass:F.Class.UNIVERSAL,type:F.Type.SEQUENCE,constructed:!0,value:[{name:"Attribute.attrId",tagClass:F.Class.UNIVERSAL,type:F.Type.OID,constructed:!1,capture:"oid"},{name:"Attribute.attrValues",tagClass:F.Class.UNIVERSAL,type:F.Type.SET,constructed:!0,capture:"values"}]},F5={name:"CertBag",tagClass:F.Class.UNIVERSAL,type:F.Type.SEQUENCE,constructed:!0,value:[{name:"CertBag.certId",tagClass:F.Class.UNIVERSAL,type:F.Type.OID,constructed:!1,capture:"certId"},{name:"CertBag.certValue",tagClass:F.Class.CONTEXT_SPECIFIC,constructed:!0,value:[{name:"CertBag.certValue[0]",tagClass:F.Class.UNIVERSAL,type:F.Class.OCTETSTRING,constructed:!1,capture:"cert"}]}]};function qu(t,e,r,n){for(var i=[],a=0;a<t.length;a++)for(var s=0;s<t[a].safeBags.length;s++){var l=t[a].safeBags[s];if(!(n!==void 0&&l.type!==n)){if(e===null){i.push(l);continue}l.attributes[e]!==void 0&&l.attributes[e].indexOf(r)>=0&&i.push(l)}}return i}Fu.pkcs12FromAsn1=function(t,e,r){typeof e=="string"?(r=e,e=!0):e===void 0&&(e=!0);var n={},i=[];if(!F.validate(t,P5,n,i)){var a=new Error("Cannot read PKCS#12 PFX. ASN.1 object is not an PKCS#12 PFX.");throw a.errors=a,a}var s={version:n.version.charCodeAt(0),safeContents:[],getBags:function(_){var E={},b;return"localKeyId"in _?b=_.localKeyId:"localKeyIdHex"in _&&(b=ar.util.hexToBytes(_.localKeyIdHex)),b===void 0&&!("friendlyName"in _)&&"bagType"in _&&(E[_.bagType]=qu(s.safeContents,null,null,_.bagType)),b!==void 0&&(E.localKeyId=qu(s.safeContents,"localKeyId",b,_.bagType)),"friendlyName"in _&&(E.friendlyName=qu(s.safeContents,"friendlyName",_.friendlyName,_.bagType)),E},getBagsByFriendlyName:function(_,E){return qu(s.safeContents,"friendlyName",_,E)},getBagsByLocalKeyId:function(_,E){return qu(s.safeContents,"localKeyId",_,E)}};if(n.version.charCodeAt(0)!==3){var a=new Error("PKCS#12 PFX of version other than 3 not supported.");throw a.version=n.version.charCodeAt(0),a}if(F.derToOid(n.contentType)!==Tt.oids.data){var a=new Error("Only PKCS#12 PFX in password integrity mode supported.");throw a.oid=F.derToOid(n.contentType),a}var l=n.content.value[0];if(l.tagClass!==F.Class.UNIVERSAL||l.type!==F.Type.OCTETSTRING)throw new Error("PKCS#12 authSafe content data is not an OCTET STRING.");if(l=Ag(l),n.mac){var u=null,f=0,d=F.derToOid(n.macAlgorithm);switch(d){case Tt.oids.sha1:u=ar.md.sha1.create(),f=20;break;case Tt.oids.sha256:u=ar.md.sha256.create(),f=32;break;case Tt.oids.sha384:u=ar.md.sha384.create(),f=48;break;case Tt.oids.sha512:u=ar.md.sha512.create(),f=64;break;case Tt.oids.md5:u=ar.md.md5.create(),f=16;break}if(u===null)throw new Error("PKCS#12 uses unsupported MAC algorithm: "+d);var h=new ar.util.ByteBuffer(n.macSalt),g="macIterations"in n?parseInt(ar.util.bytesToHex(n.macIterations),16):1,y=Fu.generateKey(r,h,3,g,f,u),m=ar.hmac.create();m.start(u,y),m.update(l.value);var w=m.getMac();if(w.getBytes()!==n.macDigest)throw new Error("PKCS#12 MAC could not be verified. Invalid password?")}return q5(s,l.value,e,r),s};function Ag(t){if(t.composed||t.constructed){for(var e=ar.util.createBuffer(),r=0;r<t.value.length;++r)e.putBytes(t.value[r].value);t.composed=t.constructed=!1,t.value=e.getBytes()}return t}function q5(t,e,r,n){if(e=F.fromDer(e,r),e.tagClass!==F.Class.UNIVERSAL||e.type!==F.Type.SEQUENCE||e.constructed!==!0)throw new Error("PKCS#12 AuthenticatedSafe expected to be a SEQUENCE OF ContentInfo");for(var i=0;i<e.value.length;i++){var a=e.value[i],s={},l=[];if(!F.validate(a,VC,s,l)){var u=new Error("Cannot read ContentInfo.");throw u.errors=l,u}var f={encrypted:!1},d=null,h=s.content.value[0];switch(F.derToOid(s.contentType)){case Tt.oids.data:if(h.tagClass!==F.Class.UNIVERSAL||h.type!==F.Type.OCTETSTRING)throw new Error("PKCS#12 SafeContents Data is not an OCTET STRING.");d=Ag(h).value;break;case Tt.oids.encryptedData:d=G5(h,n),f.encrypted=!0;break;default:var u=new Error("Unsupported PKCS#12 contentType.");throw u.contentType=F.derToOid(s.contentType),u}f.safeBags=V5(d,r,n),t.safeContents.push(f)}}function G5(t,e){var r={},n=[];if(!F.validate(t,ar.pkcs7.asn1.encryptedDataValidator,r,n)){var i=new Error("Cannot read EncryptedContentInfo.");throw i.errors=n,i}var a=F.derToOid(r.contentType);if(a!==Tt.oids.data){var i=new Error("PKCS#12 EncryptedContentInfo ContentType is not Data.");throw i.oid=a,i}a=F.derToOid(r.encAlgorithm);var s=Tt.pbe.getCipher(a,r.encParameter,e),l=Ag(r.encryptedContentAsn1),u=ar.util.createBuffer(l.value);if(s.update(u),!s.finish())throw new Error("Failed to decrypt PKCS#12 SafeContents.");return s.output.getBytes()}function V5(t,e,r){if(!e&&t.length===0)return[];if(t=F.fromDer(t,e),t.tagClass!==F.Class.UNIVERSAL||t.type!==F.Type.SEQUENCE||t.constructed!==!0)throw new Error("PKCS#12 SafeContents expected to be a SEQUENCE OF SafeBag.");for(var n=[],i=0;i<t.value.length;i++){var a=t.value[i],s={},l=[];if(!F.validate(a,M5,s,l)){var u=new Error("Cannot read SafeBag.");throw u.errors=l,u}var f={type:F.derToOid(s.bagId),attributes:H5(s.bagAttributes)};n.push(f);var d,h,g=s.bagValue.value[0];switch(f.type){case Tt.oids.pkcs8ShroudedKeyBag:if(g=Tt.decryptPrivateKeyInfo(g,r),g===null)throw new Error("Unable to decrypt PKCS#8 ShroudedKeyBag, wrong password?");case Tt.oids.keyBag:try{f.key=Tt.privateKeyFromAsn1(g)}catch(m){f.key=null,f.asn1=g}continue;case Tt.oids.certBag:d=F5,h=function(){if(F.derToOid(s.certId)!==Tt.oids.x509Certificate){var m=new Error("Unsupported certificate type, only X.509 supported.");throw m.oid=F.derToOid(s.certId),m}var w=F.fromDer(s.cert,e);try{f.cert=Tt.certificateFromAsn1(w,!0)}catch(_){f.cert=null,f.asn1=w}};break;default:var u=new Error("Unsupported PKCS#12 SafeBag type.");throw u.oid=f.type,u}if(d!==void 0&&!F.validate(g,d,s,l)){var u=new Error("Cannot read PKCS#12 "+d.name);throw u.errors=l,u}h()}return n}function H5(t){var e={};if(t!==void 0)for(var r=0;r<t.length;++r){var n={},i=[];if(!F.validate(t[r],U5,n,i)){var a=new Error("Cannot read PKCS#12 BagAttribute.");throw a.errors=i,a}var s=F.derToOid(n.oid);if(Tt.oids[s]!==void 0){e[Tt.oids[s]]=[];for(var l=0;l<n.values.length;++l)e[Tt.oids[s]].push(n.values[l].value)}}return e}Fu.toPkcs12Asn1=function(t,e,r,n){n=n||{},n.saltSize=n.saltSize||8,n.count=n.count||2048,n.algorithm=n.algorithm||n.encAlgorithm||"aes128","useMac"in n||(n.useMac=!0),"localKeyId"in n||(n.localKeyId=null),"generateLocalKeyId"in n||(n.generateLocalKeyId=!0);var i=n.localKeyId,a;if(i!==null)i=ar.util.hexToBytes(i);else if(n.generateLocalKeyId)if(e){var s=ar.util.isArray(e)?e[0]:e;typeof s=="string"&&(s=Tt.certificateFromPem(s));var l=ar.md.sha1.create();l.update(F.toDer(Tt.certificateToAsn1(s)).getBytes()),i=l.digest().getBytes()}else i=ar.random.getBytes(20);var u=[];i!==null&&u.push(F.create(F.Class.UNIVERSAL,F.Type.SEQUENCE,!0,[F.create(F.Class.UNIVERSAL,F.Type.OID,!1,F.oidToDer(Tt.oids.localKeyId).getBytes()),F.create(F.Class.UNIVERSAL,F.Type.SET,!0,[F.create(F.Class.UNIVERSAL,F.Type.OCTETSTRING,!1,i)])])),"friendlyName"in n&&u.push(F.create(F.Class.UNIVERSAL,F.Type.SEQUENCE,!0,[F.create(F.Class.UNIVERSAL,F.Type.OID,!1,F.oidToDer(Tt.oids.friendlyName).getBytes()),F.create(F.Class.UNIVERSAL,F.Type.SET,!0,[F.create(F.Class.UNIVERSAL,F.Type.BMPSTRING,!1,n.friendlyName)])])),u.length>0&&(a=F.create(F.Class.UNIVERSAL,F.Type.SET,!0,u));var f=[],d=[];e!==null&&(ar.util.isArray(e)?d=e:d=[e]);for(var h=[],g=0;g<d.length;++g){e=d[g],typeof e=="string"&&(e=Tt.certificateFromPem(e));var y=g===0?a:void 0,m=Tt.certificateToAsn1(e),w=F.create(F.Class.UNIVERSAL,F.Type.SEQUENCE,!0,[F.create(F.Class.UNIVERSAL,F.Type.OID,!1,F.oidToDer(Tt.oids.certBag).getBytes()),F.create(F.Class.CONTEXT_SPECIFIC,0,!0,[F.create(F.Class.UNIVERSAL,F.Type.SEQUENCE,!0,[F.create(F.Class.UNIVERSAL,F.Type.OID,!1,F.oidToDer(Tt.oids.x509Certificate).getBytes()),F.create(F.Class.CONTEXT_SPECIFIC,0,!0,[F.create(F.Class.UNIVERSAL,F.Type.OCTETSTRING,!1,F.toDer(m).getBytes())])])]),y]);h.push(w)}if(h.length>0){var _=F.create(F.Class.UNIVERSAL,F.Type.SEQUENCE,!0,h),E=F.create(F.Class.UNIVERSAL,F.Type.SEQUENCE,!0,[F.create(F.Class.UNIVERSAL,F.Type.OID,!1,F.oidToDer(Tt.oids.data).getBytes()),F.create(F.Class.CONTEXT_SPECIFIC,0,!0,[F.create(F.Class.UNIVERSAL,F.Type.OCTETSTRING,!1,F.toDer(_).getBytes())])]);f.push(E)}var b=null;if(t!==null){var k=Tt.wrapRsaPrivateKey(Tt.privateKeyToAsn1(t));r===null?b=F.create(F.Class.UNIVERSAL,F.Type.SEQUENCE,!0,[F.create(F.Class.UNIVERSAL,F.Type.OID,!1,F.oidToDer(Tt.oids.keyBag).getBytes()),F.create(F.Class.CONTEXT_SPECIFIC,0,!0,[k]),a]):b=F.create(F.Class.UNIVERSAL,F.Type.SEQUENCE,!0,[F.create(F.Class.UNIVERSAL,F.Type.OID,!1,F.oidToDer(Tt.oids.pkcs8ShroudedKeyBag).getBytes()),F.create(F.Class.CONTEXT_SPECIFIC,0,!0,[Tt.encryptPrivateKeyInfo(k,r,n)]),a]);var O=F.create(F.Class.UNIVERSAL,F.Type.SEQUENCE,!0,[b]),R=F.create(F.Class.UNIVERSAL,F.Type.SEQUENCE,!0,[F.create(F.Class.UNIVERSAL,F.Type.OID,!1,F.oidToDer(Tt.oids.data).getBytes()),F.create(F.Class.CONTEXT_SPECIFIC,0,!0,[F.create(F.Class.UNIVERSAL,F.Type.OCTETSTRING,!1,F.toDer(O).getBytes())])]);f.push(R)}var B=F.create(F.Class.UNIVERSAL,F.Type.SEQUENCE,!0,f),ne;if(n.useMac){var l=ar.md.sha1.create(),M=new ar.util.ByteBuffer(ar.random.getBytes(n.saltSize)),G=n.count,t=Fu.generateKey(r,M,3,G,20),re=ar.hmac.create();re.start(l,t),re.update(F.toDer(B).getBytes());var se=re.getMac();ne=F.create(F.Class.UNIVERSAL,F.Type.SEQUENCE,!0,[F.create(F.Class.UNIVERSAL,F.Type.SEQUENCE,!0,[F.create(F.Class.UNIVERSAL,F.Type.SEQUENCE,!0,[F.create(F.Class.UNIVERSAL,F.Type.OID,!1,F.oidToDer(Tt.oids.sha1).getBytes()),F.create(F.Class.UNIVERSAL,F.Type.NULL,!1,"")]),F.create(F.Class.UNIVERSAL,F.Type.OCTETSTRING,!1,se.getBytes())]),F.create(F.Class.UNIVERSAL,F.Type.OCTETSTRING,!1,M.getBytes()),F.create(F.Class.UNIVERSAL,F.Type.INTEGER,!1,F.integerToDer(G).getBytes())])}return F.create(F.Class.UNIVERSAL,F.Type.SEQUENCE,!0,[F.create(F.Class.UNIVERSAL,F.Type.INTEGER,!1,F.integerToDer(3).getBytes()),F.create(F.Class.UNIVERSAL,F.Type.SEQUENCE,!0,[F.create(F.Class.UNIVERSAL,F.Type.OID,!1,F.oidToDer(Tt.oids.data).getBytes()),F.create(F.Class.CONTEXT_SPECIFIC,0,!0,[F.create(F.Class.UNIVERSAL,F.Type.OCTETSTRING,!1,F.toDer(B).getBytes())])]),ne])};Fu.generateKey=ar.pbe.generatePkcs12Key});var Ng=de((F7,KC)=>{var gs=vt();Si();fs();bg();zs();Ad();kg();Od();Uu();qt();Md();var Ig=gs.asn1,yl=KC.exports=gs.pki=gs.pki||{};yl.pemToDer=function(t){var e=gs.pem.decode(t)[0];if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert PEM to DER; PEM is encrypted.");return gs.util.createBuffer(e.body)};yl.privateKeyFromPem=function(t){var e=gs.pem.decode(t)[0];if(e.type!=="PRIVATE KEY"&&e.type!=="RSA PRIVATE KEY"){var r=new Error('Could not convert private key from PEM; PEM header type is not "PRIVATE KEY" or "RSA PRIVATE KEY".');throw r.headerType=e.type,r}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert private key from PEM; PEM is encrypted.");var n=Ig.fromDer(e.body);return yl.privateKeyFromAsn1(n)};yl.privateKeyToPem=function(t,e){var r={type:"RSA PRIVATE KEY",body:Ig.toDer(yl.privateKeyToAsn1(t)).getBytes()};return gs.pem.encode(r,{maxline:e})};yl.privateKeyInfoToPem=function(t,e){var r={type:"PRIVATE KEY",body:Ig.toDer(t).getBytes()};return gs.pem.encode(r,{maxline:e})}});var Pg=de((q7,ZC)=>{var _e=vt();Si();ul();bd();zs();Ng();oi();hl();qt();var Ud=function(t,e,r,n){var i=_e.util.createBuffer(),a=t.length>>1,s=a+(t.length&1),l=t.substr(0,s),u=t.substr(a,s),f=_e.util.createBuffer(),d=_e.hmac.create();r=e+r;var h=Math.ceil(n/16),g=Math.ceil(n/20);d.start("MD5",l);var y=_e.util.createBuffer();f.putBytes(r);for(var m=0;m<h;++m)d.start(null,null),d.update(f.getBytes()),f.putBuffer(d.digest()),d.start(null,null),d.update(f.bytes()+r),y.putBuffer(d.digest());d.start("SHA1",u);var w=_e.util.createBuffer();f.clear(),f.putBytes(r);for(var m=0;m<g;++m)d.start(null,null),d.update(f.getBytes()),f.putBuffer(d.digest()),d.start(null,null),d.update(f.bytes()+r),w.putBuffer(d.digest());return i.putBytes(_e.util.xorBytes(y.getBytes(),w.getBytes(),n)),i},K5=function(t,e,r){var n=_e.hmac.create();n.start("SHA1",t);var i=_e.util.createBuffer();return i.putInt32(e[0]),i.putInt32(e[1]),i.putByte(r.type),i.putByte(r.version.major),i.putByte(r.version.minor),i.putInt16(r.length),i.putBytes(r.fragment.bytes()),n.update(i.getBytes()),n.digest().getBytes()},j5=function(t,e,r){var n=!1;try{var i=t.deflate(e.fragment.getBytes());e.fragment=_e.util.createBuffer(i),e.length=i.length,n=!0}catch(a){}return n},Y5=function(t,e,r){var n=!1;try{var i=t.inflate(e.fragment.getBytes());e.fragment=_e.util.createBuffer(i),e.length=i.length,n=!0}catch(a){}return n},Yn=function(t,e){var r=0;switch(e){case 1:r=t.getByte();break;case 2:r=t.getInt16();break;case 3:r=t.getInt24();break;case 4:r=t.getInt32();break}return _e.util.createBuffer(t.getBytes(r))},fi=function(t,e,r){t.putInt(r.length(),e<<3),t.putBuffer(r)},S={};S.Versions={TLS_1_0:{major:3,minor:1},TLS_1_1:{major:3,minor:2},TLS_1_2:{major:3,minor:3}};S.SupportedVersions=[S.Versions.TLS_1_1,S.Versions.TLS_1_0];S.Version=S.SupportedVersions[0];S.MaxFragment=16384-1024;S.ConnectionEnd={server:0,client:1};S.PRFAlgorithm={tls_prf_sha256:0};S.BulkCipherAlgorithm={none:null,rc4:0,des3:1,aes:2};S.CipherType={stream:0,block:1,aead:2};S.MACAlgorithm={none:null,hmac_md5:0,hmac_sha1:1,hmac_sha256:2,hmac_sha384:3,hmac_sha512:4};S.CompressionMethod={none:0,deflate:1};S.ContentType={change_cipher_spec:20,alert:21,handshake:22,application_data:23,heartbeat:24};S.HandshakeType={hello_request:0,client_hello:1,server_hello:2,certificate:11,server_key_exchange:12,certificate_request:13,server_hello_done:14,certificate_verify:15,client_key_exchange:16,finished:20};S.Alert={};S.Alert.Level={warning:1,fatal:2};S.Alert.Description={close_notify:0,unexpected_message:10,bad_record_mac:20,decryption_failed:21,record_overflow:22,decompression_failure:30,handshake_failure:40,bad_certificate:42,unsupported_certificate:43,certificate_revoked:44,certificate_expired:45,certificate_unknown:46,illegal_parameter:47,unknown_ca:48,access_denied:49,decode_error:50,decrypt_error:51,export_restriction:60,protocol_version:70,insufficient_security:71,internal_error:80,user_canceled:90,no_renegotiation:100};S.HeartbeatMessageType={heartbeat_request:1,heartbeat_response:2};S.CipherSuites={};S.getCipherSuite=function(t){var e=null;for(var r in S.CipherSuites){var n=S.CipherSuites[r];if(n.id[0]===t.charCodeAt(0)&&n.id[1]===t.charCodeAt(1)){e=n;break}}return e};S.handleUnexpected=function(t,e){var r=!t.open&&t.entity===S.ConnectionEnd.client;r||t.error(t,{message:"Unexpected message. Received TLS record out of order.",send:!0,alert:{level:S.Alert.Level.fatal,description:S.Alert.Description.unexpected_message}})};S.handleHelloRequest=function(t,e,r){!t.handshaking&&t.handshakes>0&&(S.queue(t,S.createAlert(t,{level:S.Alert.Level.warning,description:S.Alert.Description.no_renegotiation})),S.flush(t)),t.process()};S.parseHelloMessage=function(t,e,r){var n=null,i=t.entity===S.ConnectionEnd.client;if(r<38)t.error(t,{message:i?"Invalid ServerHello message. Message too short.":"Invalid ClientHello message. Message too short.",send:!0,alert:{level:S.Alert.Level.fatal,description:S.Alert.Description.illegal_parameter}});else{var a=e.fragment,s=a.length();if(n={version:{major:a.getByte(),minor:a.getByte()},random:_e.util.createBuffer(a.getBytes(32)),session_id:Yn(a,1),extensions:[]},i?(n.cipher_suite=a.getBytes(2),n.compression_method=a.getByte()):(n.cipher_suites=Yn(a,2),n.compression_methods=Yn(a,1)),s=r-(s-a.length()),s>0){for(var l=Yn(a,2);l.length()>0;)n.extensions.push({type:[l.getByte(),l.getByte()],data:Yn(l,2)});if(!i)for(var u=0;u<n.extensions.length;++u){var f=n.extensions[u];if(f.type[0]===0&&f.type[1]===0)for(var d=Yn(f.data,2);d.length()>0;){var h=d.getByte();if(h!==0)break;t.session.extensions.server_name.serverNameList.push(Yn(d,2).getBytes())}}}if(t.session.version&&(n.version.major!==t.session.version.major||n.version.minor!==t.session.version.minor))return t.error(t,{message:"TLS version change is disallowed during renegotiation.",send:!0,alert:{level:S.Alert.Level.fatal,description:S.Alert.Description.protocol_version}});if(i)t.session.cipherSuite=S.getCipherSuite(n.cipher_suite);else for(var g=_e.util.createBuffer(n.cipher_suites.bytes());g.length()>0&&(t.session.cipherSuite=S.getCipherSuite(g.getBytes(2)),t.session.cipherSuite===null););if(t.session.cipherSuite===null)return t.error(t,{message:"No cipher suites in common.",send:!0,alert:{level:S.Alert.Level.fatal,description:S.Alert.Description.handshake_failure},cipherSuite:_e.util.bytesToHex(n.cipher_suite)});i?t.session.compressionMethod=n.compression_method:t.session.compressionMethod=S.CompressionMethod.none}return n};S.createSecurityParameters=function(t,e){var r=t.entity===S.ConnectionEnd.client,n=e.random.bytes(),i=r?t.session.sp.client_random:n,a=r?n:S.createRandom().getBytes();t.session.sp={entity:t.entity,prf_algorithm:S.PRFAlgorithm.tls_prf_sha256,bulk_cipher_algorithm:null,cipher_type:null,enc_key_length:null,block_length:null,fixed_iv_length:null,record_iv_length:null,mac_algorithm:null,mac_length:null,mac_key_length:null,compression_algorithm:t.session.compressionMethod,pre_master_secret:null,master_secret:null,client_random:i,server_random:a}};S.handleServerHello=function(t,e,r){var n=S.parseHelloMessage(t,e,r);if(!t.fail){if(n.version.minor<=t.version.minor)t.version.minor=n.version.minor;else return t.error(t,{message:"Incompatible TLS version.",send:!0,alert:{level:S.Alert.Level.fatal,description:S.Alert.Description.protocol_version}});t.session.version=t.version;var i=n.session_id.bytes();i.length>0&&i===t.session.id?(t.expect=YC,t.session.resuming=!0,t.session.sp.server_random=n.random.bytes()):(t.expect=z5,t.session.resuming=!1,S.createSecurityParameters(t,n)),t.session.id=i,t.process()}};S.handleClientHello=function(t,e,r){var n=S.parseHelloMessage(t,e,r);if(!t.fail){var i=n.session_id.bytes(),a=null;if(t.sessionCache&&(a=t.sessionCache.getSession(i),a===null?i="":(a.version.major!==n.version.major||a.version.minor>n.version.minor)&&(a=null,i="")),i.length===0&&(i=_e.random.getBytes(32)),t.session.id=i,t.session.clientHelloVersion=n.version,t.session.sp={},a)t.version=t.session.version=a.version,t.session.sp=a.sp;else{for(var s,l=1;l<S.SupportedVersions.length&&(s=S.SupportedVersions[l],!(s.minor<=n.version.minor));++l);t.version={major:s.major,minor:s.minor},t.session.version=t.version}a!==null?(t.expect=Dg,t.session.resuming=!0,t.session.sp.client_random=n.random.bytes()):(t.expect=t.verifyClient!==!1?tU:Rg,t.session.resuming=!1,S.createSecurityParameters(t,n)),t.open=!0,S.queue(t,S.createRecord(t,{type:S.ContentType.handshake,data:S.createServerHello(t)})),t.session.resuming?(S.queue(t,S.createRecord(t,{type:S.ContentType.change_cipher_spec,data:S.createChangeCipherSpec()})),t.state.pending=S.createConnectionState(t),t.state.current.write=t.state.pending.write,S.queue(t,S.createRecord(t,{type:S.ContentType.handshake,data:S.createFinished(t)}))):(S.queue(t,S.createRecord(t,{type:S.ContentType.handshake,data:S.createCertificate(t)})),t.fail||(S.queue(t,S.createRecord(t,{type:S.ContentType.handshake,data:S.createServerKeyExchange(t)})),t.verifyClient!==!1&&S.queue(t,S.createRecord(t,{type:S.ContentType.handshake,data:S.createCertificateRequest(t)})),S.queue(t,S.createRecord(t,{type:S.ContentType.handshake,data:S.createServerHelloDone(t)})))),S.flush(t),t.process()}};S.handleCertificate=function(t,e,r){if(r<3)return t.error(t,{message:"Invalid Certificate message. Message too short.",send:!0,alert:{level:S.Alert.Level.fatal,description:S.Alert.Description.illegal_parameter}});var n=e.fragment,i={certificate_list:Yn(n,3)},a,s,l=[];try{for(;i.certificate_list.length()>0;)a=Yn(i.certificate_list,3),s=_e.asn1.fromDer(a),a=_e.pki.certificateFromAsn1(s,!0),l.push(a)}catch(f){return t.error(t,{message:"Could not parse certificate list.",cause:f,send:!0,alert:{level:S.Alert.Level.fatal,description:S.Alert.Description.bad_certificate}})}var u=t.entity===S.ConnectionEnd.client;(u||t.verifyClient===!0)&&l.length===0?t.error(t,{message:u?"No server certificate provided.":"No client certificate provided.",send:!0,alert:{level:S.Alert.Level.fatal,description:S.Alert.Description.illegal_parameter}}):l.length===0?t.expect=u?jC:Rg:(u?t.session.serverCertificate=l[0]:t.session.clientCertificate=l[0],S.verifyCertificateChain(t,l)&&(t.expect=u?jC:Rg)),t.process()};S.handleServerKeyExchange=function(t,e,r){if(r>0)return t.error(t,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:S.Alert.Level.fatal,description:S.Alert.Description.unsupported_certificate}});t.expect=Q5,t.process()};S.handleClientKeyExchange=function(t,e,r){if(r<48)return t.error(t,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:S.Alert.Level.fatal,description:S.Alert.Description.unsupported_certificate}});var n=e.fragment,i={enc_pre_master_secret:Yn(n,2).getBytes()},a=null;if(t.getPrivateKey)try{a=t.getPrivateKey(t,t.session.serverCertificate),a=_e.pki.privateKeyFromPem(a)}catch(u){t.error(t,{message:"Could not get private key.",cause:u,send:!0,alert:{level:S.Alert.Level.fatal,description:S.Alert.Description.internal_error}})}if(a===null)return t.error(t,{message:"No private key set.",send:!0,alert:{level:S.Alert.Level.fatal,description:S.Alert.Description.internal_error}});try{var s=t.session.sp;s.pre_master_secret=a.decrypt(i.enc_pre_master_secret);var l=t.session.clientHelloVersion;if(l.major!==s.pre_master_secret.charCodeAt(0)||l.minor!==s.pre_master_secret.charCodeAt(1))throw new Error("TLS version rollback attack detected.")}catch(u){s.pre_master_secret=_e.random.getBytes(48)}t.expect=Dg,t.session.clientCertificate!==null&&(t.expect=rU),t.process()};S.handleCertificateRequest=function(t,e,r){if(r<3)return t.error(t,{message:"Invalid CertificateRequest. Message too short.",send:!0,alert:{level:S.Alert.Level.fatal,description:S.Alert.Description.illegal_parameter}});var n=e.fragment,i={certificate_types:Yn(n,1),certificate_authorities:Yn(n,2)};t.session.certificateRequest=i,t.expect=X5,t.process()};S.handleCertificateVerify=function(t,e,r){if(r<2)return t.error(t,{message:"Invalid CertificateVerify. Message too short.",send:!0,alert:{level:S.Alert.Level.fatal,description:S.Alert.Description.illegal_parameter}});var n=e.fragment;n.read-=4;var i=n.bytes();n.read+=4;var a={signature:Yn(n,2).getBytes()},s=_e.util.createBuffer();s.putBuffer(t.session.md5.digest()),s.putBuffer(t.session.sha1.digest()),s=s.getBytes();try{var l=t.session.clientCertificate;if(!l.publicKey.verify(s,a.signature,"NONE"))throw new Error("CertificateVerify signature does not match.");t.session.md5.update(i),t.session.sha1.update(i)}catch(u){return t.error(t,{message:"Bad signature in CertificateVerify.",send:!0,alert:{level:S.Alert.Level.fatal,description:S.Alert.Description.handshake_failure}})}t.expect=Dg,t.process()};S.handleServerHelloDone=function(t,e,r){if(r>0)return t.error(t,{message:"Invalid ServerHelloDone message. Invalid length.",send:!0,alert:{level:S.Alert.Level.fatal,description:S.Alert.Description.record_overflow}});if(t.serverCertificate===null){var n={message:"No server certificate provided. Not enough security.",send:!0,alert:{level:S.Alert.Level.fatal,description:S.Alert.Description.insufficient_security}},i=0,a=t.verify(t,n.alert.description,i,[]);if(a!==!0)return(a||a===0)&&(typeof a=="object"&&!_e.util.isArray(a)?(a.message&&(n.message=a.message),a.alert&&(n.alert.description=a.alert)):typeof a=="number"&&(n.alert.description=a)),t.error(t,n)}t.session.certificateRequest!==null&&(e=S.createRecord(t,{type:S.ContentType.handshake,data:S.createCertificate(t)}),S.queue(t,e)),e=S.createRecord(t,{type:S.ContentType.handshake,data:S.createClientKeyExchange(t)}),S.queue(t,e),t.expect=$5;var s=function(l,u){l.session.certificateRequest!==null&&l.session.clientCertificate!==null&&S.queue(l,S.createRecord(l,{type:S.ContentType.handshake,data:S.createCertificateVerify(l,u)})),S.queue(l,S.createRecord(l,{type:S.ContentType.change_cipher_spec,data:S.createChangeCipherSpec()})),l.state.pending=S.createConnectionState(l),l.state.current.write=l.state.pending.write,S.queue(l,S.createRecord(l,{type:S.ContentType.handshake,data:S.createFinished(l)})),l.expect=YC,S.flush(l),l.process()};if(t.session.certificateRequest===null||t.session.clientCertificate===null)return s(t,null);S.getClientSignature(t,s)};S.handleChangeCipherSpec=function(t,e){if(e.fragment.getByte()!==1)return t.error(t,{message:"Invalid ChangeCipherSpec message received.",send:!0,alert:{level:S.Alert.Level.fatal,description:S.Alert.Description.illegal_parameter}});var r=t.entity===S.ConnectionEnd.client;(t.session.resuming&&r||!t.session.resuming&&!r)&&(t.state.pending=S.createConnectionState(t)),t.state.current.read=t.state.pending.read,(!t.session.resuming&&r||t.session.resuming&&!r)&&(t.state.pending=null),t.expect=r?J5:nU,t.process()};S.handleFinished=function(t,e,r){var n=e.fragment;n.read-=4;var i=n.bytes();n.read+=4;var a=e.fragment.getBytes();n=_e.util.createBuffer(),n.putBuffer(t.session.md5.digest()),n.putBuffer(t.session.sha1.digest());var s=t.entity===S.ConnectionEnd.client,l=s?"server finished":"client finished",u=t.session.sp,f=12,d=Ud;if(n=d(u.master_secret,l,n.getBytes(),f),n.getBytes()!==a)return t.error(t,{message:"Invalid verify_data in Finished message.",send:!0,alert:{level:S.Alert.Level.fatal,description:S.Alert.Description.decrypt_error}});t.session.md5.update(i),t.session.sha1.update(i),(t.session.resuming&&s||!t.session.resuming&&!s)&&(S.queue(t,S.createRecord(t,{type:S.ContentType.change_cipher_spec,data:S.createChangeCipherSpec()})),t.state.current.write=t.state.pending.write,t.state.pending=null,S.queue(t,S.createRecord(t,{type:S.ContentType.handshake,data:S.createFinished(t)}))),t.expect=s?Z5:iU,t.handshaking=!1,++t.handshakes,t.peerCertificate=s?t.session.serverCertificate:t.session.clientCertificate,S.flush(t),t.isConnected=!0,t.connected(t),t.process()};S.handleAlert=function(t,e){var r=e.fragment,n={level:r.getByte(),description:r.getByte()},i;switch(n.description){case S.Alert.Description.close_notify:i="Connection closed.";break;case S.Alert.Description.unexpected_message:i="Unexpected message.";break;case S.Alert.Description.bad_record_mac:i="Bad record MAC.";break;case S.Alert.Description.decryption_failed:i="Decryption failed.";break;case S.Alert.Description.record_overflow:i="Record overflow.";break;case S.Alert.Description.decompression_failure:i="Decompression failed.";break;case S.Alert.Description.handshake_failure:i="Handshake failure.";break;case S.Alert.Description.bad_certificate:i="Bad certificate.";break;case S.Alert.Description.unsupported_certificate:i="Unsupported certificate.";break;case S.Alert.Description.certificate_revoked:i="Certificate revoked.";break;case S.Alert.Description.certificate_expired:i="Certificate expired.";break;case S.Alert.Description.certificate_unknown:i="Certificate unknown.";break;case S.Alert.Description.illegal_parameter:i="Illegal parameter.";break;case S.Alert.Description.unknown_ca:i="Unknown certificate authority.";break;case S.Alert.Description.access_denied:i="Access denied.";break;case S.Alert.Description.decode_error:i="Decode error.";break;case S.Alert.Description.decrypt_error:i="Decrypt error.";break;case S.Alert.Description.export_restriction:i="Export restriction.";break;case S.Alert.Description.protocol_version:i="Unsupported protocol version.";break;case S.Alert.Description.insufficient_security:i="Insufficient security.";break;case S.Alert.Description.internal_error:i="Internal error.";break;case S.Alert.Description.user_canceled:i="User canceled.";break;case S.Alert.Description.no_renegotiation:i="Renegotiation not supported.";break;default:i="Unknown error.";break}if(n.description===S.Alert.Description.close_notify)return t.close();t.error(t,{message:i,send:!1,origin:t.entity===S.ConnectionEnd.client?"server":"client",alert:n}),t.process()};S.handleHandshake=function(t,e){var r=e.fragment,n=r.getByte(),i=r.getInt24();if(i>r.length())return t.fragmented=e,e.fragment=_e.util.createBuffer(),r.read-=4,t.process();t.fragmented=null,r.read-=4;var a=r.bytes(i+4);r.read+=4,n in qd[t.entity][t.expect]?(t.entity===S.ConnectionEnd.server&&!t.open&&!t.fail&&(t.handshaking=!0,t.session={version:null,extensions:{server_name:{serverNameList:[]}},cipherSuite:null,compressionMethod:null,serverCertificate:null,clientCertificate:null,md5:_e.md.md5.create(),sha1:_e.md.sha1.create()}),n!==S.HandshakeType.hello_request&&n!==S.HandshakeType.certificate_verify&&n!==S.HandshakeType.finished&&(t.session.md5.update(a),t.session.sha1.update(a)),qd[t.entity][t.expect][n](t,e,i)):S.handleUnexpected(t,e)};S.handleApplicationData=function(t,e){t.data.putBuffer(e.fragment),t.dataReady(t),t.process()};S.handleHeartbeat=function(t,e){var r=e.fragment,n=r.getByte(),i=r.getInt16(),a=r.getBytes(i);if(n===S.HeartbeatMessageType.heartbeat_request){if(t.handshaking||i>a.length)return t.process();S.queue(t,S.createRecord(t,{type:S.ContentType.heartbeat,data:S.createHeartbeat(S.HeartbeatMessageType.heartbeat_response,a)})),S.flush(t)}else if(n===S.HeartbeatMessageType.heartbeat_response){if(a!==t.expectedHeartbeatPayload)return t.process();t.heartbeatReceived&&t.heartbeatReceived(t,_e.util.createBuffer(a))}t.process()};var W5=0,z5=1,jC=2,Q5=3,X5=4,YC=5,J5=6,Z5=7,$5=8,eU=0,tU=1,Rg=2,rU=3,Dg=4,nU=5,iU=6,T=S.handleUnexpected,WC=S.handleChangeCipherSpec,$r=S.handleAlert,bn=S.handleHandshake,zC=S.handleApplicationData,en=S.handleHeartbeat,Bg=[];Bg[S.ConnectionEnd.client]=[[T,$r,bn,T,en],[T,$r,bn,T,en],[T,$r,bn,T,en],[T,$r,bn,T,en],[T,$r,bn,T,en],[WC,$r,T,T,en],[T,$r,bn,T,en],[T,$r,bn,zC,en],[T,$r,bn,T,en]];Bg[S.ConnectionEnd.server]=[[T,$r,bn,T,en],[T,$r,bn,T,en],[T,$r,bn,T,en],[T,$r,bn,T,en],[WC,$r,T,T,en],[T,$r,bn,T,en],[T,$r,bn,zC,en],[T,$r,bn,T,en]];var ms=S.handleHelloRequest,aU=S.handleServerHello,QC=S.handleCertificate,XC=S.handleServerKeyExchange,Og=S.handleCertificateRequest,Fd=S.handleServerHelloDone,JC=S.handleFinished,qd=[];qd[S.ConnectionEnd.client]=[[T,T,aU,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T],[ms,T,T,T,T,T,T,T,T,T,T,QC,XC,Og,Fd,T,T,T,T,T,T],[ms,T,T,T,T,T,T,T,T,T,T,T,XC,Og,Fd,T,T,T,T,T,T],[ms,T,T,T,T,T,T,T,T,T,T,T,T,Og,Fd,T,T,T,T,T,T],[ms,T,T,T,T,T,T,T,T,T,T,T,T,T,Fd,T,T,T,T,T,T],[ms,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T],[ms,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,JC],[ms,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T],[ms,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T]];var sU=S.handleClientHello,oU=S.handleClientKeyExchange,lU=S.handleCertificateVerify;qd[S.ConnectionEnd.server]=[[T,sU,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T],[T,T,T,T,T,T,T,T,T,T,T,QC,T,T,T,T,T,T,T,T,T],[T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,oU,T,T,T,T],[T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,lU,T,T,T,T,T],[T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T],[T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,JC],[T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T],[T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T,T]];S.generateKeys=function(t,e){var r=Ud,n=e.client_random+e.server_random;t.session.resuming||(e.master_secret=r(e.pre_master_secret,"master secret",n,48).bytes(),e.pre_master_secret=null),n=e.server_random+e.client_random;var i=2*e.mac_key_length+2*e.enc_key_length,a=t.version.major===S.Versions.TLS_1_0.major&&t.version.minor===S.Versions.TLS_1_0.minor;a&&(i+=2*e.fixed_iv_length);var s=r(e.master_secret,"key expansion",n,i),l={client_write_MAC_key:s.getBytes(e.mac_key_length),server_write_MAC_key:s.getBytes(e.mac_key_length),client_write_key:s.getBytes(e.enc_key_length),server_write_key:s.getBytes(e.enc_key_length)};return a&&(l.client_write_IV=s.getBytes(e.fixed_iv_length),l.server_write_IV=s.getBytes(e.fixed_iv_length)),l};S.createConnectionState=function(t){var e=t.entity===S.ConnectionEnd.client,r=function(){var a={sequenceNumber:[0,0],macKey:null,macLength:0,macFunction:null,cipherState:null,cipherFunction:function(s){return!0},compressionState:null,compressFunction:function(s){return!0},updateSequenceNumber:function(){a.sequenceNumber[1]===4294967295?(a.sequenceNumber[1]=0,++a.sequenceNumber[0]):++a.sequenceNumber[1]}};return a},n={read:r(),write:r()};if(n.read.update=function(a,s){return n.read.cipherFunction(s,n.read)?n.read.compressFunction(a,s,n.read)||a.error(a,{message:"Could not decompress record.",send:!0,alert:{level:S.Alert.Level.fatal,description:S.Alert.Description.decompression_failure}}):a.error(a,{message:"Could not decrypt record or bad MAC.",send:!0,alert:{level:S.Alert.Level.fatal,description:S.Alert.Description.bad_record_mac}}),!a.fail},n.write.update=function(a,s){return n.write.compressFunction(a,s,n.write)?n.write.cipherFunction(s,n.write)||a.error(a,{message:"Could not encrypt record.",send:!1,alert:{level:S.Alert.Level.fatal,description:S.Alert.Description.internal_error}}):a.error(a,{message:"Could not compress record.",send:!1,alert:{level:S.Alert.Level.fatal,description:S.Alert.Description.internal_error}}),!a.fail},t.session){var i=t.session.sp;switch(t.session.cipherSuite.initSecurityParameters(i),i.keys=S.generateKeys(t,i),n.read.macKey=e?i.keys.server_write_MAC_key:i.keys.client_write_MAC_key,n.write.macKey=e?i.keys.client_write_MAC_key:i.keys.server_write_MAC_key,t.session.cipherSuite.initConnectionState(n,t,i),i.compression_algorithm){case S.CompressionMethod.none:break;case S.CompressionMethod.deflate:n.read.compressFunction=Y5,n.write.compressFunction=j5;break;default:throw new Error("Unsupported compression algorithm.")}}return n};S.createRandom=function(){var t=new Date,e=+t+t.getTimezoneOffset()*6e4,r=_e.util.createBuffer();return r.putInt32(e),r.putBytes(_e.random.getBytes(28)),r};S.createRecord=function(t,e){if(!e.data)return null;var r={type:e.type,version:{major:t.version.major,minor:t.version.minor},length:e.data.length(),fragment:e.data};return r};S.createAlert=function(t,e){var r=_e.util.createBuffer();return r.putByte(e.level),r.putByte(e.description),S.createRecord(t,{type:S.ContentType.alert,data:r})};S.createClientHello=function(t){t.session.clientHelloVersion={major:t.version.major,minor:t.version.minor};for(var e=_e.util.createBuffer(),r=0;r<t.cipherSuites.length;++r){var n=t.cipherSuites[r];e.putByte(n.id[0]),e.putByte(n.id[1])}var i=e.length(),a=_e.util.createBuffer();a.putByte(S.CompressionMethod.none);var s=a.length(),l=_e.util.createBuffer();if(t.virtualHost){var u=_e.util.createBuffer();u.putByte(0),u.putByte(0);var f=_e.util.createBuffer();f.putByte(0),fi(f,2,_e.util.createBuffer(t.virtualHost));var d=_e.util.createBuffer();fi(d,2,f),fi(u,2,d),l.putBuffer(u)}var h=l.length();h>0&&(h+=2);var g=t.session.id,y=g.length+1+2+4+28+2+i+1+s+h,m=_e.util.createBuffer();return m.putByte(S.HandshakeType.client_hello),m.putInt24(y),m.putByte(t.version.major),m.putByte(t.version.minor),m.putBytes(t.session.sp.client_random),fi(m,1,_e.util.createBuffer(g)),fi(m,2,e),fi(m,1,a),h>0&&fi(m,2,l),m};S.createServerHello=function(t){var e=t.session.id,r=e.length+1+2+4+28+2+1,n=_e.util.createBuffer();return n.putByte(S.HandshakeType.server_hello),n.putInt24(r),n.putByte(t.version.major),n.putByte(t.version.minor),n.putBytes(t.session.sp.server_random),fi(n,1,_e.util.createBuffer(e)),n.putByte(t.session.cipherSuite.id[0]),n.putByte(t.session.cipherSuite.id[1]),n.putByte(t.session.compressionMethod),n};S.createCertificate=function(t){var e=t.entity===S.ConnectionEnd.client,r=null;if(t.getCertificate){var n;e?n=t.session.certificateRequest:n=t.session.extensions.server_name.serverNameList,r=t.getCertificate(t,n)}var i=_e.util.createBuffer();if(r!==null)try{_e.util.isArray(r)||(r=[r]);for(var a=null,s=0;s<r.length;++s){var l=_e.pem.decode(r[s])[0];if(l.type!=="CERTIFICATE"&&l.type!=="X509 CERTIFICATE"&&l.type!=="TRUSTED CERTIFICATE"){var u=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw u.headerType=l.type,u}if(l.procType&&l.procType.type==="ENCRYPTED")throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var f=_e.util.createBuffer(l.body);a===null&&(a=_e.asn1.fromDer(f.bytes(),!1));var d=_e.util.createBuffer();fi(d,3,f),i.putBuffer(d)}r=_e.pki.certificateFromAsn1(a),e?t.session.clientCertificate=r:t.session.serverCertificate=r}catch(y){return t.error(t,{message:"Could not send certificate list.",cause:y,send:!0,alert:{level:S.Alert.Level.fatal,description:S.Alert.Description.bad_certificate}})}var h=3+i.length(),g=_e.util.createBuffer();return g.putByte(S.HandshakeType.certificate),g.putInt24(h),fi(g,3,i),g};S.createClientKeyExchange=function(t){var e=_e.util.createBuffer();e.putByte(t.session.clientHelloVersion.major),e.putByte(t.session.clientHelloVersion.minor),e.putBytes(_e.random.getBytes(46));var r=t.session.sp;r.pre_master_secret=e.getBytes();var n=t.session.serverCertificate.publicKey;e=n.encrypt(r.pre_master_secret);var i=e.length+2,a=_e.util.createBuffer();return a.putByte(S.HandshakeType.client_key_exchange),a.putInt24(i),a.putInt16(e.length),a.putBytes(e),a};S.createServerKeyExchange=function(t){var e=0,r=_e.util.createBuffer();return e>0&&(r.putByte(S.HandshakeType.server_key_exchange),r.putInt24(e)),r};S.getClientSignature=function(t,e){var r=_e.util.createBuffer();r.putBuffer(t.session.md5.digest()),r.putBuffer(t.session.sha1.digest()),r=r.getBytes(),t.getSignature=t.getSignature||function(n,i,a){var s=null;if(n.getPrivateKey)try{s=n.getPrivateKey(n,n.session.clientCertificate),s=_e.pki.privateKeyFromPem(s)}catch(l){n.error(n,{message:"Could not get private key.",cause:l,send:!0,alert:{level:S.Alert.Level.fatal,description:S.Alert.Description.internal_error}})}s===null?n.error(n,{message:"No private key set.",send:!0,alert:{level:S.Alert.Level.fatal,description:S.Alert.Description.internal_error}}):i=s.sign(i,null),a(n,i)},t.getSignature(t,r,e)};S.createCertificateVerify=function(t,e){var r=e.length+2,n=_e.util.createBuffer();return n.putByte(S.HandshakeType.certificate_verify),n.putInt24(r),n.putInt16(e.length),n.putBytes(e),n};S.createCertificateRequest=function(t){var e=_e.util.createBuffer();e.putByte(1);var r=_e.util.createBuffer();for(var n in t.caStore.certs){var i=t.caStore.certs[n],a=_e.pki.distinguishedNameToAsn1(i.subject),s=_e.asn1.toDer(a);r.putInt16(s.length()),r.putBuffer(s)}var l=1+e.length()+2+r.length(),u=_e.util.createBuffer();return u.putByte(S.HandshakeType.certificate_request),u.putInt24(l),fi(u,1,e),fi(u,2,r),u};S.createServerHelloDone=function(t){var e=_e.util.createBuffer();return e.putByte(S.HandshakeType.server_hello_done),e.putInt24(0),e};S.createChangeCipherSpec=function(){var t=_e.util.createBuffer();return t.putByte(1),t};S.createFinished=function(t){var e=_e.util.createBuffer();e.putBuffer(t.session.md5.digest()),e.putBuffer(t.session.sha1.digest());var r=t.entity===S.ConnectionEnd.client,n=t.session.sp,i=12,a=Ud,s=r?"client finished":"server finished";e=a(n.master_secret,s,e.getBytes(),i);var l=_e.util.createBuffer();return l.putByte(S.HandshakeType.finished),l.putInt24(e.length()),l.putBuffer(e),l};S.createHeartbeat=function(t,e,r){typeof r=="undefined"&&(r=e.length);var n=_e.util.createBuffer();n.putByte(t),n.putInt16(r),n.putBytes(e);var i=n.length(),a=Math.max(16,i-r-3);return n.putBytes(_e.random.getBytes(a)),n};S.queue=function(t,e){if(!!e&&!(e.fragment.length()===0&&(e.type===S.ContentType.handshake||e.type===S.ContentType.alert||e.type===S.ContentType.change_cipher_spec))){if(e.type===S.ContentType.handshake){var r=e.fragment.bytes();t.session.md5.update(r),t.session.sha1.update(r),r=null}var n;if(e.fragment.length()<=S.MaxFragment)n=[e];else{n=[];for(var i=e.fragment.bytes();i.length>S.MaxFragment;)n.push(S.createRecord(t,{type:e.type,data:_e.util.createBuffer(i.slice(0,S.MaxFragment))})),i=i.slice(S.MaxFragment);i.length>0&&n.push(S.createRecord(t,{type:e.type,data:_e.util.createBuffer(i)}))}for(var a=0;a<n.length&&!t.fail;++a){var s=n[a],l=t.state.current.write;l.update(t,s)&&t.records.push(s)}}};S.flush=function(t){for(var e=0;e<t.records.length;++e){var r=t.records[e];t.tlsData.putByte(r.type),t.tlsData.putByte(r.version.major),t.tlsData.putByte(r.version.minor),t.tlsData.putInt16(r.fragment.length()),t.tlsData.putBuffer(t.records[e].fragment)}return t.records=[],t.tlsDataReady(t)};var Lg=function(t){switch(t){case!0:return!0;case _e.pki.certificateError.bad_certificate:return S.Alert.Description.bad_certificate;case _e.pki.certificateError.unsupported_certificate:return S.Alert.Description.unsupported_certificate;case _e.pki.certificateError.certificate_revoked:return S.Alert.Description.certificate_revoked;case _e.pki.certificateError.certificate_expired:return S.Alert.Description.certificate_expired;case _e.pki.certificateError.certificate_unknown:return S.Alert.Description.certificate_unknown;case _e.pki.certificateError.unknown_ca:return S.Alert.Description.unknown_ca;default:return S.Alert.Description.bad_certificate}},uU=function(t){switch(t){case!0:return!0;case S.Alert.Description.bad_certificate:return _e.pki.certificateError.bad_certificate;case S.Alert.Description.unsupported_certificate:return _e.pki.certificateError.unsupported_certificate;case S.Alert.Description.certificate_revoked:return _e.pki.certificateError.certificate_revoked;case S.Alert.Description.certificate_expired:return _e.pki.certificateError.certificate_expired;case S.Alert.Description.certificate_unknown:return _e.pki.certificateError.certificate_unknown;case S.Alert.Description.unknown_ca:return _e.pki.certificateError.unknown_ca;default:return _e.pki.certificateError.bad_certificate}};S.verifyCertificateChain=function(t,e){try{var r={};for(var n in t.verifyOptions)r[n]=t.verifyOptions[n];r.verify=function(a,s,l){var u=Lg(a),f=t.verify(t,a,s,l);if(f!==!0){if(typeof f=="object"&&!_e.util.isArray(f)){var d=new Error("The application rejected the certificate.");throw d.send=!0,d.alert={level:S.Alert.Level.fatal,description:S.Alert.Description.bad_certificate},f.message&&(d.message=f.message),f.alert&&(d.alert.description=f.alert),d}f!==a&&(f=uU(f))}return f},_e.pki.verifyCertificateChain(t.caStore,e,r)}catch(a){var i=a;(typeof i!="object"||_e.util.isArray(i))&&(i={send:!0,alert:{level:S.Alert.Level.fatal,description:Lg(a)}}),"send"in i||(i.send=!0),"alert"in i||(i.alert={level:S.Alert.Level.fatal,description:Lg(i.error)}),t.error(t,i)}return!t.fail};S.createSessionCache=function(t,e){var r=null;if(t&&t.getSession&&t.setSession&&t.order)r=t;else{r={},r.cache=t||{},r.capacity=Math.max(e||100,1),r.order=[];for(var n in t)r.order.length<=e?r.order.push(n):delete t[n];r.getSession=function(i){var a=null,s=null;if(i?s=_e.util.bytesToHex(i):r.order.length>0&&(s=r.order[0]),s!==null&&s in r.cache){a=r.cache[s],delete r.cache[s];for(var l in r.order)if(r.order[l]===s){r.order.splice(l,1);break}}return a},r.setSession=function(i,a){if(r.order.length===r.capacity){var s=r.order.shift();delete r.cache[s]}var s=_e.util.bytesToHex(i);r.order.push(s),r.cache[s]=a}}return r};S.createConnection=function(t){var e=null;t.caStore?_e.util.isArray(t.caStore)?e=_e.pki.createCaStore(t.caStore):e=t.caStore:e=_e.pki.createCaStore();var r=t.cipherSuites||null;if(r===null){r=[];for(var n in S.CipherSuites)r.push(S.CipherSuites[n])}var i=t.server?S.ConnectionEnd.server:S.ConnectionEnd.client,a=t.sessionCache?S.createSessionCache(t.sessionCache):null,s={version:{major:S.Version.major,minor:S.Version.minor},entity:i,sessionId:t.sessionId,caStore:e,sessionCache:a,cipherSuites:r,connected:t.connected,virtualHost:t.virtualHost||null,verifyClient:t.verifyClient||!1,verify:t.verify||function(d,h,g,y){return h},verifyOptions:t.verifyOptions||{},getCertificate:t.getCertificate||null,getPrivateKey:t.getPrivateKey||null,getSignature:t.getSignature||null,input:_e.util.createBuffer(),tlsData:_e.util.createBuffer(),data:_e.util.createBuffer(),tlsDataReady:t.tlsDataReady,dataReady:t.dataReady,heartbeatReceived:t.heartbeatReceived,closed:t.closed,error:function(d,h){h.origin=h.origin||(d.entity===S.ConnectionEnd.client?"client":"server"),h.send&&(S.queue(d,S.createAlert(d,h.alert)),S.flush(d));var g=h.fatal!==!1;g&&(d.fail=!0),t.error(d,h),g&&d.close(!1)},deflate:t.deflate||null,inflate:t.inflate||null};s.reset=function(d){s.version={major:S.Version.major,minor:S.Version.minor},s.record=null,s.session=null,s.peerCertificate=null,s.state={pending:null,current:null},s.expect=s.entity===S.ConnectionEnd.client?W5:eU,s.fragmented=null,s.records=[],s.open=!1,s.handshakes=0,s.handshaking=!1,s.isConnected=!1,s.fail=!(d||typeof d=="undefined"),s.input.clear(),s.tlsData.clear(),s.data.clear(),s.state.current=S.createConnectionState(s)},s.reset();var l=function(d,h){var g=h.type-S.ContentType.change_cipher_spec,y=Bg[d.entity][d.expect];g in y?y[g](d,h):S.handleUnexpected(d,h)},u=function(d){var h=0,g=d.input,y=g.length();if(y<5)h=5-y;else{d.record={type:g.getByte(),version:{major:g.getByte(),minor:g.getByte()},length:g.getInt16(),fragment:_e.util.createBuffer(),ready:!1};var m=d.record.version.major===d.version.major;m&&d.session&&d.session.version&&(m=d.record.version.minor===d.version.minor),m||d.error(d,{message:"Incompatible TLS version.",send:!0,alert:{level:S.Alert.Level.fatal,description:S.Alert.Description.protocol_version}})}return h},f=function(d){var h=0,g=d.input,y=g.length();if(y<d.record.length)h=d.record.length-y;else{d.record.fragment.putBytes(g.getBytes(d.record.length)),g.compact();var m=d.state.current.read;m.update(d,d.record)&&(d.fragmented!==null&&(d.fragmented.type===d.record.type?(d.fragmented.fragment.putBuffer(d.record.fragment),d.record=d.fragmented):d.error(d,{message:"Invalid fragmented record.",send:!0,alert:{level:S.Alert.Level.fatal,description:S.Alert.Description.unexpected_message}})),d.record.ready=!0)}return h};return s.handshake=function(d){if(s.entity!==S.ConnectionEnd.client)s.error(s,{message:"Cannot initiate handshake as a server.",fatal:!1});else if(s.handshaking)s.error(s,{message:"Handshake already in progress.",fatal:!1});else{s.fail&&!s.open&&s.handshakes===0&&(s.fail=!1),s.handshaking=!0,d=d||"";var h=null;d.length>0&&(s.sessionCache&&(h=s.sessionCache.getSession(d)),h===null&&(d="")),d.length===0&&s.sessionCache&&(h=s.sessionCache.getSession(),h!==null&&(d=h.id)),s.session={id:d,version:null,cipherSuite:null,compressionMethod:null,serverCertificate:null,certificateRequest:null,clientCertificate:null,sp:{},md5:_e.md.md5.create(),sha1:_e.md.sha1.create()},h&&(s.version=h.version,s.session.sp=h.sp),s.session.sp.client_random=S.createRandom().getBytes(),s.open=!0,S.queue(s,S.createRecord(s,{type:S.ContentType.handshake,data:S.createClientHello(s)})),S.flush(s)}},s.process=function(d){var h=0;return d&&s.input.putBytes(d),s.fail||(s.record!==null&&s.record.ready&&s.record.fragment.isEmpty()&&(s.record=null),s.record===null&&(h=u(s)),!s.fail&&s.record!==null&&!s.record.ready&&(h=f(s)),!s.fail&&s.record!==null&&s.record.ready&&l(s,s.record)),h},s.prepare=function(d){return S.queue(s,S.createRecord(s,{type:S.ContentType.application_data,data:_e.util.createBuffer(d)})),S.flush(s)},s.prepareHeartbeatRequest=function(d,h){return d instanceof _e.util.ByteBuffer&&(d=d.bytes()),typeof h=="undefined"&&(h=d.length),s.expectedHeartbeatPayload=d,S.queue(s,S.createRecord(s,{type:S.ContentType.heartbeat,data:S.createHeartbeat(S.HeartbeatMessageType.heartbeat_request,d,h)})),S.flush(s)},s.close=function(d){if(!s.fail&&s.sessionCache&&s.session){var h={id:s.session.id,version:s.session.version,sp:s.session.sp};h.sp.keys=null,s.sessionCache.setSession(h.id,h)}s.open&&(s.open=!1,s.input.clear(),(s.isConnected||s.handshaking)&&(s.isConnected=s.handshaking=!1,S.queue(s,S.createAlert(s,{level:S.Alert.Level.warning,description:S.Alert.Description.close_notify})),S.flush(s)),s.closed(s)),s.reset(d)},s};ZC.exports=_e.tls=_e.tls||{};for(Gd in S)typeof S[Gd]!="function"&&(_e.tls[Gd]=S[Gd]);var Gd;_e.tls.prf_tls1=Ud;_e.tls.hmac_sha1=K5;_e.tls.createSessionCache=S.createSessionCache;_e.tls.createConnection=S.createConnection});var tb=de((G7,eb)=>{var ys=vt();cs();Pg();var di=eb.exports=ys.tls;di.CipherSuites.TLS_RSA_WITH_AES_128_CBC_SHA={id:[0,47],name:"TLS_RSA_WITH_AES_128_CBC_SHA",initSecurityParameters:function(t){t.bulk_cipher_algorithm=di.BulkCipherAlgorithm.aes,t.cipher_type=di.CipherType.block,t.enc_key_length=16,t.block_length=16,t.fixed_iv_length=16,t.record_iv_length=16,t.mac_algorithm=di.MACAlgorithm.hmac_sha1,t.mac_length=20,t.mac_key_length=20},initConnectionState:$C};di.CipherSuites.TLS_RSA_WITH_AES_256_CBC_SHA={id:[0,53],name:"TLS_RSA_WITH_AES_256_CBC_SHA",initSecurityParameters:function(t){t.bulk_cipher_algorithm=di.BulkCipherAlgorithm.aes,t.cipher_type=di.CipherType.block,t.enc_key_length=32,t.block_length=16,t.fixed_iv_length=16,t.record_iv_length=16,t.mac_algorithm=di.MACAlgorithm.hmac_sha1,t.mac_length=20,t.mac_key_length=20},initConnectionState:$C};function $C(t,e,r){var n=e.entity===ys.tls.ConnectionEnd.client;t.read.cipherState={init:!1,cipher:ys.cipher.createDecipher("AES-CBC",n?r.keys.server_write_key:r.keys.client_write_key),iv:n?r.keys.server_write_IV:r.keys.client_write_IV},t.write.cipherState={init:!1,cipher:ys.cipher.createCipher("AES-CBC",n?r.keys.client_write_key:r.keys.server_write_key),iv:n?r.keys.client_write_IV:r.keys.server_write_IV},t.read.cipherFunction=hU,t.write.cipherFunction=cU,t.read.macLength=t.write.macLength=r.mac_length,t.read.macFunction=t.write.macFunction=di.hmac_sha1}function cU(t,e){var r=!1,n=e.macFunction(e.macKey,e.sequenceNumber,t);t.fragment.putBytes(n),e.updateSequenceNumber();var i;t.version.minor===di.Versions.TLS_1_0.minor?i=e.cipherState.init?null:e.cipherState.iv:i=ys.random.getBytesSync(16),e.cipherState.init=!0;var a=e.cipherState.cipher;return a.start({iv:i}),t.version.minor>=di.Versions.TLS_1_1.minor&&a.output.putBytes(i),a.update(t.fragment),a.finish(fU)&&(t.fragment=a.output,t.length=t.fragment.length(),r=!0),r}function fU(t,e,r){if(!r){var n=t-e.length()%t;e.fillWithByte(n-1,n)}return!0}function dU(t,e,r){var n=!0;if(r){for(var i=e.length(),a=e.last(),s=i-1-a;s<i-1;++s)n=n&&e.at(s)==a;n&&e.truncate(a+1)}return n}function hU(t,e){var r=!1,n;t.version.minor===di.Versions.TLS_1_0.minor?n=e.cipherState.init?null:e.cipherState.iv:n=t.fragment.getBytes(16),e.cipherState.init=!0;var i=e.cipherState.cipher;i.start({iv:n}),i.update(t.fragment),r=i.finish(dU);var a=e.macLength,s=ys.random.getBytesSync(a),l=i.output.length();l>=a?(t.fragment=i.output.getBytes(l-a),s=i.output.getBytes(a)):t.fragment=i.output.getBytes(),t.fragment=ys.util.createBuffer(t.fragment),t.length=t.fragment.length();var u=e.macFunction(e.macKey,e.sequenceNumber,t);return e.updateSequenceNumber(),r=pU(e.macKey,s,u)&&r,r}function pU(t,e,r){var n=ys.hmac.create();return n.start("SHA1",t),n.update(e),e=n.digest().getBytes(),n.start(null,null),n.update(r),r=n.digest().getBytes(),e===r}});var Fg=de((V7,ab)=>{var ur=vt();Qi();qt();var Gu=ab.exports=ur.sha512=ur.sha512||{};ur.md.sha512=ur.md.algorithms.sha512=Gu;var rb=ur.sha384=ur.sha512.sha384=ur.sha512.sha384||{};rb.create=function(){return Gu.create("SHA-384")};ur.md.sha384=ur.md.algorithms.sha384=rb;ur.sha512.sha256=ur.sha512.sha256||{create:function(){return Gu.create("SHA-512/256")}};ur.md["sha512/256"]=ur.md.algorithms["sha512/256"]=ur.sha512.sha256;ur.sha512.sha224=ur.sha512.sha224||{create:function(){return Gu.create("SHA-512/224")}};ur.md["sha512/224"]=ur.md.algorithms["sha512/224"]=ur.sha512.sha224;Gu.create=function(t){if(nb||gU(),typeof t=="undefined"&&(t="SHA-512"),!(t in eo))throw new Error("Invalid SHA-512 algorithm: "+t);for(var e=eo[t],r=null,n=ur.util.createBuffer(),i=new Array(80),a=0;a<80;++a)i[a]=new Array(2);var s=64;switch(t){case"SHA-384":s=48;break;case"SHA-512/256":s=32;break;case"SHA-512/224":s=28;break}var l={algorithm:t.replace("-","").toLowerCase(),blockLength:128,digestLength:s,messageLength:0,fullMessageLength:null,messageLengthSize:16};return l.start=function(){l.messageLength=0,l.fullMessageLength=l.messageLength128=[];for(var u=l.messageLengthSize/4,f=0;f<u;++f)l.fullMessageLength.push(0);n=ur.util.createBuffer(),r=new Array(e.length);for(var f=0;f<e.length;++f)r[f]=e[f].slice(0);return l},l.start(),l.update=function(u,f){f==="utf8"&&(u=ur.util.encodeUtf8(u));var d=u.length;l.messageLength+=d,d=[d/4294967296>>>0,d>>>0];for(var h=l.fullMessageLength.length-1;h>=0;--h)l.fullMessageLength[h]+=d[1],d[1]=d[0]+(l.fullMessageLength[h]/4294967296>>>0),l.fullMessageLength[h]=l.fullMessageLength[h]>>>0,d[0]=d[1]/4294967296>>>0;return n.putBytes(u),ib(r,i,n),(n.read>2048||n.length()===0)&&n.compact(),l},l.digest=function(){var u=ur.util.createBuffer();u.putBytes(n.bytes());var f=l.fullMessageLength[l.fullMessageLength.length-1]+l.messageLengthSize,d=f&l.blockLength-1;u.putBytes(Mg.substr(0,l.blockLength-d));for(var h,g,y=l.fullMessageLength[0]*8,m=0;m<l.fullMessageLength.length-1;++m)h=l.fullMessageLength[m+1]*8,g=h/4294967296>>>0,y+=g,u.putInt32(y>>>0),y=h>>>0;u.putInt32(y);for(var w=new Array(r.length),m=0;m<r.length;++m)w[m]=r[m].slice(0);ib(w,i,u);var _=ur.util.createBuffer(),E;t==="SHA-512"?E=w.length:t==="SHA-384"?E=w.length-2:E=w.length-4;for(var m=0;m<E;++m)_.putInt32(w[m][0]),(m!==E-1||t!=="SHA-512/224")&&_.putInt32(w[m][1]);return _},l};var Mg=null,nb=!1,Ug=null,eo=null;function gU(){Mg=String.fromCharCode(128),Mg+=ur.util.fillString(String.fromCharCode(0),128),Ug=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],eo={},eo["SHA-512"]=[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],eo["SHA-384"]=[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],eo["SHA-512/256"]=[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],eo["SHA-512/224"]=[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]],nb=!0}function ib(t,e,r){for(var n,i,a,s,l,u,f,d,h,g,y,m,w,_,E,b,k,O,R,B,ne,M,G,re,se,ye,Ae,Je,De,me,te,Fe,et,ct,$e,ft=r.length();ft>=128;){for(De=0;De<16;++De)e[De][0]=r.getInt32()>>>0,e[De][1]=r.getInt32()>>>0;for(;De<80;++De)Fe=e[De-2],me=Fe[0],te=Fe[1],n=((me>>>19|te<<13)^(te>>>29|me<<3)^me>>>6)>>>0,i=((me<<13|te>>>19)^(te<<3|me>>>29)^(me<<26|te>>>6))>>>0,ct=e[De-15],me=ct[0],te=ct[1],a=((me>>>1|te<<31)^(me>>>8|te<<24)^me>>>7)>>>0,s=((me<<31|te>>>1)^(me<<24|te>>>8)^(me<<25|te>>>7))>>>0,et=e[De-7],$e=e[De-16],te=i+et[1]+s+$e[1],e[De][0]=n+et[0]+a+$e[0]+(te/4294967296>>>0)>>>0,e[De][1]=te>>>0;for(w=t[0][0],_=t[0][1],E=t[1][0],b=t[1][1],k=t[2][0],O=t[2][1],R=t[3][0],B=t[3][1],ne=t[4][0],M=t[4][1],G=t[5][0],re=t[5][1],se=t[6][0],ye=t[6][1],Ae=t[7][0],Je=t[7][1],De=0;De<80;++De)f=((ne>>>14|M<<18)^(ne>>>18|M<<14)^(M>>>9|ne<<23))>>>0,d=((ne<<18|M>>>14)^(ne<<14|M>>>18)^(M<<23|ne>>>9))>>>0,h=(se^ne&(G^se))>>>0,g=(ye^M&(re^ye))>>>0,l=((w>>>28|_<<4)^(_>>>2|w<<30)^(_>>>7|w<<25))>>>0,u=((w<<4|_>>>28)^(_<<30|w>>>2)^(_<<25|w>>>7))>>>0,y=(w&E|k&(w^E))>>>0,m=(_&b|O&(_^b))>>>0,te=Je+d+g+Ug[De][1]+e[De][1],n=Ae+f+h+Ug[De][0]+e[De][0]+(te/4294967296>>>0)>>>0,i=te>>>0,te=u+m,a=l+y+(te/4294967296>>>0)>>>0,s=te>>>0,Ae=se,Je=ye,se=G,ye=re,G=ne,re=M,te=B+i,ne=R+n+(te/4294967296>>>0)>>>0,M=te>>>0,R=k,B=O,k=E,O=b,E=w,b=_,te=i+s,w=n+a+(te/4294967296>>>0)>>>0,_=te>>>0;te=t[0][1]+_,t[0][0]=t[0][0]+w+(te/4294967296>>>0)>>>0,t[0][1]=te>>>0,te=t[1][1]+b,t[1][0]=t[1][0]+E+(te/4294967296>>>0)>>>0,t[1][1]=te>>>0,te=t[2][1]+O,t[2][0]=t[2][0]+k+(te/4294967296>>>0)>>>0,t[2][1]=te>>>0,te=t[3][1]+B,t[3][0]=t[3][0]+R+(te/4294967296>>>0)>>>0,t[3][1]=te>>>0,te=t[4][1]+M,t[4][0]=t[4][0]+ne+(te/4294967296>>>0)>>>0,t[4][1]=te>>>0,te=t[5][1]+re,t[5][0]=t[5][0]+G+(te/4294967296>>>0)>>>0,t[5][1]=te>>>0,te=t[6][1]+ye,t[6][0]=t[6][0]+se+(te/4294967296>>>0)>>>0,t[6][1]=te>>>0,te=t[7][1]+Je,t[7][0]=t[7][0]+Ae+(te/4294967296>>>0)>>>0,t[7][1]=te>>>0,ft-=128}}});var sb=de(qg=>{var mU=vt();Si();var Kr=mU.asn1;qg.privateKeyValidator={name:"PrivateKeyInfo",tagClass:Kr.Class.UNIVERSAL,type:Kr.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:Kr.Class.UNIVERSAL,type:Kr.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:Kr.Class.UNIVERSAL,type:Kr.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:Kr.Class.UNIVERSAL,type:Kr.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:Kr.Class.UNIVERSAL,type:Kr.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]};qg.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:Kr.Class.UNIVERSAL,type:Kr.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:Kr.Class.UNIVERSAL,type:Kr.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:Kr.Class.UNIVERSAL,type:Kr.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{tagClass:Kr.Class.UNIVERSAL,type:Kr.Type.BITSTRING,constructed:!1,composed:!0,captureBitStringValue:"ed25519PublicKey"}]}});var _b=de((K7,vb)=>{var tn=vt();Mu();oi();Fg();qt();var ob=sb(),yU=ob.publicKeyValidator,vU=ob.privateKeyValidator;typeof lb=="undefined"&&(lb=tn.jsbn.BigInteger);var lb,Gg=tn.util.ByteBuffer,On=typeof Buffer=="undefined"?Uint8Array:Buffer;tn.pki=tn.pki||{};vb.exports=tn.pki.ed25519=tn.ed25519=tn.ed25519||{};var St=tn.ed25519;St.constants={};St.constants.PUBLIC_KEY_BYTE_LENGTH=32;St.constants.PRIVATE_KEY_BYTE_LENGTH=64;St.constants.SEED_BYTE_LENGTH=32;St.constants.SIGN_BYTE_LENGTH=64;St.constants.HASH_BYTE_LENGTH=64;St.generateKeyPair=function(t){t=t||{};var e=t.seed;if(e===void 0)e=tn.random.getBytesSync(St.constants.SEED_BYTE_LENGTH);else if(typeof e=="string"){if(e.length!==St.constants.SEED_BYTE_LENGTH)throw new TypeError('"seed" must be '+St.constants.SEED_BYTE_LENGTH+" bytes in length.")}else if(!(e instanceof Uint8Array))throw new TypeError('"seed" must be a node.js Buffer, Uint8Array, or a binary string.');e=Na({message:e,encoding:"binary"});for(var r=new On(St.constants.PUBLIC_KEY_BYTE_LENGTH),n=new On(St.constants.PRIVATE_KEY_BYTE_LENGTH),i=0;i<32;++i)n[i]=e[i];return CU(r,n),{publicKey:r,privateKey:n}};St.privateKeyFromAsn1=function(t){var e={},r=[],n=tn.asn1.validate(t,vU,e,r);if(!n){var i=new Error("Invalid Key.");throw i.errors=r,i}var a=tn.asn1.derToOid(e.privateKeyOid),s=tn.oids.EdDSA25519;if(a!==s)throw new Error('Invalid OID "'+a+'"; OID must be "'+s+'".');var l=e.privateKey,u=Na({message:tn.asn1.fromDer(l).value,encoding:"binary"});return{privateKeyBytes:u}};St.publicKeyFromAsn1=function(t){var e={},r=[],n=tn.asn1.validate(t,yU,e,r);if(!n){var i=new Error("Invalid Key.");throw i.errors=r,i}var a=tn.asn1.derToOid(e.publicKeyOid),s=tn.oids.EdDSA25519;if(a!==s)throw new Error('Invalid OID "'+a+'"; OID must be "'+s+'".');var l=e.ed25519PublicKey;if(l.length!==St.constants.PUBLIC_KEY_BYTE_LENGTH)throw new Error("Key length is invalid.");return Na({message:l,encoding:"binary"})};St.publicKeyFromPrivateKey=function(t){t=t||{};var e=Na({message:t.privateKey,encoding:"binary"});if(e.length!==St.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+St.constants.PRIVATE_KEY_BYTE_LENGTH);for(var r=new On(St.constants.PUBLIC_KEY_BYTE_LENGTH),n=0;n<r.length;++n)r[n]=e[32+n];return r};St.sign=function(t){t=t||{};var e=Na(t),r=Na({message:t.privateKey,encoding:"binary"});if(r.length===St.constants.SEED_BYTE_LENGTH){var n=St.generateKeyPair({seed:r});r=n.privateKey}else if(r.length!==St.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+St.constants.SEED_BYTE_LENGTH+" or "+St.constants.PRIVATE_KEY_BYTE_LENGTH);var i=new On(St.constants.SIGN_BYTE_LENGTH+e.length);bU(i,e,e.length,r);for(var a=new On(St.constants.SIGN_BYTE_LENGTH),s=0;s<a.length;++s)a[s]=i[s];return a};St.verify=function(t){t=t||{};var e=Na(t);if(t.signature===void 0)throw new TypeError('"options.signature" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a binary string.');var r=Na({message:t.signature,encoding:"binary"});if(r.length!==St.constants.SIGN_BYTE_LENGTH)throw new TypeError('"options.signature" must have a byte length of '+St.constants.SIGN_BYTE_LENGTH);var n=Na({message:t.publicKey,encoding:"binary"});if(n.length!==St.constants.PUBLIC_KEY_BYTE_LENGTH)throw new TypeError('"options.publicKey" must have a byte length of '+St.constants.PUBLIC_KEY_BYTE_LENGTH);var i=new On(St.constants.SIGN_BYTE_LENGTH+e.length),a=new On(St.constants.SIGN_BYTE_LENGTH+e.length),s;for(s=0;s<St.constants.SIGN_BYTE_LENGTH;++s)i[s]=r[s];for(s=0;s<e.length;++s)i[s+St.constants.SIGN_BYTE_LENGTH]=e[s];return xU(a,i,i.length,n)>=0};function Na(t){var e=t.message;if(e instanceof Uint8Array||e instanceof On)return e;var r=t.encoding;if(e===void 0)if(t.md)e=t.md.digest().getBytes(),r="binary";else throw new TypeError('"options.message" or "options.md" not specified.');if(typeof e=="string"&&!r)throw new TypeError('"options.encoding" must be "binary" or "utf8".');if(typeof e=="string"){if(typeof Buffer!="undefined")return Buffer.from(e,r);e=new Gg(e,r)}else if(!(e instanceof Gg))throw new TypeError('"options.message" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a string with "options.encoding" specifying its encoding.');for(var n=new On(e.length()),i=0;i<n.length;++i)n[i]=e.at(i);return n}var Vg=Qe(),Vd=Qe([1]),_U=Qe([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),wU=Qe([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),ub=Qe([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),cb=Qe([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),Hg=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]),EU=Qe([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function Vu(t,e){var r=tn.md.sha512.create(),n=new Gg(t);r.update(n.getBytes(e),"binary");var i=r.digest().getBytes();if(typeof Buffer!="undefined")return Buffer.from(i,"binary");for(var a=new On(St.constants.HASH_BYTE_LENGTH),s=0;s<64;++s)a[s]=i.charCodeAt(s);return a}function CU(t,e){var r=[Qe(),Qe(),Qe(),Qe()],n,i=Vu(e,32);for(i[0]&=248,i[31]&=127,i[31]|=64,Wg(r,i),Yg(t,r),n=0;n<32;++n)e[n+32]=t[n];return 0}function bU(t,e,r,n){var i,a,s=new Float64Array(64),l=[Qe(),Qe(),Qe(),Qe()],u=Vu(n,32);u[0]&=248,u[31]&=127,u[31]|=64;var f=r+64;for(i=0;i<r;++i)t[64+i]=e[i];for(i=0;i<32;++i)t[32+i]=u[32+i];var d=Vu(t.subarray(32),r+32);for(Kg(d),Wg(l,d),Yg(t,l),i=32;i<64;++i)t[i]=n[i];var h=Vu(t,r+64);for(Kg(h),i=32;i<64;++i)s[i]=0;for(i=0;i<32;++i)s[i]=d[i];for(i=0;i<32;++i)for(a=0;a<32;a++)s[i+a]+=h[i]*u[a];return fb(t.subarray(32),s),f}function xU(t,e,r,n){var i,a,s=new On(32),l=[Qe(),Qe(),Qe(),Qe()],u=[Qe(),Qe(),Qe(),Qe()];if(a=-1,r<64||TU(u,n))return-1;for(i=0;i<r;++i)t[i]=e[i];for(i=0;i<32;++i)t[i+32]=n[i];var f=Vu(t,r);if(Kg(f),mb(l,u,f),Wg(u,e.subarray(32)),jg(l,u),Yg(s,l),r-=64,pb(e,0,s,0)){for(i=0;i<r;++i)t[i]=0;return-1}for(i=0;i<r;++i)t[i]=e[i+64];return a=r,a}function fb(t,e){var r,n,i,a;for(n=63;n>=32;--n){for(r=0,i=n-32,a=n-12;i<a;++i)e[i]+=r-16*e[n]*Hg[i-(n-32)],r=e[i]+128>>8,e[i]-=r*256;e[i]+=r,e[n]=0}for(r=0,i=0;i<32;++i)e[i]+=r-(e[31]>>4)*Hg[i],r=e[i]>>8,e[i]&=255;for(i=0;i<32;++i)e[i]-=r*Hg[i];for(n=0;n<32;++n)e[n+1]+=e[n]>>8,t[n]=e[n]&255}function Kg(t){for(var e=new Float64Array(64),r=0;r<64;++r)e[r]=t[r],t[r]=0;fb(t,e)}function jg(t,e){var r=Qe(),n=Qe(),i=Qe(),a=Qe(),s=Qe(),l=Qe(),u=Qe(),f=Qe(),d=Qe();_l(r,t[1],t[0]),_l(d,e[1],e[0]),$t(r,r,d),vl(n,t[0],t[1]),vl(d,e[0],e[1]),$t(n,n,d),$t(i,t[3],e[3]),$t(i,i,wU),$t(a,t[2],e[2]),vl(a,a,a),_l(s,n,r),_l(l,a,i),vl(u,a,i),vl(f,n,r),$t(t[0],s,l),$t(t[1],f,u),$t(t[2],u,l),$t(t[3],s,f)}function db(t,e,r){for(var n=0;n<4;++n)yb(t[n],e[n],r)}function Yg(t,e){var r=Qe(),n=Qe(),i=Qe();IU(i,e[2]),$t(r,e[0],i),$t(n,e[1],i),Hd(t,n),t[31]^=gb(r)<<7}function Hd(t,e){var r,n,i,a=Qe(),s=Qe();for(r=0;r<16;++r)s[r]=e[r];for(zg(s),zg(s),zg(s),n=0;n<2;++n){for(a[0]=s[0]-65517,r=1;r<15;++r)a[r]=s[r]-65535-(a[r-1]>>16&1),a[r-1]&=65535;a[15]=s[15]-32767-(a[14]>>16&1),i=a[15]>>16&1,a[14]&=65535,yb(s,a,1-i)}for(r=0;r<16;r++)t[2*r]=s[r]&255,t[2*r+1]=s[r]>>8}function TU(t,e){var r=Qe(),n=Qe(),i=Qe(),a=Qe(),s=Qe(),l=Qe(),u=Qe();return vs(t[2],Vd),SU(t[1],e),to(i,t[1]),$t(a,i,_U),_l(i,i,t[2]),vl(a,t[2],a),to(s,a),to(l,s),$t(u,l,s),$t(r,u,i),$t(r,r,a),AU(r,r),$t(r,r,i),$t(r,r,a),$t(r,r,a),$t(t[0],r,a),to(n,t[0]),$t(n,n,a),hb(n,i)&&$t(t[0],t[0],EU),to(n,t[0]),$t(n,n,a),hb(n,i)?-1:(gb(t[0])===e[31]>>7&&_l(t[0],Vg,t[0]),$t(t[3],t[0],t[1]),0)}function SU(t,e){var r;for(r=0;r<16;++r)t[r]=e[2*r]+(e[2*r+1]<<8);t[15]&=32767}function AU(t,e){var r=Qe(),n;for(n=0;n<16;++n)r[n]=e[n];for(n=250;n>=0;--n)to(r,r),n!==1&&$t(r,r,e);for(n=0;n<16;++n)t[n]=r[n]}function hb(t,e){var r=new On(32),n=new On(32);return Hd(r,t),Hd(n,e),pb(r,0,n,0)}function pb(t,e,r,n){return kU(t,e,r,n,32)}function kU(t,e,r,n,i){var a,s=0;for(a=0;a<i;++a)s|=t[e+a]^r[n+a];return(1&s-1>>>8)-1}function gb(t){var e=new On(32);return Hd(e,t),e[0]&1}function mb(t,e,r){var n,i;for(vs(t[0],Vg),vs(t[1],Vd),vs(t[2],Vd),vs(t[3],Vg),i=255;i>=0;--i)n=r[i/8|0]>>(i&7)&1,db(t,e,n),jg(e,t),jg(t,t),db(t,e,n)}function Wg(t,e){var r=[Qe(),Qe(),Qe(),Qe()];vs(r[0],ub),vs(r[1],cb),vs(r[2],Vd),$t(r[3],ub,cb),mb(t,r,e)}function vs(t,e){var r;for(r=0;r<16;r++)t[r]=e[r]|0}function IU(t,e){var r=Qe(),n;for(n=0;n<16;++n)r[n]=e[n];for(n=253;n>=0;--n)to(r,r),n!==2&&n!==4&&$t(r,r,e);for(n=0;n<16;++n)t[n]=r[n]}function zg(t){var e,r,n=1;for(e=0;e<16;++e)r=t[e]+n+65535,n=Math.floor(r/65536),t[e]=r-n*65536;t[0]+=n-1+37*(n-1)}function yb(t,e,r){for(var n,i=~(r-1),a=0;a<16;++a)n=i&(t[a]^e[a]),t[a]^=n,e[a]^=n}function Qe(t){var e,r=new Float64Array(16);if(t)for(e=0;e<t.length;++e)r[e]=t[e];return r}function vl(t,e,r){for(var n=0;n<16;++n)t[n]=e[n]+r[n]}function _l(t,e,r){for(var n=0;n<16;++n)t[n]=e[n]-r[n]}function to(t,e){$t(t,e,e)}function $t(t,e,r){var n,i,a=0,s=0,l=0,u=0,f=0,d=0,h=0,g=0,y=0,m=0,w=0,_=0,E=0,b=0,k=0,O=0,R=0,B=0,ne=0,M=0,G=0,re=0,se=0,ye=0,Ae=0,Je=0,De=0,me=0,te=0,Fe=0,et=0,ct=r[0],$e=r[1],ft=r[2],ue=r[3],Dt=r[4],Bt=r[5],rt=r[6],nt=r[7],dt=r[8],I=r[9],D=r[10],L=r[11],j=r[12],H=r[13],Q=r[14],J=r[15];n=e[0],a+=n*ct,s+=n*$e,l+=n*ft,u+=n*ue,f+=n*Dt,d+=n*Bt,h+=n*rt,g+=n*nt,y+=n*dt,m+=n*I,w+=n*D,_+=n*L,E+=n*j,b+=n*H,k+=n*Q,O+=n*J,n=e[1],s+=n*ct,l+=n*$e,u+=n*ft,f+=n*ue,d+=n*Dt,h+=n*Bt,g+=n*rt,y+=n*nt,m+=n*dt,w+=n*I,_+=n*D,E+=n*L,b+=n*j,k+=n*H,O+=n*Q,R+=n*J,n=e[2],l+=n*ct,u+=n*$e,f+=n*ft,d+=n*ue,h+=n*Dt,g+=n*Bt,y+=n*rt,m+=n*nt,w+=n*dt,_+=n*I,E+=n*D,b+=n*L,k+=n*j,O+=n*H,R+=n*Q,B+=n*J,n=e[3],u+=n*ct,f+=n*$e,d+=n*ft,h+=n*ue,g+=n*Dt,y+=n*Bt,m+=n*rt,w+=n*nt,_+=n*dt,E+=n*I,b+=n*D,k+=n*L,O+=n*j,R+=n*H,B+=n*Q,ne+=n*J,n=e[4],f+=n*ct,d+=n*$e,h+=n*ft,g+=n*ue,y+=n*Dt,m+=n*Bt,w+=n*rt,_+=n*nt,E+=n*dt,b+=n*I,k+=n*D,O+=n*L,R+=n*j,B+=n*H,ne+=n*Q,M+=n*J,n=e[5],d+=n*ct,h+=n*$e,g+=n*ft,y+=n*ue,m+=n*Dt,w+=n*Bt,_+=n*rt,E+=n*nt,b+=n*dt,k+=n*I,O+=n*D,R+=n*L,B+=n*j,ne+=n*H,M+=n*Q,G+=n*J,n=e[6],h+=n*ct,g+=n*$e,y+=n*ft,m+=n*ue,w+=n*Dt,_+=n*Bt,E+=n*rt,b+=n*nt,k+=n*dt,O+=n*I,R+=n*D,B+=n*L,ne+=n*j,M+=n*H,G+=n*Q,re+=n*J,n=e[7],g+=n*ct,y+=n*$e,m+=n*ft,w+=n*ue,_+=n*Dt,E+=n*Bt,b+=n*rt,k+=n*nt,O+=n*dt,R+=n*I,B+=n*D,ne+=n*L,M+=n*j,G+=n*H,re+=n*Q,se+=n*J,n=e[8],y+=n*ct,m+=n*$e,w+=n*ft,_+=n*ue,E+=n*Dt,b+=n*Bt,k+=n*rt,O+=n*nt,R+=n*dt,B+=n*I,ne+=n*D,M+=n*L,G+=n*j,re+=n*H,se+=n*Q,ye+=n*J,n=e[9],m+=n*ct,w+=n*$e,_+=n*ft,E+=n*ue,b+=n*Dt,k+=n*Bt,O+=n*rt,R+=n*nt,B+=n*dt,ne+=n*I,M+=n*D,G+=n*L,re+=n*j,se+=n*H,ye+=n*Q,Ae+=n*J,n=e[10],w+=n*ct,_+=n*$e,E+=n*ft,b+=n*ue,k+=n*Dt,O+=n*Bt,R+=n*rt,B+=n*nt,ne+=n*dt,M+=n*I,G+=n*D,re+=n*L,se+=n*j,ye+=n*H,Ae+=n*Q,Je+=n*J,n=e[11],_+=n*ct,E+=n*$e,b+=n*ft,k+=n*ue,O+=n*Dt,R+=n*Bt,B+=n*rt,ne+=n*nt,M+=n*dt,G+=n*I,re+=n*D,se+=n*L,ye+=n*j,Ae+=n*H,Je+=n*Q,De+=n*J,n=e[12],E+=n*ct,b+=n*$e,k+=n*ft,O+=n*ue,R+=n*Dt,B+=n*Bt,ne+=n*rt,M+=n*nt,G+=n*dt,re+=n*I,se+=n*D,ye+=n*L,Ae+=n*j,Je+=n*H,De+=n*Q,me+=n*J,n=e[13],b+=n*ct,k+=n*$e,O+=n*ft,R+=n*ue,B+=n*Dt,ne+=n*Bt,M+=n*rt,G+=n*nt,re+=n*dt,se+=n*I,ye+=n*D,Ae+=n*L,Je+=n*j,De+=n*H,me+=n*Q,te+=n*J,n=e[14],k+=n*ct,O+=n*$e,R+=n*ft,B+=n*ue,ne+=n*Dt,M+=n*Bt,G+=n*rt,re+=n*nt,se+=n*dt,ye+=n*I,Ae+=n*D,Je+=n*L,De+=n*j,me+=n*H,te+=n*Q,Fe+=n*J,n=e[15],O+=n*ct,R+=n*$e,B+=n*ft,ne+=n*ue,M+=n*Dt,G+=n*Bt,re+=n*rt,se+=n*nt,ye+=n*dt,Ae+=n*I,Je+=n*D,De+=n*L,me+=n*j,te+=n*H,Fe+=n*Q,et+=n*J,a+=38*R,s+=38*B,l+=38*ne,u+=38*M,f+=38*G,d+=38*re,h+=38*se,g+=38*ye,y+=38*Ae,m+=38*Je,w+=38*De,_+=38*me,E+=38*te,b+=38*Fe,k+=38*et,i=1,n=a+i+65535,i=Math.floor(n/65536),a=n-i*65536,n=s+i+65535,i=Math.floor(n/65536),s=n-i*65536,n=l+i+65535,i=Math.floor(n/65536),l=n-i*65536,n=u+i+65535,i=Math.floor(n/65536),u=n-i*65536,n=f+i+65535,i=Math.floor(n/65536),f=n-i*65536,n=d+i+65535,i=Math.floor(n/65536),d=n-i*65536,n=h+i+65535,i=Math.floor(n/65536),h=n-i*65536,n=g+i+65535,i=Math.floor(n/65536),g=n-i*65536,n=y+i+65535,i=Math.floor(n/65536),y=n-i*65536,n=m+i+65535,i=Math.floor(n/65536),m=n-i*65536,n=w+i+65535,i=Math.floor(n/65536),w=n-i*65536,n=_+i+65535,i=Math.floor(n/65536),_=n-i*65536,n=E+i+65535,i=Math.floor(n/65536),E=n-i*65536,n=b+i+65535,i=Math.floor(n/65536),b=n-i*65536,n=k+i+65535,i=Math.floor(n/65536),k=n-i*65536,n=O+i+65535,i=Math.floor(n/65536),O=n-i*65536,a+=i-1+37*(i-1),i=1,n=a+i+65535,i=Math.floor(n/65536),a=n-i*65536,n=s+i+65535,i=Math.floor(n/65536),s=n-i*65536,n=l+i+65535,i=Math.floor(n/65536),l=n-i*65536,n=u+i+65535,i=Math.floor(n/65536),u=n-i*65536,n=f+i+65535,i=Math.floor(n/65536),f=n-i*65536,n=d+i+65535,i=Math.floor(n/65536),d=n-i*65536,n=h+i+65535,i=Math.floor(n/65536),h=n-i*65536,n=g+i+65535,i=Math.floor(n/65536),g=n-i*65536,n=y+i+65535,i=Math.floor(n/65536),y=n-i*65536,n=m+i+65535,i=Math.floor(n/65536),m=n-i*65536,n=w+i+65535,i=Math.floor(n/65536),w=n-i*65536,n=_+i+65535,i=Math.floor(n/65536),_=n-i*65536,n=E+i+65535,i=Math.floor(n/65536),E=n-i*65536,n=b+i+65535,i=Math.floor(n/65536),b=n-i*65536,n=k+i+65535,i=Math.floor(n/65536),k=n-i*65536,n=O+i+65535,i=Math.floor(n/65536),O=n-i*65536,a+=i-1+37*(i-1),t[0]=a,t[1]=s,t[2]=l,t[3]=u,t[4]=f,t[5]=d,t[6]=h,t[7]=g,t[8]=y,t[9]=m,t[10]=w,t[11]=_,t[12]=E,t[13]=b,t[14]=k,t[15]=O}});var bb=de((j7,Cb)=>{var Wn=vt();qt();oi();Mu();Cb.exports=Wn.kem=Wn.kem||{};var wb=Wn.jsbn.BigInteger;Wn.kem.rsa={};Wn.kem.rsa.create=function(t,e){e=e||{};var r=e.prng||Wn.random,n={};return n.encrypt=function(i,a){var s=Math.ceil(i.n.bitLength()/8),l;do l=new wb(Wn.util.bytesToHex(r.getBytesSync(s)),16).mod(i.n);while(l.compareTo(wb.ONE)<=0);l=Wn.util.hexToBytes(l.toString(16));var u=s-l.length;u>0&&(l=Wn.util.fillString(String.fromCharCode(0),u)+l);var f=i.encrypt(l,"NONE"),d=t.generate(l,a);return{encapsulation:f,key:d}},n.decrypt=function(i,a,s){var l=i.decrypt(a,"NONE");return t.generate(l,s)},n};Wn.kem.kdf1=function(t,e){Eb(this,t,0,e||t.digestLength)};Wn.kem.kdf2=function(t,e){Eb(this,t,1,e||t.digestLength)};function Eb(t,e,r,n){t.generate=function(i,a){for(var s=new Wn.util.ByteBuffer,l=Math.ceil(a/n)+r,u=new Wn.util.ByteBuffer,f=r;f<l;++f){u.putInt32(f),e.start(),e.update(i+u.getBytes());var d=e.digest();s.putBytes(d.getBytes(n))}return s.truncate(s.length()-a),s.getBytes()}}});var Ab=de((Y7,Sb)=>{var It=vt();qt();Sb.exports=It.log=It.log||{};It.log.levels=["none","error","warning","info","debug","verbose","max"];var Kd={},Qg=[],Hu=null;It.log.LEVEL_LOCKED=1<<1;It.log.NO_LEVEL_CHECK=1<<2;It.log.INTERPOLATE=1<<3;for(na=0;na<It.log.levels.length;++na)Xg=It.log.levels[na],Kd[Xg]={index:na,name:Xg.toUpperCase()};var Xg,na;It.log.logMessage=function(t){for(var e=Kd[t.level].index,r=0;r<Qg.length;++r){var n=Qg[r];if(n.flags&It.log.NO_LEVEL_CHECK)n.f(t);else{var i=Kd[n.level].index;e<=i&&n.f(n,t)}}};It.log.prepareStandard=function(t){"standard"in t||(t.standard=Kd[t.level].name+" ["+t.category+"] "+t.message)};It.log.prepareFull=function(t){if(!("full"in t)){var e=[t.message];e=e.concat([]),t.full=It.util.format.apply(this,e)}};It.log.prepareStandardFull=function(t){"standardFull"in t||(It.log.prepareStandard(t),t.standardFull=t.standard)};for(Jg=["error","warning","info","debug","verbose"],na=0;na<Jg.length;++na)(function(e){It.log[e]=function(r,n){var i=Array.prototype.slice.call(arguments).slice(2),a={timestamp:new Date,level:e,category:r,message:n,arguments:i};It.log.logMessage(a)}})(Jg[na]);var Jg,na;It.log.makeLogger=function(t){var e={flags:0,f:t};return It.log.setLevel(e,"none"),e};It.log.setLevel=function(t,e){var r=!1;if(t&&!(t.flags&It.log.LEVEL_LOCKED))for(var n=0;n<It.log.levels.length;++n){var i=It.log.levels[n];if(e==i){t.level=e,r=!0;break}}return r};It.log.lock=function(t,e){typeof e=="undefined"||e?t.flags|=It.log.LEVEL_LOCKED:t.flags&=~It.log.LEVEL_LOCKED};It.log.addLogger=function(t){Qg.push(t)};typeof console!="undefined"&&"log"in console?(console.error&&console.warn&&console.info&&console.debug?(xb={error:console.error,warning:console.warn,info:console.info,debug:console.debug,verbose:console.debug},Ku=function(t,e){It.log.prepareStandard(e);var r=xb[e.level],n=[e.standard];n=n.concat(e.arguments.slice()),r.apply(console,n)},wl=It.log.makeLogger(Ku)):(Ku=function(e,r){It.log.prepareStandardFull(r),console.log(r.standardFull)},wl=It.log.makeLogger(Ku)),It.log.setLevel(wl,"debug"),It.log.addLogger(wl),Hu=wl):console={log:function(){}};var wl,xb,Ku;Hu!==null&&typeof window!="undefined"&&window.location&&(ju=new URL(window.location.href).searchParams,ju.has("console.level")&&It.log.setLevel(Hu,ju.get("console.level").slice(-1)[0]),ju.has("console.lock")&&(Tb=ju.get("console.lock").slice(-1)[0],Tb=="true"&&It.log.lock(Hu)));var ju,Tb;It.log.consoleLogger=Hu});var Ib=de((W7,kb)=>{kb.exports=Qi();bd();hl();cg();Fg()});var Db=de((z7,Rb)=>{var Te=vt();cs();Si();Lu();fs();zs();xg();oi();qt();Md();var V=Te.asn1,xn=Rb.exports=Te.pkcs7=Te.pkcs7||{};xn.messageFromPem=function(t){var e=Te.pem.decode(t)[0];if(e.type!=="PKCS7"){var r=new Error('Could not convert PKCS#7 message from PEM; PEM header type is not "PKCS#7".');throw r.headerType=e.type,r}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert PKCS#7 message from PEM; PEM is encrypted.");var n=V.fromDer(e.body);return xn.messageFromAsn1(n)};xn.messageToPem=function(t,e){var r={type:"PKCS7",body:V.toDer(t.toAsn1()).getBytes()};return Te.pem.encode(r,{maxline:e})};xn.messageFromAsn1=function(t){var e={},r=[];if(!V.validate(t,xn.asn1.contentInfoValidator,e,r)){var n=new Error("Cannot read PKCS#7 message. ASN.1 object is not an PKCS#7 ContentInfo.");throw n.errors=r,n}var i=V.derToOid(e.contentType),a;switch(i){case Te.pki.oids.envelopedData:a=xn.createEnvelopedData();break;case Te.pki.oids.encryptedData:a=xn.createEncryptedData();break;case Te.pki.oids.signedData:a=xn.createSignedData();break;default:throw new Error("Cannot read PKCS#7 message. ContentType with OID "+i+" is not (yet) supported.")}return a.fromAsn1(e.content.value[0]),a};xn.createSignedData=function(){var t=null;return t={type:Te.pki.oids.signedData,version:1,certificates:[],crls:[],signers:[],digestAlgorithmIdentifiers:[],contentInfo:null,signerInfos:[],fromAsn1:function(n){if($g(t,n,xn.asn1.signedDataValidator),t.certificates=[],t.crls=[],t.digestAlgorithmIdentifiers=[],t.contentInfo=null,t.signerInfos=[],t.rawCapture.certificates)for(var i=t.rawCapture.certificates.value,a=0;a<i.length;++a)t.certificates.push(Te.pki.certificateFromAsn1(i[a]))},toAsn1:function(){t.contentInfo||t.sign();for(var n=[],i=0;i<t.certificates.length;++i)n.push(Te.pki.certificateToAsn1(t.certificates[i]));var a=[],s=V.create(V.Class.CONTEXT_SPECIFIC,0,!0,[V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[V.create(V.Class.UNIVERSAL,V.Type.INTEGER,!1,V.integerToDer(t.version).getBytes()),V.create(V.Class.UNIVERSAL,V.Type.SET,!0,t.digestAlgorithmIdentifiers),t.contentInfo])]);return n.length>0&&s.value[0].value.push(V.create(V.Class.CONTEXT_SPECIFIC,0,!0,n)),a.length>0&&s.value[0].value.push(V.create(V.Class.CONTEXT_SPECIFIC,1,!0,a)),s.value[0].value.push(V.create(V.Class.UNIVERSAL,V.Type.SET,!0,t.signerInfos)),V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[V.create(V.Class.UNIVERSAL,V.Type.OID,!1,V.oidToDer(t.type).getBytes()),s])},addSigner:function(n){var i=n.issuer,a=n.serialNumber;if(n.certificate){var s=n.certificate;typeof s=="string"&&(s=Te.pki.certificateFromPem(s)),i=s.issuer.attributes,a=s.serialNumber}var l=n.key;if(!l)throw new Error("Could not add PKCS#7 signer; no private key specified.");typeof l=="string"&&(l=Te.pki.privateKeyFromPem(l));var u=n.digestAlgorithm||Te.pki.oids.sha1;switch(u){case Te.pki.oids.sha1:case Te.pki.oids.sha256:case Te.pki.oids.sha384:case Te.pki.oids.sha512:case Te.pki.oids.md5:break;default:throw new Error("Could not add PKCS#7 signer; unknown message digest algorithm: "+u)}var f=n.authenticatedAttributes||[];if(f.length>0){for(var d=!1,h=!1,g=0;g<f.length;++g){var y=f[g];if(!d&&y.type===Te.pki.oids.contentType){if(d=!0,h)break;continue}if(!h&&y.type===Te.pki.oids.messageDigest){if(h=!0,d)break;continue}}if(!d||!h)throw new Error("Invalid signer.authenticatedAttributes. If signer.authenticatedAttributes is specified, then it must contain at least two attributes, PKCS #9 content-type and PKCS #9 message-digest.")}t.signers.push({key:l,version:1,issuer:i,serialNumber:a,digestAlgorithm:u,signatureAlgorithm:Te.pki.oids.rsaEncryption,signature:null,authenticatedAttributes:f,unauthenticatedAttributes:[]})},sign:function(n){if(n=n||{},(typeof t.content!="object"||t.contentInfo===null)&&(t.contentInfo=V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[V.create(V.Class.UNIVERSAL,V.Type.OID,!1,V.oidToDer(Te.pki.oids.data).getBytes())]),"content"in t)){var i;t.content instanceof Te.util.ByteBuffer?i=t.content.bytes():typeof t.content=="string"&&(i=Te.util.encodeUtf8(t.content)),n.detached?t.detachedContent=V.create(V.Class.UNIVERSAL,V.Type.OCTETSTRING,!1,i):t.contentInfo.value.push(V.create(V.Class.CONTEXT_SPECIFIC,0,!0,[V.create(V.Class.UNIVERSAL,V.Type.OCTETSTRING,!1,i)]))}if(t.signers.length!==0){var a=e();r(a)}},verify:function(){throw new Error("PKCS#7 signature verification not yet implemented.")},addCertificate:function(n){typeof n=="string"&&(n=Te.pki.certificateFromPem(n)),t.certificates.push(n)},addCertificateRevokationList:function(n){throw new Error("PKCS#7 CRL support not yet implemented.")}},t;function e(){for(var n={},i=0;i<t.signers.length;++i){var a=t.signers[i],s=a.digestAlgorithm;s in n||(n[s]=Te.md[Te.pki.oids[s]].create()),a.authenticatedAttributes.length===0?a.md=n[s]:a.md=Te.md[Te.pki.oids[s]].create()}t.digestAlgorithmIdentifiers=[];for(var s in n)t.digestAlgorithmIdentifiers.push(V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[V.create(V.Class.UNIVERSAL,V.Type.OID,!1,V.oidToDer(s).getBytes()),V.create(V.Class.UNIVERSAL,V.Type.NULL,!1,"")]));return n}function r(n){var i;if(t.detachedContent?i=t.detachedContent:(i=t.contentInfo.value[1],i=i.value[0]),!i)throw new Error("Could not sign PKCS#7 message; there is no content to sign.");var a=V.derToOid(t.contentInfo.value[0].value),s=V.toDer(i);s.getByte(),V.getBerValueLength(s),s=s.getBytes();for(var l in n)n[l].start().update(s);for(var u=new Date,f=0;f<t.signers.length;++f){var d=t.signers[f];if(d.authenticatedAttributes.length===0){if(a!==Te.pki.oids.data)throw new Error("Invalid signer; authenticatedAttributes must be present when the ContentInfo content type is not PKCS#7 Data.")}else{d.authenticatedAttributesAsn1=V.create(V.Class.CONTEXT_SPECIFIC,0,!0,[]);for(var h=V.create(V.Class.UNIVERSAL,V.Type.SET,!0,[]),g=0;g<d.authenticatedAttributes.length;++g){var y=d.authenticatedAttributes[g];y.type===Te.pki.oids.messageDigest?y.value=n[d.digestAlgorithm].digest():y.type===Te.pki.oids.signingTime&&(y.value||(y.value=u)),h.value.push(Zg(y)),d.authenticatedAttributesAsn1.value.push(Zg(y))}s=V.toDer(h).getBytes(),d.md.start().update(s)}d.signature=d.key.sign(d.md,"RSASSA-PKCS1-V1_5")}t.signerInfos=LU(t.signers)}};xn.createEncryptedData=function(){var t=null;return t={type:Te.pki.oids.encryptedData,version:0,encryptedContent:{algorithm:Te.pki.oids["aes256-CBC"]},fromAsn1:function(e){$g(t,e,xn.asn1.encryptedDataValidator)},decrypt:function(e){e!==void 0&&(t.encryptedContent.key=e),Nb(t)}},t};xn.createEnvelopedData=function(){var t=null;return t={type:Te.pki.oids.envelopedData,version:0,recipients:[],encryptedContent:{algorithm:Te.pki.oids["aes256-CBC"]},fromAsn1:function(e){var r=$g(t,e,xn.asn1.envelopedDataValidator);t.recipients=DU(r.recipientInfos.value)},toAsn1:function(){return V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[V.create(V.Class.UNIVERSAL,V.Type.OID,!1,V.oidToDer(t.type).getBytes()),V.create(V.Class.CONTEXT_SPECIFIC,0,!0,[V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[V.create(V.Class.UNIVERSAL,V.Type.INTEGER,!1,V.integerToDer(t.version).getBytes()),V.create(V.Class.UNIVERSAL,V.Type.SET,!0,BU(t.recipients)),V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,PU(t.encryptedContent))])])])},findRecipient:function(e){for(var r=e.issuer.attributes,n=0;n<t.recipients.length;++n){var i=t.recipients[n],a=i.issuer;if(i.serialNumber===e.serialNumber&&a.length===r.length){for(var s=!0,l=0;l<r.length;++l)if(a[l].type!==r[l].type||a[l].value!==r[l].value){s=!1;break}if(s)return i}}return null},decrypt:function(e,r){if(t.encryptedContent.key===void 0&&e!==void 0&&r!==void 0)switch(e.encryptedContent.algorithm){case Te.pki.oids.rsaEncryption:case Te.pki.oids.desCBC:var n=r.decrypt(e.encryptedContent.content);t.encryptedContent.key=Te.util.createBuffer(n);break;default:throw new Error("Unsupported asymmetric cipher, OID "+e.encryptedContent.algorithm)}Nb(t)},addRecipient:function(e){t.recipients.push({version:0,issuer:e.issuer.attributes,serialNumber:e.serialNumber,encryptedContent:{algorithm:Te.pki.oids.rsaEncryption,key:e.publicKey}})},encrypt:function(e,r){if(t.encryptedContent.content===void 0){r=r||t.encryptedContent.algorithm,e=e||t.encryptedContent.key;var n,i,a;switch(r){case Te.pki.oids["aes128-CBC"]:n=16,i=16,a=Te.aes.createEncryptionCipher;break;case Te.pki.oids["aes192-CBC"]:n=24,i=16,a=Te.aes.createEncryptionCipher;break;case Te.pki.oids["aes256-CBC"]:n=32,i=16,a=Te.aes.createEncryptionCipher;break;case Te.pki.oids["des-EDE3-CBC"]:n=24,i=8,a=Te.des.createEncryptionCipher;break;default:throw new Error("Unsupported symmetric cipher, OID "+r)}if(e===void 0)e=Te.util.createBuffer(Te.random.getBytes(n));else if(e.length()!=n)throw new Error("Symmetric key has wrong length; got "+e.length()+" bytes, expected "+n+".");t.encryptedContent.algorithm=r,t.encryptedContent.key=e,t.encryptedContent.parameter=Te.util.createBuffer(Te.random.getBytes(i));var s=a(e);if(s.start(t.encryptedContent.parameter.copy()),s.update(t.content),!s.finish())throw new Error("Symmetric encryption failed.");t.encryptedContent.content=s.output}for(var l=0;l<t.recipients.length;++l){var u=t.recipients[l];if(u.encryptedContent.content===void 0)switch(u.encryptedContent.algorithm){case Te.pki.oids.rsaEncryption:u.encryptedContent.content=u.encryptedContent.key.encrypt(t.encryptedContent.key.data);break;default:throw new Error("Unsupported asymmetric cipher, OID "+u.encryptedContent.algorithm)}}}},t};function NU(t){var e={},r=[];if(!V.validate(t,xn.asn1.recipientInfoValidator,e,r)){var n=new Error("Cannot read PKCS#7 RecipientInfo. ASN.1 object is not an PKCS#7 RecipientInfo.");throw n.errors=r,n}return{version:e.version.charCodeAt(0),issuer:Te.pki.RDNAttributesAsArray(e.issuer),serialNumber:Te.util.createBuffer(e.serial).toHex(),encryptedContent:{algorithm:V.derToOid(e.encAlgorithm),parameter:e.encParameter?e.encParameter.value:void 0,content:e.encKey}}}function RU(t){return V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[V.create(V.Class.UNIVERSAL,V.Type.INTEGER,!1,V.integerToDer(t.version).getBytes()),V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[Te.pki.distinguishedNameToAsn1({attributes:t.issuer}),V.create(V.Class.UNIVERSAL,V.Type.INTEGER,!1,Te.util.hexToBytes(t.serialNumber))]),V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[V.create(V.Class.UNIVERSAL,V.Type.OID,!1,V.oidToDer(t.encryptedContent.algorithm).getBytes()),V.create(V.Class.UNIVERSAL,V.Type.NULL,!1,"")]),V.create(V.Class.UNIVERSAL,V.Type.OCTETSTRING,!1,t.encryptedContent.content)])}function DU(t){for(var e=[],r=0;r<t.length;++r)e.push(NU(t[r]));return e}function BU(t){for(var e=[],r=0;r<t.length;++r)e.push(RU(t[r]));return e}function OU(t){var e=V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[V.create(V.Class.UNIVERSAL,V.Type.INTEGER,!1,V.integerToDer(t.version).getBytes()),V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[Te.pki.distinguishedNameToAsn1({attributes:t.issuer}),V.create(V.Class.UNIVERSAL,V.Type.INTEGER,!1,Te.util.hexToBytes(t.serialNumber))]),V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[V.create(V.Class.UNIVERSAL,V.Type.OID,!1,V.oidToDer(t.digestAlgorithm).getBytes()),V.create(V.Class.UNIVERSAL,V.Type.NULL,!1,"")])]);if(t.authenticatedAttributesAsn1&&e.value.push(t.authenticatedAttributesAsn1),e.value.push(V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[V.create(V.Class.UNIVERSAL,V.Type.OID,!1,V.oidToDer(t.signatureAlgorithm).getBytes()),V.create(V.Class.UNIVERSAL,V.Type.NULL,!1,"")])),e.value.push(V.create(V.Class.UNIVERSAL,V.Type.OCTETSTRING,!1,t.signature)),t.unauthenticatedAttributes.length>0){for(var r=V.create(V.Class.CONTEXT_SPECIFIC,1,!0,[]),n=0;n<t.unauthenticatedAttributes.length;++n){var i=t.unauthenticatedAttributes[n];r.values.push(Zg(i))}e.value.push(r)}return e}function LU(t){for(var e=[],r=0;r<t.length;++r)e.push(OU(t[r]));return e}function Zg(t){var e;if(t.type===Te.pki.oids.contentType)e=V.create(V.Class.UNIVERSAL,V.Type.OID,!1,V.oidToDer(t.value).getBytes());else if(t.type===Te.pki.oids.messageDigest)e=V.create(V.Class.UNIVERSAL,V.Type.OCTETSTRING,!1,t.value.bytes());else if(t.type===Te.pki.oids.signingTime){var r=new Date("1950-01-01T00:00:00Z"),n=new Date("2050-01-01T00:00:00Z"),i=t.value;if(typeof i=="string"){var a=Date.parse(i);isNaN(a)?i.length===13?i=V.utcTimeToDate(i):i=V.generalizedTimeToDate(i):i=new Date(a)}i>=r&&i<n?e=V.create(V.Class.UNIVERSAL,V.Type.UTCTIME,!1,V.dateToUtcTime(i)):e=V.create(V.Class.UNIVERSAL,V.Type.GENERALIZEDTIME,!1,V.dateToGeneralizedTime(i))}return V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[V.create(V.Class.UNIVERSAL,V.Type.OID,!1,V.oidToDer(t.type).getBytes()),V.create(V.Class.UNIVERSAL,V.Type.SET,!0,[e])])}function PU(t){return[V.create(V.Class.UNIVERSAL,V.Type.OID,!1,V.oidToDer(Te.pki.oids.data).getBytes()),V.create(V.Class.UNIVERSAL,V.Type.SEQUENCE,!0,[V.create(V.Class.UNIVERSAL,V.Type.OID,!1,V.oidToDer(t.algorithm).getBytes()),t.parameter?V.create(V.Class.UNIVERSAL,V.Type.OCTETSTRING,!1,t.parameter.getBytes()):void 0]),V.create(V.Class.CONTEXT_SPECIFIC,0,!0,[V.create(V.Class.UNIVERSAL,V.Type.OCTETSTRING,!1,t.content.getBytes())])]}function $g(t,e,r){var n={},i=[];if(!V.validate(e,r,n,i)){var a=new Error("Cannot read PKCS#7 message. ASN.1 object is not a supported PKCS#7 message.");throw a.errors=a,a}var s=V.derToOid(n.contentType);if(s!==Te.pki.oids.data)throw new Error("Unsupported PKCS#7 message. Only wrapped ContentType Data supported.");if(n.encryptedContent){var l="";if(Te.util.isArray(n.encryptedContent))for(var u=0;u<n.encryptedContent.length;++u){if(n.encryptedContent[u].type!==V.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting encrypted content constructed of only OCTET STRING objects.");l+=n.encryptedContent[u].value}else l=n.encryptedContent;t.encryptedContent={algorithm:V.derToOid(n.encAlgorithm),parameter:Te.util.createBuffer(n.encParameter.value),content:Te.util.createBuffer(l)}}if(n.content){var l="";if(Te.util.isArray(n.content))for(var u=0;u<n.content.length;++u){if(n.content[u].type!==V.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting content constructed of only OCTET STRING objects.");l+=n.content[u].value}else l=n.content;t.content=Te.util.createBuffer(l)}return t.version=n.version.charCodeAt(0),t.rawCapture=n,n}function Nb(t){if(t.encryptedContent.key===void 0)throw new Error("Symmetric key not available.");if(t.content===void 0){var e;switch(t.encryptedContent.algorithm){case Te.pki.oids["aes128-CBC"]:case Te.pki.oids["aes192-CBC"]:case Te.pki.oids["aes256-CBC"]:e=Te.aes.createDecryptionCipher(t.encryptedContent.key);break;case Te.pki.oids.desCBC:case Te.pki.oids["des-EDE3-CBC"]:e=Te.des.createDecryptionCipher(t.encryptedContent.key);break;default:throw new Error("Unsupported symmetric cipher, OID "+t.encryptedContent.algorithm)}if(e.start(t.encryptedContent.parameter),e.update(t.encryptedContent.content),!e.finish())throw new Error("Symmetric decryption failed.");t.content=e.output}}});var Ob=de((Q7,Bb)=>{var kr=vt();cs();ul();bd();hl();qt();var jd=Bb.exports=kr.ssh=kr.ssh||{};jd.privateKeyToPutty=function(t,e,r){r=r||"",e=e||"";var n="ssh-rsa",i=e===""?"none":"aes256-cbc",a="PuTTY-User-Key-File-2: "+n+`\r
`;a+="Encryption: "+i+`\r
`,a+="Comment: "+r+`\r
`;var s=kr.util.createBuffer();El(s,n),ia(s,t.e),ia(s,t.n);var l=kr.util.encode64(s.bytes(),64),u=Math.floor(l.length/66)+1;a+="Public-Lines: "+u+`\r
`,a+=l;var f=kr.util.createBuffer();ia(f,t.d),ia(f,t.p),ia(f,t.q),ia(f,t.qInv);var d;if(!e)d=kr.util.encode64(f.bytes(),64);else{var h=f.length()+16-1;h-=h%16;var g=Yd(f.bytes());g.truncate(g.length()-h+f.length()),f.putBuffer(g);var y=kr.util.createBuffer();y.putBuffer(Yd("\0\0\0\0",e)),y.putBuffer(Yd("\0\0\0",e));var m=kr.aes.createEncryptionCipher(y.truncate(8),"CBC");m.start(kr.util.createBuffer().fillWithByte(0,16)),m.update(f.copy()),m.finish();var w=m.output;w.truncate(16),d=kr.util.encode64(w.bytes(),64)}u=Math.floor(d.length/66)+1,a+=`\r
Private-Lines: `+u+`\r
`,a+=d;var _=Yd("putty-private-key-file-mac-key",e),E=kr.util.createBuffer();El(E,n),El(E,i),El(E,r),E.putInt32(s.length()),E.putBuffer(s),E.putInt32(f.length()),E.putBuffer(f);var b=kr.hmac.create();return b.start("sha1",_),b.update(E.bytes()),a+=`\r
Private-MAC: `+b.digest().toHex()+`\r
`,a};jd.publicKeyToOpenSSH=function(t,e){var r="ssh-rsa";e=e||"";var n=kr.util.createBuffer();return El(n,r),ia(n,t.e),ia(n,t.n),r+" "+kr.util.encode64(n.bytes())+" "+e};jd.privateKeyToOpenSSH=function(t,e){return e?kr.pki.encryptRsaPrivateKey(t,e,{legacy:!0,algorithm:"aes128"}):kr.pki.privateKeyToPem(t)};jd.getPublicKeyFingerprint=function(t,e){e=e||{};var r=e.md||kr.md.md5.create(),n="ssh-rsa",i=kr.util.createBuffer();El(i,n),ia(i,t.e),ia(i,t.n),r.start(),r.update(i.getBytes());var a=r.digest();if(e.encoding==="hex"){var s=a.toHex();return e.delimiter?s.match(/.{2}/g).join(e.delimiter):s}else{if(e.encoding==="binary")return a.getBytes();if(e.encoding)throw new Error('Unknown encoding "'+e.encoding+'".')}return a};function ia(t,e){var r=e.toString(16);r[0]>="8"&&(r="00"+r);var n=kr.util.hexToBytes(r);t.putInt32(n.length),t.putBytes(n)}function El(t,e){t.putInt32(e.length),t.putString(e)}function Yd(){for(var t=kr.md.sha1.create(),e=arguments.length,r=0;r<e;++r)t.update(arguments[r]);return t.digest()}});var Pb=de((X7,Lb)=>{Lb.exports=vt();cs();tb();Si();md();Lu();_b();ul();bb();Ab();Ib();Tg();Ad();zs();_g();kg();Db();Ng();Eg();fg();Od();oi();pg();Ob();Pg();qt()});var Ub=de(zd=>{"use strict";Object.defineProperty(zd,"__esModule",{value:!0});zd.getPem=void 0;var MU=require("fs"),Wd=Pb(),UU=require("util"),FU=UU.promisify(MU.readFile);function qU(t,e){if(e)Mb(t).then(r=>e(null,r)).catch(r=>e(r,null));else return Mb(t)}zd.getPem=qU;function Mb(t){return FU(t,{encoding:"base64"}).then(e=>GU(e))}function GU(t){let e=Wd.util.decode64(t),r=Wd.asn1.fromDer(e),i=Wd.pkcs12.pkcs12FromAsn1(r,"notasecret").getBags({friendlyName:"privatekey"});if(i.friendlyName){let a=i.friendlyName[0].key;return Wd.pki.privateKeyToPem(a).replace(/\r\n/g,`
`)}else throw new Error("Unable to get friendly name.")}});var Kb=de(Wu=>{"use strict";Object.defineProperty(Wu,"__esModule",{value:!0});Wu.GoogleToken=void 0;var Fb=require("fs"),qb=Kw(),VU=X0(),HU=require("path"),KU=require("util"),Gb=Fb.readFile?KU.promisify(Fb.readFile):()=>P(Wu,null,function*(){throw new Yu("use key rather than keyFile.","MISSING_CREDENTIALS")}),Vb="https://www.googleapis.com/oauth2/v4/token",jU="https://accounts.google.com/o/oauth2/revoke?token=",Yu=class extends Error{constructor(e,r){super(e);this.code=r}},em,Hb=class{constructor(e){this.configure(e)}get accessToken(){return this.rawToken?this.rawToken.access_token:void 0}get idToken(){return this.rawToken?this.rawToken.id_token:void 0}get tokenType(){return this.rawToken?this.rawToken.token_type:void 0}get refreshToken(){return this.rawToken?this.rawToken.refresh_token:void 0}hasExpired(){let e=new Date().getTime();return this.rawToken&&this.expiresAt?e>=this.expiresAt:!0}isTokenExpiring(){var e;let r=new Date().getTime(),n=(e=this.eagerRefreshThresholdMillis)!==null&&e!==void 0?e:0;return this.rawToken&&this.expiresAt?this.expiresAt<=r+n:!0}getToken(e,r={}){if(typeof e=="object"&&(r=e,e=void 0),r=Object.assign({forceRefresh:!1},r),e){let n=e;this.getTokenAsync(r).then(i=>n(null,i),e);return}return this.getTokenAsync(r)}getCredentials(e){return P(this,null,function*(){switch(HU.extname(e)){case".json":{let n=yield Gb(e,"utf8"),i=JSON.parse(n),a=i.private_key,s=i.client_email;if(!a||!s)throw new Yu("private_key and client_email are required.","MISSING_CREDENTIALS");return{privateKey:a,clientEmail:s}}case".der":case".crt":case".pem":return{privateKey:yield Gb(e,"utf8")};case".p12":case".pfx":return em||(em=(yield Promise.resolve().then(()=>Ub())).getPem),{privateKey:yield em(e)};default:throw new Yu("Unknown certificate type. Type is determined based on file extension. Current supported extensions are *.json, *.pem, and *.p12.","UNKNOWN_CERTIFICATE_TYPE")}})}getTokenAsync(e){return P(this,null,function*(){if(this.inFlightRequest&&!e.forceRefresh)return this.inFlightRequest;try{return yield this.inFlightRequest=this.getTokenAsyncInner(e)}finally{this.inFlightRequest=void 0}})}getTokenAsyncInner(e){return P(this,null,function*(){if(this.isTokenExpiring()===!1&&e.forceRefresh===!1)return Promise.resolve(this.rawToken);if(!this.key&&!this.keyFile)throw new Error("No key or keyFile set.");if(!this.key&&this.keyFile){let r=yield this.getCredentials(this.keyFile);this.key=r.privateKey,this.iss=r.clientEmail||this.iss,r.clientEmail||this.ensureEmail()}return this.requestToken()})}ensureEmail(){if(!this.iss)throw new Yu("email is required.","MISSING_CREDENTIALS")}revokeToken(e){if(e){this.revokeTokenAsync().then(()=>e(),e);return}return this.revokeTokenAsync()}revokeTokenAsync(){return P(this,null,function*(){if(!this.accessToken)throw new Error("No token to revoke.");let e=jU+this.accessToken;yield qb.request({url:e}),this.configure({email:this.iss,sub:this.sub,key:this.key,keyFile:this.keyFile,scope:this.scope,additionalClaims:this.additionalClaims})})}configure(e={}){this.keyFile=e.keyFile,this.key=e.key,this.rawToken=void 0,this.iss=e.email||e.iss,this.sub=e.sub,this.additionalClaims=e.additionalClaims,typeof e.scope=="object"?this.scope=e.scope.join(" "):this.scope=e.scope,this.eagerRefreshThresholdMillis=e.eagerRefreshThresholdMillis}requestToken(){return P(this,null,function*(){let e=Math.floor(new Date().getTime()/1e3),r=this.additionalClaims||{},n=Object.assign({iss:this.iss,scope:this.scope,aud:Vb,exp:e+3600,iat:e,sub:this.sub},r),i=VU.sign({header:{alg:"RS256"},payload:n,secret:this.key});try{let a=yield qb.request({method:"POST",url:Vb,data:{grant_type:"urn:ietf:params:oauth:grant-type:jwt-bearer",assertion:i},headers:{"Content-Type":"application/x-www-form-urlencoded"},responseType:"json"});return this.rawToken=a.data,this.expiresAt=a.data.expires_in===null||a.data.expires_in===void 0?void 0:(e+a.data.expires_in)*1e3,this.rawToken}catch(a){this.rawToken=void 0,this.tokenExpires=void 0;let s=a.response&&a.response.data?a.response.data:{};if(s.error){let l=s.error_description?`: ${s.error_description}`:"";a.message=`${s.error}${l}`}throw a}})}};Wu.GoogleToken=Hb});var Yb=de(($7,jb)=>{"use strict";jb.exports=function(t){t.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}});var zb=de((eH,Wb)=>{"use strict";Wb.exports=Vt;Vt.Node=ro;Vt.create=Vt;function Vt(t){var e=this;if(e instanceof Vt||(e=new Vt),e.tail=null,e.head=null,e.length=0,t&&typeof t.forEach=="function")t.forEach(function(i){e.push(i)});else if(arguments.length>0)for(var r=0,n=arguments.length;r<n;r++)e.push(arguments[r]);return e}Vt.prototype.removeNode=function(t){if(t.list!==this)throw new Error("removing node which does not belong to this list");var e=t.next,r=t.prev;return e&&(e.prev=r),r&&(r.next=e),t===this.head&&(this.head=e),t===this.tail&&(this.tail=r),t.list.length--,t.next=null,t.prev=null,t.list=null,e};Vt.prototype.unshiftNode=function(t){if(t!==this.head){t.list&&t.list.removeNode(t);var e=this.head;t.list=this,t.next=e,e&&(e.prev=t),this.head=t,this.tail||(this.tail=t),this.length++}};Vt.prototype.pushNode=function(t){if(t!==this.tail){t.list&&t.list.removeNode(t);var e=this.tail;t.list=this,t.prev=e,e&&(e.next=t),this.tail=t,this.head||(this.head=t),this.length++}};Vt.prototype.push=function(){for(var t=0,e=arguments.length;t<e;t++)WU(this,arguments[t]);return this.length};Vt.prototype.unshift=function(){for(var t=0,e=arguments.length;t<e;t++)zU(this,arguments[t]);return this.length};Vt.prototype.pop=function(){if(!!this.tail){var t=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,t}};Vt.prototype.shift=function(){if(!!this.head){var t=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,t}};Vt.prototype.forEach=function(t,e){e=e||this;for(var r=this.head,n=0;r!==null;n++)t.call(e,r.value,n,this),r=r.next};Vt.prototype.forEachReverse=function(t,e){e=e||this;for(var r=this.tail,n=this.length-1;r!==null;n--)t.call(e,r.value,n,this),r=r.prev};Vt.prototype.get=function(t){for(var e=0,r=this.head;r!==null&&e<t;e++)r=r.next;if(e===t&&r!==null)return r.value};Vt.prototype.getReverse=function(t){for(var e=0,r=this.tail;r!==null&&e<t;e++)r=r.prev;if(e===t&&r!==null)return r.value};Vt.prototype.map=function(t,e){e=e||this;for(var r=new Vt,n=this.head;n!==null;)r.push(t.call(e,n.value,this)),n=n.next;return r};Vt.prototype.mapReverse=function(t,e){e=e||this;for(var r=new Vt,n=this.tail;n!==null;)r.push(t.call(e,n.value,this)),n=n.prev;return r};Vt.prototype.reduce=function(t,e){var r,n=this.head;if(arguments.length>1)r=e;else if(this.head)n=this.head.next,r=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=0;n!==null;i++)r=t(r,n.value,i),n=n.next;return r};Vt.prototype.reduceReverse=function(t,e){var r,n=this.tail;if(arguments.length>1)r=e;else if(this.tail)n=this.tail.prev,r=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=this.length-1;n!==null;i--)r=t(r,n.value,i),n=n.prev;return r};Vt.prototype.toArray=function(){for(var t=new Array(this.length),e=0,r=this.head;r!==null;e++)t[e]=r.value,r=r.next;return t};Vt.prototype.toArrayReverse=function(){for(var t=new Array(this.length),e=0,r=this.tail;r!==null;e++)t[e]=r.value,r=r.prev;return t};Vt.prototype.slice=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var r=new Vt;if(e<t||e<0)return r;t<0&&(t=0),e>this.length&&(e=this.length);for(var n=0,i=this.head;i!==null&&n<t;n++)i=i.next;for(;i!==null&&n<e;n++,i=i.next)r.push(i.value);return r};Vt.prototype.sliceReverse=function(t,e){e=e||this.length,e<0&&(e+=this.length),t=t||0,t<0&&(t+=this.length);var r=new Vt;if(e<t||e<0)return r;t<0&&(t=0),e>this.length&&(e=this.length);for(var n=this.length,i=this.tail;i!==null&&n>e;n--)i=i.prev;for(;i!==null&&n>t;n--,i=i.prev)r.push(i.value);return r};Vt.prototype.splice=function(t,e,...r){t>this.length&&(t=this.length-1),t<0&&(t=this.length+t);for(var n=0,i=this.head;i!==null&&n<t;n++)i=i.next;for(var a=[],n=0;i&&n<e;n++)a.push(i.value),i=this.removeNode(i);i===null&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(var n=0;n<r.length;n++)i=YU(this,i,r[n]);return a};Vt.prototype.reverse=function(){for(var t=this.head,e=this.tail,r=t;r!==null;r=r.prev){var n=r.prev;r.prev=r.next,r.next=n}return this.head=e,this.tail=t,this};function YU(t,e,r){var n=e===t.head?new ro(r,null,e,t):new ro(r,e,e.next,t);return n.next===null&&(t.tail=n),n.prev===null&&(t.head=n),t.length++,n}function WU(t,e){t.tail=new ro(e,t.tail,null,t),t.head||(t.head=t.tail),t.length++}function zU(t,e){t.head=new ro(e,null,t.head,t),t.tail||(t.tail=t.head),t.length++}function ro(t,e,r,n){if(!(this instanceof ro))return new ro(t,e,r,n);this.list=n,this.value=t,e?(e.next=this,this.prev=e):this.prev=null,r?(r.prev=this,this.next=r):this.next=null}try{Yb()(Vt)}catch(t){}});var tx=de((tH,ex)=>{"use strict";var QU=zb(),no=Symbol("max"),Ra=Symbol("length"),Cl=Symbol("lengthCalculator"),zu=Symbol("allowStale"),io=Symbol("maxAge"),Da=Symbol("dispose"),Qb=Symbol("noDisposeOnSet"),jr=Symbol("lruList"),ki=Symbol("cache"),Xb=Symbol("updateAgeOnGet"),tm=()=>1,Jb=class{constructor(e){if(typeof e=="number"&&(e={max:e}),e||(e={}),e.max&&(typeof e.max!="number"||e.max<0))throw new TypeError("max must be a non-negative number");let r=this[no]=e.max||1/0,n=e.length||tm;if(this[Cl]=typeof n!="function"?tm:n,this[zu]=e.stale||!1,e.maxAge&&typeof e.maxAge!="number")throw new TypeError("maxAge must be a number");this[io]=e.maxAge||0,this[Da]=e.dispose,this[Qb]=e.noDisposeOnSet||!1,this[Xb]=e.updateAgeOnGet||!1,this.reset()}set max(e){if(typeof e!="number"||e<0)throw new TypeError("max must be a non-negative number");this[no]=e||1/0,Qu(this)}get max(){return this[no]}set allowStale(e){this[zu]=!!e}get allowStale(){return this[zu]}set maxAge(e){if(typeof e!="number")throw new TypeError("maxAge must be a non-negative number");this[io]=e,Qu(this)}get maxAge(){return this[io]}set lengthCalculator(e){typeof e!="function"&&(e=tm),e!==this[Cl]&&(this[Cl]=e,this[Ra]=0,this[jr].forEach(r=>{r.length=this[Cl](r.value,r.key),this[Ra]+=r.length})),Qu(this)}get lengthCalculator(){return this[Cl]}get length(){return this[Ra]}get itemCount(){return this[jr].length}rforEach(e,r){r=r||this;for(let n=this[jr].tail;n!==null;){let i=n.prev;$b(this,e,n,r),n=i}}forEach(e,r){r=r||this;for(let n=this[jr].head;n!==null;){let i=n.next;$b(this,e,n,r),n=i}}keys(){return this[jr].toArray().map(e=>e.key)}values(){return this[jr].toArray().map(e=>e.value)}reset(){this[Da]&&this[jr]&&this[jr].length&&this[jr].forEach(e=>this[Da](e.key,e.value)),this[ki]=new Map,this[jr]=new QU,this[Ra]=0}dump(){return this[jr].map(e=>Qd(this,e)?!1:{k:e.key,v:e.value,e:e.now+(e.maxAge||0)}).toArray().filter(e=>e)}dumpLru(){return this[jr]}set(e,r,n){if(n=n||this[io],n&&typeof n!="number")throw new TypeError("maxAge must be a number");let i=n?Date.now():0,a=this[Cl](r,e);if(this[ki].has(e)){if(a>this[no])return bl(this,this[ki].get(e)),!1;let u=this[ki].get(e).value;return this[Da]&&(this[Qb]||this[Da](e,u.value)),u.now=i,u.maxAge=n,u.value=r,this[Ra]+=a-u.length,u.length=a,this.get(e),Qu(this),!0}let s=new Zb(e,r,a,i,n);return s.length>this[no]?(this[Da]&&this[Da](e,r),!1):(this[Ra]+=s.length,this[jr].unshift(s),this[ki].set(e,this[jr].head),Qu(this),!0)}has(e){if(!this[ki].has(e))return!1;let r=this[ki].get(e).value;return!Qd(this,r)}get(e){return rm(this,e,!0)}peek(e){return rm(this,e,!1)}pop(){let e=this[jr].tail;return e?(bl(this,e),e.value):null}del(e){bl(this,this[ki].get(e))}load(e){this.reset();let r=Date.now();for(let n=e.length-1;n>=0;n--){let i=e[n],a=i.e||0;if(a===0)this.set(i.k,i.v);else{let s=a-r;s>0&&this.set(i.k,i.v,s)}}}prune(){this[ki].forEach((e,r)=>rm(this,r,!1))}},rm=(t,e,r)=>{let n=t[ki].get(e);if(n){let i=n.value;if(Qd(t,i)){if(bl(t,n),!t[zu])return}else r&&(t[Xb]&&(n.value.now=Date.now()),t[jr].unshiftNode(n));return i.value}},Qd=(t,e)=>{if(!e||!e.maxAge&&!t[io])return!1;let r=Date.now()-e.now;return e.maxAge?r>e.maxAge:t[io]&&r>t[io]},Qu=t=>{if(t[Ra]>t[no])for(let e=t[jr].tail;t[Ra]>t[no]&&e!==null;){let r=e.prev;bl(t,e),e=r}},bl=(t,e)=>{if(e){let r=e.value;t[Da]&&t[Da](r.key,r.value),t[Ra]-=r.length,t[ki].delete(r.key),t[jr].removeNode(e)}},Zb=class{constructor(e,r,n,i,a){this.key=e,this.value=r,this.length=n,this.now=i,this.maxAge=a||0}},$b=(t,e,r,n)=>{let i=r.value;Qd(t,i)&&(bl(t,r),t[zu]||(i=void 0)),i&&e.call(n,i.value,i.key,t)};ex.exports=Jb});var nm=de(Jd=>{"use strict";Object.defineProperty(Jd,"__esModule",{value:!0});Jd.JWTAccess=void 0;var XU=X0(),JU=tx(),rx={alg:"RS256",typ:"JWT"},Xd=class{constructor(e,r,n,i){this.cache=new JU({max:500,maxAge:60*60*1e3}),this.email=e,this.key=r,this.keyId=n,this.eagerRefreshThresholdMillis=i!=null?i:5*60*1e3}getCachedKey(e,r){let n=e;if(r&&Array.isArray(r)&&r.length?n=e?`${e}_${r.join("_")}`:`${r.join("_")}`:typeof r=="string"&&(n=e?`${e}_${r}`:r),!n)throw Error("Scopes or url must be provided");return n}getRequestHeaders(e,r,n){let i=this.getCachedKey(e,n),a=this.cache.get(i),s=Date.now();if(a&&a.expiration-s>this.eagerRefreshThresholdMillis)return a.headers;let l=Math.floor(Date.now()/1e3),u=Xd.getExpirationTime(l),f;if(Array.isArray(n)&&(n=n.join(" ")),n?f={iss:this.email,sub:this.email,scope:n,exp:u,iat:l}:f={iss:this.email,sub:this.email,aud:e,exp:u,iat:l},r){for(let m in f)if(r[m])throw new Error(`The '${m}' property is not allowed when passing additionalClaims. This claim is included in the JWT by default.`)}let d=this.keyId?Vi(wn({},rx),{kid:this.keyId}):rx,h=Object.assign(f,r),y={Authorization:`Bearer ${XU.sign({header:d,payload:h,secret:this.key})}`};return this.cache.set(i,{expiration:u*1e3,headers:y}),y}static getExpirationTime(e){return e+3600}fromJSON(e){if(!e)throw new Error("Must pass in a JSON object containing the service account auth settings.");if(!e.client_email)throw new Error("The incoming JSON object does not contain a client_email field");if(!e.private_key)throw new Error("The incoming JSON object does not contain a private_key field");this.email=e.client_email,this.key=e.private_key,this.keyId=e.private_key_id,this.projectId=e.project_id}fromStream(e,r){if(r)this.fromStreamAsync(e).then(()=>r(),r);else return this.fromStreamAsync(e)}fromStreamAsync(e){return new Promise((r,n)=>{e||n(new Error("Must pass in a stream containing the service account auth settings."));let i="";e.setEncoding("utf8").on("data",a=>i+=a).on("error",n).on("end",()=>{try{let a=JSON.parse(i);this.fromJSON(a),r()}catch(a){n(a)}})})}};Jd.JWTAccess=Xd});var im=de($d=>{"use strict";Object.defineProperty($d,"__esModule",{value:!0});$d.JWT=void 0;var nx=Kb(),ZU=nm(),$U=Ys(),Zd=class extends $U.OAuth2Client{constructor(e,r,n,i,a,s){let l=e&&typeof e=="object"?e:{email:e,keyFile:r,key:n,keyId:s,scopes:i,subject:a};super({eagerRefreshThresholdMillis:l.eagerRefreshThresholdMillis,forceRefreshOnFailure:l.forceRefreshOnFailure});this.email=l.email,this.keyFile=l.keyFile,this.key=l.key,this.keyId=l.keyId,this.scopes=l.scopes,this.subject=l.subject,this.additionalClaims=l.additionalClaims,this.credentials={refresh_token:"jwt-placeholder",expiry_date:1}}createScoped(e){return new Zd({email:this.email,keyFile:this.keyFile,key:this.key,keyId:this.keyId,scopes:e,subject:this.subject,additionalClaims:this.additionalClaims})}getRequestMetadataAsync(e){var r=n=>super[n];return P(this,null,function*(){e=this.defaultServicePath?`https://${this.defaultServicePath}/`:e;let i=!this.hasUserScopes()&&e||this.useJWTAccessWithScope&&this.hasAnyScopes();if(!this.apiKey&&i)if(this.additionalClaims&&this.additionalClaims.target_audience){let{tokens:a}=yield this.refreshToken();return{headers:this.addSharedMetadataHeaders({Authorization:`Bearer ${a.id_token}`})}}else{this.access||(this.access=new ZU.JWTAccess(this.email,this.key,this.keyId,this.eagerRefreshThresholdMillis));let a;this.hasUserScopes()?a=this.scopes:e||(a=this.defaultScopes);let s=yield this.access.getRequestHeaders(e!=null?e:void 0,this.additionalClaims,this.useJWTAccessWithScope?a:void 0);return{headers:this.addSharedMetadataHeaders(s)}}else return this.hasAnyScopes()||this.apiKey?r("getRequestMetadataAsync").call(this,e):{headers:{}}})}fetchIdToken(e){return P(this,null,function*(){let r=new nx.GoogleToken({iss:this.email,sub:this.subject,scope:this.scopes||this.defaultScopes,keyFile:this.keyFile,key:this.key,additionalClaims:{target_audience:e}});if(yield r.getToken({forceRefresh:!0}),!r.idToken)throw new Error("Unknown error: Failed to fetch ID token");return r.idToken})}hasUserScopes(){return this.scopes?this.scopes.length>0:!1}hasAnyScopes(){return!!(this.scopes&&this.scopes.length>0||this.defaultScopes&&this.defaultScopes.length>0)}authorize(e){if(e)this.authorizeAsync().then(r=>e(null,r),e);else return this.authorizeAsync()}authorizeAsync(){return P(this,null,function*(){let e=yield this.refreshToken();if(!e)throw new Error("No result returned");return this.credentials=e.tokens,this.credentials.refresh_token="jwt-placeholder",this.key=this.gtoken.key,this.email=this.gtoken.iss,e.tokens})}refreshTokenNoCache(e){return P(this,null,function*(){let r=this.createGToken(),i={access_token:(yield r.getToken({forceRefresh:this.isTokenExpiring()})).access_token,token_type:"Bearer",expiry_date:r.expiresAt,id_token:r.idToken};return this.emit("tokens",i),{res:null,tokens:i}})}createGToken(){return this.gtoken||(this.gtoken=new nx.GoogleToken({iss:this.email,sub:this.subject,scope:this.scopes||this.defaultScopes,keyFile:this.keyFile,key:this.key,additionalClaims:this.additionalClaims})),this.gtoken}fromJSON(e){if(!e)throw new Error("Must pass in a JSON object containing the service account auth settings.");if(!e.client_email)throw new Error("The incoming JSON object does not contain a client_email field");if(!e.private_key)throw new Error("The incoming JSON object does not contain a private_key field");this.email=e.client_email,this.key=e.private_key,this.keyId=e.private_key_id,this.projectId=e.project_id,this.quotaProjectId=e.quota_project_id}fromStream(e,r){if(r)this.fromStreamAsync(e).then(()=>r(),r);else return this.fromStreamAsync(e)}fromStreamAsync(e){return new Promise((r,n)=>{if(!e)throw new Error("Must pass in a stream containing the service account auth settings.");let i="";e.setEncoding("utf8").on("error",n).on("data",a=>i+=a).on("end",()=>{try{let a=JSON.parse(i);this.fromJSON(a),r()}catch(a){n(a)}})})}fromAPIKey(e){if(typeof e!="string")throw new Error("Must provide an API Key string.");this.apiKey=e}getCredentials(){return P(this,null,function*(){if(this.key)return{private_key:this.key,client_email:this.email};if(this.keyFile){let r=yield this.createGToken().getCredentials(this.keyFile);return{private_key:r.privateKey,client_email:r.clientEmail}}throw new Error("A key or a keyFile must be provided to getCredentials.")})}};$d.JWT=Zd});var am=de(eh=>{"use strict";Object.defineProperty(eh,"__esModule",{value:!0});eh.UserRefreshClient=void 0;var e8=Ys(),ix=class extends e8.OAuth2Client{constructor(e,r,n,i,a){let s=e&&typeof e=="object"?e:{clientId:e,clientSecret:r,refreshToken:n,eagerRefreshThresholdMillis:i,forceRefreshOnFailure:a};super({clientId:s.clientId,clientSecret:s.clientSecret,eagerRefreshThresholdMillis:s.eagerRefreshThresholdMillis,forceRefreshOnFailure:s.forceRefreshOnFailure});this._refreshToken=s.refreshToken,this.credentials.refresh_token=s.refreshToken}refreshTokenNoCache(e){var r=n=>super[n];return P(this,null,function*(){return r("refreshTokenNoCache").call(this,this._refreshToken)})}fromJSON(e){if(!e)throw new Error("Must pass in a JSON object containing the user refresh token");if(e.type!=="authorized_user")throw new Error('The incoming JSON object does not have the "authorized_user" type');if(!e.client_id)throw new Error("The incoming JSON object does not contain a client_id field");if(!e.client_secret)throw new Error("The incoming JSON object does not contain a client_secret field");if(!e.refresh_token)throw new Error("The incoming JSON object does not contain a refresh_token field");this._clientId=e.client_id,this._clientSecret=e.client_secret,this._refreshToken=e.refresh_token,this.credentials.refresh_token=e.refresh_token,this.quotaProjectId=e.quota_project_id}fromStream(e,r){if(r)this.fromStreamAsync(e).then(()=>r(),r);else return this.fromStreamAsync(e)}fromStreamAsync(e){return P(this,null,function*(){return new Promise((r,n)=>{if(!e)return n(new Error("Must pass in a stream containing the user refresh token."));let i="";e.setEncoding("utf8").on("error",n).on("data",a=>i+=a).on("end",()=>{try{let a=JSON.parse(i);return this.fromJSON(a),r()}catch(a){return n(a)}})})})}};eh.UserRefreshClient=ix});var ox=de(xl=>{"use strict";Object.defineProperty(xl,"__esModule",{value:!0});xl.getErrorFromOAuthErrorResponse=xl.OAuthClientAuthHandler=void 0;var ax=require("querystring"),t8=$o(),r8=["PUT","POST","PATCH"],sx=class{constructor(e){this.clientAuthentication=e,this.crypto=(0,t8.createCrypto)()}applyClientAuthenticationOptions(e,r){this.injectAuthenticatedHeaders(e,r),r||this.injectAuthenticatedRequestBody(e)}injectAuthenticatedHeaders(e,r){var n;if(r)e.headers=e.headers||{},Object.assign(e.headers,{Authorization:`Bearer ${r}}`});else if(((n=this.clientAuthentication)===null||n===void 0?void 0:n.confidentialClientType)==="basic"){e.headers=e.headers||{};let i=this.clientAuthentication.clientId,a=this.clientAuthentication.clientSecret||"",s=this.crypto.encodeBase64StringUtf8(`${i}:${a}`);Object.assign(e.headers,{Authorization:`Basic ${s}`})}}injectAuthenticatedRequestBody(e){var r;if(((r=this.clientAuthentication)===null||r===void 0?void 0:r.confidentialClientType)==="request-body"){let n=(e.method||"GET").toUpperCase();if(r8.indexOf(n)!==-1){let i,a=e.headers||{};for(let s in a)if(s.toLowerCase()==="content-type"&&a[s]){i=a[s].toLowerCase();break}if(i==="application/x-www-form-urlencoded"){e.data=e.data||"";let s=ax.parse(e.data);Object.assign(s,{client_id:this.clientAuthentication.clientId,client_secret:this.clientAuthentication.clientSecret||""}),e.data=ax.stringify(s)}else if(i==="application/json")e.data=e.data||{},Object.assign(e.data,{client_id:this.clientAuthentication.clientId,client_secret:this.clientAuthentication.clientSecret||""});else throw new Error(`${i} content-types are not supported with ${this.clientAuthentication.confidentialClientType} client authentication`)}else throw new Error(`${n} HTTP method does not support ${this.clientAuthentication.confidentialClientType} client authentication`)}}};xl.OAuthClientAuthHandler=sx;function n8(t,e){let r=t.error,n=t.error_description,i=t.error_uri,a=`Error code ${r}`;typeof n!="undefined"&&(a+=`: ${n}`),typeof i!="undefined"&&(a+=` - ${i}`);let s=new Error(a);if(e){let l=Object.keys(e);e.stack&&l.push("stack"),l.forEach(u=>{u!=="message"&&Object.defineProperty(s,u,{value:e[u],writable:!1,enumerable:!0})})}return s}xl.getErrorFromOAuthErrorResponse=n8});var sm=de(th=>{"use strict";Object.defineProperty(th,"__esModule",{value:!0});th.StsCredentials=void 0;var i8=Jo(),a8=require("querystring"),s8=Tu(),lx=ox(),ux=class extends lx.OAuthClientAuthHandler{constructor(e,r){super(r);this.tokenExchangeEndpoint=e,this.transporter=new s8.DefaultTransporter}exchangeToken(e,r,n){return P(this,null,function*(){var i,a,s;let l={grant_type:e.grantType,resource:e.resource,audience:e.audience,scope:(i=e.scope)===null||i===void 0?void 0:i.join(" "),requested_token_type:e.requestedTokenType,subject_token:e.subjectToken,subject_token_type:e.subjectTokenType,actor_token:(a=e.actingParty)===null||a===void 0?void 0:a.actorToken,actor_token_type:(s=e.actingParty)===null||s===void 0?void 0:s.actorTokenType,options:n&&JSON.stringify(n)};Object.keys(l).forEach(d=>{typeof l[d]=="undefined"&&delete l[d]});let u={"Content-Type":"application/x-www-form-urlencoded"};Object.assign(u,r||{});let f={url:this.tokenExchangeEndpoint,method:"POST",headers:u,data:a8.stringify(l),responseType:"json"};this.applyClientAuthenticationOptions(f);try{let d=yield this.transporter.request(f),h=d.data;return h.res=d,h}catch(d){throw d instanceof i8.GaxiosError&&d.response?(0,lx.getErrorFromOAuthErrorResponse)(d.response.data,d):d}})}};th.StsCredentials=ux});var Tl=de(Ln=>{"use strict";Object.defineProperty(Ln,"__esModule",{value:!0});Ln.BaseExternalAccountClient=Ln.CLOUD_RESOURCE_MANAGER=Ln.EXTERNAL_ACCOUNT_TYPE=Ln.EXPIRATION_TIME_OFFSET=void 0;var o8=require("stream"),l8=Su(),u8=sm(),c8="urn:ietf:params:oauth:grant-type:token-exchange",f8="urn:ietf:params:oauth:token-type:access_token",om="https://www.googleapis.com/auth/cloud-platform",rh="\\.googleapis\\.com$",lm="[^\\.\\s\\/\\\\]+";Ln.EXPIRATION_TIME_OFFSET=5*60*1e3;Ln.EXTERNAL_ACCOUNT_TYPE="external_account";Ln.CLOUD_RESOURCE_MANAGER="https://cloudresourcemanager.googleapis.com/v1/projects/";var d8="//iam.googleapis.com/locations/[^/]+/workforcePools/[^/]+/providers/.+",cx=class extends l8.AuthClient{constructor(e,r){super();if(e.type!==Ln.EXTERNAL_ACCOUNT_TYPE)throw new Error(`Expected "${Ln.EXTERNAL_ACCOUNT_TYPE}" type but received "${e.type}"`);if(this.clientAuth=e.client_id?{confidentialClientType:"basic",clientId:e.client_id,clientSecret:e.client_secret}:void 0,!this.validateGoogleAPIsUrl("sts",e.token_url))throw new Error(`"${e.token_url}" is not a valid token url.`);this.stsCredential=new u8.StsCredentials(e.token_url,this.clientAuth),this.scopes=[om],this.cachedAccessToken=null,this.audience=e.audience,this.subjectTokenType=e.subject_token_type,this.quotaProjectId=e.quota_project_id,this.workforcePoolUserProject=e.workforce_pool_user_project;let n=new RegExp(d8);if(this.workforcePoolUserProject&&!this.audience.match(n))throw new Error("workforcePoolUserProject should not be set for non-workforce pool credentials.");if(typeof e.service_account_impersonation_url!="undefined"&&!this.validateGoogleAPIsUrl("iamcredentials",e.service_account_impersonation_url))throw new Error(`"${e.service_account_impersonation_url}" is not a valid service account impersonation url.`);this.serviceAccountImpersonationUrl=e.service_account_impersonation_url,typeof(r==null?void 0:r.eagerRefreshThresholdMillis)!="number"?this.eagerRefreshThresholdMillis=Ln.EXPIRATION_TIME_OFFSET:this.eagerRefreshThresholdMillis=r.eagerRefreshThresholdMillis,this.forceRefreshOnFailure=!!(r==null?void 0:r.forceRefreshOnFailure),this.projectId=null,this.projectNumber=this.getProjectNumber(this.audience)}getServiceAccountEmail(){var e;if(this.serviceAccountImpersonationUrl){let n=/serviceAccounts\/(?<email>[^:]+):generateAccessToken$/.exec(this.serviceAccountImpersonationUrl);return((e=n==null?void 0:n.groups)===null||e===void 0?void 0:e.email)||null}return null}setCredentials(e){super.setCredentials(e),this.cachedAccessToken=e}getAccessToken(){return P(this,null,function*(){return(!this.cachedAccessToken||this.isExpired(this.cachedAccessToken))&&(yield this.refreshAccessTokenAsync()),{token:this.cachedAccessToken.access_token,res:this.cachedAccessToken.res}})}getRequestHeaders(){return P(this,null,function*(){let r={Authorization:`Bearer ${(yield this.getAccessToken()).token}`};return this.addSharedMetadataHeaders(r)})}request(e,r){if(r)this.requestAsync(e).then(n=>r(null,n),n=>r(n,n.response));else return this.requestAsync(e)}getProjectId(){return P(this,null,function*(){let e=this.projectNumber||this.workforcePoolUserProject;if(this.projectId)return this.projectId;if(e){let r=yield this.getRequestHeaders(),n=yield this.transporter.request({headers:r,url:`${Ln.CLOUD_RESOURCE_MANAGER}${e}`,responseType:"json"});return this.projectId=n.data.projectId,this.projectId}return null})}requestAsync(e,r=!1){return P(this,null,function*(){let n;try{let i=yield this.getRequestHeaders();e.headers=e.headers||{},i&&i["x-goog-user-project"]&&(e.headers["x-goog-user-project"]=i["x-goog-user-project"]),i&&i.Authorization&&(e.headers.Authorization=i.Authorization),n=yield this.transporter.request(e)}catch(i){let a=i.response;if(a){let s=a.status,l=a.config.data instanceof o8.Readable;if(!r&&(s===401||s===403)&&!l&&this.forceRefreshOnFailure)return yield this.refreshAccessTokenAsync(),yield this.requestAsync(e,!0)}throw i}return n})}refreshAccessTokenAsync(){return P(this,null,function*(){let e=yield this.retrieveSubjectToken(),r={grantType:c8,audience:this.audience,requestedTokenType:f8,subjectToken:e,subjectTokenType:this.subjectTokenType,scope:this.serviceAccountImpersonationUrl?[om]:this.getScopesArray()},n=!this.clientAuth&&this.workforcePoolUserProject?{userProject:this.workforcePoolUserProject}:void 0,i=yield this.stsCredential.exchangeToken(r,void 0,n);return this.serviceAccountImpersonationUrl?this.cachedAccessToken=yield this.getImpersonatedAccessToken(i.access_token):i.expires_in?this.cachedAccessToken={access_token:i.access_token,expiry_date:new Date().getTime()+i.expires_in*1e3,res:i.res}:this.cachedAccessToken={access_token:i.access_token,res:i.res},this.credentials={},Object.assign(this.credentials,this.cachedAccessToken),delete this.credentials.res,this.emit("tokens",{refresh_token:null,expiry_date:this.cachedAccessToken.expiry_date,access_token:this.cachedAccessToken.access_token,token_type:"Bearer",id_token:null}),this.cachedAccessToken})}getProjectNumber(e){let r=e.match(/\/projects\/([^/]+)/);return r?r[1]:null}getImpersonatedAccessToken(e){return P(this,null,function*(){let r={url:this.serviceAccountImpersonationUrl,method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},data:{scope:this.getScopesArray()},responseType:"json"},n=yield this.transporter.request(r),i=n.data;return{access_token:i.accessToken,expiry_date:new Date(i.expireTime).getTime(),res:n}})}isExpired(e){let r=new Date().getTime();return e.expiry_date?r>=e.expiry_date-this.eagerRefreshThresholdMillis:!1}getScopesArray(){return typeof this.scopes=="string"?[this.scopes]:typeof this.scopes=="undefined"?[om]:this.scopes}validateGoogleAPIsUrl(e,r){let n;try{n=new URL(r)}catch(s){return!1}let i=n.hostname;if(n.protocol!=="https:")return!1;let a=[new RegExp("^"+lm+"\\."+e+rh),new RegExp("^"+e+rh),new RegExp("^"+e+"\\."+lm+rh),new RegExp("^"+lm+"\\-"+e+rh)];for(let s of a)if(i.match(s))return!0;return!1}};Ln.BaseExternalAccountClient=cx});var pm=de(nh=>{"use strict";var um,cm,fm;Object.defineProperty(nh,"__esModule",{value:!0});nh.IdentityPoolClient=void 0;var dm=require("fs"),hm=require("util"),h8=Tl(),p8=(0,hm.promisify)((um=dm.readFile)!==null&&um!==void 0?um:()=>{}),g8=(0,hm.promisify)((cm=dm.realpath)!==null&&cm!==void 0?cm:()=>{}),m8=(0,hm.promisify)((fm=dm.lstat)!==null&&fm!==void 0?fm:()=>{}),fx=class extends h8.BaseExternalAccountClient{constructor(e,r){var n,i;super(e,r);if(this.file=e.credential_source.file,this.url=e.credential_source.url,this.headers=e.credential_source.headers,!this.file&&!this.url)throw new Error('No valid Identity Pool "credential_source" provided');if(this.formatType=((n=e.credential_source.format)===null||n===void 0?void 0:n.type)||"text",this.formatSubjectTokenFieldName=(i=e.credential_source.format)===null||i===void 0?void 0:i.subject_token_field_name,this.formatType!=="json"&&this.formatType!=="text")throw new Error(`Invalid credential_source format "${this.formatType}"`);if(this.formatType==="json"&&!this.formatSubjectTokenFieldName)throw new Error("Missing subject_token_field_name for JSON credential_source format")}retrieveSubjectToken(){return P(this,null,function*(){return this.file?yield this.getTokenFromFile(this.file,this.formatType,this.formatSubjectTokenFieldName):yield this.getTokenFromUrl(this.url,this.formatType,this.formatSubjectTokenFieldName,this.headers)})}getTokenFromFile(e,r,n){return P(this,null,function*(){try{if(e=yield g8(e),!(yield m8(e)).isFile())throw new Error}catch(s){throw s instanceof Error&&(s.message=`The file at ${e} does not exist, or it is not a file. ${s.message}`),s}let i,a=yield p8(e,{encoding:"utf8"});if(r==="text"?i=a:r==="json"&&n&&(i=JSON.parse(a)[n]),!i)throw new Error("Unable to parse the subject_token from the credential_source file");return i})}getTokenFromUrl(e,r,n,i){return P(this,null,function*(){let a={url:e,method:"GET",headers:i,responseType:r},s;if(r==="text"?s=(yield this.transporter.request(a)).data:r==="json"&&n&&(s=(yield this.transporter.request(a)).data[n]),!s)throw new Error("Unable to parse the subject_token from the credential_source URL");return s})}};nh.IdentityPoolClient=fx});var gx=de(ih=>{"use strict";Object.defineProperty(ih,"__esModule",{value:!0});ih.AwsRequestSigner=void 0;var dx=$o(),hx="AWS4-HMAC-SHA256",y8="aws4_request",px=class{constructor(e,r){this.getCredentials=e,this.region=r,this.crypto=(0,dx.createCrypto)()}getRequestOptions(e){return P(this,null,function*(){if(!e.url)throw new Error('"url" is required in "amzOptions"');let r=typeof e.data=="object"?JSON.stringify(e.data):e.data,n=e.url,i=e.method||"GET",a=e.body||r,s=e.headers,l=yield this.getCredentials(),u=new URL(n),f=yield _8({crypto:this.crypto,host:u.host,canonicalUri:u.pathname,canonicalQuerystring:u.search.substr(1),method:i,region:this.region,securityCredentials:l,requestPayload:a,additionalAmzHeaders:s}),d=Object.assign(f.amzDate?{"x-amz-date":f.amzDate}:{},{Authorization:f.authorizationHeader,host:u.host},s||{});l.token&&Object.assign(d,{"x-amz-security-token":l.token});let h={url:n,method:i,headers:d};return typeof a!="undefined"&&(h.body=a),h})}};ih.AwsRequestSigner=px;function Xu(t,e,r){return P(this,null,function*(){return yield t.signWithHmacSha256(e,r)})}function v8(t,e,r,n,i){return P(this,null,function*(){let a=yield Xu(t,`AWS4${e}`,r),s=yield Xu(t,a,n),l=yield Xu(t,s,i);return yield Xu(t,l,"aws4_request")})}function _8(t){return P(this,null,function*(){let e=t.additionalAmzHeaders||{},r=t.requestPayload||"",n=t.host.split(".")[0],i=new Date,a=i.toISOString().replace(/[-:]/g,"").replace(/\.[0-9]+/,""),s=i.toISOString().replace(/[-]/g,"").replace(/T.*/,""),l={};Object.keys(e).forEach(k=>{l[k.toLowerCase()]=e[k]}),t.securityCredentials.token&&(l["x-amz-security-token"]=t.securityCredentials.token);let u=Object.assign({host:t.host},l.date?{}:{"x-amz-date":a},l),f="",d=Object.keys(u).sort();d.forEach(k=>{f+=`${k}:${u[k]}
`});let h=d.join(";"),g=yield t.crypto.sha256DigestHex(r),y=`${t.method}
${t.canonicalUri}
${t.canonicalQuerystring}
${f}
${h}
${g}`,m=`${s}/${t.region}/${n}/${y8}`,w=`${hx}
${a}
${m}
`+(yield t.crypto.sha256DigestHex(y)),_=yield v8(t.crypto,t.securityCredentials.secretAccessKey,s,t.region,n),E=yield Xu(t.crypto,_,w),b=`${hx} Credential=${t.securityCredentials.accessKeyId}/${m}, SignedHeaders=${h}, Signature=${(0,dx.fromArrayBufferToHex)(E)}`;return{amzDate:l.date?void 0:a,authorizationHeader:b,canonicalQuerystring:t.canonicalQuerystring}})}});var gm=de(ah=>{"use strict";Object.defineProperty(ah,"__esModule",{value:!0});ah.AwsClient=void 0;var w8=gx(),E8=Tl(),mx=class extends E8.BaseExternalAccountClient{constructor(e,r){var n;super(e,r);this.environmentId=e.credential_source.environment_id,this.regionUrl=e.credential_source.region_url,this.securityCredentialsUrl=e.credential_source.url,this.regionalCredVerificationUrl=e.credential_source.regional_cred_verification_url,this.imdsV2SessionTokenUrl=e.credential_source.imdsv2_session_token_url;let i=(n=this.environmentId)===null||n===void 0?void 0:n.match(/^(aws)(\d+)$/);if(!i||!this.regionalCredVerificationUrl)throw new Error('No valid AWS "credential_source" provided');if(parseInt(i[2],10)!==1)throw new Error(`aws version "${i[2]}" is not supported in the current build.`);this.awsRequestSigner=null,this.region=""}retrieveSubjectToken(){return P(this,null,function*(){if(!this.awsRequestSigner){let i={};this.imdsV2SessionTokenUrl&&(i["x-aws-ec2-metadata-token"]=yield this.getImdsV2SessionToken()),this.region=yield this.getAwsRegion(i),this.awsRequestSigner=new w8.AwsRequestSigner(()=>P(this,null,function*(){if(process.env.AWS_ACCESS_KEY_ID&&process.env.AWS_SECRET_ACCESS_KEY)return{accessKeyId:process.env.AWS_ACCESS_KEY_ID,secretAccessKey:process.env.AWS_SECRET_ACCESS_KEY,token:process.env.AWS_SESSION_TOKEN};let a=yield this.getAwsRoleName(i),s=yield this.getAwsSecurityCredentials(a,i);return{accessKeyId:s.AccessKeyId,secretAccessKey:s.SecretAccessKey,token:s.Token}}),this.region)}let e=yield this.awsRequestSigner.getRequestOptions({url:this.regionalCredVerificationUrl.replace("{region}",this.region),method:"POST"}),r=[],n=Object.assign({"x-goog-cloud-target-resource":this.audience},e.headers);for(let i in n)r.push({key:i,value:n[i]});return encodeURIComponent(JSON.stringify({url:e.url,method:e.method,headers:r}))})}getImdsV2SessionToken(){return P(this,null,function*(){let e={url:this.imdsV2SessionTokenUrl,method:"PUT",responseType:"text",headers:{"x-aws-ec2-metadata-token-ttl-seconds":"300"}};return(yield this.transporter.request(e)).data})}getAwsRegion(e){return P(this,null,function*(){if(process.env.AWS_REGION||process.env.AWS_DEFAULT_REGION)return process.env.AWS_REGION||process.env.AWS_DEFAULT_REGION;if(!this.regionUrl)throw new Error('Unable to determine AWS region due to missing "options.credential_source.region_url"');let r={url:this.regionUrl,method:"GET",responseType:"text",headers:e},n=yield this.transporter.request(r);return n.data.substr(0,n.data.length-1)})}getAwsRoleName(e){return P(this,null,function*(){if(!this.securityCredentialsUrl)throw new Error('Unable to determine AWS role name due to missing "options.credential_source.url"');let r={url:this.securityCredentialsUrl,method:"GET",responseType:"text",headers:e};return(yield this.transporter.request(r)).data})}getAwsSecurityCredentials(e,r){return P(this,null,function*(){return(yield this.transporter.request({url:`${this.securityCredentialsUrl}/${e}`,responseType:"json",headers:r})).data})}};ah.AwsClient=mx});var mm=de(sh=>{"use strict";Object.defineProperty(sh,"__esModule",{value:!0});sh.ExternalAccountClient=void 0;var C8=Tl(),b8=pm(),x8=gm(),yx=class{constructor(){throw new Error("ExternalAccountClients should be initialized via: ExternalAccountClient.fromJSON(), directly via explicit constructors, eg. new AwsClient(options), new IdentityPoolClient(options) or via new GoogleAuth(options).getClient()")}static fromJSON(e,r){var n;return e&&e.type===C8.EXTERNAL_ACCOUNT_TYPE?((n=e.credential_source)===null||n===void 0?void 0:n.environment_id)?new x8.AwsClient(e,r):new b8.IdentityPoolClient(e,r):null}};sh.ExternalAccountClient=yx});var wx=de(Al=>{"use strict";Object.defineProperty(Al,"__esModule",{value:!0});Al.GoogleAuth=Al.CLOUD_SDK_CLIENT_ID=void 0;var T8=require("child_process"),Ju=require("fs"),ym=Yf(),S8=require("os"),vm=require("path"),A8=$o(),k8=Tu(),I8=U0(),N8=F0(),R8=q0(),ao=im(),vx=am(),_x=mm(),Sl=Tl();Al.CLOUD_SDK_CLIENT_ID="764086051850-6qr4p6gpi6hn506pt8ejuq83di341hur.apps.googleusercontent.com";var _m=class{constructor(e){this.checkIsGCE=void 0,this.jsonContent=null,this.cachedCredential=null,e=e||{},this._cachedProjectId=e.projectId||null,this.cachedCredential=e.authClient||null,this.keyFilename=e.keyFilename||e.keyFile,this.scopes=e.scopes,this.jsonContent=e.credentials||null,this.clientOptions=e.clientOptions}get isGCE(){return this.checkIsGCE}setGapicJWTValues(e){e.defaultServicePath=this.defaultServicePath,e.useJWTAccessWithScope=this.useJWTAccessWithScope,e.defaultScopes=this.defaultScopes}getProjectId(e){if(e)this.getProjectIdAsync().then(r=>e(null,r),e);else return this.getProjectIdAsync()}getProjectIdAsync(){return this._cachedProjectId?Promise.resolve(this._cachedProjectId):(this._getDefaultProjectIdPromise||(this._getDefaultProjectIdPromise=new Promise((e,r)=>P(this,null,function*(){try{let n=this.getProductionProjectId()||(yield this.getFileProjectId())||(yield this.getDefaultServiceProjectId())||(yield this.getGCEProjectId())||(yield this.getExternalAccountClientProjectId());if(this._cachedProjectId=n,!n)throw new Error(`Unable to detect a Project Id in the current environment. 
To learn more about authentication and Google APIs, visit: 
https://cloud.google.com/docs/authentication/getting-started`);e(n)}catch(n){r(n)}}))),this._getDefaultProjectIdPromise)}getAnyScopes(){return this.scopes||this.defaultScopes}getApplicationDefault(e={},r){let n;if(typeof e=="function"?r=e:n=e,r)this.getApplicationDefaultAsync(n).then(i=>r(null,i.credential,i.projectId),r);else return this.getApplicationDefaultAsync(n)}getApplicationDefaultAsync(){return P(this,arguments,function*(e={}){if(this.cachedCredential)return{credential:this.cachedCredential,projectId:yield this.getProjectIdAsync()};let r,n;if(r=yield this._tryGetApplicationCredentialsFromEnvironmentVariable(e),r)return r instanceof ao.JWT?r.scopes=this.scopes:r instanceof Sl.BaseExternalAccountClient&&(r.scopes=this.getAnyScopes()),this.cachedCredential=r,n=yield this.getProjectId(),{credential:r,projectId:n};if(r=yield this._tryGetApplicationCredentialsFromWellKnownFile(e),r)return r instanceof ao.JWT?r.scopes=this.scopes:r instanceof Sl.BaseExternalAccountClient&&(r.scopes=this.getAnyScopes()),this.cachedCredential=r,n=yield this.getProjectId(),{credential:r,projectId:n};let i;try{i=yield this._checkIsGCE()}catch(a){throw a instanceof Error&&(a.message=`Unexpected error determining execution environment: ${a.message}`),a}if(!i)throw new Error("Could not load the default credentials. Browse to https://cloud.google.com/docs/authentication/getting-started for more information.");return e.scopes=this.getAnyScopes(),this.cachedCredential=new I8.Compute(e),n=yield this.getProjectId(),{projectId:n,credential:this.cachedCredential}})}_checkIsGCE(){return P(this,null,function*(){return this.checkIsGCE===void 0&&(this.checkIsGCE=yield ym.isAvailable()),this.checkIsGCE})}_tryGetApplicationCredentialsFromEnvironmentVariable(e){return P(this,null,function*(){let r=process.env.GOOGLE_APPLICATION_CREDENTIALS||process.env.google_application_credentials;if(!r||r.length===0)return null;try{return this._getApplicationCredentialsFromFilePath(r,e)}catch(n){throw n instanceof Error&&(n.message=`Unable to read the credential file specified by the GOOGLE_APPLICATION_CREDENTIALS environment variable: ${n.message}`),n}})}_tryGetApplicationCredentialsFromWellKnownFile(e){return P(this,null,function*(){let r=null;if(this._isWindows())r=process.env.APPDATA;else{let i=process.env.HOME;i&&(r=vm.join(i,".config"))}return r&&(r=vm.join(r,"gcloud","application_default_credentials.json"),Ju.existsSync(r)||(r=null)),r?yield this._getApplicationCredentialsFromFilePath(r,e):null})}_getApplicationCredentialsFromFilePath(n){return P(this,arguments,function*(e,r={}){if(!e||e.length===0)throw new Error("The file path is invalid.");try{if(e=Ju.realpathSync(e),!Ju.lstatSync(e).isFile())throw new Error}catch(a){throw a instanceof Error&&(a.message=`The file at ${e} does not exist, or it is not a file. ${a.message}`),a}let i=Ju.createReadStream(e);return this.fromStream(i,r)})}fromJSON(e,r){let n;if(!e)throw new Error("Must pass in a JSON object containing the Google auth settings.");return r=r||{},e.type==="authorized_user"?(n=new vx.UserRefreshClient(r),n.fromJSON(e)):e.type===Sl.EXTERNAL_ACCOUNT_TYPE?(n=_x.ExternalAccountClient.fromJSON(e,r),n.scopes=this.getAnyScopes()):(r.scopes=this.scopes,n=new ao.JWT(r),this.setGapicJWTValues(n),n.fromJSON(e)),n}_cacheClientFromJSON(e,r){let n;return r=r||{},e.type==="authorized_user"?(n=new vx.UserRefreshClient(r),n.fromJSON(e)):e.type===Sl.EXTERNAL_ACCOUNT_TYPE?(n=_x.ExternalAccountClient.fromJSON(e,r),n.scopes=this.getAnyScopes()):(r.scopes=this.scopes,n=new ao.JWT(r),this.setGapicJWTValues(n),n.fromJSON(e)),this.jsonContent=e,this.cachedCredential=n,n}fromStream(e,r={},n){let i={};if(typeof r=="function"?n=r:i=r,n)this.fromStreamAsync(e,i).then(a=>n(null,a),n);else return this.fromStreamAsync(e,i)}fromStreamAsync(e,r){return new Promise((n,i)=>{if(!e)throw new Error("Must pass in a stream containing the Google auth settings.");let a="";e.setEncoding("utf8").on("error",i).on("data",s=>a+=s).on("end",()=>{try{try{let s=JSON.parse(a),l=this._cacheClientFromJSON(s,r);return n(l)}catch(s){if(!this.keyFilename)throw s;let l=new ao.JWT(Vi(wn({},this.clientOptions),{keyFile:this.keyFilename}));return this.cachedCredential=l,this.setGapicJWTValues(l),n(l)}}catch(s){return i(s)}})})}fromAPIKey(e,r){r=r||{};let n=new ao.JWT(r);return n.fromAPIKey(e),n}_isWindows(){let e=S8.platform();return!!(e&&e.length>=3&&e.substring(0,3).toLowerCase()==="win")}getDefaultServiceProjectId(){return P(this,null,function*(){return new Promise(e=>{(0,T8.exec)("gcloud config config-helper --format json",(r,n)=>{if(!r&&n)try{let i=JSON.parse(n).configuration.properties.core.project;e(i);return}catch(i){}e(null)})})})}getProductionProjectId(){return process.env.GCLOUD_PROJECT||process.env.GOOGLE_CLOUD_PROJECT||process.env.gcloud_project||process.env.google_cloud_project}getFileProjectId(){return P(this,null,function*(){if(this.cachedCredential)return this.cachedCredential.projectId;if(this.keyFilename){let r=yield this.getClient();if(r&&r.projectId)return r.projectId}let e=yield this._tryGetApplicationCredentialsFromEnvironmentVariable();return e?e.projectId:null})}getExternalAccountClientProjectId(){return P(this,null,function*(){return!this.jsonContent||this.jsonContent.type!==Sl.EXTERNAL_ACCOUNT_TYPE?null:yield(yield this.getClient()).getProjectId()})}getGCEProjectId(){return P(this,null,function*(){try{return yield ym.project("project-id")}catch(e){return null}})}getCredentials(e){if(e)this.getCredentialsAsync().then(r=>e(null,r),e);else return this.getCredentialsAsync()}getCredentialsAsync(){return P(this,null,function*(){let e=yield this.getClient();if(e instanceof Sl.BaseExternalAccountClient){let i=e.getServiceAccountEmail();if(i)return{client_email:i}}if(this.jsonContent)return{client_email:this.jsonContent.client_email,private_key:this.jsonContent.private_key};if(!(yield this._checkIsGCE()))throw new Error("Unknown error.");let n=yield ym.instance({property:"service-accounts/",params:{recursive:"true"}});if(!n||!n.default||!n.default.email)throw new Error("Failure from metadata server.");return{client_email:n.default.email}})}getClient(){return P(this,null,function*(){if(!this.cachedCredential)if(this.jsonContent)this._cacheClientFromJSON(this.jsonContent,this.clientOptions);else if(this.keyFilename){let e=vm.resolve(this.keyFilename),r=Ju.createReadStream(e);yield this.fromStreamAsync(r,this.clientOptions)}else yield this.getApplicationDefaultAsync(this.clientOptions);return this.cachedCredential})}getIdTokenClient(e){return P(this,null,function*(){let r=yield this.getClient();if(!("fetchIdToken"in r))throw new Error("Cannot fetch ID token in this environment, use GCE or set the GOOGLE_APPLICATION_CREDENTIALS environment variable to a service account credentials JSON file.");return new N8.IdTokenClient({targetAudience:e,idTokenProvider:r})})}getAccessToken(){return P(this,null,function*(){return(yield(yield this.getClient()).getAccessToken()).token})}getRequestHeaders(e){return P(this,null,function*(){return(yield this.getClient()).getRequestHeaders(e)})}authorizeRequest(e){return P(this,null,function*(){e=e||{};let r=e.url||e.uri,i=yield(yield this.getClient()).getRequestHeaders(r);return e.headers=Object.assign(e.headers||{},i),e})}request(e){return P(this,null,function*(){return(yield this.getClient()).request(e)})}getEnv(){return(0,R8.getEnv)()}sign(e){return P(this,null,function*(){let r=yield this.getClient(),n=(0,A8.createCrypto)();if(r instanceof ao.JWT&&r.key)return yield n.sign(r.key,e);if(!(yield this.getProjectId()))throw new Error("Cannot sign data without a project ID.");let a=yield this.getCredentials();if(!a.client_email)throw new Error("Cannot sign data without `client_email`.");return this.signBlob(n,a.client_email,e)})}signBlob(e,r,n){return P(this,null,function*(){let i=`https://iamcredentials.googleapis.com/v1/projects/-/serviceAccounts/${r}:signBlob`;return(yield this.request({method:"POST",url:i,data:{payload:e.encodeBase64StringUtf8(n)}})).data.signedBlob})}};Al.GoogleAuth=_m;_m.DefaultTransporter=k8.DefaultTransporter});var Cx=de(oh=>{"use strict";Object.defineProperty(oh,"__esModule",{value:!0});oh.IAMAuth=void 0;var Ex=class{constructor(e,r){this.selector=e,this.token=r,this.selector=e,this.token=r}getRequestHeaders(){return{"x-goog-iam-authority-selector":this.selector,"x-goog-iam-authorization-token":this.token}}};oh.IAMAuth=Ex});var Tx=de(lh=>{"use strict";Object.defineProperty(lh,"__esModule",{value:!0});lh.Impersonated=void 0;var bx=Ys(),D8=Jo(),xx=class extends bx.OAuth2Client{constructor(e={}){var r,n,i,a,s,l;super(e);this.credentials={expiry_date:1,refresh_token:"impersonated-placeholder"},this.sourceClient=(r=e.sourceClient)!==null&&r!==void 0?r:new bx.OAuth2Client,this.targetPrincipal=(n=e.targetPrincipal)!==null&&n!==void 0?n:"",this.delegates=(i=e.delegates)!==null&&i!==void 0?i:[],this.targetScopes=(a=e.targetScopes)!==null&&a!==void 0?a:[],this.lifetime=(s=e.lifetime)!==null&&s!==void 0?s:3600,this.endpoint=(l=e.endpoint)!==null&&l!==void 0?l:"https://iamcredentials.googleapis.com"}refreshToken(e){return P(this,null,function*(){var r,n,i,a,s,l;try{yield this.sourceClient.getAccessToken();let u="projects/-/serviceAccounts/"+this.targetPrincipal,f=`${this.endpoint}/v1/${u}:generateAccessToken`,d={delegates:this.delegates,scope:this.targetScopes,lifetime:this.lifetime+"s"},h=yield this.sourceClient.request({url:f,data:d,method:"POST"}),g=h.data;return this.credentials.access_token=g.accessToken,this.credentials.expiry_date=Date.parse(g.expireTime),{tokens:this.credentials,res:h}}catch(u){if(!(u instanceof Error))throw u;let f=0,d="";throw u instanceof D8.GaxiosError&&(f=(i=(n=(r=u==null?void 0:u.response)===null||r===void 0?void 0:r.data)===null||n===void 0?void 0:n.error)===null||i===void 0?void 0:i.status,d=(l=(s=(a=u==null?void 0:u.response)===null||a===void 0?void 0:a.data)===null||s===void 0?void 0:s.error)===null||l===void 0?void 0:l.message),f&&d?(u.message=`${f}: unable to impersonate: ${d}`,u):(u.message=`unable to impersonate: ${u}`,u)}})}};lh.Impersonated=xx});var Ax=de(Ii=>{"use strict";Object.defineProperty(Ii,"__esModule",{value:!0});Ii.DownscopedClient=Ii.EXPIRATION_TIME_OFFSET=Ii.MAX_ACCESS_BOUNDARY_RULES_COUNT=void 0;var B8=require("stream"),O8=Su(),L8=sm(),P8="urn:ietf:params:oauth:grant-type:token-exchange",M8="urn:ietf:params:oauth:token-type:access_token",U8="urn:ietf:params:oauth:token-type:access_token",F8="https://sts.googleapis.com/v1/token";Ii.MAX_ACCESS_BOUNDARY_RULES_COUNT=10;Ii.EXPIRATION_TIME_OFFSET=5*60*1e3;var Sx=class extends O8.AuthClient{constructor(e,r,n,i){super();if(this.authClient=e,this.credentialAccessBoundary=r,r.accessBoundary.accessBoundaryRules.length===0)throw new Error("At least one access boundary rule needs to be defined.");if(r.accessBoundary.accessBoundaryRules.length>Ii.MAX_ACCESS_BOUNDARY_RULES_COUNT)throw new Error(`The provided access boundary has more than ${Ii.MAX_ACCESS_BOUNDARY_RULES_COUNT} access boundary rules.`);for(let a of r.accessBoundary.accessBoundaryRules)if(a.availablePermissions.length===0)throw new Error("At least one permission should be defined in access boundary rules.");this.stsCredential=new L8.StsCredentials(F8),this.cachedDownscopedAccessToken=null,typeof(n==null?void 0:n.eagerRefreshThresholdMillis)!="number"?this.eagerRefreshThresholdMillis=Ii.EXPIRATION_TIME_OFFSET:this.eagerRefreshThresholdMillis=n.eagerRefreshThresholdMillis,this.forceRefreshOnFailure=!!(n==null?void 0:n.forceRefreshOnFailure),this.quotaProjectId=i}setCredentials(e){if(!e.expiry_date)throw new Error("The access token expiry_date field is missing in the provided credentials.");super.setCredentials(e),this.cachedDownscopedAccessToken=e}getAccessToken(){return P(this,null,function*(){return(!this.cachedDownscopedAccessToken||this.isExpired(this.cachedDownscopedAccessToken))&&(yield this.refreshAccessTokenAsync()),{token:this.cachedDownscopedAccessToken.access_token,expirationTime:this.cachedDownscopedAccessToken.expiry_date,res:this.cachedDownscopedAccessToken.res}})}getRequestHeaders(){return P(this,null,function*(){let r={Authorization:`Bearer ${(yield this.getAccessToken()).token}`};return this.addSharedMetadataHeaders(r)})}request(e,r){if(r)this.requestAsync(e).then(n=>r(null,n),n=>r(n,n.response));else return this.requestAsync(e)}requestAsync(e,r=!1){return P(this,null,function*(){let n;try{let i=yield this.getRequestHeaders();e.headers=e.headers||{},i&&i["x-goog-user-project"]&&(e.headers["x-goog-user-project"]=i["x-goog-user-project"]),i&&i.Authorization&&(e.headers.Authorization=i.Authorization),n=yield this.transporter.request(e)}catch(i){let a=i.response;if(a){let s=a.status,l=a.config.data instanceof B8.Readable;if(!r&&(s===401||s===403)&&!l&&this.forceRefreshOnFailure)return yield this.refreshAccessTokenAsync(),yield this.requestAsync(e,!0)}throw i}return n})}refreshAccessTokenAsync(){return P(this,null,function*(){var e;let r=(yield this.authClient.getAccessToken()).token,n={grantType:P8,requestedTokenType:M8,subjectToken:r,subjectTokenType:U8},i=yield this.stsCredential.exchangeToken(n,void 0,this.credentialAccessBoundary),a=((e=this.authClient.credentials)===null||e===void 0?void 0:e.expiry_date)||null,s=i.expires_in?new Date().getTime()+i.expires_in*1e3:a;return this.cachedDownscopedAccessToken={access_token:i.access_token,expiry_date:s,res:i.res},this.credentials={},Object.assign(this.credentials,this.cachedDownscopedAccessToken),delete this.credentials.res,this.emit("tokens",{refresh_token:null,expiry_date:this.cachedDownscopedAccessToken.expiry_date,access_token:this.cachedDownscopedAccessToken.access_token,token_type:"Bearer",id_token:null}),this.cachedDownscopedAccessToken})}isExpired(e){let r=new Date().getTime();return e.expiry_date?r>=e.expiry_date-this.eagerRefreshThresholdMillis:!1}};Ii.DownscopedClient=Sx});var Nx=de(lt=>{"use strict";Object.defineProperty(lt,"__esModule",{value:!0});lt.GoogleAuth=lt.auth=lt.DefaultTransporter=lt.DownscopedClient=lt.BaseExternalAccountClient=lt.ExternalAccountClient=lt.IdentityPoolClient=lt.AwsClient=lt.UserRefreshClient=lt.LoginTicket=lt.OAuth2Client=lt.CodeChallengeMethod=lt.Impersonated=lt.JWT=lt.JWTAccess=lt.IdTokenClient=lt.IAMAuth=lt.GCPEnv=lt.Compute=lt.AuthClient=void 0;var kx=wx();Object.defineProperty(lt,"GoogleAuth",{enumerable:!0,get:function(){return kx.GoogleAuth}});var q8=Su();Object.defineProperty(lt,"AuthClient",{enumerable:!0,get:function(){return q8.AuthClient}});var G8=U0();Object.defineProperty(lt,"Compute",{enumerable:!0,get:function(){return G8.Compute}});var V8=q0();Object.defineProperty(lt,"GCPEnv",{enumerable:!0,get:function(){return V8.GCPEnv}});var H8=Cx();Object.defineProperty(lt,"IAMAuth",{enumerable:!0,get:function(){return H8.IAMAuth}});var K8=F0();Object.defineProperty(lt,"IdTokenClient",{enumerable:!0,get:function(){return K8.IdTokenClient}});var j8=nm();Object.defineProperty(lt,"JWTAccess",{enumerable:!0,get:function(){return j8.JWTAccess}});var Y8=im();Object.defineProperty(lt,"JWT",{enumerable:!0,get:function(){return Y8.JWT}});var W8=Tx();Object.defineProperty(lt,"Impersonated",{enumerable:!0,get:function(){return W8.Impersonated}});var Ix=Ys();Object.defineProperty(lt,"CodeChallengeMethod",{enumerable:!0,get:function(){return Ix.CodeChallengeMethod}});Object.defineProperty(lt,"OAuth2Client",{enumerable:!0,get:function(){return Ix.OAuth2Client}});var z8=P0();Object.defineProperty(lt,"LoginTicket",{enumerable:!0,get:function(){return z8.LoginTicket}});var Q8=am();Object.defineProperty(lt,"UserRefreshClient",{enumerable:!0,get:function(){return Q8.UserRefreshClient}});var X8=gm();Object.defineProperty(lt,"AwsClient",{enumerable:!0,get:function(){return X8.AwsClient}});var J8=pm();Object.defineProperty(lt,"IdentityPoolClient",{enumerable:!0,get:function(){return J8.IdentityPoolClient}});var Z8=mm();Object.defineProperty(lt,"ExternalAccountClient",{enumerable:!0,get:function(){return Z8.ExternalAccountClient}});var $8=Tl();Object.defineProperty(lt,"BaseExternalAccountClient",{enumerable:!0,get:function(){return $8.BaseExternalAccountClient}});var eF=Ax();Object.defineProperty(lt,"DownscopedClient",{enumerable:!0,get:function(){return eF.DownscopedClient}});var tF=Tu();Object.defineProperty(lt,"DefaultTransporter",{enumerable:!0,get:function(){return tF.DefaultTransporter}});var rF=new kx.GoogleAuth;lt.auth=rF});var Dx=de((yH,Rx)=>{Rx.exports=nF;function nF(t){var e={};t.on("connection",function(r){var n=r.remoteAddress+":"+r.remotePort;e[n]=r,r.on("close",function(){delete e[n]})}),t.destroy=function(r){t.close(r);for(var n in e)e[n].destroy()}}});var mh=de(Et=>{"use strict";Object.defineProperty(Et,"__esModule",{value:!0});var vr=require("obsidian"),Um="YYYY-MM-DD",Fm="gggg-[W]ww",cT="YYYY-MM",fT="YYYY-[Q]Q",dT="YYYY";function lc(t){var r,n;let e=window.app.plugins.getPlugin("periodic-notes");return e&&((n=(r=e.settings)==null?void 0:r[t])==null?void 0:n.enabled)}function uc(){var t,e,r,n;try{let{internalPlugins:i,plugins:a}=window.app;if(lc("daily")){let{format:f,folder:d,template:h}=((e=(t=a.getPlugin("periodic-notes"))==null?void 0:t.settings)==null?void 0:e.daily)||{};return{format:f||Um,folder:(d==null?void 0:d.trim())||"",template:(h==null?void 0:h.trim())||""}}let{folder:s,format:l,template:u}=((n=(r=i.getPluginById("daily-notes"))==null?void 0:r.instance)==null?void 0:n.options)||{};return{format:l||Um,folder:(s==null?void 0:s.trim())||"",template:(u==null?void 0:u.trim())||""}}catch(i){console.info("No custom daily note settings found!",i)}}function cc(){var t,e,r,n,i,a,s;try{let l=window.app.plugins,u=(t=l.getPlugin("calendar"))==null?void 0:t.options,f=(r=(e=l.getPlugin("periodic-notes"))==null?void 0:e.settings)==null?void 0:r.weekly;if(lc("weekly"))return{format:f.format||Fm,folder:((n=f.folder)==null?void 0:n.trim())||"",template:((i=f.template)==null?void 0:i.trim())||""};let d=u||{};return{format:d.weeklyNoteFormat||Fm,folder:((a=d.weeklyNoteFolder)==null?void 0:a.trim())||"",template:((s=d.weeklyNoteTemplate)==null?void 0:s.trim())||""}}catch(l){console.info("No custom weekly note settings found!",l)}}function fc(){var e,r,n,i;let t=window.app.plugins;try{let a=lc("monthly")&&((r=(e=t.getPlugin("periodic-notes"))==null?void 0:e.settings)==null?void 0:r.monthly)||{};return{format:a.format||cT,folder:((n=a.folder)==null?void 0:n.trim())||"",template:((i=a.template)==null?void 0:i.trim())||""}}catch(a){console.info("No custom monthly note settings found!",a)}}function dc(){var e,r,n,i;let t=window.app.plugins;try{let a=lc("quarterly")&&((r=(e=t.getPlugin("periodic-notes"))==null?void 0:e.settings)==null?void 0:r.quarterly)||{};return{format:a.format||fT,folder:((n=a.folder)==null?void 0:n.trim())||"",template:((i=a.template)==null?void 0:i.trim())||""}}catch(a){console.info("No custom quarterly note settings found!",a)}}function hc(){var e,r,n,i;let t=window.app.plugins;try{let a=lc("yearly")&&((r=(e=t.getPlugin("periodic-notes"))==null?void 0:e.settings)==null?void 0:r.yearly)||{};return{format:a.format||dT,folder:((n=a.folder)==null?void 0:n.trim())||"",template:((i=a.template)==null?void 0:i.trim())||""}}catch(a){console.info("No custom yearly note settings found!",a)}}function hT(...t){let e=[];for(let n=0,i=t.length;n<i;n++)e=e.concat(t[n].split("/"));let r=[];for(let n=0,i=e.length;n<i;n++){let a=e[n];!a||a==="."||r.push(a)}return e[0]===""&&r.unshift(""),r.join("/")}function GF(t){let e=t.substring(t.lastIndexOf("/")+1);return e.lastIndexOf(".")!=-1&&(e=e.substring(0,e.lastIndexOf("."))),e}function VF(t){return P(this,null,function*(){let e=t.replace(/\\/g,"/").split("/");if(e.pop(),e.length){let r=hT(...e);window.app.vault.getAbstractFileByPath(r)||(yield window.app.vault.createFolder(r))}})}function pc(t,e){return P(this,null,function*(){e.endsWith(".md")||(e+=".md");let r=vr.normalizePath(hT(t,e));return yield VF(r),r})}function Bl(t){return P(this,null,function*(){let{metadataCache:e,vault:r}=window.app,n=vr.normalizePath(t);if(n==="/")return Promise.resolve(["",null]);try{let i=e.getFirstLinkpathDest(n,""),a=yield r.cachedRead(i),s=window.app.foldManager.load(i);return[a,s]}catch(i){return console.error(`Failed to read the daily note template '${n}'`,i),new vr.Notice("Failed to read the daily note template"),["",null]}})}function Oi(t,e="day"){let r=t.clone().startOf(e).format();return`${e}-${r}`}function pT(t){return t.replace(/\[[^\]]*\]/g,"")}function HF(t,e){if(e==="week"){let r=pT(t);return/w{1,2}/i.test(r)&&(/M{1,4}/.test(r)||/D{1,4}/.test(r))}return!1}function Ol(t,e){return gT(t.basename,e)}function KF(t,e){return gT(GF(t),e)}function gT(t,e){let n={day:uc,week:cc,month:fc,quarter:dc,year:hc}[e]().format.split("/").pop(),i=window.moment(t,n,!0);if(!i.isValid())return null;if(HF(n,e)&&e==="week"){let a=pT(n);if(/w{1,2}/i.test(a))return window.moment(t,n.replace(/M{1,4}/g,"").replace(/D{1,4}/g,""),!1)}return i}var mT=class extends Error{};function yT(t){return P(this,null,function*(){let e=window.app,{vault:r}=e,n=window.moment,{template:i,format:a,folder:s}=uc(),[l,u]=yield Bl(i),f=t.format(a),d=yield pc(s,f);try{let h=yield r.create(d,l.replace(/{{\s*date\s*}}/gi,f).replace(/{{\s*time\s*}}/gi,n().format("HH:mm")).replace(/{{\s*title\s*}}/gi,f).replace(/{{\s*(date|time)\s*(([+-]\d+)([yqmwdhs]))?\s*(:.+?)?}}/gi,(g,y,m,w,_,E)=>{let b=n(),k=t.clone().set({hour:b.get("hour"),minute:b.get("minute"),second:b.get("second")});return m&&k.add(parseInt(w,10),_),E?k.format(E.substring(1).trim()):k.format(a)}).replace(/{{\s*yesterday\s*}}/gi,t.clone().subtract(1,"day").format(a)).replace(/{{\s*tomorrow\s*}}/gi,t.clone().add(1,"d").format(a)));return e.foldManager.save(h,u),h}catch(h){console.error(`Failed to create file: '${d}'`,h),new vr.Notice("Unable to create new file.")}})}function jF(t,e){var r;return(r=e[Oi(t,"day")])!=null?r:null}function YF(){let{vault:t}=window.app,{folder:e}=uc(),r=t.getAbstractFileByPath(vr.normalizePath(e));if(!r)throw new mT("Failed to find daily notes folder");let n={};return vr.Vault.recurseChildren(r,i=>{if(i instanceof vr.TFile){let a=Ol(i,"day");if(a){let s=Oi(a,"day");n[s]=i}}}),n}var vT=class extends Error{};function WF(){let{moment:t}=window,e=t.localeData()._week.dow,r=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"];for(;e;)r.push(r.shift()),e--;return r}function zF(t){return WF().indexOf(t.toLowerCase())}function _T(t){return P(this,null,function*(){let{vault:e}=window.app,{template:r,format:n,folder:i}=cc(),[a,s]=yield Bl(r),l=t.format(n),u=yield pc(i,l);try{let f=yield e.create(u,a.replace(/{{\s*(date|time)\s*(([+-]\d+)([yqmwdhs]))?\s*(:.+?)?}}/gi,(d,h,g,y,m,w)=>{let _=window.moment(),E=t.clone().set({hour:_.get("hour"),minute:_.get("minute"),second:_.get("second")});return g&&E.add(parseInt(y,10),m),w?E.format(w.substring(1).trim()):E.format(n)}).replace(/{{\s*title\s*}}/gi,l).replace(/{{\s*time\s*}}/gi,window.moment().format("HH:mm")).replace(/{{\s*(sunday|monday|tuesday|wednesday|thursday|friday|saturday)\s*:(.*?)}}/gi,(d,h,g)=>{let y=zF(h);return t.weekday(y).format(g.trim())}));return window.app.foldManager.save(f,s),f}catch(f){console.error(`Failed to create file: '${u}'`,f),new vr.Notice("Unable to create new file.")}})}function QF(t,e){var r;return(r=e[Oi(t,"week")])!=null?r:null}function XF(){let t={};if(!xT())return t;let{vault:e}=window.app,{folder:r}=cc(),n=e.getAbstractFileByPath(vr.normalizePath(r));if(!n)throw new vT("Failed to find weekly notes folder");return vr.Vault.recurseChildren(n,i=>{if(i instanceof vr.TFile){let a=Ol(i,"week");if(a){let s=Oi(a,"week");t[s]=i}}}),t}var wT=class extends Error{};function ET(t){return P(this,null,function*(){let{vault:e}=window.app,{template:r,format:n,folder:i}=fc(),[a,s]=yield Bl(r),l=t.format(n),u=yield pc(i,l);try{let f=yield e.create(u,a.replace(/{{\s*(date|time)\s*(([+-]\d+)([yqmwdhs]))?\s*(:.+?)?}}/gi,(d,h,g,y,m,w)=>{let _=window.moment(),E=t.clone().set({hour:_.get("hour"),minute:_.get("minute"),second:_.get("second")});return g&&E.add(parseInt(y,10),m),w?E.format(w.substring(1).trim()):E.format(n)}).replace(/{{\s*date\s*}}/gi,l).replace(/{{\s*time\s*}}/gi,window.moment().format("HH:mm")).replace(/{{\s*title\s*}}/gi,l));return window.app.foldManager.save(f,s),f}catch(f){console.error(`Failed to create file: '${u}'`,f),new vr.Notice("Unable to create new file.")}})}function JF(t,e){var r;return(r=e[Oi(t,"month")])!=null?r:null}function ZF(){let t={};if(!TT())return t;let{vault:e}=window.app,{folder:r}=fc(),n=e.getAbstractFileByPath(vr.normalizePath(r));if(!n)throw new wT("Failed to find monthly notes folder");return vr.Vault.recurseChildren(n,i=>{if(i instanceof vr.TFile){let a=Ol(i,"month");if(a){let s=Oi(a,"month");t[s]=i}}}),t}var CT=class extends Error{};function $F(t){return P(this,null,function*(){let{vault:e}=window.app,{template:r,format:n,folder:i}=dc(),[a,s]=yield Bl(r),l=t.format(n),u=yield pc(i,l);try{let f=yield e.create(u,a.replace(/{{\s*(date|time)\s*(([+-]\d+)([yqmwdhs]))?\s*(:.+?)?}}/gi,(d,h,g,y,m,w)=>{let _=window.moment(),E=t.clone().set({hour:_.get("hour"),minute:_.get("minute"),second:_.get("second")});return g&&E.add(parseInt(y,10),m),w?E.format(w.substring(1).trim()):E.format(n)}).replace(/{{\s*date\s*}}/gi,l).replace(/{{\s*time\s*}}/gi,window.moment().format("HH:mm")).replace(/{{\s*title\s*}}/gi,l));return window.app.foldManager.save(f,s),f}catch(f){console.error(`Failed to create file: '${u}'`,f),new vr.Notice("Unable to create new file.")}})}function eq(t,e){var r;return(r=e[Oi(t,"quarter")])!=null?r:null}function tq(){let t={};if(!ST())return t;let{vault:e}=window.app,{folder:r}=dc(),n=e.getAbstractFileByPath(vr.normalizePath(r));if(!n)throw new CT("Failed to find quarterly notes folder");return vr.Vault.recurseChildren(n,i=>{if(i instanceof vr.TFile){let a=Ol(i,"quarter");if(a){let s=Oi(a,"quarter");t[s]=i}}}),t}var bT=class extends Error{};function rq(t){return P(this,null,function*(){let{vault:e}=window.app,{template:r,format:n,folder:i}=hc(),[a,s]=yield Bl(r),l=t.format(n),u=yield pc(i,l);try{let f=yield e.create(u,a.replace(/{{\s*(date|time)\s*(([+-]\d+)([yqmwdhs]))?\s*(:.+?)?}}/gi,(d,h,g,y,m,w)=>{let _=window.moment(),E=t.clone().set({hour:_.get("hour"),minute:_.get("minute"),second:_.get("second")});return g&&E.add(parseInt(y,10),m),w?E.format(w.substring(1).trim()):E.format(n)}).replace(/{{\s*date\s*}}/gi,l).replace(/{{\s*time\s*}}/gi,window.moment().format("HH:mm")).replace(/{{\s*title\s*}}/gi,l));return window.app.foldManager.save(f,s),f}catch(f){console.error(`Failed to create file: '${u}'`,f),new vr.Notice("Unable to create new file.")}})}function nq(t,e){var r;return(r=e[Oi(t,"year")])!=null?r:null}function iq(){let t={};if(!AT())return t;let{vault:e}=window.app,{folder:r}=hc(),n=e.getAbstractFileByPath(vr.normalizePath(r));if(!n)throw new bT("Failed to find yearly notes folder");return vr.Vault.recurseChildren(n,i=>{if(i instanceof vr.TFile){let a=Ol(i,"year");if(a){let s=Oi(a,"year");t[s]=i}}}),t}function aq(){var n,i;let{app:t}=window,e=t.internalPlugins.plugins["daily-notes"];if(e&&e.enabled)return!0;let r=t.plugins.getPlugin("periodic-notes");return r&&((i=(n=r.settings)==null?void 0:n.daily)==null?void 0:i.enabled)}function xT(){var r,n;let{app:t}=window;if(t.plugins.getPlugin("calendar"))return!0;let e=t.plugins.getPlugin("periodic-notes");return e&&((n=(r=e.settings)==null?void 0:r.weekly)==null?void 0:n.enabled)}function TT(){var r,n;let{app:t}=window,e=t.plugins.getPlugin("periodic-notes");return e&&((n=(r=e.settings)==null?void 0:r.monthly)==null?void 0:n.enabled)}function ST(){var r,n;let{app:t}=window,e=t.plugins.getPlugin("periodic-notes");return e&&((n=(r=e.settings)==null?void 0:r.quarterly)==null?void 0:n.enabled)}function AT(){var r,n;let{app:t}=window,e=t.plugins.getPlugin("periodic-notes");return e&&((n=(r=e.settings)==null?void 0:r.yearly)==null?void 0:n.enabled)}function sq(t){return{day:uc,week:cc,month:fc,quarter:dc,year:hc}[t]()}function oq(t,e){return{day:yT,month:ET,week:_T}[t](e)}Et.DEFAULT_DAILY_NOTE_FORMAT=Um;Et.DEFAULT_MONTHLY_NOTE_FORMAT=cT;Et.DEFAULT_QUARTERLY_NOTE_FORMAT=fT;Et.DEFAULT_WEEKLY_NOTE_FORMAT=Fm;Et.DEFAULT_YEARLY_NOTE_FORMAT=dT;Et.appHasDailyNotesPluginLoaded=aq;Et.appHasMonthlyNotesPluginLoaded=TT;Et.appHasQuarterlyNotesPluginLoaded=ST;Et.appHasWeeklyNotesPluginLoaded=xT;Et.appHasYearlyNotesPluginLoaded=AT;Et.createDailyNote=yT;Et.createMonthlyNote=ET;Et.createPeriodicNote=oq;Et.createQuarterlyNote=$F;Et.createWeeklyNote=_T;Et.createYearlyNote=rq;Et.getAllDailyNotes=YF;Et.getAllMonthlyNotes=ZF;Et.getAllQuarterlyNotes=tq;Et.getAllWeeklyNotes=XF;Et.getAllYearlyNotes=iq;Et.getDailyNote=jF;Et.getDailyNoteSettings=uc;Et.getDateFromFile=Ol;Et.getDateFromPath=KF;Et.getDateUID=Oi;Et.getMonthlyNote=JF;Et.getMonthlyNoteSettings=fc;Et.getPeriodicNoteSettings=sq;Et.getQuarterlyNote=eq;Et.getQuarterlyNoteSettings=dc;Et.getTemplateInfo=Bl;Et.getWeeklyNote=QF;Et.getWeeklyNoteSettings=cc;Et.getYearlyNote=nq;Et.getYearlyNoteSettings=hc});var Pa=de((Ll,gc)=>{(function(){var t,e="4.17.21",r=200,n="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",i="Expected a function",a="Invalid `variable` option passed into `_.template`",s="__lodash_hash_undefined__",l=500,u="__lodash_placeholder__",f=1,d=2,h=4,g=1,y=2,m=1,w=2,_=4,E=8,b=16,k=32,O=64,R=128,B=256,ne=512,M=30,G="...",re=800,se=16,ye=1,Ae=2,Je=3,De=1/0,me=9007199254740991,te=17976931348623157e292,Fe=0/0,et=4294967295,ct=et-1,$e=et>>>1,ft=[["ary",R],["bind",m],["bindKey",w],["curry",E],["curryRight",b],["flip",ne],["partial",k],["partialRight",O],["rearg",B]],ue="[object Arguments]",Dt="[object Array]",Bt="[object AsyncFunction]",rt="[object Boolean]",nt="[object Date]",dt="[object DOMException]",I="[object Error]",D="[object Function]",L="[object GeneratorFunction]",j="[object Map]",H="[object Number]",Q="[object Null]",J="[object Object]",Y="[object Promise]",X="[object Proxy]",ie="[object RegExp]",Z="[object Set]",he="[object String]",Le="[object Symbol]",Ue="[object Undefined]",ht="[object WeakMap]",Qt="[object WeakSet]",Xt="[object ArrayBuffer]",it="[object DataView]",Ot="[object Float32Array]",gr="[object Float64Array]",ja="[object Int8Array]",Ns="[object Int16Array]",Rs="[object Int32Array]",kn="[object Uint8Array]",pa="[object Uint8ClampedArray]",un="[object Uint16Array]",Rr="[object Uint32Array]",fr=/\b__p \+= '';/g,xk=/\b(__p \+=) '' \+/g,Tk=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Ny=/&(?:amp|lt|gt|quot|#39);/g,Ry=/[&<>"']/g,Sk=RegExp(Ny.source),Ak=RegExp(Ry.source),kk=/<%-([\s\S]+?)%>/g,Ik=/<%([\s\S]+?)%>/g,Dy=/<%=([\s\S]+?)%>/g,Nk=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Rk=/^\w*$/,Dk=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,np=/[\\^$.*+?()[\]{}|]/g,Bk=RegExp(np.source),ip=/^\s+/,Ok=/\s/,Lk=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Pk=/\{\n\/\* \[wrapped with (.+)\] \*/,Mk=/,? & /,Uk=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Fk=/[()=,{}\[\]\/\s]/,qk=/\\(\\)?/g,Gk=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,By=/\w*$/,Vk=/^[-+]0x[0-9a-f]+$/i,Hk=/^0b[01]+$/i,Kk=/^\[object .+?Constructor\]$/,jk=/^0o[0-7]+$/i,Yk=/^(?:0|[1-9]\d*)$/,Wk=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Gc=/($^)/,zk=/['\n\r\u2028\u2029\\]/g,Vc="\\ud800-\\udfff",Qk="\\u0300-\\u036f",Xk="\\ufe20-\\ufe2f",Jk="\\u20d0-\\u20ff",Oy=Qk+Xk+Jk,Ly="\\u2700-\\u27bf",Py="a-z\\xdf-\\xf6\\xf8-\\xff",Zk="\\xac\\xb1\\xd7\\xf7",$k="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",eI="\\u2000-\\u206f",tI=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",My="A-Z\\xc0-\\xd6\\xd8-\\xde",Uy="\\ufe0e\\ufe0f",Fy=Zk+$k+eI+tI,ap="['\u2019]",rI="["+Vc+"]",qy="["+Fy+"]",Hc="["+Oy+"]",Gy="\\d+",nI="["+Ly+"]",Vy="["+Py+"]",Hy="[^"+Vc+Fy+Gy+Ly+Py+My+"]",sp="\\ud83c[\\udffb-\\udfff]",iI="(?:"+Hc+"|"+sp+")",Ky="[^"+Vc+"]",op="(?:\\ud83c[\\udde6-\\uddff]){2}",lp="[\\ud800-\\udbff][\\udc00-\\udfff]",Do="["+My+"]",jy="\\u200d",Yy="(?:"+Vy+"|"+Hy+")",aI="(?:"+Do+"|"+Hy+")",Wy="(?:"+ap+"(?:d|ll|m|re|s|t|ve))?",zy="(?:"+ap+"(?:D|LL|M|RE|S|T|VE))?",Qy=iI+"?",Xy="["+Uy+"]?",sI="(?:"+jy+"(?:"+[Ky,op,lp].join("|")+")"+Xy+Qy+")*",oI="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",lI="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Jy=Xy+Qy+sI,uI="(?:"+[nI,op,lp].join("|")+")"+Jy,cI="(?:"+[Ky+Hc+"?",Hc,op,lp,rI].join("|")+")",fI=RegExp(ap,"g"),dI=RegExp(Hc,"g"),up=RegExp(sp+"(?="+sp+")|"+cI+Jy,"g"),hI=RegExp([Do+"?"+Vy+"+"+Wy+"(?="+[qy,Do,"$"].join("|")+")",aI+"+"+zy+"(?="+[qy,Do+Yy,"$"].join("|")+")",Do+"?"+Yy+"+"+Wy,Do+"+"+zy,lI,oI,Gy,uI].join("|"),"g"),pI=RegExp("["+jy+Vc+Oy+Uy+"]"),gI=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,mI=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],yI=-1,or={};or[Ot]=or[gr]=or[ja]=or[Ns]=or[Rs]=or[kn]=or[pa]=or[un]=or[Rr]=!0,or[ue]=or[Dt]=or[Xt]=or[rt]=or[it]=or[nt]=or[I]=or[D]=or[j]=or[H]=or[J]=or[ie]=or[Z]=or[he]=or[ht]=!1;var rr={};rr[ue]=rr[Dt]=rr[Xt]=rr[it]=rr[rt]=rr[nt]=rr[Ot]=rr[gr]=rr[ja]=rr[Ns]=rr[Rs]=rr[j]=rr[H]=rr[J]=rr[ie]=rr[Z]=rr[he]=rr[Le]=rr[kn]=rr[pa]=rr[un]=rr[Rr]=!0,rr[I]=rr[D]=rr[ht]=!1;var vI={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},_I={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},wI={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},EI={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},CI=parseFloat,bI=parseInt,Zy=typeof global=="object"&&global&&global.Object===Object&&global,xI=typeof self=="object"&&self&&self.Object===Object&&self,Fr=Zy||xI||Function("return this")(),cp=typeof Ll=="object"&&Ll&&!Ll.nodeType&&Ll,Ds=cp&&typeof gc=="object"&&gc&&!gc.nodeType&&gc,$y=Ds&&Ds.exports===cp,fp=$y&&Zy.process,Zn=function(){try{var W=Ds&&Ds.require&&Ds.require("util").types;return W||fp&&fp.binding&&fp.binding("util")}catch(fe){}}(),ev=Zn&&Zn.isArrayBuffer,tv=Zn&&Zn.isDate,rv=Zn&&Zn.isMap,nv=Zn&&Zn.isRegExp,iv=Zn&&Zn.isSet,av=Zn&&Zn.isTypedArray;function Fn(W,fe,oe){switch(oe.length){case 0:return W.call(fe);case 1:return W.call(fe,oe[0]);case 2:return W.call(fe,oe[0],oe[1]);case 3:return W.call(fe,oe[0],oe[1],oe[2])}return W.apply(fe,oe)}function TI(W,fe,oe,Be){for(var tt=-1,Ht=W==null?0:W.length;++tt<Ht;){var Dr=W[tt];fe(Be,Dr,oe(Dr),W)}return Be}function $n(W,fe){for(var oe=-1,Be=W==null?0:W.length;++oe<Be&&fe(W[oe],oe,W)!==!1;);return W}function SI(W,fe){for(var oe=W==null?0:W.length;oe--&&fe(W[oe],oe,W)!==!1;);return W}function sv(W,fe){for(var oe=-1,Be=W==null?0:W.length;++oe<Be;)if(!fe(W[oe],oe,W))return!1;return!0}function Ya(W,fe){for(var oe=-1,Be=W==null?0:W.length,tt=0,Ht=[];++oe<Be;){var Dr=W[oe];fe(Dr,oe,W)&&(Ht[tt++]=Dr)}return Ht}function Kc(W,fe){var oe=W==null?0:W.length;return!!oe&&Bo(W,fe,0)>-1}function dp(W,fe,oe){for(var Be=-1,tt=W==null?0:W.length;++Be<tt;)if(oe(fe,W[Be]))return!0;return!1}function dr(W,fe){for(var oe=-1,Be=W==null?0:W.length,tt=Array(Be);++oe<Be;)tt[oe]=fe(W[oe],oe,W);return tt}function Wa(W,fe){for(var oe=-1,Be=fe.length,tt=W.length;++oe<Be;)W[tt+oe]=fe[oe];return W}function hp(W,fe,oe,Be){var tt=-1,Ht=W==null?0:W.length;for(Be&&Ht&&(oe=W[++tt]);++tt<Ht;)oe=fe(oe,W[tt],tt,W);return oe}function AI(W,fe,oe,Be){var tt=W==null?0:W.length;for(Be&&tt&&(oe=W[--tt]);tt--;)oe=fe(oe,W[tt],tt,W);return oe}function pp(W,fe){for(var oe=-1,Be=W==null?0:W.length;++oe<Be;)if(fe(W[oe],oe,W))return!0;return!1}var kI=gp("length");function II(W){return W.split("")}function NI(W){return W.match(Uk)||[]}function ov(W,fe,oe){var Be;return oe(W,function(tt,Ht,Dr){if(fe(tt,Ht,Dr))return Be=Ht,!1}),Be}function jc(W,fe,oe,Be){for(var tt=W.length,Ht=oe+(Be?1:-1);Be?Ht--:++Ht<tt;)if(fe(W[Ht],Ht,W))return Ht;return-1}function Bo(W,fe,oe){return fe===fe?VI(W,fe,oe):jc(W,lv,oe)}function RI(W,fe,oe,Be){for(var tt=oe-1,Ht=W.length;++tt<Ht;)if(Be(W[tt],fe))return tt;return-1}function lv(W){return W!==W}function uv(W,fe){var oe=W==null?0:W.length;return oe?yp(W,fe)/oe:Fe}function gp(W){return function(fe){return fe==null?t:fe[W]}}function mp(W){return function(fe){return W==null?t:W[fe]}}function cv(W,fe,oe,Be,tt){return tt(W,function(Ht,Dr,Zt){oe=Be?(Be=!1,Ht):fe(oe,Ht,Dr,Zt)}),oe}function DI(W,fe){var oe=W.length;for(W.sort(fe);oe--;)W[oe]=W[oe].value;return W}function yp(W,fe){for(var oe,Be=-1,tt=W.length;++Be<tt;){var Ht=fe(W[Be]);Ht!==t&&(oe=oe===t?Ht:oe+Ht)}return oe}function vp(W,fe){for(var oe=-1,Be=Array(W);++oe<W;)Be[oe]=fe(oe);return Be}function BI(W,fe){return dr(fe,function(oe){return[oe,W[oe]]})}function fv(W){return W&&W.slice(0,gv(W)+1).replace(ip,"")}function qn(W){return function(fe){return W(fe)}}function _p(W,fe){return dr(fe,function(oe){return W[oe]})}function nu(W,fe){return W.has(fe)}function dv(W,fe){for(var oe=-1,Be=W.length;++oe<Be&&Bo(fe,W[oe],0)>-1;);return oe}function hv(W,fe){for(var oe=W.length;oe--&&Bo(fe,W[oe],0)>-1;);return oe}function OI(W,fe){for(var oe=W.length,Be=0;oe--;)W[oe]===fe&&++Be;return Be}var LI=mp(vI),PI=mp(_I);function MI(W){return"\\"+EI[W]}function UI(W,fe){return W==null?t:W[fe]}function Oo(W){return pI.test(W)}function FI(W){return gI.test(W)}function qI(W){for(var fe,oe=[];!(fe=W.next()).done;)oe.push(fe.value);return oe}function wp(W){var fe=-1,oe=Array(W.size);return W.forEach(function(Be,tt){oe[++fe]=[tt,Be]}),oe}function pv(W,fe){return function(oe){return W(fe(oe))}}function za(W,fe){for(var oe=-1,Be=W.length,tt=0,Ht=[];++oe<Be;){var Dr=W[oe];(Dr===fe||Dr===u)&&(W[oe]=u,Ht[tt++]=oe)}return Ht}function Yc(W){var fe=-1,oe=Array(W.size);return W.forEach(function(Be){oe[++fe]=Be}),oe}function GI(W){var fe=-1,oe=Array(W.size);return W.forEach(function(Be){oe[++fe]=[Be,Be]}),oe}function VI(W,fe,oe){for(var Be=oe-1,tt=W.length;++Be<tt;)if(W[Be]===fe)return Be;return-1}function HI(W,fe,oe){for(var Be=oe+1;Be--;)if(W[Be]===fe)return Be;return Be}function Lo(W){return Oo(W)?jI(W):kI(W)}function _i(W){return Oo(W)?YI(W):II(W)}function gv(W){for(var fe=W.length;fe--&&Ok.test(W.charAt(fe)););return fe}var KI=mp(wI);function jI(W){for(var fe=up.lastIndex=0;up.test(W);)++fe;return fe}function YI(W){return W.match(up)||[]}function WI(W){return W.match(hI)||[]}var zI=function W(fe){fe=fe==null?Fr:Qa.defaults(Fr.Object(),fe,Qa.pick(Fr,mI));var oe=fe.Array,Be=fe.Date,tt=fe.Error,Ht=fe.Function,Dr=fe.Math,Zt=fe.Object,Ep=fe.RegExp,QI=fe.String,ei=fe.TypeError,Wc=oe.prototype,XI=Ht.prototype,Po=Zt.prototype,zc=fe["__core-js_shared__"],Qc=XI.toString,zt=Po.hasOwnProperty,JI=0,mv=function(){var o=/[^.]+$/.exec(zc&&zc.keys&&zc.keys.IE_PROTO||"");return o?"Symbol(src)_1."+o:""}(),Xc=Po.toString,ZI=Qc.call(Zt),$I=Fr._,eN=Ep("^"+Qc.call(zt).replace(np,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Jc=$y?fe.Buffer:t,Xa=fe.Symbol,Zc=fe.Uint8Array,yv=Jc?Jc.allocUnsafe:t,$c=pv(Zt.getPrototypeOf,Zt),vv=Zt.create,_v=Po.propertyIsEnumerable,ef=Wc.splice,wv=Xa?Xa.isConcatSpreadable:t,iu=Xa?Xa.iterator:t,Bs=Xa?Xa.toStringTag:t,tf=function(){try{var o=Us(Zt,"defineProperty");return o({},"",{}),o}catch(c){}}(),tN=fe.clearTimeout!==Fr.clearTimeout&&fe.clearTimeout,rN=Be&&Be.now!==Fr.Date.now&&Be.now,nN=fe.setTimeout!==Fr.setTimeout&&fe.setTimeout,rf=Dr.ceil,nf=Dr.floor,Cp=Zt.getOwnPropertySymbols,iN=Jc?Jc.isBuffer:t,Ev=fe.isFinite,aN=Wc.join,sN=pv(Zt.keys,Zt),Br=Dr.max,cn=Dr.min,oN=Be.now,lN=fe.parseInt,Cv=Dr.random,uN=Wc.reverse,bp=Us(fe,"DataView"),au=Us(fe,"Map"),xp=Us(fe,"Promise"),Mo=Us(fe,"Set"),su=Us(fe,"WeakMap"),ou=Us(Zt,"create"),af=su&&new su,Uo={},cN=Fs(bp),fN=Fs(au),dN=Fs(xp),hN=Fs(Mo),pN=Fs(su),sf=Xa?Xa.prototype:t,lu=sf?sf.valueOf:t,bv=sf?sf.toString:t;function A(o){if(wr(o)&&!at(o)&&!(o instanceof kt)){if(o instanceof ti)return o;if(zt.call(o,"__wrapped__"))return x1(o)}return new ti(o)}var Fo=function(){function o(){}return function(c){if(!mr(c))return{};if(vv)return vv(c);o.prototype=c;var p=new o;return o.prototype=t,p}}();function of(){}function ti(o,c){this.__wrapped__=o,this.__actions__=[],this.__chain__=!!c,this.__index__=0,this.__values__=t}A.templateSettings={escape:kk,evaluate:Ik,interpolate:Dy,variable:"",imports:{_:A}},A.prototype=of.prototype,A.prototype.constructor=A,ti.prototype=Fo(of.prototype),ti.prototype.constructor=ti;function kt(o){this.__wrapped__=o,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=et,this.__views__=[]}function gN(){var o=new kt(this.__wrapped__);return o.__actions__=In(this.__actions__),o.__dir__=this.__dir__,o.__filtered__=this.__filtered__,o.__iteratees__=In(this.__iteratees__),o.__takeCount__=this.__takeCount__,o.__views__=In(this.__views__),o}function mN(){if(this.__filtered__){var o=new kt(this);o.__dir__=-1,o.__filtered__=!0}else o=this.clone(),o.__dir__*=-1;return o}function yN(){var o=this.__wrapped__.value(),c=this.__dir__,p=at(o),v=c<0,C=p?o.length:0,N=IR(0,C,this.__views__),U=N.start,q=N.end,z=q-U,pe=v?q:U-1,ge=this.__iteratees__,we=ge.length,Se=0,Pe=cn(z,this.__takeCount__);if(!p||!v&&C==z&&Pe==z)return Wv(o,this.__actions__);var We=[];e:for(;z--&&Se<Pe;){pe+=c;for(var yt=-1,ze=o[pe];++yt<we;){var bt=ge[yt],Lt=bt.iteratee,Hn=bt.type,_n=Lt(ze);if(Hn==Ae)ze=_n;else if(!_n){if(Hn==ye)continue e;break e}}We[Se++]=ze}return We}kt.prototype=Fo(of.prototype),kt.prototype.constructor=kt;function Os(o){var c=-1,p=o==null?0:o.length;for(this.clear();++c<p;){var v=o[c];this.set(v[0],v[1])}}function vN(){this.__data__=ou?ou(null):{},this.size=0}function _N(o){var c=this.has(o)&&delete this.__data__[o];return this.size-=c?1:0,c}function wN(o){var c=this.__data__;if(ou){var p=c[o];return p===s?t:p}return zt.call(c,o)?c[o]:t}function EN(o){var c=this.__data__;return ou?c[o]!==t:zt.call(c,o)}function CN(o,c){var p=this.__data__;return this.size+=this.has(o)?0:1,p[o]=ou&&c===t?s:c,this}Os.prototype.clear=vN,Os.prototype.delete=_N,Os.prototype.get=wN,Os.prototype.has=EN,Os.prototype.set=CN;function ga(o){var c=-1,p=o==null?0:o.length;for(this.clear();++c<p;){var v=o[c];this.set(v[0],v[1])}}function bN(){this.__data__=[],this.size=0}function xN(o){var c=this.__data__,p=lf(c,o);if(p<0)return!1;var v=c.length-1;return p==v?c.pop():ef.call(c,p,1),--this.size,!0}function TN(o){var c=this.__data__,p=lf(c,o);return p<0?t:c[p][1]}function SN(o){return lf(this.__data__,o)>-1}function AN(o,c){var p=this.__data__,v=lf(p,o);return v<0?(++this.size,p.push([o,c])):p[v][1]=c,this}ga.prototype.clear=bN,ga.prototype.delete=xN,ga.prototype.get=TN,ga.prototype.has=SN,ga.prototype.set=AN;function ma(o){var c=-1,p=o==null?0:o.length;for(this.clear();++c<p;){var v=o[c];this.set(v[0],v[1])}}function kN(){this.size=0,this.__data__={hash:new Os,map:new(au||ga),string:new Os}}function IN(o){var c=wf(this,o).delete(o);return this.size-=c?1:0,c}function NN(o){return wf(this,o).get(o)}function RN(o){return wf(this,o).has(o)}function DN(o,c){var p=wf(this,o),v=p.size;return p.set(o,c),this.size+=p.size==v?0:1,this}ma.prototype.clear=kN,ma.prototype.delete=IN,ma.prototype.get=NN,ma.prototype.has=RN,ma.prototype.set=DN;function Ls(o){var c=-1,p=o==null?0:o.length;for(this.__data__=new ma;++c<p;)this.add(o[c])}function BN(o){return this.__data__.set(o,s),this}function ON(o){return this.__data__.has(o)}Ls.prototype.add=Ls.prototype.push=BN,Ls.prototype.has=ON;function wi(o){var c=this.__data__=new ga(o);this.size=c.size}function LN(){this.__data__=new ga,this.size=0}function PN(o){var c=this.__data__,p=c.delete(o);return this.size=c.size,p}function MN(o){return this.__data__.get(o)}function UN(o){return this.__data__.has(o)}function FN(o,c){var p=this.__data__;if(p instanceof ga){var v=p.__data__;if(!au||v.length<r-1)return v.push([o,c]),this.size=++p.size,this;p=this.__data__=new ma(v)}return p.set(o,c),this.size=p.size,this}wi.prototype.clear=LN,wi.prototype.delete=PN,wi.prototype.get=MN,wi.prototype.has=UN,wi.prototype.set=FN;function xv(o,c){var p=at(o),v=!p&&qs(o),C=!p&&!v&&ts(o),N=!p&&!v&&!C&&Ho(o),U=p||v||C||N,q=U?vp(o.length,QI):[],z=q.length;for(var pe in o)(c||zt.call(o,pe))&&!(U&&(pe=="length"||C&&(pe=="offset"||pe=="parent")||N&&(pe=="buffer"||pe=="byteLength"||pe=="byteOffset")||wa(pe,z)))&&q.push(pe);return q}function Tv(o){var c=o.length;return c?o[Lp(0,c-1)]:t}function qN(o,c){return Ef(In(o),Ps(c,0,o.length))}function GN(o){return Ef(In(o))}function Tp(o,c,p){(p!==t&&!Ei(o[c],p)||p===t&&!(c in o))&&ya(o,c,p)}function uu(o,c,p){var v=o[c];(!(zt.call(o,c)&&Ei(v,p))||p===t&&!(c in o))&&ya(o,c,p)}function lf(o,c){for(var p=o.length;p--;)if(Ei(o[p][0],c))return p;return-1}function VN(o,c,p,v){return Ja(o,function(C,N,U){c(v,C,p(C),U)}),v}function Sv(o,c){return o&&qi(c,qr(c),o)}function HN(o,c){return o&&qi(c,Rn(c),o)}function ya(o,c,p){c=="__proto__"&&tf?tf(o,c,{configurable:!0,enumerable:!0,value:p,writable:!0}):o[c]=p}function Sp(o,c){for(var p=-1,v=c.length,C=oe(v),N=o==null;++p<v;)C[p]=N?t:s0(o,c[p]);return C}function Ps(o,c,p){return o===o&&(p!==t&&(o=o<=p?o:p),c!==t&&(o=o>=c?o:c)),o}function ri(o,c,p,v,C,N){var U,q=c&f,z=c&d,pe=c&h;if(p&&(U=C?p(o,v,C,N):p(o)),U!==t)return U;if(!mr(o))return o;var ge=at(o);if(ge){if(U=RR(o),!q)return In(o,U)}else{var we=fn(o),Se=we==D||we==L;if(ts(o))return Xv(o,q);if(we==J||we==ue||Se&&!C){if(U=z||Se?{}:g1(o),!q)return z?wR(o,HN(U,o)):_R(o,Sv(U,o))}else{if(!rr[we])return C?o:{};U=DR(o,we,q)}}N||(N=new wi);var Pe=N.get(o);if(Pe)return Pe;N.set(o,U),K1(o)?o.forEach(function(ze){U.add(ri(ze,c,p,ze,o,N))}):V1(o)&&o.forEach(function(ze,bt){U.set(bt,ri(ze,c,p,bt,o,N))});var We=pe?z?Yp:jp:z?Rn:qr,yt=ge?t:We(o);return $n(yt||o,function(ze,bt){yt&&(bt=ze,ze=o[bt]),uu(U,bt,ri(ze,c,p,bt,o,N))}),U}function KN(o){var c=qr(o);return function(p){return Av(p,o,c)}}function Av(o,c,p){var v=p.length;if(o==null)return!v;for(o=Zt(o);v--;){var C=p[v],N=c[C],U=o[C];if(U===t&&!(C in o)||!N(U))return!1}return!0}function kv(o,c,p){if(typeof o!="function")throw new ei(i);return mu(function(){o.apply(t,p)},c)}function cu(o,c,p,v){var C=-1,N=Kc,U=!0,q=o.length,z=[],pe=c.length;if(!q)return z;p&&(c=dr(c,qn(p))),v?(N=dp,U=!1):c.length>=r&&(N=nu,U=!1,c=new Ls(c));e:for(;++C<q;){var ge=o[C],we=p==null?ge:p(ge);if(ge=v||ge!==0?ge:0,U&&we===we){for(var Se=pe;Se--;)if(c[Se]===we)continue e;z.push(ge)}else N(c,we,v)||z.push(ge)}return z}var Ja=t1(Fi),Iv=t1(kp,!0);function jN(o,c){var p=!0;return Ja(o,function(v,C,N){return p=!!c(v,C,N),p}),p}function uf(o,c,p){for(var v=-1,C=o.length;++v<C;){var N=o[v],U=c(N);if(U!=null&&(q===t?U===U&&!Vn(U):p(U,q)))var q=U,z=N}return z}function YN(o,c,p,v){var C=o.length;for(p=pt(p),p<0&&(p=-p>C?0:C+p),v=v===t||v>C?C:pt(v),v<0&&(v+=C),v=p>v?0:Y1(v);p<v;)o[p++]=c;return o}function Nv(o,c){var p=[];return Ja(o,function(v,C,N){c(v,C,N)&&p.push(v)}),p}function Jr(o,c,p,v,C){var N=-1,U=o.length;for(p||(p=OR),C||(C=[]);++N<U;){var q=o[N];c>0&&p(q)?c>1?Jr(q,c-1,p,v,C):Wa(C,q):v||(C[C.length]=q)}return C}var Ap=r1(),Rv=r1(!0);function Fi(o,c){return o&&Ap(o,c,qr)}function kp(o,c){return o&&Rv(o,c,qr)}function cf(o,c){return Ya(c,function(p){return Ea(o[p])})}function Ms(o,c){c=$a(c,o);for(var p=0,v=c.length;o!=null&&p<v;)o=o[Gi(c[p++])];return p&&p==v?o:t}function Dv(o,c,p){var v=c(o);return at(o)?v:Wa(v,p(o))}function yn(o){return o==null?o===t?Ue:Q:Bs&&Bs in Zt(o)?kR(o):GR(o)}function Ip(o,c){return o>c}function WN(o,c){return o!=null&&zt.call(o,c)}function zN(o,c){return o!=null&&c in Zt(o)}function QN(o,c,p){return o>=cn(c,p)&&o<Br(c,p)}function Np(o,c,p){for(var v=p?dp:Kc,C=o[0].length,N=o.length,U=N,q=oe(N),z=1/0,pe=[];U--;){var ge=o[U];U&&c&&(ge=dr(ge,qn(c))),z=cn(ge.length,z),q[U]=!p&&(c||C>=120&&ge.length>=120)?new Ls(U&&ge):t}ge=o[0];var we=-1,Se=q[0];e:for(;++we<C&&pe.length<z;){var Pe=ge[we],We=c?c(Pe):Pe;if(Pe=p||Pe!==0?Pe:0,!(Se?nu(Se,We):v(pe,We,p))){for(U=N;--U;){var yt=q[U];if(!(yt?nu(yt,We):v(o[U],We,p)))continue e}Se&&Se.push(We),pe.push(Pe)}}return pe}function XN(o,c,p,v){return Fi(o,function(C,N,U){c(v,p(C),N,U)}),v}function fu(o,c,p){c=$a(c,o),o=_1(o,c);var v=o==null?o:o[Gi(ii(c))];return v==null?t:Fn(v,o,p)}function Bv(o){return wr(o)&&yn(o)==ue}function JN(o){return wr(o)&&yn(o)==Xt}function ZN(o){return wr(o)&&yn(o)==nt}function du(o,c,p,v,C){return o===c?!0:o==null||c==null||!wr(o)&&!wr(c)?o!==o&&c!==c:$N(o,c,p,v,du,C)}function $N(o,c,p,v,C,N){var U=at(o),q=at(c),z=U?Dt:fn(o),pe=q?Dt:fn(c);z=z==ue?J:z,pe=pe==ue?J:pe;var ge=z==J,we=pe==J,Se=z==pe;if(Se&&ts(o)){if(!ts(c))return!1;U=!0,ge=!1}if(Se&&!ge)return N||(N=new wi),U||Ho(o)?d1(o,c,p,v,C,N):SR(o,c,z,p,v,C,N);if(!(p&g)){var Pe=ge&&zt.call(o,"__wrapped__"),We=we&&zt.call(c,"__wrapped__");if(Pe||We){var yt=Pe?o.value():o,ze=We?c.value():c;return N||(N=new wi),C(yt,ze,p,v,N)}}return Se?(N||(N=new wi),AR(o,c,p,v,C,N)):!1}function eR(o){return wr(o)&&fn(o)==j}function Rp(o,c,p,v){var C=p.length,N=C,U=!v;if(o==null)return!N;for(o=Zt(o);C--;){var q=p[C];if(U&&q[2]?q[1]!==o[q[0]]:!(q[0]in o))return!1}for(;++C<N;){q=p[C];var z=q[0],pe=o[z],ge=q[1];if(U&&q[2]){if(pe===t&&!(z in o))return!1}else{var we=new wi;if(v)var Se=v(pe,ge,z,o,c,we);if(!(Se===t?du(ge,pe,g|y,v,we):Se))return!1}}return!0}function Ov(o){if(!mr(o)||PR(o))return!1;var c=Ea(o)?eN:Kk;return c.test(Fs(o))}function tR(o){return wr(o)&&yn(o)==ie}function rR(o){return wr(o)&&fn(o)==Z}function nR(o){return wr(o)&&Af(o.length)&&!!or[yn(o)]}function Lv(o){return typeof o=="function"?o:o==null?Dn:typeof o=="object"?at(o)?Uv(o[0],o[1]):Mv(o):n_(o)}function Dp(o){if(!gu(o))return sN(o);var c=[];for(var p in Zt(o))zt.call(o,p)&&p!="constructor"&&c.push(p);return c}function iR(o){if(!mr(o))return qR(o);var c=gu(o),p=[];for(var v in o)v=="constructor"&&(c||!zt.call(o,v))||p.push(v);return p}function Bp(o,c){return o<c}function Pv(o,c){var p=-1,v=Nn(o)?oe(o.length):[];return Ja(o,function(C,N,U){v[++p]=c(C,N,U)}),v}function Mv(o){var c=zp(o);return c.length==1&&c[0][2]?y1(c[0][0],c[0][1]):function(p){return p===o||Rp(p,o,c)}}function Uv(o,c){return Xp(o)&&m1(c)?y1(Gi(o),c):function(p){var v=s0(p,o);return v===t&&v===c?o0(p,o):du(c,v,g|y)}}function ff(o,c,p,v,C){o!==c&&Ap(c,function(N,U){if(C||(C=new wi),mr(N))aR(o,c,U,p,ff,v,C);else{var q=v?v(Zp(o,U),N,U+"",o,c,C):t;q===t&&(q=N),Tp(o,U,q)}},Rn)}function aR(o,c,p,v,C,N,U){var q=Zp(o,p),z=Zp(c,p),pe=U.get(z);if(pe){Tp(o,p,pe);return}var ge=N?N(q,z,p+"",o,c,U):t,we=ge===t;if(we){var Se=at(z),Pe=!Se&&ts(z),We=!Se&&!Pe&&Ho(z);ge=z,Se||Pe||We?at(q)?ge=q:br(q)?ge=In(q):Pe?(we=!1,ge=Xv(z,!0)):We?(we=!1,ge=Jv(z,!0)):ge=[]:yu(z)||qs(z)?(ge=q,qs(q)?ge=W1(q):(!mr(q)||Ea(q))&&(ge=g1(z))):we=!1}we&&(U.set(z,ge),C(ge,z,v,N,U),U.delete(z)),Tp(o,p,ge)}function Fv(o,c){var p=o.length;if(!!p)return c+=c<0?p:0,wa(c,p)?o[c]:t}function qv(o,c,p){c.length?c=dr(c,function(N){return at(N)?function(U){return Ms(U,N.length===1?N[0]:N)}:N}):c=[Dn];var v=-1;c=dr(c,qn(He()));var C=Pv(o,function(N,U,q){var z=dr(c,function(pe){return pe(N)});return{criteria:z,index:++v,value:N}});return DI(C,function(N,U){return vR(N,U,p)})}function sR(o,c){return Gv(o,c,function(p,v){return o0(o,v)})}function Gv(o,c,p){for(var v=-1,C=c.length,N={};++v<C;){var U=c[v],q=Ms(o,U);p(q,U)&&hu(N,$a(U,o),q)}return N}function oR(o){return function(c){return Ms(c,o)}}function Op(o,c,p,v){var C=v?RI:Bo,N=-1,U=c.length,q=o;for(o===c&&(c=In(c)),p&&(q=dr(o,qn(p)));++N<U;)for(var z=0,pe=c[N],ge=p?p(pe):pe;(z=C(q,ge,z,v))>-1;)q!==o&&ef.call(q,z,1),ef.call(o,z,1);return o}function Vv(o,c){for(var p=o?c.length:0,v=p-1;p--;){var C=c[p];if(p==v||C!==N){var N=C;wa(C)?ef.call(o,C,1):Up(o,C)}}return o}function Lp(o,c){return o+nf(Cv()*(c-o+1))}function lR(o,c,p,v){for(var C=-1,N=Br(rf((c-o)/(p||1)),0),U=oe(N);N--;)U[v?N:++C]=o,o+=p;return U}function Pp(o,c){var p="";if(!o||c<1||c>me)return p;do c%2&&(p+=o),c=nf(c/2),c&&(o+=o);while(c);return p}function wt(o,c){return $p(v1(o,c,Dn),o+"")}function uR(o){return Tv(Ko(o))}function cR(o,c){var p=Ko(o);return Ef(p,Ps(c,0,p.length))}function hu(o,c,p,v){if(!mr(o))return o;c=$a(c,o);for(var C=-1,N=c.length,U=N-1,q=o;q!=null&&++C<N;){var z=Gi(c[C]),pe=p;if(z==="__proto__"||z==="constructor"||z==="prototype")return o;if(C!=U){var ge=q[z];pe=v?v(ge,z,q):t,pe===t&&(pe=mr(ge)?ge:wa(c[C+1])?[]:{})}uu(q,z,pe),q=q[z]}return o}var Hv=af?function(o,c){return af.set(o,c),o}:Dn,fR=tf?function(o,c){return tf(o,"toString",{configurable:!0,enumerable:!1,value:u0(c),writable:!0})}:Dn;function dR(o){return Ef(Ko(o))}function ni(o,c,p){var v=-1,C=o.length;c<0&&(c=-c>C?0:C+c),p=p>C?C:p,p<0&&(p+=C),C=c>p?0:p-c>>>0,c>>>=0;for(var N=oe(C);++v<C;)N[v]=o[v+c];return N}function hR(o,c){var p;return Ja(o,function(v,C,N){return p=c(v,C,N),!p}),!!p}function df(o,c,p){var v=0,C=o==null?v:o.length;if(typeof c=="number"&&c===c&&C<=$e){for(;v<C;){var N=v+C>>>1,U=o[N];U!==null&&!Vn(U)&&(p?U<=c:U<c)?v=N+1:C=N}return C}return Mp(o,c,Dn,p)}function Mp(o,c,p,v){var C=0,N=o==null?0:o.length;if(N===0)return 0;c=p(c);for(var U=c!==c,q=c===null,z=Vn(c),pe=c===t;C<N;){var ge=nf((C+N)/2),we=p(o[ge]),Se=we!==t,Pe=we===null,We=we===we,yt=Vn(we);if(U)var ze=v||We;else pe?ze=We&&(v||Se):q?ze=We&&Se&&(v||!Pe):z?ze=We&&Se&&!Pe&&(v||!yt):Pe||yt?ze=!1:ze=v?we<=c:we<c;ze?C=ge+1:N=ge}return cn(N,ct)}function Kv(o,c){for(var p=-1,v=o.length,C=0,N=[];++p<v;){var U=o[p],q=c?c(U):U;if(!p||!Ei(q,z)){var z=q;N[C++]=U===0?0:U}}return N}function jv(o){return typeof o=="number"?o:Vn(o)?Fe:+o}function Gn(o){if(typeof o=="string")return o;if(at(o))return dr(o,Gn)+"";if(Vn(o))return bv?bv.call(o):"";var c=o+"";return c=="0"&&1/o==-De?"-0":c}function Za(o,c,p){var v=-1,C=Kc,N=o.length,U=!0,q=[],z=q;if(p)U=!1,C=dp;else if(N>=r){var pe=c?null:xR(o);if(pe)return Yc(pe);U=!1,C=nu,z=new Ls}else z=c?[]:q;e:for(;++v<N;){var ge=o[v],we=c?c(ge):ge;if(ge=p||ge!==0?ge:0,U&&we===we){for(var Se=z.length;Se--;)if(z[Se]===we)continue e;c&&z.push(we),q.push(ge)}else C(z,we,p)||(z!==q&&z.push(we),q.push(ge))}return q}function Up(o,c){return c=$a(c,o),o=_1(o,c),o==null||delete o[Gi(ii(c))]}function Yv(o,c,p,v){return hu(o,c,p(Ms(o,c)),v)}function hf(o,c,p,v){for(var C=o.length,N=v?C:-1;(v?N--:++N<C)&&c(o[N],N,o););return p?ni(o,v?0:N,v?N+1:C):ni(o,v?N+1:0,v?C:N)}function Wv(o,c){var p=o;return p instanceof kt&&(p=p.value()),hp(c,function(v,C){return C.func.apply(C.thisArg,Wa([v],C.args))},p)}function Fp(o,c,p){var v=o.length;if(v<2)return v?Za(o[0]):[];for(var C=-1,N=oe(v);++C<v;)for(var U=o[C],q=-1;++q<v;)q!=C&&(N[C]=cu(N[C]||U,o[q],c,p));return Za(Jr(N,1),c,p)}function zv(o,c,p){for(var v=-1,C=o.length,N=c.length,U={};++v<C;){var q=v<N?c[v]:t;p(U,o[v],q)}return U}function qp(o){return br(o)?o:[]}function Gp(o){return typeof o=="function"?o:Dn}function $a(o,c){return at(o)?o:Xp(o,c)?[o]:b1(Kt(o))}var pR=wt;function es(o,c,p){var v=o.length;return p=p===t?v:p,!c&&p>=v?o:ni(o,c,p)}var Qv=tN||function(o){return Fr.clearTimeout(o)};function Xv(o,c){if(c)return o.slice();var p=o.length,v=yv?yv(p):new o.constructor(p);return o.copy(v),v}function Vp(o){var c=new o.constructor(o.byteLength);return new Zc(c).set(new Zc(o)),c}function gR(o,c){var p=c?Vp(o.buffer):o.buffer;return new o.constructor(p,o.byteOffset,o.byteLength)}function mR(o){var c=new o.constructor(o.source,By.exec(o));return c.lastIndex=o.lastIndex,c}function yR(o){return lu?Zt(lu.call(o)):{}}function Jv(o,c){var p=c?Vp(o.buffer):o.buffer;return new o.constructor(p,o.byteOffset,o.length)}function Zv(o,c){if(o!==c){var p=o!==t,v=o===null,C=o===o,N=Vn(o),U=c!==t,q=c===null,z=c===c,pe=Vn(c);if(!q&&!pe&&!N&&o>c||N&&U&&z&&!q&&!pe||v&&U&&z||!p&&z||!C)return 1;if(!v&&!N&&!pe&&o<c||pe&&p&&C&&!v&&!N||q&&p&&C||!U&&C||!z)return-1}return 0}function vR(o,c,p){for(var v=-1,C=o.criteria,N=c.criteria,U=C.length,q=p.length;++v<U;){var z=Zv(C[v],N[v]);if(z){if(v>=q)return z;var pe=p[v];return z*(pe=="desc"?-1:1)}}return o.index-c.index}function $v(o,c,p,v){for(var C=-1,N=o.length,U=p.length,q=-1,z=c.length,pe=Br(N-U,0),ge=oe(z+pe),we=!v;++q<z;)ge[q]=c[q];for(;++C<U;)(we||C<N)&&(ge[p[C]]=o[C]);for(;pe--;)ge[q++]=o[C++];return ge}function e1(o,c,p,v){for(var C=-1,N=o.length,U=-1,q=p.length,z=-1,pe=c.length,ge=Br(N-q,0),we=oe(ge+pe),Se=!v;++C<ge;)we[C]=o[C];for(var Pe=C;++z<pe;)we[Pe+z]=c[z];for(;++U<q;)(Se||C<N)&&(we[Pe+p[U]]=o[C++]);return we}function In(o,c){var p=-1,v=o.length;for(c||(c=oe(v));++p<v;)c[p]=o[p];return c}function qi(o,c,p,v){var C=!p;p||(p={});for(var N=-1,U=c.length;++N<U;){var q=c[N],z=v?v(p[q],o[q],q,p,o):t;z===t&&(z=o[q]),C?ya(p,q,z):uu(p,q,z)}return p}function _R(o,c){return qi(o,Qp(o),c)}function wR(o,c){return qi(o,h1(o),c)}function pf(o,c){return function(p,v){var C=at(p)?TI:VN,N=c?c():{};return C(p,o,He(v,2),N)}}function qo(o){return wt(function(c,p){var v=-1,C=p.length,N=C>1?p[C-1]:t,U=C>2?p[2]:t;for(N=o.length>3&&typeof N=="function"?(C--,N):t,U&&vn(p[0],p[1],U)&&(N=C<3?t:N,C=1),c=Zt(c);++v<C;){var q=p[v];q&&o(c,q,v,N)}return c})}function t1(o,c){return function(p,v){if(p==null)return p;if(!Nn(p))return o(p,v);for(var C=p.length,N=c?C:-1,U=Zt(p);(c?N--:++N<C)&&v(U[N],N,U)!==!1;);return p}}function r1(o){return function(c,p,v){for(var C=-1,N=Zt(c),U=v(c),q=U.length;q--;){var z=U[o?q:++C];if(p(N[z],z,N)===!1)break}return c}}function ER(o,c,p){var v=c&m,C=pu(o);function N(){var U=this&&this!==Fr&&this instanceof N?C:o;return U.apply(v?p:this,arguments)}return N}function n1(o){return function(c){c=Kt(c);var p=Oo(c)?_i(c):t,v=p?p[0]:c.charAt(0),C=p?es(p,1).join(""):c.slice(1);return v[o]()+C}}function Go(o){return function(c){return hp(t_(e_(c).replace(fI,"")),o,"")}}function pu(o){return function(){var c=arguments;switch(c.length){case 0:return new o;case 1:return new o(c[0]);case 2:return new o(c[0],c[1]);case 3:return new o(c[0],c[1],c[2]);case 4:return new o(c[0],c[1],c[2],c[3]);case 5:return new o(c[0],c[1],c[2],c[3],c[4]);case 6:return new o(c[0],c[1],c[2],c[3],c[4],c[5]);case 7:return new o(c[0],c[1],c[2],c[3],c[4],c[5],c[6])}var p=Fo(o.prototype),v=o.apply(p,c);return mr(v)?v:p}}function CR(o,c,p){var v=pu(o);function C(){for(var N=arguments.length,U=oe(N),q=N,z=Vo(C);q--;)U[q]=arguments[q];var pe=N<3&&U[0]!==z&&U[N-1]!==z?[]:za(U,z);if(N-=pe.length,N<p)return l1(o,c,gf,C.placeholder,t,U,pe,t,t,p-N);var ge=this&&this!==Fr&&this instanceof C?v:o;return Fn(ge,this,U)}return C}function i1(o){return function(c,p,v){var C=Zt(c);if(!Nn(c)){var N=He(p,3);c=qr(c),p=function(q){return N(C[q],q,C)}}var U=o(c,p,v);return U>-1?C[N?c[U]:U]:t}}function a1(o){return _a(function(c){var p=c.length,v=p,C=ti.prototype.thru;for(o&&c.reverse();v--;){var N=c[v];if(typeof N!="function")throw new ei(i);if(C&&!U&&_f(N)=="wrapper")var U=new ti([],!0)}for(v=U?v:p;++v<p;){N=c[v];var q=_f(N),z=q=="wrapper"?Wp(N):t;z&&Jp(z[0])&&z[1]==(R|E|k|B)&&!z[4].length&&z[9]==1?U=U[_f(z[0])].apply(U,z[3]):U=N.length==1&&Jp(N)?U[q]():U.thru(N)}return function(){var pe=arguments,ge=pe[0];if(U&&pe.length==1&&at(ge))return U.plant(ge).value();for(var we=0,Se=p?c[we].apply(this,pe):ge;++we<p;)Se=c[we].call(this,Se);return Se}})}function gf(o,c,p,v,C,N,U,q,z,pe){var ge=c&R,we=c&m,Se=c&w,Pe=c&(E|b),We=c&ne,yt=Se?t:pu(o);function ze(){for(var bt=arguments.length,Lt=oe(bt),Hn=bt;Hn--;)Lt[Hn]=arguments[Hn];if(Pe)var _n=Vo(ze),Kn=OI(Lt,_n);if(v&&(Lt=$v(Lt,v,C,Pe)),N&&(Lt=e1(Lt,N,U,Pe)),bt-=Kn,Pe&&bt<pe){var xr=za(Lt,_n);return l1(o,c,gf,ze.placeholder,p,Lt,xr,q,z,pe-bt)}var Ci=we?p:this,ba=Se?Ci[o]:o;return bt=Lt.length,q?Lt=VR(Lt,q):We&&bt>1&&Lt.reverse(),ge&&z<bt&&(Lt.length=z),this&&this!==Fr&&this instanceof ze&&(ba=yt||pu(ba)),ba.apply(Ci,Lt)}return ze}function s1(o,c){return function(p,v){return XN(p,o,c(v),{})}}function mf(o,c){return function(p,v){var C;if(p===t&&v===t)return c;if(p!==t&&(C=p),v!==t){if(C===t)return v;typeof p=="string"||typeof v=="string"?(p=Gn(p),v=Gn(v)):(p=jv(p),v=jv(v)),C=o(p,v)}return C}}function Hp(o){return _a(function(c){return c=dr(c,qn(He())),wt(function(p){var v=this;return o(c,function(C){return Fn(C,v,p)})})})}function yf(o,c){c=c===t?" ":Gn(c);var p=c.length;if(p<2)return p?Pp(c,o):c;var v=Pp(c,rf(o/Lo(c)));return Oo(c)?es(_i(v),0,o).join(""):v.slice(0,o)}function bR(o,c,p,v){var C=c&m,N=pu(o);function U(){for(var q=-1,z=arguments.length,pe=-1,ge=v.length,we=oe(ge+z),Se=this&&this!==Fr&&this instanceof U?N:o;++pe<ge;)we[pe]=v[pe];for(;z--;)we[pe++]=arguments[++q];return Fn(Se,C?p:this,we)}return U}function o1(o){return function(c,p,v){return v&&typeof v!="number"&&vn(c,p,v)&&(p=v=t),c=Ca(c),p===t?(p=c,c=0):p=Ca(p),v=v===t?c<p?1:-1:Ca(v),lR(c,p,v,o)}}function vf(o){return function(c,p){return typeof c=="string"&&typeof p=="string"||(c=ai(c),p=ai(p)),o(c,p)}}function l1(o,c,p,v,C,N,U,q,z,pe){var ge=c&E,we=ge?U:t,Se=ge?t:U,Pe=ge?N:t,We=ge?t:N;c|=ge?k:O,c&=~(ge?O:k),c&_||(c&=~(m|w));var yt=[o,c,C,Pe,we,We,Se,q,z,pe],ze=p.apply(t,yt);return Jp(o)&&w1(ze,yt),ze.placeholder=v,E1(ze,o,c)}function Kp(o){var c=Dr[o];return function(p,v){if(p=ai(p),v=v==null?0:cn(pt(v),292),v&&Ev(p)){var C=(Kt(p)+"e").split("e"),N=c(C[0]+"e"+(+C[1]+v));return C=(Kt(N)+"e").split("e"),+(C[0]+"e"+(+C[1]-v))}return c(p)}}var xR=Mo&&1/Yc(new Mo([,-0]))[1]==De?function(o){return new Mo(o)}:d0;function u1(o){return function(c){var p=fn(c);return p==j?wp(c):p==Z?GI(c):BI(c,o(c))}}function va(o,c,p,v,C,N,U,q){var z=c&w;if(!z&&typeof o!="function")throw new ei(i);var pe=v?v.length:0;if(pe||(c&=~(k|O),v=C=t),U=U===t?U:Br(pt(U),0),q=q===t?q:pt(q),pe-=C?C.length:0,c&O){var ge=v,we=C;v=C=t}var Se=z?t:Wp(o),Pe=[o,c,p,v,C,ge,we,N,U,q];if(Se&&FR(Pe,Se),o=Pe[0],c=Pe[1],p=Pe[2],v=Pe[3],C=Pe[4],q=Pe[9]=Pe[9]===t?z?0:o.length:Br(Pe[9]-pe,0),!q&&c&(E|b)&&(c&=~(E|b)),!c||c==m)var We=ER(o,c,p);else c==E||c==b?We=CR(o,c,q):(c==k||c==(m|k))&&!C.length?We=bR(o,c,p,v):We=gf.apply(t,Pe);var yt=Se?Hv:w1;return E1(yt(We,Pe),o,c)}function c1(o,c,p,v){return o===t||Ei(o,Po[p])&&!zt.call(v,p)?c:o}function f1(o,c,p,v,C,N){return mr(o)&&mr(c)&&(N.set(c,o),ff(o,c,t,f1,N),N.delete(c)),o}function TR(o){return yu(o)?t:o}function d1(o,c,p,v,C,N){var U=p&g,q=o.length,z=c.length;if(q!=z&&!(U&&z>q))return!1;var pe=N.get(o),ge=N.get(c);if(pe&&ge)return pe==c&&ge==o;var we=-1,Se=!0,Pe=p&y?new Ls:t;for(N.set(o,c),N.set(c,o);++we<q;){var We=o[we],yt=c[we];if(v)var ze=U?v(yt,We,we,c,o,N):v(We,yt,we,o,c,N);if(ze!==t){if(ze)continue;Se=!1;break}if(Pe){if(!pp(c,function(bt,Lt){if(!nu(Pe,Lt)&&(We===bt||C(We,bt,p,v,N)))return Pe.push(Lt)})){Se=!1;break}}else if(!(We===yt||C(We,yt,p,v,N))){Se=!1;break}}return N.delete(o),N.delete(c),Se}function SR(o,c,p,v,C,N,U){switch(p){case it:if(o.byteLength!=c.byteLength||o.byteOffset!=c.byteOffset)return!1;o=o.buffer,c=c.buffer;case Xt:return!(o.byteLength!=c.byteLength||!N(new Zc(o),new Zc(c)));case rt:case nt:case H:return Ei(+o,+c);case I:return o.name==c.name&&o.message==c.message;case ie:case he:return o==c+"";case j:var q=wp;case Z:var z=v&g;if(q||(q=Yc),o.size!=c.size&&!z)return!1;var pe=U.get(o);if(pe)return pe==c;v|=y,U.set(o,c);var ge=d1(q(o),q(c),v,C,N,U);return U.delete(o),ge;case Le:if(lu)return lu.call(o)==lu.call(c)}return!1}function AR(o,c,p,v,C,N){var U=p&g,q=jp(o),z=q.length,pe=jp(c),ge=pe.length;if(z!=ge&&!U)return!1;for(var we=z;we--;){var Se=q[we];if(!(U?Se in c:zt.call(c,Se)))return!1}var Pe=N.get(o),We=N.get(c);if(Pe&&We)return Pe==c&&We==o;var yt=!0;N.set(o,c),N.set(c,o);for(var ze=U;++we<z;){Se=q[we];var bt=o[Se],Lt=c[Se];if(v)var Hn=U?v(Lt,bt,Se,c,o,N):v(bt,Lt,Se,o,c,N);if(!(Hn===t?bt===Lt||C(bt,Lt,p,v,N):Hn)){yt=!1;break}ze||(ze=Se=="constructor")}if(yt&&!ze){var _n=o.constructor,Kn=c.constructor;_n!=Kn&&"constructor"in o&&"constructor"in c&&!(typeof _n=="function"&&_n instanceof _n&&typeof Kn=="function"&&Kn instanceof Kn)&&(yt=!1)}return N.delete(o),N.delete(c),yt}function _a(o){return $p(v1(o,t,A1),o+"")}function jp(o){return Dv(o,qr,Qp)}function Yp(o){return Dv(o,Rn,h1)}var Wp=af?function(o){return af.get(o)}:d0;function _f(o){for(var c=o.name+"",p=Uo[c],v=zt.call(Uo,c)?p.length:0;v--;){var C=p[v],N=C.func;if(N==null||N==o)return C.name}return c}function Vo(o){var c=zt.call(A,"placeholder")?A:o;return c.placeholder}function He(){var o=A.iteratee||c0;return o=o===c0?Lv:o,arguments.length?o(arguments[0],arguments[1]):o}function wf(o,c){var p=o.__data__;return LR(c)?p[typeof c=="string"?"string":"hash"]:p.map}function zp(o){for(var c=qr(o),p=c.length;p--;){var v=c[p],C=o[v];c[p]=[v,C,m1(C)]}return c}function Us(o,c){var p=UI(o,c);return Ov(p)?p:t}function kR(o){var c=zt.call(o,Bs),p=o[Bs];try{o[Bs]=t;var v=!0}catch(N){}var C=Xc.call(o);return v&&(c?o[Bs]=p:delete o[Bs]),C}var Qp=Cp?function(o){return o==null?[]:(o=Zt(o),Ya(Cp(o),function(c){return _v.call(o,c)}))}:h0,h1=Cp?function(o){for(var c=[];o;)Wa(c,Qp(o)),o=$c(o);return c}:h0,fn=yn;(bp&&fn(new bp(new ArrayBuffer(1)))!=it||au&&fn(new au)!=j||xp&&fn(xp.resolve())!=Y||Mo&&fn(new Mo)!=Z||su&&fn(new su)!=ht)&&(fn=function(o){var c=yn(o),p=c==J?o.constructor:t,v=p?Fs(p):"";if(v)switch(v){case cN:return it;case fN:return j;case dN:return Y;case hN:return Z;case pN:return ht}return c});function IR(o,c,p){for(var v=-1,C=p.length;++v<C;){var N=p[v],U=N.size;switch(N.type){case"drop":o+=U;break;case"dropRight":c-=U;break;case"take":c=cn(c,o+U);break;case"takeRight":o=Br(o,c-U);break}}return{start:o,end:c}}function NR(o){var c=o.match(Pk);return c?c[1].split(Mk):[]}function p1(o,c,p){c=$a(c,o);for(var v=-1,C=c.length,N=!1;++v<C;){var U=Gi(c[v]);if(!(N=o!=null&&p(o,U)))break;o=o[U]}return N||++v!=C?N:(C=o==null?0:o.length,!!C&&Af(C)&&wa(U,C)&&(at(o)||qs(o)))}function RR(o){var c=o.length,p=new o.constructor(c);return c&&typeof o[0]=="string"&&zt.call(o,"index")&&(p.index=o.index,p.input=o.input),p}function g1(o){return typeof o.constructor=="function"&&!gu(o)?Fo($c(o)):{}}function DR(o,c,p){var v=o.constructor;switch(c){case Xt:return Vp(o);case rt:case nt:return new v(+o);case it:return gR(o,p);case Ot:case gr:case ja:case Ns:case Rs:case kn:case pa:case un:case Rr:return Jv(o,p);case j:return new v;case H:case he:return new v(o);case ie:return mR(o);case Z:return new v;case Le:return yR(o)}}function BR(o,c){var p=c.length;if(!p)return o;var v=p-1;return c[v]=(p>1?"& ":"")+c[v],c=c.join(p>2?", ":" "),o.replace(Lk,`{
/* [wrapped with `+c+`] */
`)}function OR(o){return at(o)||qs(o)||!!(wv&&o&&o[wv])}function wa(o,c){var p=typeof o;return c=c==null?me:c,!!c&&(p=="number"||p!="symbol"&&Yk.test(o))&&o>-1&&o%1==0&&o<c}function vn(o,c,p){if(!mr(p))return!1;var v=typeof c;return(v=="number"?Nn(p)&&wa(c,p.length):v=="string"&&c in p)?Ei(p[c],o):!1}function Xp(o,c){if(at(o))return!1;var p=typeof o;return p=="number"||p=="symbol"||p=="boolean"||o==null||Vn(o)?!0:Rk.test(o)||!Nk.test(o)||c!=null&&o in Zt(c)}function LR(o){var c=typeof o;return c=="string"||c=="number"||c=="symbol"||c=="boolean"?o!=="__proto__":o===null}function Jp(o){var c=_f(o),p=A[c];if(typeof p!="function"||!(c in kt.prototype))return!1;if(o===p)return!0;var v=Wp(p);return!!v&&o===v[0]}function PR(o){return!!mv&&mv in o}var MR=zc?Ea:p0;function gu(o){var c=o&&o.constructor,p=typeof c=="function"&&c.prototype||Po;return o===p}function m1(o){return o===o&&!mr(o)}function y1(o,c){return function(p){return p==null?!1:p[o]===c&&(c!==t||o in Zt(p))}}function UR(o){var c=Tf(o,function(v){return p.size===l&&p.clear(),v}),p=c.cache;return c}function FR(o,c){var p=o[1],v=c[1],C=p|v,N=C<(m|w|R),U=v==R&&p==E||v==R&&p==B&&o[7].length<=c[8]||v==(R|B)&&c[7].length<=c[8]&&p==E;if(!(N||U))return o;v&m&&(o[2]=c[2],C|=p&m?0:_);var q=c[3];if(q){var z=o[3];o[3]=z?$v(z,q,c[4]):q,o[4]=z?za(o[3],u):c[4]}return q=c[5],q&&(z=o[5],o[5]=z?e1(z,q,c[6]):q,o[6]=z?za(o[5],u):c[6]),q=c[7],q&&(o[7]=q),v&R&&(o[8]=o[8]==null?c[8]:cn(o[8],c[8])),o[9]==null&&(o[9]=c[9]),o[0]=c[0],o[1]=C,o}function qR(o){var c=[];if(o!=null)for(var p in Zt(o))c.push(p);return c}function GR(o){return Xc.call(o)}function v1(o,c,p){return c=Br(c===t?o.length-1:c,0),function(){for(var v=arguments,C=-1,N=Br(v.length-c,0),U=oe(N);++C<N;)U[C]=v[c+C];C=-1;for(var q=oe(c+1);++C<c;)q[C]=v[C];return q[c]=p(U),Fn(o,this,q)}}function _1(o,c){return c.length<2?o:Ms(o,ni(c,0,-1))}function VR(o,c){for(var p=o.length,v=cn(c.length,p),C=In(o);v--;){var N=c[v];o[v]=wa(N,p)?C[N]:t}return o}function Zp(o,c){if(!(c==="constructor"&&typeof o[c]=="function")&&c!="__proto__")return o[c]}var w1=C1(Hv),mu=nN||function(o,c){return Fr.setTimeout(o,c)},$p=C1(fR);function E1(o,c,p){var v=c+"";return $p(o,BR(v,HR(NR(v),p)))}function C1(o){var c=0,p=0;return function(){var v=oN(),C=se-(v-p);if(p=v,C>0){if(++c>=re)return arguments[0]}else c=0;return o.apply(t,arguments)}}function Ef(o,c){var p=-1,v=o.length,C=v-1;for(c=c===t?v:c;++p<c;){var N=Lp(p,C),U=o[N];o[N]=o[p],o[p]=U}return o.length=c,o}var b1=UR(function(o){var c=[];return o.charCodeAt(0)===46&&c.push(""),o.replace(Dk,function(p,v,C,N){c.push(C?N.replace(qk,"$1"):v||p)}),c});function Gi(o){if(typeof o=="string"||Vn(o))return o;var c=o+"";return c=="0"&&1/o==-De?"-0":c}function Fs(o){if(o!=null){try{return Qc.call(o)}catch(c){}try{return o+""}catch(c){}}return""}function HR(o,c){return $n(ft,function(p){var v="_."+p[0];c&p[1]&&!Kc(o,v)&&o.push(v)}),o.sort()}function x1(o){if(o instanceof kt)return o.clone();var c=new ti(o.__wrapped__,o.__chain__);return c.__actions__=In(o.__actions__),c.__index__=o.__index__,c.__values__=o.__values__,c}function KR(o,c,p){(p?vn(o,c,p):c===t)?c=1:c=Br(pt(c),0);var v=o==null?0:o.length;if(!v||c<1)return[];for(var C=0,N=0,U=oe(rf(v/c));C<v;)U[N++]=ni(o,C,C+=c);return U}function jR(o){for(var c=-1,p=o==null?0:o.length,v=0,C=[];++c<p;){var N=o[c];N&&(C[v++]=N)}return C}function YR(){var o=arguments.length;if(!o)return[];for(var c=oe(o-1),p=arguments[0],v=o;v--;)c[v-1]=arguments[v];return Wa(at(p)?In(p):[p],Jr(c,1))}var WR=wt(function(o,c){return br(o)?cu(o,Jr(c,1,br,!0)):[]}),zR=wt(function(o,c){var p=ii(c);return br(p)&&(p=t),br(o)?cu(o,Jr(c,1,br,!0),He(p,2)):[]}),QR=wt(function(o,c){var p=ii(c);return br(p)&&(p=t),br(o)?cu(o,Jr(c,1,br,!0),t,p):[]});function XR(o,c,p){var v=o==null?0:o.length;return v?(c=p||c===t?1:pt(c),ni(o,c<0?0:c,v)):[]}function JR(o,c,p){var v=o==null?0:o.length;return v?(c=p||c===t?1:pt(c),c=v-c,ni(o,0,c<0?0:c)):[]}function ZR(o,c){return o&&o.length?hf(o,He(c,3),!0,!0):[]}function $R(o,c){return o&&o.length?hf(o,He(c,3),!0):[]}function eD(o,c,p,v){var C=o==null?0:o.length;return C?(p&&typeof p!="number"&&vn(o,c,p)&&(p=0,v=C),YN(o,c,p,v)):[]}function T1(o,c,p){var v=o==null?0:o.length;if(!v)return-1;var C=p==null?0:pt(p);return C<0&&(C=Br(v+C,0)),jc(o,He(c,3),C)}function S1(o,c,p){var v=o==null?0:o.length;if(!v)return-1;var C=v-1;return p!==t&&(C=pt(p),C=p<0?Br(v+C,0):cn(C,v-1)),jc(o,He(c,3),C,!0)}function A1(o){var c=o==null?0:o.length;return c?Jr(o,1):[]}function tD(o){var c=o==null?0:o.length;return c?Jr(o,De):[]}function rD(o,c){var p=o==null?0:o.length;return p?(c=c===t?1:pt(c),Jr(o,c)):[]}function nD(o){for(var c=-1,p=o==null?0:o.length,v={};++c<p;){var C=o[c];v[C[0]]=C[1]}return v}function k1(o){return o&&o.length?o[0]:t}function iD(o,c,p){var v=o==null?0:o.length;if(!v)return-1;var C=p==null?0:pt(p);return C<0&&(C=Br(v+C,0)),Bo(o,c,C)}function aD(o){var c=o==null?0:o.length;return c?ni(o,0,-1):[]}var sD=wt(function(o){var c=dr(o,qp);return c.length&&c[0]===o[0]?Np(c):[]}),oD=wt(function(o){var c=ii(o),p=dr(o,qp);return c===ii(p)?c=t:p.pop(),p.length&&p[0]===o[0]?Np(p,He(c,2)):[]}),lD=wt(function(o){var c=ii(o),p=dr(o,qp);return c=typeof c=="function"?c:t,c&&p.pop(),p.length&&p[0]===o[0]?Np(p,t,c):[]});function uD(o,c){return o==null?"":aN.call(o,c)}function ii(o){var c=o==null?0:o.length;return c?o[c-1]:t}function cD(o,c,p){var v=o==null?0:o.length;if(!v)return-1;var C=v;return p!==t&&(C=pt(p),C=C<0?Br(v+C,0):cn(C,v-1)),c===c?HI(o,c,C):jc(o,lv,C,!0)}function fD(o,c){return o&&o.length?Fv(o,pt(c)):t}var dD=wt(I1);function I1(o,c){return o&&o.length&&c&&c.length?Op(o,c):o}function hD(o,c,p){return o&&o.length&&c&&c.length?Op(o,c,He(p,2)):o}function pD(o,c,p){return o&&o.length&&c&&c.length?Op(o,c,t,p):o}var gD=_a(function(o,c){var p=o==null?0:o.length,v=Sp(o,c);return Vv(o,dr(c,function(C){return wa(C,p)?+C:C}).sort(Zv)),v});function mD(o,c){var p=[];if(!(o&&o.length))return p;var v=-1,C=[],N=o.length;for(c=He(c,3);++v<N;){var U=o[v];c(U,v,o)&&(p.push(U),C.push(v))}return Vv(o,C),p}function e0(o){return o==null?o:uN.call(o)}function yD(o,c,p){var v=o==null?0:o.length;return v?(p&&typeof p!="number"&&vn(o,c,p)?(c=0,p=v):(c=c==null?0:pt(c),p=p===t?v:pt(p)),ni(o,c,p)):[]}function vD(o,c){return df(o,c)}function _D(o,c,p){return Mp(o,c,He(p,2))}function wD(o,c){var p=o==null?0:o.length;if(p){var v=df(o,c);if(v<p&&Ei(o[v],c))return v}return-1}function ED(o,c){return df(o,c,!0)}function CD(o,c,p){return Mp(o,c,He(p,2),!0)}function bD(o,c){var p=o==null?0:o.length;if(p){var v=df(o,c,!0)-1;if(Ei(o[v],c))return v}return-1}function xD(o){return o&&o.length?Kv(o):[]}function TD(o,c){return o&&o.length?Kv(o,He(c,2)):[]}function SD(o){var c=o==null?0:o.length;return c?ni(o,1,c):[]}function AD(o,c,p){return o&&o.length?(c=p||c===t?1:pt(c),ni(o,0,c<0?0:c)):[]}function kD(o,c,p){var v=o==null?0:o.length;return v?(c=p||c===t?1:pt(c),c=v-c,ni(o,c<0?0:c,v)):[]}function ID(o,c){return o&&o.length?hf(o,He(c,3),!1,!0):[]}function ND(o,c){return o&&o.length?hf(o,He(c,3)):[]}var RD=wt(function(o){return Za(Jr(o,1,br,!0))}),DD=wt(function(o){var c=ii(o);return br(c)&&(c=t),Za(Jr(o,1,br,!0),He(c,2))}),BD=wt(function(o){var c=ii(o);return c=typeof c=="function"?c:t,Za(Jr(o,1,br,!0),t,c)});function OD(o){return o&&o.length?Za(o):[]}function LD(o,c){return o&&o.length?Za(o,He(c,2)):[]}function PD(o,c){return c=typeof c=="function"?c:t,o&&o.length?Za(o,t,c):[]}function t0(o){if(!(o&&o.length))return[];var c=0;return o=Ya(o,function(p){if(br(p))return c=Br(p.length,c),!0}),vp(c,function(p){return dr(o,gp(p))})}function N1(o,c){if(!(o&&o.length))return[];var p=t0(o);return c==null?p:dr(p,function(v){return Fn(c,t,v)})}var MD=wt(function(o,c){return br(o)?cu(o,c):[]}),UD=wt(function(o){return Fp(Ya(o,br))}),FD=wt(function(o){var c=ii(o);return br(c)&&(c=t),Fp(Ya(o,br),He(c,2))}),qD=wt(function(o){var c=ii(o);return c=typeof c=="function"?c:t,Fp(Ya(o,br),t,c)}),GD=wt(t0);function VD(o,c){return zv(o||[],c||[],uu)}function HD(o,c){return zv(o||[],c||[],hu)}var KD=wt(function(o){var c=o.length,p=c>1?o[c-1]:t;return p=typeof p=="function"?(o.pop(),p):t,N1(o,p)});function R1(o){var c=A(o);return c.__chain__=!0,c}function jD(o,c){return c(o),o}function Cf(o,c){return c(o)}var YD=_a(function(o){var c=o.length,p=c?o[0]:0,v=this.__wrapped__,C=function(N){return Sp(N,o)};return c>1||this.__actions__.length||!(v instanceof kt)||!wa(p)?this.thru(C):(v=v.slice(p,+p+(c?1:0)),v.__actions__.push({func:Cf,args:[C],thisArg:t}),new ti(v,this.__chain__).thru(function(N){return c&&!N.length&&N.push(t),N}))});function WD(){return R1(this)}function zD(){return new ti(this.value(),this.__chain__)}function QD(){this.__values__===t&&(this.__values__=j1(this.value()));var o=this.__index__>=this.__values__.length,c=o?t:this.__values__[this.__index__++];return{done:o,value:c}}function XD(){return this}function JD(o){for(var c,p=this;p instanceof of;){var v=x1(p);v.__index__=0,v.__values__=t,c?C.__wrapped__=v:c=v;var C=v;p=p.__wrapped__}return C.__wrapped__=o,c}function ZD(){var o=this.__wrapped__;if(o instanceof kt){var c=o;return this.__actions__.length&&(c=new kt(this)),c=c.reverse(),c.__actions__.push({func:Cf,args:[e0],thisArg:t}),new ti(c,this.__chain__)}return this.thru(e0)}function $D(){return Wv(this.__wrapped__,this.__actions__)}var eB=pf(function(o,c,p){zt.call(o,p)?++o[p]:ya(o,p,1)});function tB(o,c,p){var v=at(o)?sv:jN;return p&&vn(o,c,p)&&(c=t),v(o,He(c,3))}function rB(o,c){var p=at(o)?Ya:Nv;return p(o,He(c,3))}var nB=i1(T1),iB=i1(S1);function aB(o,c){return Jr(bf(o,c),1)}function sB(o,c){return Jr(bf(o,c),De)}function oB(o,c,p){return p=p===t?1:pt(p),Jr(bf(o,c),p)}function D1(o,c){var p=at(o)?$n:Ja;return p(o,He(c,3))}function B1(o,c){var p=at(o)?SI:Iv;return p(o,He(c,3))}var lB=pf(function(o,c,p){zt.call(o,p)?o[p].push(c):ya(o,p,[c])});function uB(o,c,p,v){o=Nn(o)?o:Ko(o),p=p&&!v?pt(p):0;var C=o.length;return p<0&&(p=Br(C+p,0)),kf(o)?p<=C&&o.indexOf(c,p)>-1:!!C&&Bo(o,c,p)>-1}var cB=wt(function(o,c,p){var v=-1,C=typeof c=="function",N=Nn(o)?oe(o.length):[];return Ja(o,function(U){N[++v]=C?Fn(c,U,p):fu(U,c,p)}),N}),fB=pf(function(o,c,p){ya(o,p,c)});function bf(o,c){var p=at(o)?dr:Pv;return p(o,He(c,3))}function dB(o,c,p,v){return o==null?[]:(at(c)||(c=c==null?[]:[c]),p=v?t:p,at(p)||(p=p==null?[]:[p]),qv(o,c,p))}var hB=pf(function(o,c,p){o[p?0:1].push(c)},function(){return[[],[]]});function pB(o,c,p){var v=at(o)?hp:cv,C=arguments.length<3;return v(o,He(c,4),p,C,Ja)}function gB(o,c,p){var v=at(o)?AI:cv,C=arguments.length<3;return v(o,He(c,4),p,C,Iv)}function mB(o,c){var p=at(o)?Ya:Nv;return p(o,Sf(He(c,3)))}function yB(o){var c=at(o)?Tv:uR;return c(o)}function vB(o,c,p){(p?vn(o,c,p):c===t)?c=1:c=pt(c);var v=at(o)?qN:cR;return v(o,c)}function _B(o){var c=at(o)?GN:dR;return c(o)}function wB(o){if(o==null)return 0;if(Nn(o))return kf(o)?Lo(o):o.length;var c=fn(o);return c==j||c==Z?o.size:Dp(o).length}function EB(o,c,p){var v=at(o)?pp:hR;return p&&vn(o,c,p)&&(c=t),v(o,He(c,3))}var CB=wt(function(o,c){if(o==null)return[];var p=c.length;return p>1&&vn(o,c[0],c[1])?c=[]:p>2&&vn(c[0],c[1],c[2])&&(c=[c[0]]),qv(o,Jr(c,1),[])}),xf=rN||function(){return Fr.Date.now()};function bB(o,c){if(typeof c!="function")throw new ei(i);return o=pt(o),function(){if(--o<1)return c.apply(this,arguments)}}function O1(o,c,p){return c=p?t:c,c=o&&c==null?o.length:c,va(o,R,t,t,t,t,c)}function L1(o,c){var p;if(typeof c!="function")throw new ei(i);return o=pt(o),function(){return--o>0&&(p=c.apply(this,arguments)),o<=1&&(c=t),p}}var r0=wt(function(o,c,p){var v=m;if(p.length){var C=za(p,Vo(r0));v|=k}return va(o,v,c,p,C)}),P1=wt(function(o,c,p){var v=m|w;if(p.length){var C=za(p,Vo(P1));v|=k}return va(c,v,o,p,C)});function M1(o,c,p){c=p?t:c;var v=va(o,E,t,t,t,t,t,c);return v.placeholder=M1.placeholder,v}function U1(o,c,p){c=p?t:c;var v=va(o,b,t,t,t,t,t,c);return v.placeholder=U1.placeholder,v}function F1(o,c,p){var v,C,N,U,q,z,pe=0,ge=!1,we=!1,Se=!0;if(typeof o!="function")throw new ei(i);c=ai(c)||0,mr(p)&&(ge=!!p.leading,we="maxWait"in p,N=we?Br(ai(p.maxWait)||0,c):N,Se="trailing"in p?!!p.trailing:Se);function Pe(xr){var Ci=v,ba=C;return v=C=t,pe=xr,U=o.apply(ba,Ci),U}function We(xr){return pe=xr,q=mu(bt,c),ge?Pe(xr):U}function yt(xr){var Ci=xr-z,ba=xr-pe,i_=c-Ci;return we?cn(i_,N-ba):i_}function ze(xr){var Ci=xr-z,ba=xr-pe;return z===t||Ci>=c||Ci<0||we&&ba>=N}function bt(){var xr=xf();if(ze(xr))return Lt(xr);q=mu(bt,yt(xr))}function Lt(xr){return q=t,Se&&v?Pe(xr):(v=C=t,U)}function Hn(){q!==t&&Qv(q),pe=0,v=z=C=q=t}function _n(){return q===t?U:Lt(xf())}function Kn(){var xr=xf(),Ci=ze(xr);if(v=arguments,C=this,z=xr,Ci){if(q===t)return We(z);if(we)return Qv(q),q=mu(bt,c),Pe(z)}return q===t&&(q=mu(bt,c)),U}return Kn.cancel=Hn,Kn.flush=_n,Kn}var xB=wt(function(o,c){return kv(o,1,c)}),TB=wt(function(o,c,p){return kv(o,ai(c)||0,p)});function SB(o){return va(o,ne)}function Tf(o,c){if(typeof o!="function"||c!=null&&typeof c!="function")throw new ei(i);var p=function(){var v=arguments,C=c?c.apply(this,v):v[0],N=p.cache;if(N.has(C))return N.get(C);var U=o.apply(this,v);return p.cache=N.set(C,U)||N,U};return p.cache=new(Tf.Cache||ma),p}Tf.Cache=ma;function Sf(o){if(typeof o!="function")throw new ei(i);return function(){var c=arguments;switch(c.length){case 0:return!o.call(this);case 1:return!o.call(this,c[0]);case 2:return!o.call(this,c[0],c[1]);case 3:return!o.call(this,c[0],c[1],c[2])}return!o.apply(this,c)}}function AB(o){return L1(2,o)}var kB=pR(function(o,c){c=c.length==1&&at(c[0])?dr(c[0],qn(He())):dr(Jr(c,1),qn(He()));var p=c.length;return wt(function(v){for(var C=-1,N=cn(v.length,p);++C<N;)v[C]=c[C].call(this,v[C]);return Fn(o,this,v)})}),n0=wt(function(o,c){var p=za(c,Vo(n0));return va(o,k,t,c,p)}),q1=wt(function(o,c){var p=za(c,Vo(q1));return va(o,O,t,c,p)}),IB=_a(function(o,c){return va(o,B,t,t,t,c)});function NB(o,c){if(typeof o!="function")throw new ei(i);return c=c===t?c:pt(c),wt(o,c)}function RB(o,c){if(typeof o!="function")throw new ei(i);return c=c==null?0:Br(pt(c),0),wt(function(p){var v=p[c],C=es(p,0,c);return v&&Wa(C,v),Fn(o,this,C)})}function DB(o,c,p){var v=!0,C=!0;if(typeof o!="function")throw new ei(i);return mr(p)&&(v="leading"in p?!!p.leading:v,C="trailing"in p?!!p.trailing:C),F1(o,c,{leading:v,maxWait:c,trailing:C})}function BB(o){return O1(o,1)}function OB(o,c){return n0(Gp(c),o)}function LB(){if(!arguments.length)return[];var o=arguments[0];return at(o)?o:[o]}function PB(o){return ri(o,h)}function MB(o,c){return c=typeof c=="function"?c:t,ri(o,h,c)}function UB(o){return ri(o,f|h)}function FB(o,c){return c=typeof c=="function"?c:t,ri(o,f|h,c)}function qB(o,c){return c==null||Av(o,c,qr(c))}function Ei(o,c){return o===c||o!==o&&c!==c}var GB=vf(Ip),VB=vf(function(o,c){return o>=c}),qs=Bv(function(){return arguments}())?Bv:function(o){return wr(o)&&zt.call(o,"callee")&&!_v.call(o,"callee")},at=oe.isArray,HB=ev?qn(ev):JN;function Nn(o){return o!=null&&Af(o.length)&&!Ea(o)}function br(o){return wr(o)&&Nn(o)}function KB(o){return o===!0||o===!1||wr(o)&&yn(o)==rt}var ts=iN||p0,jB=tv?qn(tv):ZN;function YB(o){return wr(o)&&o.nodeType===1&&!yu(o)}function WB(o){if(o==null)return!0;if(Nn(o)&&(at(o)||typeof o=="string"||typeof o.splice=="function"||ts(o)||Ho(o)||qs(o)))return!o.length;var c=fn(o);if(c==j||c==Z)return!o.size;if(gu(o))return!Dp(o).length;for(var p in o)if(zt.call(o,p))return!1;return!0}function zB(o,c){return du(o,c)}function QB(o,c,p){p=typeof p=="function"?p:t;var v=p?p(o,c):t;return v===t?du(o,c,t,p):!!v}function i0(o){if(!wr(o))return!1;var c=yn(o);return c==I||c==dt||typeof o.message=="string"&&typeof o.name=="string"&&!yu(o)}function XB(o){return typeof o=="number"&&Ev(o)}function Ea(o){if(!mr(o))return!1;var c=yn(o);return c==D||c==L||c==Bt||c==X}function G1(o){return typeof o=="number"&&o==pt(o)}function Af(o){return typeof o=="number"&&o>-1&&o%1==0&&o<=me}function mr(o){var c=typeof o;return o!=null&&(c=="object"||c=="function")}function wr(o){return o!=null&&typeof o=="object"}var V1=rv?qn(rv):eR;function JB(o,c){return o===c||Rp(o,c,zp(c))}function ZB(o,c,p){return p=typeof p=="function"?p:t,Rp(o,c,zp(c),p)}function $B(o){return H1(o)&&o!=+o}function eO(o){if(MR(o))throw new tt(n);return Ov(o)}function tO(o){return o===null}function rO(o){return o==null}function H1(o){return typeof o=="number"||wr(o)&&yn(o)==H}function yu(o){if(!wr(o)||yn(o)!=J)return!1;var c=$c(o);if(c===null)return!0;var p=zt.call(c,"constructor")&&c.constructor;return typeof p=="function"&&p instanceof p&&Qc.call(p)==ZI}var a0=nv?qn(nv):tR;function nO(o){return G1(o)&&o>=-me&&o<=me}var K1=iv?qn(iv):rR;function kf(o){return typeof o=="string"||!at(o)&&wr(o)&&yn(o)==he}function Vn(o){return typeof o=="symbol"||wr(o)&&yn(o)==Le}var Ho=av?qn(av):nR;function iO(o){return o===t}function aO(o){return wr(o)&&fn(o)==ht}function sO(o){return wr(o)&&yn(o)==Qt}var oO=vf(Bp),lO=vf(function(o,c){return o<=c});function j1(o){if(!o)return[];if(Nn(o))return kf(o)?_i(o):In(o);if(iu&&o[iu])return qI(o[iu]());var c=fn(o),p=c==j?wp:c==Z?Yc:Ko;return p(o)}function Ca(o){if(!o)return o===0?o:0;if(o=ai(o),o===De||o===-De){var c=o<0?-1:1;return c*te}return o===o?o:0}function pt(o){var c=Ca(o),p=c%1;return c===c?p?c-p:c:0}function Y1(o){return o?Ps(pt(o),0,et):0}function ai(o){if(typeof o=="number")return o;if(Vn(o))return Fe;if(mr(o)){var c=typeof o.valueOf=="function"?o.valueOf():o;o=mr(c)?c+"":c}if(typeof o!="string")return o===0?o:+o;o=fv(o);var p=Hk.test(o);return p||jk.test(o)?bI(o.slice(2),p?2:8):Vk.test(o)?Fe:+o}function W1(o){return qi(o,Rn(o))}function uO(o){return o?Ps(pt(o),-me,me):o===0?o:0}function Kt(o){return o==null?"":Gn(o)}var cO=qo(function(o,c){if(gu(c)||Nn(c)){qi(c,qr(c),o);return}for(var p in c)zt.call(c,p)&&uu(o,p,c[p])}),z1=qo(function(o,c){qi(c,Rn(c),o)}),If=qo(function(o,c,p,v){qi(c,Rn(c),o,v)}),fO=qo(function(o,c,p,v){qi(c,qr(c),o,v)}),dO=_a(Sp);function hO(o,c){var p=Fo(o);return c==null?p:Sv(p,c)}var pO=wt(function(o,c){o=Zt(o);var p=-1,v=c.length,C=v>2?c[2]:t;for(C&&vn(c[0],c[1],C)&&(v=1);++p<v;)for(var N=c[p],U=Rn(N),q=-1,z=U.length;++q<z;){var pe=U[q],ge=o[pe];(ge===t||Ei(ge,Po[pe])&&!zt.call(o,pe))&&(o[pe]=N[pe])}return o}),gO=wt(function(o){return o.push(t,f1),Fn(Q1,t,o)});function mO(o,c){return ov(o,He(c,3),Fi)}function yO(o,c){return ov(o,He(c,3),kp)}function vO(o,c){return o==null?o:Ap(o,He(c,3),Rn)}function _O(o,c){return o==null?o:Rv(o,He(c,3),Rn)}function wO(o,c){return o&&Fi(o,He(c,3))}function EO(o,c){return o&&kp(o,He(c,3))}function CO(o){return o==null?[]:cf(o,qr(o))}function bO(o){return o==null?[]:cf(o,Rn(o))}function s0(o,c,p){var v=o==null?t:Ms(o,c);return v===t?p:v}function xO(o,c){return o!=null&&p1(o,c,WN)}function o0(o,c){return o!=null&&p1(o,c,zN)}var TO=s1(function(o,c,p){c!=null&&typeof c.toString!="function"&&(c=Xc.call(c)),o[c]=p},u0(Dn)),SO=s1(function(o,c,p){c!=null&&typeof c.toString!="function"&&(c=Xc.call(c)),zt.call(o,c)?o[c].push(p):o[c]=[p]},He),AO=wt(fu);function qr(o){return Nn(o)?xv(o):Dp(o)}function Rn(o){return Nn(o)?xv(o,!0):iR(o)}function kO(o,c){var p={};return c=He(c,3),Fi(o,function(v,C,N){ya(p,c(v,C,N),v)}),p}function IO(o,c){var p={};return c=He(c,3),Fi(o,function(v,C,N){ya(p,C,c(v,C,N))}),p}var NO=qo(function(o,c,p){ff(o,c,p)}),Q1=qo(function(o,c,p,v){ff(o,c,p,v)}),RO=_a(function(o,c){var p={};if(o==null)return p;var v=!1;c=dr(c,function(N){return N=$a(N,o),v||(v=N.length>1),N}),qi(o,Yp(o),p),v&&(p=ri(p,f|d|h,TR));for(var C=c.length;C--;)Up(p,c[C]);return p});function DO(o,c){return X1(o,Sf(He(c)))}var BO=_a(function(o,c){return o==null?{}:sR(o,c)});function X1(o,c){if(o==null)return{};var p=dr(Yp(o),function(v){return[v]});return c=He(c),Gv(o,p,function(v,C){return c(v,C[0])})}function OO(o,c,p){c=$a(c,o);var v=-1,C=c.length;for(C||(C=1,o=t);++v<C;){var N=o==null?t:o[Gi(c[v])];N===t&&(v=C,N=p),o=Ea(N)?N.call(o):N}return o}function LO(o,c,p){return o==null?o:hu(o,c,p)}function PO(o,c,p,v){return v=typeof v=="function"?v:t,o==null?o:hu(o,c,p,v)}var J1=u1(qr),Z1=u1(Rn);function MO(o,c,p){var v=at(o),C=v||ts(o)||Ho(o);if(c=He(c,4),p==null){var N=o&&o.constructor;C?p=v?new N:[]:mr(o)?p=Ea(N)?Fo($c(o)):{}:p={}}return(C?$n:Fi)(o,function(U,q,z){return c(p,U,q,z)}),p}function UO(o,c){return o==null?!0:Up(o,c)}function FO(o,c,p){return o==null?o:Yv(o,c,Gp(p))}function qO(o,c,p,v){return v=typeof v=="function"?v:t,o==null?o:Yv(o,c,Gp(p),v)}function Ko(o){return o==null?[]:_p(o,qr(o))}function GO(o){return o==null?[]:_p(o,Rn(o))}function VO(o,c,p){return p===t&&(p=c,c=t),p!==t&&(p=ai(p),p=p===p?p:0),c!==t&&(c=ai(c),c=c===c?c:0),Ps(ai(o),c,p)}function HO(o,c,p){return c=Ca(c),p===t?(p=c,c=0):p=Ca(p),o=ai(o),QN(o,c,p)}function KO(o,c,p){if(p&&typeof p!="boolean"&&vn(o,c,p)&&(c=p=t),p===t&&(typeof c=="boolean"?(p=c,c=t):typeof o=="boolean"&&(p=o,o=t)),o===t&&c===t?(o=0,c=1):(o=Ca(o),c===t?(c=o,o=0):c=Ca(c)),o>c){var v=o;o=c,c=v}if(p||o%1||c%1){var C=Cv();return cn(o+C*(c-o+CI("1e-"+((C+"").length-1))),c)}return Lp(o,c)}var jO=Go(function(o,c,p){return c=c.toLowerCase(),o+(p?$1(c):c)});function $1(o){return l0(Kt(o).toLowerCase())}function e_(o){return o=Kt(o),o&&o.replace(Wk,LI).replace(dI,"")}function YO(o,c,p){o=Kt(o),c=Gn(c);var v=o.length;p=p===t?v:Ps(pt(p),0,v);var C=p;return p-=c.length,p>=0&&o.slice(p,C)==c}function WO(o){return o=Kt(o),o&&Ak.test(o)?o.replace(Ry,PI):o}function zO(o){return o=Kt(o),o&&Bk.test(o)?o.replace(np,"\\$&"):o}var QO=Go(function(o,c,p){return o+(p?"-":"")+c.toLowerCase()}),XO=Go(function(o,c,p){return o+(p?" ":"")+c.toLowerCase()}),JO=n1("toLowerCase");function ZO(o,c,p){o=Kt(o),c=pt(c);var v=c?Lo(o):0;if(!c||v>=c)return o;var C=(c-v)/2;return yf(nf(C),p)+o+yf(rf(C),p)}function $O(o,c,p){o=Kt(o),c=pt(c);var v=c?Lo(o):0;return c&&v<c?o+yf(c-v,p):o}function e3(o,c,p){o=Kt(o),c=pt(c);var v=c?Lo(o):0;return c&&v<c?yf(c-v,p)+o:o}function t3(o,c,p){return p||c==null?c=0:c&&(c=+c),lN(Kt(o).replace(ip,""),c||0)}function r3(o,c,p){return(p?vn(o,c,p):c===t)?c=1:c=pt(c),Pp(Kt(o),c)}function n3(){var o=arguments,c=Kt(o[0]);return o.length<3?c:c.replace(o[1],o[2])}var i3=Go(function(o,c,p){return o+(p?"_":"")+c.toLowerCase()});function a3(o,c,p){return p&&typeof p!="number"&&vn(o,c,p)&&(c=p=t),p=p===t?et:p>>>0,p?(o=Kt(o),o&&(typeof c=="string"||c!=null&&!a0(c))&&(c=Gn(c),!c&&Oo(o))?es(_i(o),0,p):o.split(c,p)):[]}var s3=Go(function(o,c,p){return o+(p?" ":"")+l0(c)});function o3(o,c,p){return o=Kt(o),p=p==null?0:Ps(pt(p),0,o.length),c=Gn(c),o.slice(p,p+c.length)==c}function l3(o,c,p){var v=A.templateSettings;p&&vn(o,c,p)&&(c=t),o=Kt(o),c=If({},c,v,c1);var C=If({},c.imports,v.imports,c1),N=qr(C),U=_p(C,N),q,z,pe=0,ge=c.interpolate||Gc,we="__p += '",Se=Ep((c.escape||Gc).source+"|"+ge.source+"|"+(ge===Dy?Gk:Gc).source+"|"+(c.evaluate||Gc).source+"|$","g"),Pe="//# sourceURL="+(zt.call(c,"sourceURL")?(c.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++yI+"]")+`
`;o.replace(Se,function(ze,bt,Lt,Hn,_n,Kn){return Lt||(Lt=Hn),we+=o.slice(pe,Kn).replace(zk,MI),bt&&(q=!0,we+=`' +
__e(`+bt+`) +
'`),_n&&(z=!0,we+=`';
`+_n+`;
__p += '`),Lt&&(we+=`' +
((__t = (`+Lt+`)) == null ? '' : __t) +
'`),pe=Kn+ze.length,ze}),we+=`';
`;var We=zt.call(c,"variable")&&c.variable;if(!We)we=`with (obj) {
`+we+`
}
`;else if(Fk.test(We))throw new tt(a);we=(z?we.replace(fr,""):we).replace(xk,"$1").replace(Tk,"$1;"),we="function("+(We||"obj")+`) {
`+(We?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(q?", __e = _.escape":"")+(z?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+we+`return __p
}`;var yt=r_(function(){return Ht(N,Pe+"return "+we).apply(t,U)});if(yt.source=we,i0(yt))throw yt;return yt}function u3(o){return Kt(o).toLowerCase()}function c3(o){return Kt(o).toUpperCase()}function f3(o,c,p){if(o=Kt(o),o&&(p||c===t))return fv(o);if(!o||!(c=Gn(c)))return o;var v=_i(o),C=_i(c),N=dv(v,C),U=hv(v,C)+1;return es(v,N,U).join("")}function d3(o,c,p){if(o=Kt(o),o&&(p||c===t))return o.slice(0,gv(o)+1);if(!o||!(c=Gn(c)))return o;var v=_i(o),C=hv(v,_i(c))+1;return es(v,0,C).join("")}function h3(o,c,p){if(o=Kt(o),o&&(p||c===t))return o.replace(ip,"");if(!o||!(c=Gn(c)))return o;var v=_i(o),C=dv(v,_i(c));return es(v,C).join("")}function p3(o,c){var p=M,v=G;if(mr(c)){var C="separator"in c?c.separator:C;p="length"in c?pt(c.length):p,v="omission"in c?Gn(c.omission):v}o=Kt(o);var N=o.length;if(Oo(o)){var U=_i(o);N=U.length}if(p>=N)return o;var q=p-Lo(v);if(q<1)return v;var z=U?es(U,0,q).join(""):o.slice(0,q);if(C===t)return z+v;if(U&&(q+=z.length-q),a0(C)){if(o.slice(q).search(C)){var pe,ge=z;for(C.global||(C=Ep(C.source,Kt(By.exec(C))+"g")),C.lastIndex=0;pe=C.exec(ge);)var we=pe.index;z=z.slice(0,we===t?q:we)}}else if(o.indexOf(Gn(C),q)!=q){var Se=z.lastIndexOf(C);Se>-1&&(z=z.slice(0,Se))}return z+v}function g3(o){return o=Kt(o),o&&Sk.test(o)?o.replace(Ny,KI):o}var m3=Go(function(o,c,p){return o+(p?" ":"")+c.toUpperCase()}),l0=n1("toUpperCase");function t_(o,c,p){return o=Kt(o),c=p?t:c,c===t?FI(o)?WI(o):NI(o):o.match(c)||[]}var r_=wt(function(o,c){try{return Fn(o,t,c)}catch(p){return i0(p)?p:new tt(p)}}),y3=_a(function(o,c){return $n(c,function(p){p=Gi(p),ya(o,p,r0(o[p],o))}),o});function v3(o){var c=o==null?0:o.length,p=He();return o=c?dr(o,function(v){if(typeof v[1]!="function")throw new ei(i);return[p(v[0]),v[1]]}):[],wt(function(v){for(var C=-1;++C<c;){var N=o[C];if(Fn(N[0],this,v))return Fn(N[1],this,v)}})}function _3(o){return KN(ri(o,f))}function u0(o){return function(){return o}}function w3(o,c){return o==null||o!==o?c:o}var E3=a1(),C3=a1(!0);function Dn(o){return o}function c0(o){return Lv(typeof o=="function"?o:ri(o,f))}function b3(o){return Mv(ri(o,f))}function x3(o,c){return Uv(o,ri(c,f))}var T3=wt(function(o,c){return function(p){return fu(p,o,c)}}),S3=wt(function(o,c){return function(p){return fu(o,p,c)}});function f0(o,c,p){var v=qr(c),C=cf(c,v);p==null&&!(mr(c)&&(C.length||!v.length))&&(p=c,c=o,o=this,C=cf(c,qr(c)));var N=!(mr(p)&&"chain"in p)||!!p.chain,U=Ea(o);return $n(C,function(q){var z=c[q];o[q]=z,U&&(o.prototype[q]=function(){var pe=this.__chain__;if(N||pe){var ge=o(this.__wrapped__),we=ge.__actions__=In(this.__actions__);return we.push({func:z,args:arguments,thisArg:o}),ge.__chain__=pe,ge}return z.apply(o,Wa([this.value()],arguments))})}),o}function A3(){return Fr._===this&&(Fr._=$I),this}function d0(){}function k3(o){return o=pt(o),wt(function(c){return Fv(c,o)})}var I3=Hp(dr),N3=Hp(sv),R3=Hp(pp);function n_(o){return Xp(o)?gp(Gi(o)):oR(o)}function D3(o){return function(c){return o==null?t:Ms(o,c)}}var B3=o1(),O3=o1(!0);function h0(){return[]}function p0(){return!1}function L3(){return{}}function P3(){return""}function M3(){return!0}function U3(o,c){if(o=pt(o),o<1||o>me)return[];var p=et,v=cn(o,et);c=He(c),o-=et;for(var C=vp(v,c);++p<o;)c(p);return C}function F3(o){return at(o)?dr(o,Gi):Vn(o)?[o]:In(b1(Kt(o)))}function q3(o){var c=++JI;return Kt(o)+c}var G3=mf(function(o,c){return o+c},0),V3=Kp("ceil"),H3=mf(function(o,c){return o/c},1),K3=Kp("floor");function j3(o){return o&&o.length?uf(o,Dn,Ip):t}function Y3(o,c){return o&&o.length?uf(o,He(c,2),Ip):t}function W3(o){return uv(o,Dn)}function z3(o,c){return uv(o,He(c,2))}function Q3(o){return o&&o.length?uf(o,Dn,Bp):t}function X3(o,c){return o&&o.length?uf(o,He(c,2),Bp):t}var J3=mf(function(o,c){return o*c},1),Z3=Kp("round"),$3=mf(function(o,c){return o-c},0);function eL(o){return o&&o.length?yp(o,Dn):0}function tL(o,c){return o&&o.length?yp(o,He(c,2)):0}return A.after=bB,A.ary=O1,A.assign=cO,A.assignIn=z1,A.assignInWith=If,A.assignWith=fO,A.at=dO,A.before=L1,A.bind=r0,A.bindAll=y3,A.bindKey=P1,A.castArray=LB,A.chain=R1,A.chunk=KR,A.compact=jR,A.concat=YR,A.cond=v3,A.conforms=_3,A.constant=u0,A.countBy=eB,A.create=hO,A.curry=M1,A.curryRight=U1,A.debounce=F1,A.defaults=pO,A.defaultsDeep=gO,A.defer=xB,A.delay=TB,A.difference=WR,A.differenceBy=zR,A.differenceWith=QR,A.drop=XR,A.dropRight=JR,A.dropRightWhile=ZR,A.dropWhile=$R,A.fill=eD,A.filter=rB,A.flatMap=aB,A.flatMapDeep=sB,A.flatMapDepth=oB,A.flatten=A1,A.flattenDeep=tD,A.flattenDepth=rD,A.flip=SB,A.flow=E3,A.flowRight=C3,A.fromPairs=nD,A.functions=CO,A.functionsIn=bO,A.groupBy=lB,A.initial=aD,A.intersection=sD,A.intersectionBy=oD,A.intersectionWith=lD,A.invert=TO,A.invertBy=SO,A.invokeMap=cB,A.iteratee=c0,A.keyBy=fB,A.keys=qr,A.keysIn=Rn,A.map=bf,A.mapKeys=kO,A.mapValues=IO,A.matches=b3,A.matchesProperty=x3,A.memoize=Tf,A.merge=NO,A.mergeWith=Q1,A.method=T3,A.methodOf=S3,A.mixin=f0,A.negate=Sf,A.nthArg=k3,A.omit=RO,A.omitBy=DO,A.once=AB,A.orderBy=dB,A.over=I3,A.overArgs=kB,A.overEvery=N3,A.overSome=R3,A.partial=n0,A.partialRight=q1,A.partition=hB,A.pick=BO,A.pickBy=X1,A.property=n_,A.propertyOf=D3,A.pull=dD,A.pullAll=I1,A.pullAllBy=hD,A.pullAllWith=pD,A.pullAt=gD,A.range=B3,A.rangeRight=O3,A.rearg=IB,A.reject=mB,A.remove=mD,A.rest=NB,A.reverse=e0,A.sampleSize=vB,A.set=LO,A.setWith=PO,A.shuffle=_B,A.slice=yD,A.sortBy=CB,A.sortedUniq=xD,A.sortedUniqBy=TD,A.split=a3,A.spread=RB,A.tail=SD,A.take=AD,A.takeRight=kD,A.takeRightWhile=ID,A.takeWhile=ND,A.tap=jD,A.throttle=DB,A.thru=Cf,A.toArray=j1,A.toPairs=J1,A.toPairsIn=Z1,A.toPath=F3,A.toPlainObject=W1,A.transform=MO,A.unary=BB,A.union=RD,A.unionBy=DD,A.unionWith=BD,A.uniq=OD,A.uniqBy=LD,A.uniqWith=PD,A.unset=UO,A.unzip=t0,A.unzipWith=N1,A.update=FO,A.updateWith=qO,A.values=Ko,A.valuesIn=GO,A.without=MD,A.words=t_,A.wrap=OB,A.xor=UD,A.xorBy=FD,A.xorWith=qD,A.zip=GD,A.zipObject=VD,A.zipObjectDeep=HD,A.zipWith=KD,A.entries=J1,A.entriesIn=Z1,A.extend=z1,A.extendWith=If,f0(A,A),A.add=G3,A.attempt=r_,A.camelCase=jO,A.capitalize=$1,A.ceil=V3,A.clamp=VO,A.clone=PB,A.cloneDeep=UB,A.cloneDeepWith=FB,A.cloneWith=MB,A.conformsTo=qB,A.deburr=e_,A.defaultTo=w3,A.divide=H3,A.endsWith=YO,A.eq=Ei,A.escape=WO,A.escapeRegExp=zO,A.every=tB,A.find=nB,A.findIndex=T1,A.findKey=mO,A.findLast=iB,A.findLastIndex=S1,A.findLastKey=yO,A.floor=K3,A.forEach=D1,A.forEachRight=B1,A.forIn=vO,A.forInRight=_O,A.forOwn=wO,A.forOwnRight=EO,A.get=s0,A.gt=GB,A.gte=VB,A.has=xO,A.hasIn=o0,A.head=k1,A.identity=Dn,A.includes=uB,A.indexOf=iD,A.inRange=HO,A.invoke=AO,A.isArguments=qs,A.isArray=at,A.isArrayBuffer=HB,A.isArrayLike=Nn,A.isArrayLikeObject=br,A.isBoolean=KB,A.isBuffer=ts,A.isDate=jB,A.isElement=YB,A.isEmpty=WB,A.isEqual=zB,A.isEqualWith=QB,A.isError=i0,A.isFinite=XB,A.isFunction=Ea,A.isInteger=G1,A.isLength=Af,A.isMap=V1,A.isMatch=JB,A.isMatchWith=ZB,A.isNaN=$B,A.isNative=eO,A.isNil=rO,A.isNull=tO,A.isNumber=H1,A.isObject=mr,A.isObjectLike=wr,A.isPlainObject=yu,A.isRegExp=a0,A.isSafeInteger=nO,A.isSet=K1,A.isString=kf,A.isSymbol=Vn,A.isTypedArray=Ho,A.isUndefined=iO,A.isWeakMap=aO,A.isWeakSet=sO,A.join=uD,A.kebabCase=QO,A.last=ii,A.lastIndexOf=cD,A.lowerCase=XO,A.lowerFirst=JO,A.lt=oO,A.lte=lO,A.max=j3,A.maxBy=Y3,A.mean=W3,A.meanBy=z3,A.min=Q3,A.minBy=X3,A.stubArray=h0,A.stubFalse=p0,A.stubObject=L3,A.stubString=P3,A.stubTrue=M3,A.multiply=J3,A.nth=fD,A.noConflict=A3,A.noop=d0,A.now=xf,A.pad=ZO,A.padEnd=$O,A.padStart=e3,A.parseInt=t3,A.random=KO,A.reduce=pB,A.reduceRight=gB,A.repeat=r3,A.replace=n3,A.result=OO,A.round=Z3,A.runInContext=W,A.sample=yB,A.size=wB,A.snakeCase=i3,A.some=EB,A.sortedIndex=vD,A.sortedIndexBy=_D,A.sortedIndexOf=wD,A.sortedLastIndex=ED,A.sortedLastIndexBy=CD,A.sortedLastIndexOf=bD,A.startCase=s3,A.startsWith=o3,A.subtract=$3,A.sum=eL,A.sumBy=tL,A.template=l3,A.times=U3,A.toFinite=Ca,A.toInteger=pt,A.toLength=Y1,A.toLower=u3,A.toNumber=ai,A.toSafeInteger=uO,A.toString=Kt,A.toUpper=c3,A.trim=f3,A.trimEnd=d3,A.trimStart=h3,A.truncate=p3,A.unescape=g3,A.uniqueId=q3,A.upperCase=m3,A.upperFirst=l0,A.each=D1,A.eachRight=B1,A.first=k1,f0(A,function(){var o={};return Fi(A,function(c,p){zt.call(A.prototype,p)||(o[p]=c)}),o}(),{chain:!1}),A.VERSION=e,$n(["bind","bindKey","curry","curryRight","partial","partialRight"],function(o){A[o].placeholder=A}),$n(["drop","take"],function(o,c){kt.prototype[o]=function(p){p=p===t?1:Br(pt(p),0);var v=this.__filtered__&&!c?new kt(this):this.clone();return v.__filtered__?v.__takeCount__=cn(p,v.__takeCount__):v.__views__.push({size:cn(p,et),type:o+(v.__dir__<0?"Right":"")}),v},kt.prototype[o+"Right"]=function(p){return this.reverse()[o](p).reverse()}}),$n(["filter","map","takeWhile"],function(o,c){var p=c+1,v=p==ye||p==Je;kt.prototype[o]=function(C){var N=this.clone();return N.__iteratees__.push({iteratee:He(C,3),type:p}),N.__filtered__=N.__filtered__||v,N}}),$n(["head","last"],function(o,c){var p="take"+(c?"Right":"");kt.prototype[o]=function(){return this[p](1).value()[0]}}),$n(["initial","tail"],function(o,c){var p="drop"+(c?"":"Right");kt.prototype[o]=function(){return this.__filtered__?new kt(this):this[p](1)}}),kt.prototype.compact=function(){return this.filter(Dn)},kt.prototype.find=function(o){return this.filter(o).head()},kt.prototype.findLast=function(o){return this.reverse().find(o)},kt.prototype.invokeMap=wt(function(o,c){return typeof o=="function"?new kt(this):this.map(function(p){return fu(p,o,c)})}),kt.prototype.reject=function(o){return this.filter(Sf(He(o)))},kt.prototype.slice=function(o,c){o=pt(o);var p=this;return p.__filtered__&&(o>0||c<0)?new kt(p):(o<0?p=p.takeRight(-o):o&&(p=p.drop(o)),c!==t&&(c=pt(c),p=c<0?p.dropRight(-c):p.take(c-o)),p)},kt.prototype.takeRightWhile=function(o){return this.reverse().takeWhile(o).reverse()},kt.prototype.toArray=function(){return this.take(et)},Fi(kt.prototype,function(o,c){var p=/^(?:filter|find|map|reject)|While$/.test(c),v=/^(?:head|last)$/.test(c),C=A[v?"take"+(c=="last"?"Right":""):c],N=v||/^find/.test(c);!C||(A.prototype[c]=function(){var U=this.__wrapped__,q=v?[1]:arguments,z=U instanceof kt,pe=q[0],ge=z||at(U),we=function(bt){var Lt=C.apply(A,Wa([bt],q));return v&&Se?Lt[0]:Lt};ge&&p&&typeof pe=="function"&&pe.length!=1&&(z=ge=!1);var Se=this.__chain__,Pe=!!this.__actions__.length,We=N&&!Se,yt=z&&!Pe;if(!N&&ge){U=yt?U:new kt(this);var ze=o.apply(U,q);return ze.__actions__.push({func:Cf,args:[we],thisArg:t}),new ti(ze,Se)}return We&&yt?o.apply(this,q):(ze=this.thru(we),We?v?ze.value()[0]:ze.value():ze)})}),$n(["pop","push","shift","sort","splice","unshift"],function(o){var c=Wc[o],p=/^(?:push|sort|unshift)$/.test(o)?"tap":"thru",v=/^(?:pop|shift)$/.test(o);A.prototype[o]=function(){var C=arguments;if(v&&!this.__chain__){var N=this.value();return c.apply(at(N)?N:[],C)}return this[p](function(U){return c.apply(at(U)?U:[],C)})}}),Fi(kt.prototype,function(o,c){var p=A[c];if(p){var v=p.name+"";zt.call(Uo,v)||(Uo[v]=[]),Uo[v].push({name:c,func:p})}}),Uo[gf(t,w).name]=[{name:"wrapper",func:t}],kt.prototype.clone=gN,kt.prototype.reverse=mN,kt.prototype.value=yN,A.prototype.at=YD,A.prototype.chain=WD,A.prototype.commit=zD,A.prototype.next=QD,A.prototype.plant=JD,A.prototype.reverse=ZD,A.prototype.toJSON=A.prototype.valueOf=A.prototype.value=$D,A.prototype.first=A.prototype.head,iu&&(A.prototype[iu]=XD),A},Qa=zI();typeof define=="function"&&typeof define.amd=="object"&&define.amd?(Fr._=Qa,define(function(){return Qa})):Ds?((Ds.exports=Qa)._=Qa,cp._=Qa):Fr._=Qa}).call(Ll)});var Xm=de((oz,Sh)=>{var LT,PT,MT,UT,FT,qT,GT,VT,HT,xh,Qm,KT,jT,YT,ql,WT,zT,QT,XT,JT,ZT,$T,eS,Th;(function(t){var e=typeof global=="object"?global:typeof self=="object"?self:typeof this=="object"?this:{};typeof define=="function"&&define.amd?define("tslib",["exports"],function(n){t(r(e,r(n)))}):typeof Sh=="object"&&typeof Sh.exports=="object"?t(r(e,r(Sh.exports))):t(r(e));function r(n,i){return n!==e&&(typeof Object.create=="function"?Object.defineProperty(n,"__esModule",{value:!0}):n.__esModule=!0),function(a,s){return n[a]=i?i(a,s):s}}})(function(t){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])};LT=function(n,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");e(n,i);function a(){this.constructor=n}n.prototype=i===null?Object.create(i):(a.prototype=i.prototype,new a)},PT=Object.assign||function(n){for(var i,a=1,s=arguments.length;a<s;a++){i=arguments[a];for(var l in i)Object.prototype.hasOwnProperty.call(i,l)&&(n[l]=i[l])}return n},MT=function(n,i){var a={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&i.indexOf(s)<0&&(a[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,s=Object.getOwnPropertySymbols(n);l<s.length;l++)i.indexOf(s[l])<0&&Object.prototype.propertyIsEnumerable.call(n,s[l])&&(a[s[l]]=n[s[l]]);return a},UT=function(n,i,a,s){var l=arguments.length,u=l<3?i:s===null?s=Object.getOwnPropertyDescriptor(i,a):s,f;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(n,i,a,s);else for(var d=n.length-1;d>=0;d--)(f=n[d])&&(u=(l<3?f(u):l>3?f(i,a,u):f(i,a))||u);return l>3&&u&&Object.defineProperty(i,a,u),u},FT=function(n,i){return function(a,s){i(a,s,n)}},qT=function(n,i){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,i)},GT=function(n,i,a,s){function l(u){return u instanceof a?u:new a(function(f){f(u)})}return new(a||(a=Promise))(function(u,f){function d(y){try{g(s.next(y))}catch(m){f(m)}}function h(y){try{g(s.throw(y))}catch(m){f(m)}}function g(y){y.done?u(y.value):l(y.value).then(d,h)}g((s=s.apply(n,i||[])).next())})},VT=function(n,i){var a={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},s,l,u,f;return f={next:d(0),throw:d(1),return:d(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function d(g){return function(y){return h([g,y])}}function h(g){if(s)throw new TypeError("Generator is already executing.");for(;a;)try{if(s=1,l&&(u=g[0]&2?l.return:g[0]?l.throw||((u=l.return)&&u.call(l),0):l.next)&&!(u=u.call(l,g[1])).done)return u;switch(l=0,u&&(g=[g[0]&2,u.value]),g[0]){case 0:case 1:u=g;break;case 4:return a.label++,{value:g[1],done:!1};case 5:a.label++,l=g[1],g=[0];continue;case 7:g=a.ops.pop(),a.trys.pop();continue;default:if(u=a.trys,!(u=u.length>0&&u[u.length-1])&&(g[0]===6||g[0]===2)){a=0;continue}if(g[0]===3&&(!u||g[1]>u[0]&&g[1]<u[3])){a.label=g[1];break}if(g[0]===6&&a.label<u[1]){a.label=u[1],u=g;break}if(u&&a.label<u[2]){a.label=u[2],a.ops.push(g);break}u[2]&&a.ops.pop(),a.trys.pop();continue}g=i.call(n,a)}catch(y){g=[6,y],l=0}finally{s=u=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}},HT=function(n,i){for(var a in n)a!=="default"&&!Object.prototype.hasOwnProperty.call(i,a)&&Th(i,n,a)},Th=Object.create?function(n,i,a,s){s===void 0&&(s=a),Object.defineProperty(n,s,{enumerable:!0,get:function(){return i[a]}})}:function(n,i,a,s){s===void 0&&(s=a),n[s]=i[a]},xh=function(n){var i=typeof Symbol=="function"&&Symbol.iterator,a=i&&n[i],s=0;if(a)return a.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&s>=n.length&&(n=void 0),{value:n&&n[s++],done:!n}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},Qm=function(n,i){var a=typeof Symbol=="function"&&n[Symbol.iterator];if(!a)return n;var s=a.call(n),l,u=[],f;try{for(;(i===void 0||i-- >0)&&!(l=s.next()).done;)u.push(l.value)}catch(d){f={error:d}}finally{try{l&&!l.done&&(a=s.return)&&a.call(s)}finally{if(f)throw f.error}}return u},KT=function(){for(var n=[],i=0;i<arguments.length;i++)n=n.concat(Qm(arguments[i]));return n},jT=function(){for(var n=0,i=0,a=arguments.length;i<a;i++)n+=arguments[i].length;for(var s=Array(n),l=0,i=0;i<a;i++)for(var u=arguments[i],f=0,d=u.length;f<d;f++,l++)s[l]=u[f];return s},YT=function(n,i){for(var a=0,s=i.length,l=n.length;a<s;a++,l++)n[l]=i[a];return n},ql=function(n){return this instanceof ql?(this.v=n,this):new ql(n)},WT=function(n,i,a){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=a.apply(n,i||[]),l,u=[];return l={},f("next"),f("throw"),f("return"),l[Symbol.asyncIterator]=function(){return this},l;function f(w){s[w]&&(l[w]=function(_){return new Promise(function(E,b){u.push([w,_,E,b])>1||d(w,_)})})}function d(w,_){try{h(s[w](_))}catch(E){m(u[0][3],E)}}function h(w){w.value instanceof ql?Promise.resolve(w.value.v).then(g,y):m(u[0][2],w)}function g(w){d("next",w)}function y(w){d("throw",w)}function m(w,_){w(_),u.shift(),u.length&&d(u[0][0],u[0][1])}},zT=function(n){var i,a;return i={},s("next"),s("throw",function(l){throw l}),s("return"),i[Symbol.iterator]=function(){return this},i;function s(l,u){i[l]=n[l]?function(f){return(a=!a)?{value:ql(n[l](f)),done:l==="return"}:u?u(f):f}:u}},QT=function(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n[Symbol.asyncIterator],a;return i?i.call(n):(n=typeof xh=="function"?xh(n):n[Symbol.iterator](),a={},s("next"),s("throw"),s("return"),a[Symbol.asyncIterator]=function(){return this},a);function s(u){a[u]=n[u]&&function(f){return new Promise(function(d,h){f=n[u](f),l(d,h,f.done,f.value)})}}function l(u,f,d,h){Promise.resolve(h).then(function(g){u({value:g,done:d})},f)}},XT=function(n,i){return Object.defineProperty?Object.defineProperty(n,"raw",{value:i}):n.raw=i,n};var r=Object.create?function(n,i){Object.defineProperty(n,"default",{enumerable:!0,value:i})}:function(n,i){n.default=i};JT=function(n){if(n&&n.__esModule)return n;var i={};if(n!=null)for(var a in n)a!=="default"&&Object.prototype.hasOwnProperty.call(n,a)&&Th(i,n,a);return r(i,n),i},ZT=function(n){return n&&n.__esModule?n:{default:n}},$T=function(n,i,a,s){if(a==="a"&&!s)throw new TypeError("Private accessor was defined without a getter");if(typeof i=="function"?n!==i||!s:!i.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return a==="m"?s:a==="a"?s.call(n):s?s.value:i.get(n)},eS=function(n,i,a,s,l){if(s==="m")throw new TypeError("Private method is not writable");if(s==="a"&&!l)throw new TypeError("Private accessor was defined without a setter");if(typeof i=="function"?n!==i||!l:!i.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return s==="a"?l.call(n,a):l?l.value=a:i.set(n,a),a},t("__extends",LT),t("__assign",PT),t("__rest",MT),t("__decorate",UT),t("__param",FT),t("__metadata",qT),t("__awaiter",GT),t("__generator",VT),t("__exportStar",HT),t("__createBinding",Th),t("__values",xh),t("__read",Qm),t("__spread",KT),t("__spreadArrays",jT),t("__spreadArray",YT),t("__await",ql),t("__asyncGenerator",WT),t("__asyncDelegator",zT),t("__asyncValues",QT),t("__makeTemplateObject",XT),t("__importStar",JT),t("__importDefault",ZT),t("__classPrivateFieldGet",$T),t("__classPrivateFieldSet",eS)})});var SS=de((mQ,Nh)=>{var sS,oS,lS,uS,cS,fS,dS,hS,pS,Ih,Zm,gS,mS,Kl,yS,vS,_S,wS,ES,CS,bS,xS,TS;(function(t){var e=typeof global=="object"?global:typeof self=="object"?self:typeof this=="object"?this:{};typeof define=="function"&&define.amd?define("tslib",["exports"],function(n){t(r(e,r(n)))}):typeof Nh=="object"&&typeof Nh.exports=="object"?t(r(e,r(Nh.exports))):t(r(e));function r(n,i){return n!==e&&(typeof Object.create=="function"?Object.defineProperty(n,"__esModule",{value:!0}):n.__esModule=!0),function(a,s){return n[a]=i?i(a,s):s}}})(function(t){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])};sS=function(r,n){e(r,n);function i(){this.constructor=r}r.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)},oS=Object.assign||function(r){for(var n,i=1,a=arguments.length;i<a;i++){n=arguments[i];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(r[s]=n[s])}return r},lS=function(r,n){var i={};for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&n.indexOf(a)<0&&(i[a]=r[a]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,a=Object.getOwnPropertySymbols(r);s<a.length;s++)n.indexOf(a[s])<0&&Object.prototype.propertyIsEnumerable.call(r,a[s])&&(i[a[s]]=r[a[s]]);return i},uS=function(r,n,i,a){var s=arguments.length,l=s<3?n:a===null?a=Object.getOwnPropertyDescriptor(n,i):a,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(r,n,i,a);else for(var f=r.length-1;f>=0;f--)(u=r[f])&&(l=(s<3?u(l):s>3?u(n,i,l):u(n,i))||l);return s>3&&l&&Object.defineProperty(n,i,l),l},cS=function(r,n){return function(i,a){n(i,a,r)}},fS=function(r,n){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,n)},dS=function(r,n,i,a){function s(l){return l instanceof i?l:new i(function(u){u(l)})}return new(i||(i=Promise))(function(l,u){function f(g){try{h(a.next(g))}catch(y){u(y)}}function d(g){try{h(a.throw(g))}catch(y){u(y)}}function h(g){g.done?l(g.value):s(g.value).then(f,d)}h((a=a.apply(r,n||[])).next())})},hS=function(r,n){var i={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},a,s,l,u;return u={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function f(h){return function(g){return d([h,g])}}function d(h){if(a)throw new TypeError("Generator is already executing.");for(;i;)try{if(a=1,s&&(l=h[0]&2?s.return:h[0]?s.throw||((l=s.return)&&l.call(s),0):s.next)&&!(l=l.call(s,h[1])).done)return l;switch(s=0,l&&(h=[h[0]&2,l.value]),h[0]){case 0:case 1:l=h;break;case 4:return i.label++,{value:h[1],done:!1};case 5:i.label++,s=h[1],h=[0];continue;case 7:h=i.ops.pop(),i.trys.pop();continue;default:if(l=i.trys,!(l=l.length>0&&l[l.length-1])&&(h[0]===6||h[0]===2)){i=0;continue}if(h[0]===3&&(!l||h[1]>l[0]&&h[1]<l[3])){i.label=h[1];break}if(h[0]===6&&i.label<l[1]){i.label=l[1],l=h;break}if(l&&i.label<l[2]){i.label=l[2],i.ops.push(h);break}l[2]&&i.ops.pop(),i.trys.pop();continue}h=n.call(r,i)}catch(g){h=[6,g],s=0}finally{a=l=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}},TS=function(r,n,i,a){a===void 0&&(a=i),r[a]=n[i]},pS=function(r,n){for(var i in r)i!=="default"&&!n.hasOwnProperty(i)&&(n[i]=r[i])},Ih=function(r){var n=typeof Symbol=="function"&&Symbol.iterator,i=n&&r[n],a=0;if(i)return i.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&a>=r.length&&(r=void 0),{value:r&&r[a++],done:!r}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")},Zm=function(r,n){var i=typeof Symbol=="function"&&r[Symbol.iterator];if(!i)return r;var a=i.call(r),s,l=[],u;try{for(;(n===void 0||n-- >0)&&!(s=a.next()).done;)l.push(s.value)}catch(f){u={error:f}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(u)throw u.error}}return l},gS=function(){for(var r=[],n=0;n<arguments.length;n++)r=r.concat(Zm(arguments[n]));return r},mS=function(){for(var r=0,n=0,i=arguments.length;n<i;n++)r+=arguments[n].length;for(var a=Array(r),s=0,n=0;n<i;n++)for(var l=arguments[n],u=0,f=l.length;u<f;u++,s++)a[s]=l[u];return a},Kl=function(r){return this instanceof Kl?(this.v=r,this):new Kl(r)},yS=function(r,n,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var a=i.apply(r,n||[]),s,l=[];return s={},u("next"),u("throw"),u("return"),s[Symbol.asyncIterator]=function(){return this},s;function u(m){a[m]&&(s[m]=function(w){return new Promise(function(_,E){l.push([m,w,_,E])>1||f(m,w)})})}function f(m,w){try{d(a[m](w))}catch(_){y(l[0][3],_)}}function d(m){m.value instanceof Kl?Promise.resolve(m.value.v).then(h,g):y(l[0][2],m)}function h(m){f("next",m)}function g(m){f("throw",m)}function y(m,w){m(w),l.shift(),l.length&&f(l[0][0],l[0][1])}},vS=function(r){var n,i;return n={},a("next"),a("throw",function(s){throw s}),a("return"),n[Symbol.iterator]=function(){return this},n;function a(s,l){n[s]=r[s]?function(u){return(i=!i)?{value:Kl(r[s](u)),done:s==="return"}:l?l(u):u}:l}},_S=function(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r[Symbol.asyncIterator],i;return n?n.call(r):(r=typeof Ih=="function"?Ih(r):r[Symbol.iterator](),i={},a("next"),a("throw"),a("return"),i[Symbol.asyncIterator]=function(){return this},i);function a(l){i[l]=r[l]&&function(u){return new Promise(function(f,d){u=r[l](u),s(f,d,u.done,u.value)})}}function s(l,u,f,d){Promise.resolve(d).then(function(h){l({value:h,done:f})},u)}},wS=function(r,n){return Object.defineProperty?Object.defineProperty(r,"raw",{value:n}):r.raw=n,r},ES=function(r){if(r&&r.__esModule)return r;var n={};if(r!=null)for(var i in r)Object.hasOwnProperty.call(r,i)&&(n[i]=r[i]);return n.default=r,n},CS=function(r){return r&&r.__esModule?r:{default:r}},bS=function(r,n){if(!n.has(r))throw new TypeError("attempted to get private field on non-instance");return n.get(r)},xS=function(r,n,i){if(!n.has(r))throw new TypeError("attempted to set private field on non-instance");return n.set(r,i),i},t("__extends",sS),t("__assign",oS),t("__rest",lS),t("__decorate",uS),t("__param",cS),t("__metadata",fS),t("__awaiter",dS),t("__generator",hS),t("__exportStar",pS),t("__createBinding",TS),t("__values",Ih),t("__read",Zm),t("__spread",gS),t("__spreadArrays",mS),t("__await",Kl),t("__asyncGenerator",yS),t("__asyncDelegator",vS),t("__asyncValues",_S),t("__makeTemplateObject",wS),t("__importStar",ES),t("__importDefault",CS),t("__classPrivateFieldGet",bS),t("__classPrivateFieldSet",xS)})});var xA=de(Ss=>{"use strict";Object.defineProperty(Ss,"__esModule",{value:!0});Ss.isDate=Ss.isComparable=Ss.isIterable=void 0;Ss.isIterable=t=>!(t==null||t[Symbol.iterator]==null);Ss.isComparable=t=>{let e=Object.prototype.toString,r=t;return r.compare!=null&&e.call(r.compare).endsWith("Function]")};Ss.isDate=t=>Object.prototype.toString.call(t).endsWith("Date]")});var SA=de(TA=>{"use strict";Object.defineProperty(TA,"__esModule",{value:!0})});var AA=de(Lh=>{"use strict";Object.defineProperty(Lh,"__esModule",{value:!0});var hG=Xm(),oy=xA(),pG=(t,e)=>t-e,gG=(t,e)=>Number(t-e),mG=(t,e)=>t.localeCompare(e),yG=(t,e)=>t.getTime()-e.getTime(),Jl={number:pG,string:mG,Date:yG,bigInt:gG,none:()=>0},vG=t=>{if(typeof t=="number")return Jl.number;if(typeof t=="string")return Jl.string;if(typeof t=="bigint")return Jl.bigInt;if(oy.isDate(t))return Jl.Date;if(oy.isComparable(t))return(e,r)=>e.compare(r);throw new Error("Cannot sort keys in this map. You have to specify compareFn if the type of key in this map is not number, string, or Date.")},To=class extends Map{constructor(e,r){super();this.specifiedCompareFn=!1,this.isCompareFn=n=>typeof n=="function",this.compareFn=Jl.none,this.sortedKeys=[],oy.isIterable(e)&&this._constructor(e,r),this.isCompareFn(e)&&this._constructor(null,e),e==null&&this._constructor(null,r)}get comparator(){return this.compareFn}compare(e,r){return Math.sign(this.compareFn(e,r))}_constructor(e,r){if(this.compareFn=r==null?Jl.none:r,this.specifiedCompareFn=r!=null,e!=null)for(let n of e)this.set(...n)}static fromMap(e,r){let n=new To(r);return n.setAll(e),n}duplicate(){return To.fromMap(this,this.compareFn)}toMap(){let e=new Map,r=Array.from(super.entries());return r.sort((n,i)=>this.compareFn(n[0],i[0])),r.forEach(([n,i])=>{e.set(n,i)}),e}reverseKeys(){return[...this.sortedKeys].reverse().values()}get(e){let r=this.sortedKeys.find(n=>this.comparator(n,e)===0);if(r!=null)return super.get(r)}set(e,r){this.sortedKeys.length===0&&!this.specifiedCompareFn&&(this.compareFn=vG(e),this.specifiedCompareFn=!0);let n=this.sortedKeys.find(i=>this.compareFn(i,e)===0);return n==null?(this.sortedKeys.push(e),super.set(e,r)):super.set(n,r),this.sortedKeys.sort(this.compareFn),this}setAll(e){return e.forEach((r,n)=>{this.set(n,r)}),this}delete(e){return super.delete(e)?(this.sortedKeys=this.sortedKeys.filter(r=>this.compare(r,e)!==0),!0):!1}clear(){super.clear(),this.sortedKeys=[]}keys(){return this.sortedKeys.values()}values(){return this.sortedKeys.map(e=>super.get(e)).values()}entries(){return this.toMap().entries()}firstEntry(){let e=this.firstKey();if(e==null)return;let r=this.get(e);return r===void 0?void 0:[e,r]}firstKey(){return this.sortedKeys[0]}lastEntry(){let e=this.lastKey();if(e==null)return;let r=this.get(e);return r===void 0?void 0:[e,r]}lastKey(){return[...this.sortedKeys].reverse()[0]}shiftEntry(){let e=this.firstEntry();if(e!=null)return this.delete(e[0]),e}popEntry(){let e=this.lastEntry();if(e!=null)return this.delete(e[0]),e}floorEntry(e){let r=this.floorKey(e);if(r!=null){let n=this.get(r);return n===void 0?void 0:[r,n]}}floorKey(e){return this.sortedKeys.filter(n=>this.compare(n,e)<=0).reverse()[0]}ceilingEntry(e){let r=this.ceilingKey(e);if(r!=null){let n=this.get(r);return n===void 0?void 0:[r,n]}}ceilingKey(e){return this.sortedKeys.filter(n=>this.compare(n,e)>=0)[0]}lowerEntry(e){let r=this.lowerKey(e);if(r!=null){let n=this.get(r);return n===void 0?void 0:[r,n]}}lowerKey(e){return this.sortedKeys.filter(n=>this.compare(n,e)<0).reverse()[0]}higherEntry(e){let r=this.higherKey(e);if(r!=null){let n=this.get(r);return n===void 0?void 0:[r,n]}}higherKey(e){return this.sortedKeys.filter(n=>this.compare(n,e)>0)[0]}splitLower(e,r=!0){let n=Array.from(this.entries()).filter(i=>{let a=this.compare(i[0],e)<0;return r?a||this.compare(i[0],e)===0:a});return new To(n,this.compareFn)}splitHigher(e,r=!0){let n=Array.from(this.entries()).filter(i=>{let a=this.compare(i[0],e)>0;return r?a||this.compare(i[0],e)===0:a});return new To(n,this.compareFn)}forEach(e,r){Array.from(this.entries()).forEach(([n,i])=>{e(i,n,this)},r)}};Lh.default=To;hG.__exportStar(SA(),Lh)});uL(exports,{default:()=>Ze});var ru=gt(require("obsidian"));var g0=gt(require("obsidian")),Nf=new Map;function ot(t,e=!1){let r=window.moment();Nf.has(t)?(Nf.get(t).isBefore(r)||e)&&(new g0.Notice(t),Nf.set(t,r.add(1,"minute"))):(console.log(`[Google Calendar] ${t}`),new g0.Notice(t),Nf.set(t,r.add(0,"minute")))}var Nt=gt(require("obsidian"));var Rf=()=>{var t;return(t=window.localStorage.getItem("googleCalendarAccessToken"))!=null?t:""},xa=()=>{var t;return(t=window.localStorage.getItem("googleCalendarRefreshToken"))!=null?t:""},Df=()=>{var e;let t=(e=window.localStorage.getItem("googleCalendarExpirationTime"))!=null?e:"0";return parseInt(t,10)},Gs=()=>{var t;return(t=window.localStorage.getItem("googleCalendarUserId"))!=null?t:""},rs=t=>{t!="undefined"&&window.localStorage.setItem("googleCalendarAccessToken",t)},Bf=t=>{t!="undefined"&&window.localStorage.setItem("googleCalendarUserId",t)},_u=t=>{t!="undefined"&&window.localStorage.setItem("googleCalendarRefreshToken",t)},ns=t=>{isNaN(t)||window.localStorage.setItem("googleCalendarExpirationTime",t+"")};var uh=gt(require("obsidian"));var u_=gt(require("obsidian")),Zr=(t,e,r,n=!1)=>P(void 0,null,function*(){let i=Ze.getInstance(),a={"Content-Type":"application/json"};if(n==!1){let l=yield c_(i);if(!l)return;a.Authorization="Bearer "+l}if(i.settings.debugMode){console.log(`New Request ${e}:${t}`);let l=wn({},a);l.Authorization&&(l.Authorization=l.Authorization.substring(0,15)+"..."),console.log({body:r,headers:l});let u=yield fetch(t,{method:e,body:r?JSON.stringify(r):null,headers:a});return u.status>=400?void 0:e.toLowerCase()=="delete"?{status:"success"}:yield u.json()}let s=yield(0,u_.requestUrl)({method:e,url:t,body:r?JSON.stringify(r):null,headers:a});if(!(s.status>=400))return e.toLowerCase()=="delete"?{status:"success"}:yield s.json});var wm=42813;function iF(){return!(!Rf()||Rf()==""||!Df()||isNaN(Df())||Df()<+new Date)}var aF=t=>P(void 0,null,function*(){let e={client_id:t.settings.googleClientId,client_secret:t.settings.googleClientSecret.trim(),grant_type:"refresh_token",refresh_token:xa()},r=yield Zr("https://oauth2.googleapis.com/token","POST",e,!0);return r?(rs(r.access_token),ns(+new Date+r.expires_in*1e3),!0):(ot("Error while refreshing authentication"),!1)}),Bx=t=>P(void 0,null,function*(){let e={uid:Gs()},r=yield Zr(`${t.settings.googleOAuthServer}/api/google/refresh`,"POST",e,!0);return r?(rs(r.access_token),ns(+new Date+r.expires_in*1e3),!0):(ot("Error while refreshing authentication"),!1)});function c_(t){return P(this,null,function*(){if(!Yt())return"";let e=!1;return iF()==!1&&(xa()!=""||Gs()!="")&&(t.settings.useCustomClient?(e=yield aF(t),e==!1&&(e=yield Bx(t))):e=yield Bx(t)),Rf()})}function Ox(){return P(this,null,function*(){let t=Ze.getInstance();if(uh.Platform.isDesktop){if(!Lx())return;let{OAuth2Client:e}=Nx(),r=require("http"),n=require("url"),i=Dx(),a=new e(t.settings.googleClientId,t.settings.googleClientSecret.trim(),`http://127.0.0.1:${wm}/callback`),s=a.generateAuthUrl({scope:["https://www.googleapis.com/auth/calendar"],access_type:"offline",prompt:"consent"}),l=r.createServer((u,f)=>P(this,null,function*(){try{if(u.url.indexOf("/callback")>-1){let h=new n.URL(u.url,`http://localhost:${wm}`).searchParams.get("code");f.end("Authentication successful! Please return to obsidian."),l.destroy();let g=yield a.getToken(h);_u(g.tokens.refresh_token),rs(g.tokens.access_token),ns(g.tokens.expiry_date),console.info("Tokens acquired."),t.settingsTab.display()}}catch(d){console.log("Auth failed")}})).listen(wm,()=>P(this,null,function*(){window.open(s)}));i(l)}else new uh.Notice("Can't use OAuth on this device")})}var Em=new Map,Cm=new Map;function Px(){return P(this,null,function*(){if(!Yt())return;let t=yield Zr("https://www.googleapis.com/calendar/v3/colors","GET",null);if(!t){ot("Error fetching color data from google");return}Object.keys(t.calendar).forEach(e=>{Em.set(e,t.calendar[e].background)}),Object.keys(t.event).forEach(e=>{Cm.set(e,t.event[e].background)})})}function Zu(t){return t.colorId&&Cm.has(t.colorId)?Cm.get(t.colorId):t.parent.colorId&&Em.has(t.parent.colorId)?Em.get(t.parent.colorId):"#a4bdfc"}var bm=[];function Mx(t,e){return e.filter(n=>!t.settings.calendarBlackList.some(i=>i[0]==n.id))}function Or(){return P(this,null,function*(){if(!Yt())return[];let t=Ze.getInstance();if(bm.length)return Mx(t,bm);yield Px();let e=yield Zr("https://www.googleapis.com/calendar/v3/users/me/calendarList","GET",null);return e?(bm=e.items,Mx(t,e.items)):(ot("Could not list Google Calendars"),[])})}var Bi=gt(require("obsidian"));var aT=gt(require("obsidian"));var Cr="top",Lr="bottom",Ir="right",Tr="left",ch="auto",_s=[Cr,Lr,Ir,Tr],Ba="start",so="end",Ux="clippingParents",fh="viewport",kl="popper",Fx="reference",xm=_s.reduce(function(t,e){return t.concat([e+"-"+Ba,e+"-"+so])},[]),dh=[].concat(_s,[ch]).reduce(function(t,e){return t.concat([e,e+"-"+Ba,e+"-"+so])},[]),sF="beforeRead",oF="read",lF="afterRead",uF="beforeMain",cF="main",fF="afterMain",dF="beforeWrite",hF="write",pF="afterWrite",qx=[sF,oF,lF,uF,cF,fF,dF,hF,pF];function Yr(t){return t?(t.nodeName||"").toLowerCase():null}function yr(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function hi(t){var e=yr(t).Element;return t instanceof e||t instanceof Element}function Pr(t){var e=yr(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function Il(t){if(typeof ShadowRoot=="undefined")return!1;var e=yr(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function gF(t){var e=t.state;Object.keys(e.elements).forEach(function(r){var n=e.styles[r]||{},i=e.attributes[r]||{},a=e.elements[r];!Pr(a)||!Yr(a)||(Object.assign(a.style,n),Object.keys(i).forEach(function(s){var l=i[s];l===!1?a.removeAttribute(s):a.setAttribute(s,l===!0?"":l)}))})}function mF(t){var e=t.state,r={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,r.popper),e.styles=r,e.elements.arrow&&Object.assign(e.elements.arrow.style,r.arrow),function(){Object.keys(e.elements).forEach(function(n){var i=e.elements[n],a=e.attributes[n]||{},s=Object.keys(e.styles.hasOwnProperty(n)?e.styles[n]:r[n]),l=s.reduce(function(u,f){return u[f]="",u},{});!Pr(i)||!Yr(i)||(Object.assign(i.style,l),Object.keys(a).forEach(function(u){i.removeAttribute(u)}))})}}var Gx={name:"applyStyles",enabled:!0,phase:"write",fn:gF,effect:mF,requires:["computeStyles"]};function Wr(t){return t.split("-")[0]}var Ni=Math.max,oo=Math.min,Oa=Math.round;function Nl(){var t=navigator.userAgentData;return t!=null&&t.brands?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function $u(){return!/^((?!chrome|android).)*safari/i.test(Nl())}function pi(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!1);var n=t.getBoundingClientRect(),i=1,a=1;e&&Pr(t)&&(i=t.offsetWidth>0&&Oa(n.width)/t.offsetWidth||1,a=t.offsetHeight>0&&Oa(n.height)/t.offsetHeight||1);var s=hi(t)?yr(t):window,l=s.visualViewport,u=!$u()&&r,f=(n.left+(u&&l?l.offsetLeft:0))/i,d=(n.top+(u&&l?l.offsetTop:0))/a,h=n.width/i,g=n.height/a;return{width:h,height:g,top:d,right:f+h,bottom:d+g,left:f,x:f,y:d}}function lo(t){var e=pi(t),r=t.offsetWidth,n=t.offsetHeight;return Math.abs(e.width-r)<=1&&(r=e.width),Math.abs(e.height-n)<=1&&(n=e.height),{x:t.offsetLeft,y:t.offsetTop,width:r,height:n}}function ec(t,e){var r=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(r&&Il(r)){var n=e;do{if(n&&t.isSameNode(n))return!0;n=n.parentNode||n.host}while(n)}return!1}function Tn(t){return yr(t).getComputedStyle(t)}function Tm(t){return["table","td","th"].indexOf(Yr(t))>=0}function rn(t){return((hi(t)?t.ownerDocument:t.document)||window.document).documentElement}function La(t){return Yr(t)==="html"?t:t.assignedSlot||t.parentNode||(Il(t)?t.host:null)||rn(t)}function Vx(t){return!Pr(t)||Tn(t).position==="fixed"?null:t.offsetParent}function yF(t){var e=/firefox/i.test(Nl()),r=/Trident/i.test(Nl());if(r&&Pr(t)){var n=Tn(t);if(n.position==="fixed")return null}var i=La(t);for(Il(i)&&(i=i.host);Pr(i)&&["html","body"].indexOf(Yr(i))<0;){var a=Tn(i);if(a.transform!=="none"||a.perspective!=="none"||a.contain==="paint"||["transform","perspective"].indexOf(a.willChange)!==-1||e&&a.willChange==="filter"||e&&a.filter&&a.filter!=="none")return i;i=i.parentNode}return null}function Ri(t){for(var e=yr(t),r=Vx(t);r&&Tm(r)&&Tn(r).position==="static";)r=Vx(r);return r&&(Yr(r)==="html"||Yr(r)==="body"&&Tn(r).position==="static")?e:r||yF(t)||e}function uo(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function co(t,e,r){return Ni(t,oo(e,r))}function Hx(t,e,r){var n=co(t,e,r);return n>r?r:n}function tc(){return{top:0,right:0,bottom:0,left:0}}function rc(t){return Object.assign({},tc(),t)}function nc(t,e){return e.reduce(function(r,n){return r[n]=t,r},{})}var vF=function(e,r){return e=typeof e=="function"?e(Object.assign({},r.rects,{placement:r.placement})):e,rc(typeof e!="number"?e:nc(e,_s))};function _F(t){var e,r=t.state,n=t.name,i=t.options,a=r.elements.arrow,s=r.modifiersData.popperOffsets,l=Wr(r.placement),u=uo(l),f=[Tr,Ir].indexOf(l)>=0,d=f?"height":"width";if(!(!a||!s)){var h=vF(i.padding,r),g=lo(a),y=u==="y"?Cr:Tr,m=u==="y"?Lr:Ir,w=r.rects.reference[d]+r.rects.reference[u]-s[u]-r.rects.popper[d],_=s[u]-r.rects.reference[u],E=Ri(a),b=E?u==="y"?E.clientHeight||0:E.clientWidth||0:0,k=w/2-_/2,O=h[y],R=b-g[d]-h[m],B=b/2-g[d]/2+k,ne=co(O,B,R),M=u;r.modifiersData[n]=(e={},e[M]=ne,e.centerOffset=ne-B,e)}}function wF(t){var e=t.state,r=t.options,n=r.element,i=n===void 0?"[data-popper-arrow]":n;i!=null&&(typeof i=="string"&&(i=e.elements.popper.querySelector(i),!i)||!ec(e.elements.popper,i)||(e.elements.arrow=i))}var Kx={name:"arrow",enabled:!0,phase:"main",fn:_F,effect:wF,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function gi(t){return t.split("-")[1]}var EF={top:"auto",right:"auto",bottom:"auto",left:"auto"};function CF(t){var e=t.x,r=t.y,n=window,i=n.devicePixelRatio||1;return{x:Oa(e*i)/i||0,y:Oa(r*i)/i||0}}function jx(t){var e,r=t.popper,n=t.popperRect,i=t.placement,a=t.variation,s=t.offsets,l=t.position,u=t.gpuAcceleration,f=t.adaptive,d=t.roundOffsets,h=t.isFixed,g=s.x,y=g===void 0?0:g,m=s.y,w=m===void 0?0:m,_=typeof d=="function"?d({x:y,y:w}):{x:y,y:w};y=_.x,w=_.y;var E=s.hasOwnProperty("x"),b=s.hasOwnProperty("y"),k=Tr,O=Cr,R=window;if(f){var B=Ri(r),ne="clientHeight",M="clientWidth";if(B===yr(r)&&(B=rn(r),Tn(B).position!=="static"&&l==="absolute"&&(ne="scrollHeight",M="scrollWidth")),B=B,i===Cr||(i===Tr||i===Ir)&&a===so){O=Lr;var G=h&&B===R&&R.visualViewport?R.visualViewport.height:B[ne];w-=G-n.height,w*=u?1:-1}if(i===Tr||(i===Cr||i===Lr)&&a===so){k=Ir;var re=h&&B===R&&R.visualViewport?R.visualViewport.width:B[M];y-=re-n.width,y*=u?1:-1}}var se=Object.assign({position:l},f&&EF),ye=d===!0?CF({x:y,y:w}):{x:y,y:w};if(y=ye.x,w=ye.y,u){var Ae;return Object.assign({},se,(Ae={},Ae[O]=b?"0":"",Ae[k]=E?"0":"",Ae.transform=(R.devicePixelRatio||1)<=1?"translate("+y+"px, "+w+"px)":"translate3d("+y+"px, "+w+"px, 0)",Ae))}return Object.assign({},se,(e={},e[O]=b?w+"px":"",e[k]=E?y+"px":"",e.transform="",e))}function bF(t){var e=t.state,r=t.options,n=r.gpuAcceleration,i=n===void 0?!0:n,a=r.adaptive,s=a===void 0?!0:a,l=r.roundOffsets,u=l===void 0?!0:l;if(!1)var f;var d={placement:Wr(e.placement),variation:gi(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:i,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,jx(Object.assign({},d,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:s,roundOffsets:u})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,jx(Object.assign({},d,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:u})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}var Yx={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:bF,data:{}};var hh={passive:!0};function xF(t){var e=t.state,r=t.instance,n=t.options,i=n.scroll,a=i===void 0?!0:i,s=n.resize,l=s===void 0?!0:s,u=yr(e.elements.popper),f=[].concat(e.scrollParents.reference,e.scrollParents.popper);return a&&f.forEach(function(d){d.addEventListener("scroll",r.update,hh)}),l&&u.addEventListener("resize",r.update,hh),function(){a&&f.forEach(function(d){d.removeEventListener("scroll",r.update,hh)}),l&&u.removeEventListener("resize",r.update,hh)}}var Wx={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:xF,data:{}};var TF={left:"right",right:"left",bottom:"top",top:"bottom"};function Rl(t){return t.replace(/left|right|bottom|top/g,function(e){return TF[e]})}var SF={start:"end",end:"start"};function ph(t){return t.replace(/start|end/g,function(e){return SF[e]})}function fo(t){var e=yr(t),r=e.pageXOffset,n=e.pageYOffset;return{scrollLeft:r,scrollTop:n}}function ho(t){return pi(rn(t)).left+fo(t).scrollLeft}function Sm(t,e){var r=yr(t),n=rn(t),i=r.visualViewport,a=n.clientWidth,s=n.clientHeight,l=0,u=0;if(i){a=i.width,s=i.height;var f=$u();(f||!f&&e==="fixed")&&(l=i.offsetLeft,u=i.offsetTop)}return{width:a,height:s,x:l+ho(t),y:u}}function Am(t){var e,r=rn(t),n=fo(t),i=(e=t.ownerDocument)==null?void 0:e.body,a=Ni(r.scrollWidth,r.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),s=Ni(r.scrollHeight,r.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),l=-n.scrollLeft+ho(t),u=-n.scrollTop;return Tn(i||r).direction==="rtl"&&(l+=Ni(r.clientWidth,i?i.clientWidth:0)-a),{width:a,height:s,x:l,y:u}}function po(t){var e=Tn(t),r=e.overflow,n=e.overflowX,i=e.overflowY;return/auto|scroll|overlay|hidden/.test(r+i+n)}function gh(t){return["html","body","#document"].indexOf(Yr(t))>=0?t.ownerDocument.body:Pr(t)&&po(t)?t:gh(La(t))}function ws(t,e){var r;e===void 0&&(e=[]);var n=gh(t),i=n===((r=t.ownerDocument)==null?void 0:r.body),a=yr(n),s=i?[a].concat(a.visualViewport||[],po(n)?n:[]):n,l=e.concat(s);return i?l:l.concat(ws(La(s)))}function Dl(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function AF(t,e){var r=pi(t,!1,e==="fixed");return r.top=r.top+t.clientTop,r.left=r.left+t.clientLeft,r.bottom=r.top+t.clientHeight,r.right=r.left+t.clientWidth,r.width=t.clientWidth,r.height=t.clientHeight,r.x=r.left,r.y=r.top,r}function zx(t,e,r){return e===fh?Dl(Sm(t,r)):hi(e)?AF(e,r):Dl(Am(rn(t)))}function kF(t){var e=ws(La(t)),r=["absolute","fixed"].indexOf(Tn(t).position)>=0,n=r&&Pr(t)?Ri(t):t;return hi(n)?e.filter(function(i){return hi(i)&&ec(i,n)&&Yr(i)!=="body"}):[]}function km(t,e,r,n){var i=e==="clippingParents"?kF(t):[].concat(e),a=[].concat(i,[r]),s=a[0],l=a.reduce(function(u,f){var d=zx(t,f,n);return u.top=Ni(d.top,u.top),u.right=oo(d.right,u.right),u.bottom=oo(d.bottom,u.bottom),u.left=Ni(d.left,u.left),u},zx(t,s,n));return l.width=l.right-l.left,l.height=l.bottom-l.top,l.x=l.left,l.y=l.top,l}function ic(t){var e=t.reference,r=t.element,n=t.placement,i=n?Wr(n):null,a=n?gi(n):null,s=e.x+e.width/2-r.width/2,l=e.y+e.height/2-r.height/2,u;switch(i){case Cr:u={x:s,y:e.y-r.height};break;case Lr:u={x:s,y:e.y+e.height};break;case Ir:u={x:e.x+e.width,y:l};break;case Tr:u={x:e.x-r.width,y:l};break;default:u={x:e.x,y:e.y}}var f=i?uo(i):null;if(f!=null){var d=f==="y"?"height":"width";switch(a){case Ba:u[f]=u[f]-(e[d]/2-r[d]/2);break;case so:u[f]=u[f]+(e[d]/2-r[d]/2);break;default:}}return u}function Di(t,e){e===void 0&&(e={});var r=e,n=r.placement,i=n===void 0?t.placement:n,a=r.strategy,s=a===void 0?t.strategy:a,l=r.boundary,u=l===void 0?Ux:l,f=r.rootBoundary,d=f===void 0?fh:f,h=r.elementContext,g=h===void 0?kl:h,y=r.altBoundary,m=y===void 0?!1:y,w=r.padding,_=w===void 0?0:w,E=rc(typeof _!="number"?_:nc(_,_s)),b=g===kl?Fx:kl,k=t.rects.popper,O=t.elements[m?b:g],R=km(hi(O)?O:O.contextElement||rn(t.elements.popper),u,d,s),B=pi(t.elements.reference),ne=ic({reference:B,element:k,strategy:"absolute",placement:i}),M=Dl(Object.assign({},k,ne)),G=g===kl?M:B,re={top:R.top-G.top+E.top,bottom:G.bottom-R.bottom+E.bottom,left:R.left-G.left+E.left,right:G.right-R.right+E.right},se=t.modifiersData.offset;if(g===kl&&se){var ye=se[i];Object.keys(re).forEach(function(Ae){var Je=[Ir,Lr].indexOf(Ae)>=0?1:-1,De=[Cr,Lr].indexOf(Ae)>=0?"y":"x";re[Ae]+=ye[De]*Je})}return re}function Im(t,e){e===void 0&&(e={});var r=e,n=r.placement,i=r.boundary,a=r.rootBoundary,s=r.padding,l=r.flipVariations,u=r.allowedAutoPlacements,f=u===void 0?dh:u,d=gi(n),h=d?l?xm:xm.filter(function(m){return gi(m)===d}):_s,g=h.filter(function(m){return f.indexOf(m)>=0});g.length===0&&(g=h);var y=g.reduce(function(m,w){return m[w]=Di(t,{placement:w,boundary:i,rootBoundary:a,padding:s})[Wr(w)],m},{});return Object.keys(y).sort(function(m,w){return y[m]-y[w]})}function IF(t){if(Wr(t)===ch)return[];var e=Rl(t);return[ph(t),e,ph(e)]}function NF(t){var e=t.state,r=t.options,n=t.name;if(!e.modifiersData[n]._skip){for(var i=r.mainAxis,a=i===void 0?!0:i,s=r.altAxis,l=s===void 0?!0:s,u=r.fallbackPlacements,f=r.padding,d=r.boundary,h=r.rootBoundary,g=r.altBoundary,y=r.flipVariations,m=y===void 0?!0:y,w=r.allowedAutoPlacements,_=e.options.placement,E=Wr(_),b=E===_,k=u||(b||!m?[Rl(_)]:IF(_)),O=[_].concat(k).reduce(function(Dt,Bt){return Dt.concat(Wr(Bt)===ch?Im(e,{placement:Bt,boundary:d,rootBoundary:h,padding:f,flipVariations:m,allowedAutoPlacements:w}):Bt)},[]),R=e.rects.reference,B=e.rects.popper,ne=new Map,M=!0,G=O[0],re=0;re<O.length;re++){var se=O[re],ye=Wr(se),Ae=gi(se)===Ba,Je=[Cr,Lr].indexOf(ye)>=0,De=Je?"width":"height",me=Di(e,{placement:se,boundary:d,rootBoundary:h,altBoundary:g,padding:f}),te=Je?Ae?Ir:Tr:Ae?Lr:Cr;R[De]>B[De]&&(te=Rl(te));var Fe=Rl(te),et=[];if(a&&et.push(me[ye]<=0),l&&et.push(me[te]<=0,me[Fe]<=0),et.every(function(Dt){return Dt})){G=se,M=!1;break}ne.set(se,et)}if(M)for(var ct=m?3:1,$e=function(Bt){var rt=O.find(function(nt){var dt=ne.get(nt);if(dt)return dt.slice(0,Bt).every(function(I){return I})});if(rt)return G=rt,"break"},ft=ct;ft>0;ft--){var ue=$e(ft);if(ue==="break")break}e.placement!==G&&(e.modifiersData[n]._skip=!0,e.placement=G,e.reset=!0)}}var Qx={name:"flip",enabled:!0,phase:"main",fn:NF,requiresIfExists:["offset"],data:{_skip:!1}};function Xx(t,e,r){return r===void 0&&(r={x:0,y:0}),{top:t.top-e.height-r.y,right:t.right-e.width+r.x,bottom:t.bottom-e.height+r.y,left:t.left-e.width-r.x}}function Jx(t){return[Cr,Ir,Lr,Tr].some(function(e){return t[e]>=0})}function RF(t){var e=t.state,r=t.name,n=e.rects.reference,i=e.rects.popper,a=e.modifiersData.preventOverflow,s=Di(e,{elementContext:"reference"}),l=Di(e,{altBoundary:!0}),u=Xx(s,n),f=Xx(l,i,a),d=Jx(u),h=Jx(f);e.modifiersData[r]={referenceClippingOffsets:u,popperEscapeOffsets:f,isReferenceHidden:d,hasPopperEscaped:h},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":d,"data-popper-escaped":h})}var Zx={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:RF};function DF(t,e,r){var n=Wr(t),i=[Tr,Cr].indexOf(n)>=0?-1:1,a=typeof r=="function"?r(Object.assign({},e,{placement:t})):r,s=a[0],l=a[1];return s=s||0,l=(l||0)*i,[Tr,Ir].indexOf(n)>=0?{x:l,y:s}:{x:s,y:l}}function BF(t){var e=t.state,r=t.options,n=t.name,i=r.offset,a=i===void 0?[0,0]:i,s=dh.reduce(function(d,h){return d[h]=DF(h,e.rects,a),d},{}),l=s[e.placement],u=l.x,f=l.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=u,e.modifiersData.popperOffsets.y+=f),e.modifiersData[n]=s}var $x={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:BF};function OF(t){var e=t.state,r=t.name;e.modifiersData[r]=ic({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}var eT={name:"popperOffsets",enabled:!0,phase:"read",fn:OF,data:{}};function Nm(t){return t==="x"?"y":"x"}function LF(t){var e=t.state,r=t.options,n=t.name,i=r.mainAxis,a=i===void 0?!0:i,s=r.altAxis,l=s===void 0?!1:s,u=r.boundary,f=r.rootBoundary,d=r.altBoundary,h=r.padding,g=r.tether,y=g===void 0?!0:g,m=r.tetherOffset,w=m===void 0?0:m,_=Di(e,{boundary:u,rootBoundary:f,padding:h,altBoundary:d}),E=Wr(e.placement),b=gi(e.placement),k=!b,O=uo(E),R=Nm(O),B=e.modifiersData.popperOffsets,ne=e.rects.reference,M=e.rects.popper,G=typeof w=="function"?w(Object.assign({},e.rects,{placement:e.placement})):w,re=typeof G=="number"?{mainAxis:G,altAxis:G}:Object.assign({mainAxis:0,altAxis:0},G),se=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,ye={x:0,y:0};if(!!B){if(a){var Ae,Je=O==="y"?Cr:Tr,De=O==="y"?Lr:Ir,me=O==="y"?"height":"width",te=B[O],Fe=te+_[Je],et=te-_[De],ct=y?-M[me]/2:0,$e=b===Ba?ne[me]:M[me],ft=b===Ba?-M[me]:-ne[me],ue=e.elements.arrow,Dt=y&&ue?lo(ue):{width:0,height:0},Bt=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:tc(),rt=Bt[Je],nt=Bt[De],dt=co(0,ne[me],Dt[me]),I=k?ne[me]/2-ct-dt-rt-re.mainAxis:$e-dt-rt-re.mainAxis,D=k?-ne[me]/2+ct+dt+nt+re.mainAxis:ft+dt+nt+re.mainAxis,L=e.elements.arrow&&Ri(e.elements.arrow),j=L?O==="y"?L.clientTop||0:L.clientLeft||0:0,H=(Ae=se==null?void 0:se[O])!=null?Ae:0,Q=te+I-H-j,J=te+D-H,Y=co(y?oo(Fe,Q):Fe,te,y?Ni(et,J):et);B[O]=Y,ye[O]=Y-te}if(l){var X,ie=O==="x"?Cr:Tr,Z=O==="x"?Lr:Ir,he=B[R],Le=R==="y"?"height":"width",Ue=he+_[ie],ht=he-_[Z],Qt=[Cr,Tr].indexOf(E)!==-1,Xt=(X=se==null?void 0:se[R])!=null?X:0,it=Qt?Ue:he-ne[Le]-M[Le]-Xt+re.altAxis,Ot=Qt?he+ne[Le]+M[Le]-Xt-re.altAxis:ht,gr=y&&Qt?Hx(it,he,Ot):co(y?it:Ue,he,y?Ot:ht);B[R]=gr,ye[R]=gr-he}e.modifiersData[n]=ye}}var tT={name:"preventOverflow",enabled:!0,phase:"main",fn:LF,requiresIfExists:["offset"]};function Rm(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function Dm(t){return t===yr(t)||!Pr(t)?fo(t):Rm(t)}function PF(t){var e=t.getBoundingClientRect(),r=Oa(e.width)/t.offsetWidth||1,n=Oa(e.height)/t.offsetHeight||1;return r!==1||n!==1}function Bm(t,e,r){r===void 0&&(r=!1);var n=Pr(e),i=Pr(e)&&PF(e),a=rn(e),s=pi(t,i,r),l={scrollLeft:0,scrollTop:0},u={x:0,y:0};return(n||!n&&!r)&&((Yr(e)!=="body"||po(a))&&(l=Dm(e)),Pr(e)?(u=pi(e,!0),u.x+=e.clientLeft,u.y+=e.clientTop):a&&(u.x=ho(a))),{x:s.left+l.scrollLeft-u.x,y:s.top+l.scrollTop-u.y,width:s.width,height:s.height}}function MF(t){var e=new Map,r=new Set,n=[];t.forEach(function(a){e.set(a.name,a)});function i(a){r.add(a.name);var s=[].concat(a.requires||[],a.requiresIfExists||[]);s.forEach(function(l){if(!r.has(l)){var u=e.get(l);u&&i(u)}}),n.push(a)}return t.forEach(function(a){r.has(a.name)||i(a)}),n}function Om(t){var e=MF(t);return qx.reduce(function(r,n){return r.concat(e.filter(function(i){return i.phase===n}))},[])}function Lm(t){var e;return function(){return e||(e=new Promise(function(r){Promise.resolve().then(function(){e=void 0,r(t())})})),e}}function Pm(t){var e=t.reduce(function(r,n){var i=r[n.name];return r[n.name]=i?Object.assign({},i,n,{options:Object.assign({},i.options,n.options),data:Object.assign({},i.data,n.data)}):n,r},{});return Object.keys(e).map(function(r){return e[r]})}var rT={placement:"bottom",modifiers:[],strategy:"absolute"};function nT(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return!e.some(function(n){return!(n&&typeof n.getBoundingClientRect=="function")})}function iT(t){t===void 0&&(t={});var e=t,r=e.defaultModifiers,n=r===void 0?[]:r,i=e.defaultOptions,a=i===void 0?rT:i;return function(l,u,f){f===void 0&&(f=a);var d={placement:"bottom",orderedModifiers:[],options:Object.assign({},rT,a),modifiersData:{},elements:{reference:l,popper:u},attributes:{},styles:{}},h=[],g=!1,y={state:d,setOptions:function(E){var b=typeof E=="function"?E(d.options):E;w(),d.options=Object.assign({},a,d.options,b),d.scrollParents={reference:hi(l)?ws(l):l.contextElement?ws(l.contextElement):[],popper:ws(u)};var k=Om(Pm([].concat(n,d.options.modifiers)));if(d.orderedModifiers=k.filter(function(se){return se.enabled}),!1){var O;if(getBasePlacement(d.options.placement)===auto)var R;var B,ne,M,G,re}return m(),y.update()},forceUpdate:function(){if(!g){var E=d.elements,b=E.reference,k=E.popper;if(!!nT(b,k)){d.rects={reference:Bm(b,Ri(k),d.options.strategy==="fixed"),popper:lo(k)},d.reset=!1,d.placement=d.options.placement,d.orderedModifiers.forEach(function(se){return d.modifiersData[se.name]=Object.assign({},se.data)});for(var O=0,R=0;R<d.orderedModifiers.length;R++){if(d.reset===!0){d.reset=!1,R=-1;continue}var B=d.orderedModifiers[R],ne=B.fn,M=B.options,G=M===void 0?{}:M,re=B.name;typeof ne=="function"&&(d=ne({state:d,options:G,name:re,instance:y})||d)}}}},update:Lm(function(){return new Promise(function(_){y.forceUpdate(),_(d)})}),destroy:function(){w(),g=!0}};if(!nT(l,u))return y;y.setOptions(f).then(function(_){!g&&f.onFirstUpdate&&f.onFirstUpdate(_)});function m(){d.orderedModifiers.forEach(function(_){var E=_.name,b=_.options,k=b===void 0?{}:b,O=_.effect;if(typeof O=="function"){var R=O({state:d,name:E,instance:y,options:k}),B=function(){};h.push(R||B)}})}function w(){h.forEach(function(_){return _()}),h=[]}return y}}var UF=[Wx,eT,Yx,Gx,$x,Qx,tT,Kx,Zx],Mm=iT({defaultModifiers:UF});var FF=(t,e)=>(t%e+e)%e,sT=class{constructor(e,r,n){this.owner=e,this.containerEl=r,r.on("click",".suggestion-item",this.onSuggestionClick.bind(this)),r.on("mousemove",".suggestion-item",this.onSuggestionMouseover.bind(this)),n.register([],"ArrowUp",i=>{if(!i.isComposing)return this.setSelectedItem(this.selectedItem-1,!0),!1}),n.register([],"ArrowDown",i=>{if(!i.isComposing)return this.setSelectedItem(this.selectedItem+1,!0),!1}),n.register([],"Enter",i=>{if(!i.isComposing)return this.useSelectedItem(i),!1})}onSuggestionClick(e,r){e.preventDefault();let n=this.suggestions.indexOf(r);this.setSelectedItem(n,!1),this.useSelectedItem(e)}onSuggestionMouseover(e,r){let n=this.suggestions.indexOf(r);this.setSelectedItem(n,!1)}setSuggestions(e){this.containerEl.empty();let r=[];e.forEach(n=>{let i=this.containerEl.createDiv("suggestion-item");this.owner.renderSuggestion(n,i),r.push(i)}),this.values=e,this.suggestions=r,this.setSelectedItem(0,!1)}useSelectedItem(e){let r=this.values[this.selectedItem];r&&this.owner.selectSuggestion(r,e)}setSelectedItem(e,r){let n=FF(e,this.suggestions.length),i=this.suggestions[this.selectedItem],a=this.suggestions[n];i==null||i.removeClass("is-selected"),a==null||a.addClass("is-selected"),this.selectedItem=n,r&&a.scrollIntoView(!1)}},ac=class{constructor(e){this.inputEl=e,this.scope=new aT.Scope,this.suggestEl=createDiv("suggestion-container");let r=this.suggestEl.createDiv("suggestion");this.suggest=new sT(this,r,this.scope),this.scope.register([],"Escape",this.close.bind(this)),this.inputEl.addEventListener("input",this.onInputChanged.bind(this)),this.inputEl.addEventListener("focus",this.onInputChanged.bind(this)),this.inputEl.addEventListener("blur",this.close.bind(this)),this.suggestEl.on("mousedown",".suggestion-container",n=>{n.preventDefault()})}onInputChanged(){let e=this.inputEl.value,r=this.getSuggestions(e);if(!r){this.close();return}r.length>0?(this.suggest.setSuggestions(r),this.open(app.dom.appContainerEl,this.inputEl)):this.close()}open(e,r){app.keymap.pushScope(this.scope),e.appendChild(this.suggestEl),this.popper=Mm(r,this.suggestEl,{placement:"bottom-start",modifiers:[{name:"sameWidth",enabled:!0,fn:({state:n,instance:i})=>{let a=`${n.rects.reference.width}px`;n.styles.popper.width!==a&&(n.styles.popper.width=a,i.update())},phase:"beforeWrite",requires:["computeStyles"]}]})}close(){app.keymap.popScope(this.scope),this.suggest.setSuggestions([]),this.popper&&this.popper.destroy(),this.suggestEl.detach()}};function qF(t){t=(0,Bi.normalizePath)(t);let e=app.vault.getAbstractFileByPath(t);return!e||!(e instanceof Bi.TFolder)?null:e}function oT(t){let e=qF(t),r=[];return Bi.Vault.recurseChildren(e,n=>{n instanceof Bi.TFile&&r.push(n)}),r.sort((n,i)=>n.basename.localeCompare(i.basename)),r}var lT;(function(r){r[r.TemplateFiles=0]="TemplateFiles",r[r.ScriptFiles=1]="ScriptFiles"})(lT||(lT={}));var sc=class extends ac{constructor(e,r){super(e);this.inputEl=e;this.plugin=r}getSuggestions(e){var s,l,u,f,d,h,g;let r=[];if(this.plugin.templaterPlugin){let y=(0,Bi.normalizePath)((u=(l=(s=this.plugin)==null?void 0:s.templaterPlugin)==null?void 0:l.settings)==null?void 0:u.templates_folder),m=oT(y);r=[...r,...m]}if(this.plugin.coreTemplatePlugin){let y=(0,Bi.normalizePath)((g=(h=(d=(f=this.plugin)==null?void 0:f.coreTemplatePlugin)==null?void 0:d.instance)==null?void 0:h.options)==null?void 0:g.folder),m=oT(y);r=[...r,...m]}if(!r)return[];let n=new Set(r),i=[],a=e.toLowerCase();return n.forEach(y=>{y instanceof Bi.TFile&&y.extension==="md"&&y.path.toLowerCase().contains(a)&&i.push(y)}),i}renderSuggestion(e,r){r.setText(e.path)}selectSuggestion(e){this.inputEl.value=e.path,this.inputEl.trigger("input"),this.close()}};var uT=gt(require("obsidian"));var oc=class extends ac{getSuggestions(e){let r=app.vault.getAllLoadedFiles(),n=[],i=e.toLowerCase();return r.forEach(a=>{a instanceof uT.TFolder&&a.path.toLowerCase().contains(i)&&n.push(a)}),n}renderSuggestion(e,r){r.setText(e.path)}selectSuggestion(e){this.inputEl.value=e.path,this.inputEl.trigger("input"),this.close()}};var Es=gt(mh()),qm=gt(Pa()),yh={},Gm={},mc=t=>P(void 0,null,function*(){if(!app.workspace.layoutReady||!t.settings.activateDailyNoteAddon)return;let e={};try{e=(0,Es.getAllDailyNotes)()}catch(r){console.log("Daily note folder not set. Deactivated Show Daily notes setting."),t.settings.activateDailyNoteAddon=!1,t.saveSettings()}qm.default.isEqual(yh,e)==!1&&(yh=e)}),go=t=>P(void 0,null,function*(){if(!app.workspace.layoutReady||!t.settings.activateDailyNoteAddon||!t.settings.useWeeklyNotes)return;let e={};try{e=(0,Es.getAllWeeklyNotes)()}catch(r){console.log("Daily note folder not set. Deactivated Show Daily notes setting."),t.settings.activateDailyNoteAddon=!1,t.saveSettings()}qm.default.isEqual(Gm,e)==!1&&(Gm=e)}),vh=()=>yh,yc=t=>(0,Es.getDailyNote)(t,yh);var Vm=t=>(0,Es.getWeeklyNote)(t,Gm);var Hm=class extends Nt.PluginSettingTab{constructor(e,r){super(e,r);this.plugin=r}display(){let{containerEl:e}=this,r=xa()||Gs();e.empty(),e.createEl("h2",{text:"Settings for Google Calendar"}),e.createEl("h4",{text:"Please restart Obsidian to let changes take effect"}),new Nt.Setting(e).setName("Use own authentication client").setDesc("Please create your own client.").addToggle(i=>i.setValue(this.plugin.settings.useCustomClient).onChange(a=>P(this,null,function*(){this.plugin.settings.useCustomClient=a,yield this.plugin.saveSettings(),this.display()}))),this.plugin.settings.useCustomClient?(new Nt.Setting(e).setName("ClientId").setDesc("Google client id").setClass("SubSettings").addText(i=>i.setPlaceholder("Enter your client id").setValue(this.plugin.settings.googleClientId).onChange(a=>P(this,null,function*(){this.plugin.settings.googleClientId=a.trim(),yield this.plugin.saveSettings()}))),new Nt.Setting(e).setName("ClientSecret").setDesc("Google client secret").setClass("SubSettings").addText(i=>i.setPlaceholder("Enter your client secret").setValue(this.plugin.settings.googleClientSecret).onChange(a=>P(this,null,function*(){this.plugin.settings.googleClientSecret=a.trim(),yield this.plugin.saveSettings()}))),Nt.Platform.isMobileApp&&new Nt.Setting(e).setName("Refresh Token").setDesc("Google Refresh Token from OAuth").setClass("SubSettings").addText(i=>i.setPlaceholder("Enter refresh token").setValue(this.plugin.settings.googleRefreshToken).onChange(a=>P(this,null,function*(){this.plugin.settings.googleRefreshToken=a.trim(),_u(a)})))):new Nt.Setting(e).setName("Server url").setDesc("The url to the server where the oauth takes place").setClass("SubSettings").addText(i=>{i.setValue(this.plugin.settings.googleOAuthServer).onChange(a=>P(this,null,function*(){this.plugin.settings.googleOAuthServer=a.trim(),yield this.plugin.saveSettings()}))}),new Nt.Setting(e).setName("Login with google").addButton(i=>{i.setButtonText(r?"Logout":"Login").onClick(()=>{r?(_u(""),Bf(""),rs(""),ns(0),this.hide(),this.display()):this.plugin.settings.useCustomClient?Ox():window.open(`${this.plugin.settings.googleOAuthServer}/api/google`)})}),new Nt.Setting(e).setName("Refresh Interval").setDesc("Time in seconds between refresh request from google server").addSlider(i=>{i.setValue(this.plugin.settings.refreshInterval),i.setLimits(10,360,1),i.setDynamicTooltip(),i.onChange(a=>P(this,null,function*(){this.plugin.settings.refreshInterval=a,yield this.plugin.saveSettings()}))}),new Nt.Setting(e).setName("Use event Notification").setDesc("Will send notification when an event starts").addToggle(i=>{i.setValue(this.plugin.settings.useNotification),i.onChange(a=>P(this,null,function*(){this.plugin.settings.useNotification=a,yield this.plugin.saveSettings(),this.hide(),this.display()}))}),new Nt.Setting(e).setName("Default webview theme").addDropdown(i=>P(this,null,function*(){i.addOption("auto","Auto"),i.addOption("dark","Dark"),i.addOption("light","Light"),i.setValue(this.plugin.settings.webViewDefaultColorMode),i.onChange(a=>P(this,null,function*(){this.plugin.settings.webViewDefaultColorMode=a,yield this.plugin.saveSettings(),this.hide(),this.display()}))})),new Nt.Setting(e).setName("Show daily notes").setDesc("Will display daily notes and allow to open and create daily notes").addToggle(i=>{i.setValue(this.plugin.settings.activateDailyNoteAddon),i.onChange(a=>P(this,null,function*(){this.plugin.settings.activateDailyNoteAddon=a,yield this.plugin.saveSettings(),this.hide(),this.display()}))}),this.plugin.settings.activateDailyNoteAddon&&(new Nt.Setting(e).setName("Use Weekly Notes").setDesc("Will show week numbers with weekly note dots").setClass("SubSettings").addToggle(i=>{i.setValue(this.plugin.settings.useWeeklyNotes),i.onChange(a=>P(this,null,function*(){this.plugin.settings.useWeeklyNotes=a,a&&go(this.plugin),yield this.plugin.saveSettings(),this.hide(),this.display()}))}),new Nt.Setting(e).setName("Daily dot color").setDesc("Color for daily note dots in month view").setClass("SubSettings").addText(i=>{i.inputEl.type="color",i.setValue(this.plugin.settings.dailyNoteDotColor),i.onChange(a=>P(this,null,function*(){this.plugin.settings.dailyNoteDotColor=a,yield this.plugin.saveSettings()}))})),new Nt.Setting(e).setName("Enable @ Annotations").setDesc("Will help you to easily link events from you calendar in your notes").addToggle(i=>{i.setValue(this.plugin.settings.atAnnotationEnabled),i.onChange(a=>P(this,null,function*(){this.plugin.settings.atAnnotationEnabled=a,yield this.plugin.saveSettings(),this.hide(),this.display()}))}),this.plugin.settings.atAnnotationEnabled&&new Nt.Setting(e).setName("@ Annotation date format").setDesc("SWitch between mm/dd/yyyy and dd/mm/yyyy").setClass("SubSettings").addDropdown(i=>{i.addOption("mm/dd/yyyy","mm/dd/yyyy"),i.addOption("dd/mm/yyyy","dd/mm/yyyy"),i.setValue(this.plugin.settings.usDateFormat?"mm/dd/yyyy":"dd/mm/yyyy"),i.onChange(a=>P(this,null,function*(){a=="mm/dd/yyyy"?this.plugin.settings.usDateFormat=!0:this.plugin.settings.usDateFormat=!1,yield this.plugin.saveSettings(),this.hide(),this.display()}))}),new Nt.Setting(e).setName("Auto create Event Notes").setDesc("Will create new notes from a event if the description contains :obsidian:").addToggle(i=>{i.setValue(this.plugin.settings.autoCreateEventNotes),i.onChange(a=>P(this,null,function*(){this.plugin.settings.autoCreateEventNotes=a,yield this.plugin.saveSettings(),this.hide(),this.display()}))}),new Nt.Setting(e).setName("Keep auto created Notes open").setDesc("When creating a new note should it stay open for direct editing").setClass("SubSettings").addToggle(i=>{i.setValue(this.plugin.settings.autoCreateEventKeepOpen),i.onChange(a=>P(this,null,function*(){this.plugin.settings.autoCreateEventKeepOpen=a,yield this.plugin.saveSettings(),this.hide(),this.display()}))}),new Nt.Setting(e).setName("Import Start Offset").setDesc("Days in the past from events to import").setClass("SubSettings").addSlider(i=>{i.setValue(this.plugin.settings.importStartOffset),i.setLimits(0,7,1),i.setDynamicTooltip(),i.onChange(a=>P(this,null,function*(){i.showTooltip(),this.plugin.settings.importStartOffset=a,yield this.plugin.saveSettings()}))}),new Nt.Setting(e).setName("Import End Offset").setDesc("Days in the future from events to import").setClass("SubSettings").addSlider(i=>{i.setValue(this.plugin.settings.importEndOffset),i.setLimits(0,7,1),i.setDynamicTooltip(),i.onChange(a=>P(this,null,function*(){this.plugin.settings.importEndOffset=a,yield this.plugin.saveSettings()}))}),new Nt.Setting(e).setName("Event Note Prefix").setDesc("Optional prefix for event notes to improve performance").setClass("SubSettings").addText(i=>{i.setValue(this.plugin.settings.optionalNotePrefix),i.onChange(a=>P(this,null,function*(){this.plugin.settings.optionalNotePrefix=a,yield this.plugin.saveSettings()}))}),new Nt.Setting(e).setName("Event Note Name Format").setDesc("Define how the event note name should look like").setClass("SubSettings").addText(i=>{i.setValue(this.plugin.settings.eventNoteNameFormat),i.onChange(a=>P(this,null,function*(){this.plugin.settings.eventNoteNameFormat=a,yield this.plugin.saveSettings()}))}),new Nt.Setting(e).setName("Debug Mode").setDesc("Enable if something is not working").addToggle(i=>{i.setValue(this.plugin.settings.debugMode),i.onChange(a=>P(this,null,function*(){this.plugin.settings.debugMode=a,yield this.plugin.saveSettings()}))}),new Nt.Setting(e).setName("Use defaults for note creation").setDesc("If active creating notes will be faster but less flexible").addToggle(i=>{i.setValue(this.plugin.settings.useDefaultTemplate),i.onChange(a=>P(this,null,function*(){this.plugin.settings.useDefaultTemplate=a,yield this.plugin.saveSettings(),this.display()}))}),this.plugin.settings.useDefaultTemplate&&(new Nt.Setting(e).setName("Default Template").setDesc("Template to use at note creation").setClass("SubSettings").addSearch(i=>{new sc(i.inputEl,this.plugin),i.setPlaceholder("Template").setValue(this.plugin.settings.defaultTemplate).onChange(a=>P(this,null,function*(){this.plugin.settings.defaultTemplate=a,yield this.plugin.saveSettings()})),i.containerEl.addClass("templater_search")}),new Nt.Setting(e).setName("Default Folder").setDesc("Folder to save notes to after creation").setClass("SubSettings").addSearch(i=>{new oc(i.inputEl),i.setPlaceholder("Example: folder1/folder2").setValue(this.plugin.settings.defaultFolder).onChange(a=>P(this,null,function*(){this.plugin.settings.defaultFolder=a,yield this.plugin.saveSettings()})),i.containerEl.addClass("templater_search")}));let n=this.plugin.settings.insertTemplates;if(n.length&&(new Nt.Setting(e).setName("Saved Templates"),n.forEach(i=>{let a=new Nt.Setting(e).setClass("SubSettings").setName(i.name).addButton(s=>{s.setButtonText("Remove"),s.onClick(()=>P(this,null,function*(){this.plugin.settings.insertTemplates.remove(i),a.settingEl.remove(),yield this.plugin.saveSettings(),this.hide(),this.display()}))})})),Yt()){new Nt.Setting(e).setName("Default Calendar").addDropdown(a=>P(this,null,function*(){a.addOption("Default","Select a calendar"),(yield Or()).forEach(l=>{a.addOption(l.id,l.summary)}),a.setValue(this.plugin.settings.defaultCalendar),a.onChange(l=>P(this,null,function*(){this.plugin.settings.defaultCalendar=l,yield this.plugin.saveSettings()}))})),e.createEl("h3","Calendar Blacklist");let i=this.plugin.settings.calendarBlackList;new Nt.Setting(e).setName("Add Item to BlackList").addDropdown(a=>P(this,null,function*(){a.addOption("Default","Select Option to add"),(yield Or()).forEach(l=>{a.addOption(l.id+"_=_"+l.summary,l.summary)}),a.onChange(l=>P(this,null,function*(){let[u,f]=l.split("_=_");i.contains([u,f])||(this.plugin.settings.calendarBlackList=[...i,[u,f]],yield this.plugin.saveSettings());let d=new Nt.Setting(e).setClass("SubSettings").setName(f).addButton(h=>{h.setButtonText("Remove"),h.onClick(()=>P(this,null,function*(){this.plugin.settings.calendarBlackList.remove([u,f]),d.settingEl.remove(),yield this.plugin.saveSettings()}))})}))})),i.forEach(a=>{let s=new Nt.Setting(e).setClass("SubSettings").setName(a[1]).addButton(l=>{l.setButtonText("Remove"),l.onClick(()=>P(this,null,function*(){this.plugin.settings.calendarBlackList.remove(a),s.settingEl.remove(),yield this.plugin.saveSettings()}))})})}}};function Lx(){let t=Ze.getInstance();return t.settings.googleClientId==""||t.settings.googleClientSecret==""?(ot("Google Calendar missing settings"),!1):!0}function Yt(){return(!xa()||xa()=="")&&(!Gs()||Gs()=="")?(ot("Google Calendar missing settings or not logged in"),!1):!0}var bA=gt(require("obsidian"));var kT=gt(Pa());var _h=new Map;function zn(){_h.clear()}function er(){return P(this,arguments,function*({startDate:t,endDate:e,exclude:r,include:n}={}){let i=Ze.getInstance();t||(t=window.moment()),t=t.startOf("day"),e||(e=t.clone()),e=e.endOf("day");let a=yield Or();n&&n.length?a=a.filter(l=>n.contains(l.id)||n.contains(l.summary)):r&&r.length&&(a=a.filter(l=>!(r.contains(l.id)||r.contains(l.summary))));let s=[];for(let l=0;l<a.length;l++){let u=yield cq(i,a[l],t,e);s=[...s,...u]}return s=kT.default.orderBy(s,[l=>{var u;return new Date((u=l.start.date)!=null?u:l.start.dateTime)}],"asc"),s})}function lq(t,e,r){return P(this,null,function*(){if(!Yt())return[];let n,i=2500,a=[];do{let s=`https://www.googleapis.com/calendar/v3/calendars/${encodeURIComponent(t.id)}/events?`;if(s+=`maxResults=${i}`,s+="&futureevents=true",s+="&singleEvents=true",s+="&orderby=starttime",s+="&sortorder=ascending",s+=`&timeMin=${e}`,s+=`&timeMax=${r}`,n&&n.nextPageToken&&(s+=`&nextPageToken=${n.nextPageToken}`),n=yield Zr(s,"GET",null),!n){ot("Could not list Google Events");continue}let l=n.items.filter(u=>(u.parent=t,u.status!="cancelled"));a=[...a,...l]}while(n.items.length==i);return a})}function uq(t,e,r){let n=[];return t.forEach(i=>{if(!i.start.dateTime||!i.end.dateTime)return;let a=window.moment(i.end.dateTime),s=window.moment(i.start.dateTime);if(s.isSame(a,"day"))return;let l=[],u=a.endOf("day").diff(s.startOf("day"),"days")+1,f=i.summary,d=1;do i.summary=`${f} (Day ${d}/${u})`,i.eventType="multiDay",l=[...l,structuredClone(i)],d++,s=s.add(1,"days"),i.start.dateTime=s.format("YYYY-MM-DD HH:mm");while(!s.isAfter(a,"day"));l=l.filter(h=>{let g=window.moment(h.start.dateTime);return!(e&&g.isBefore(e,"day")||r&&g.isSameOrAfter(r,"day"))}),i.eventType="delete",n=[...n,...l]}),t=[...t,...n],t}function cq(t,e,r,n){return P(this,null,function*(){let i=r.toISOString(),a=n.toISOString(),s=JSON.stringify({start:i,end:a,calendar:e.id});if(_h.has(s)){let{events:u,updated:f}=_h.get(s);if(f.clone().add(t.settings.refreshInterval,"second").isAfter(window.moment()))return u}let l=yield lq(e,i,a);return l=uq(l,r,n),l=l.filter(u=>u.eventType!=="delete"),_h.set(s,{events:l,updated:window.moment()}),l})}var EA=gt(require("obsidian"));var wA=gt(require("obsidian"));function At(){}function Km(t){return t()}function IT(){return Object.create(null)}function zr(t){t.forEach(Km)}function NT(t){return typeof t=="function"}function dn(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}var wh;function vc(t,e){return wh||(wh=document.createElement("a")),wh.href=e,t===wh.href}function RT(t){return Object.keys(t).length===0}function Pl(t){return t==null?"":t}var tz=typeof window!="undefined";var rz=new Set;var DT=!1;function fq(){DT=!0}function dq(){DT=!1}function ae(t,e){t.appendChild(e)}function Pn(t,e,r){let n=hq(t);if(!n.getElementById(e)){let i=le("style");i.id=e,i.textContent=r,pq(n,i)}}function hq(t){if(!t)return document;let e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function pq(t,e){ae(t.head||t,e)}function be(t,e,r){t.insertBefore(e,r||null)}function Ce(t){t.parentNode.removeChild(t)}function nn(t,e){for(let r=0;r<t.length;r+=1)t[r]&&t[r].d(e)}function le(t){return document.createElement(t)}function cr(t){return document.createTextNode(t)}function Ne(){return cr(" ")}function mi(){return cr("")}function Ke(t,e,r,n){return t.addEventListener(e,r,n),()=>t.removeEventListener(e,r,n)}function ee(t,e,r){r==null?t.removeAttribute(e):t.getAttribute(e)!==r&&t.setAttribute(e,r)}function gq(t){return Array.from(t.childNodes)}function Sn(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function Li(t,e){t.value=e==null?"":e}function je(t,e,r,n){r===null?t.style.removeProperty(e):t.style.setProperty(e,r,n?"important":"")}function _c(t,e){for(let r=0;r<t.options.length;r+=1){let n=t.options[r];if(n.__value===e){n.selected=!0;return}}t.selectedIndex=-1}function jm(t){let e=t.querySelector(":checked")||t.options[0];return e&&e.__value}var nz=new Map;var wc;function Ec(t){wc=t}function BT(){if(!wc)throw new Error("Function called outside component initialization");return wc}function mo(t){BT().$$.on_mount.push(t)}function yo(t){BT().$$.on_destroy.push(t)}var Cc=[];var Mn=[],Eh=[],Ym=[],mq=Promise.resolve(),Wm=!1;function yq(){Wm||(Wm=!0,mq.then(OT))}function Ml(t){Eh.push(t)}function Ma(t){Ym.push(t)}var zm=new Set,Ch=0;function OT(){let t=wc;do{for(;Ch<Cc.length;){let e=Cc[Ch];Ch++,Ec(e),vq(e.$$)}for(Ec(null),Cc.length=0,Ch=0;Mn.length;)Mn.pop()();for(let e=0;e<Eh.length;e+=1){let r=Eh[e];zm.has(r)||(zm.add(r),r())}Eh.length=0}while(Cc.length);for(;Ym.length;)Ym.pop()();Wm=!1,zm.clear(),Ec(t)}function vq(t){if(t.fragment!==null){t.update(),zr(t.before_update);let e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Ml)}}var bh=new Set,vo;function Ul(){vo={r:0,c:[],p:vo}}function Fl(){vo.r||zr(vo.c),vo=vo.p}function Mr(t,e){t&&t.i&&(bh.delete(t),t.i(e))}function an(t,e,r,n){if(t&&t.o){if(bh.has(t))return;bh.add(t),vo.c.push(()=>{bh.delete(t),n&&(r&&t.d(1),n())}),t.o(e)}else n&&n()}var iz=typeof window!="undefined"?window:typeof globalThis!="undefined"?globalThis:global;var az=new Set(["allowfullscreen","allowpaymentrequest","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","hidden","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"]);function Ua(t,e,r){let n=t.$$.props[e];n!==void 0&&(t.$$.bound[n]=r,r(t.$$.ctx[n]))}function Cs(t){t&&t.c()}function Fa(t,e,r,n){let{fragment:i,on_mount:a,on_destroy:s,after_update:l}=t.$$;i&&i.m(e,r),n||Ml(()=>{let u=a.map(Km).filter(NT);s?s.push(...u):zr(u),t.$$.on_mount=[]}),l.forEach(Ml)}function aa(t,e){let r=t.$$;r.fragment!==null&&(zr(r.on_destroy),r.fragment&&r.fragment.d(e),r.on_destroy=r.fragment=null,r.ctx=[])}function _q(t,e){t.$$.dirty[0]===-1&&(Cc.push(t),yq(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function hn(t,e,r,n,i,a,s,l=[-1]){let u=wc;Ec(t);let f=t.$$={fragment:null,ctx:null,props:a,update:At,not_equal:i,bound:IT(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(u?u.$$.context:[])),callbacks:IT(),dirty:l,skip_bound:!1,root:e.target||u.$$.root};s&&s(f.root);let d=!1;if(f.ctx=r?r(t,e.props||{},(h,g,...y)=>{let m=y.length?y[0]:g;return f.ctx&&i(f.ctx[h],f.ctx[h]=m)&&(!f.skip_bound&&f.bound[h]&&f.bound[h](m),d&&_q(t,h)),g}):[],f.update(),d=!0,zr(f.before_update),f.fragment=n?n(f.ctx):!1,e.target){if(e.hydrate){fq();let h=gq(e.target);f.fragment&&f.fragment.l(h),h.forEach(Ce)}else f.fragment&&f.fragment.c();e.intro&&Mr(t.$$.fragment),Fa(t,e.target,e.anchor,e.customElement),dq(),OT()}Ec(u)}var wq;typeof HTMLElement=="function"&&(wq=class extends HTMLElement{constructor(){super();this.attachShadow({mode:"open"})}connectedCallback(){let{on_mount:t}=this.$$;this.$$.on_disconnect=t.map(Km).filter(NT);for(let e in this.$$.slotted)this.appendChild(this.$$.slotted[e])}attributeChangedCallback(t,e,r){this[t]=r}disconnectedCallback(){zr(this.$$.on_disconnect)}$destroy(){aa(this,1),this.$destroy=At}$on(t,e){let r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(e),()=>{let n=r.indexOf(e);n!==-1&&r.splice(n,1)}}$set(t){this.$$set&&!RT(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}});var sn=class{$destroy(){aa(this,1),this.$destroy=At}$on(e,r){let n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(r),()=>{let i=n.indexOf(r);i!==-1&&n.splice(i,1)}}$set(e){this.$$set&&!RT(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}};var tS=gt(Xm()),{__extends:lz,__assign:uz,__rest:cz,__decorate:fz,__param:dz,__metadata:hz,__awaiter:_r,__generator:pz,__exportStar:gz,__createBinding:mz,__values:yz,__read:vz,__spread:_z,__spreadArrays:wz,__spreadArray:Ez,__await:Cz,__asyncGenerator:bz,__asyncDelegator:xz,__asyncValues:Tz,__makeTemplateObject:Sz,__importStar:Az,__importDefault:kz,__classPrivateFieldGet:Iz,__classPrivateFieldSet:Nz}=tS.default;function Gl(t,e=!1){return P(this,null,function*(){var s,l,u;let r=Ze.getInstance();if(!Yt())return!1;let n=(s=t.parent)==null?void 0:s.id;if(n||(n=(l=r.settings.defaultCalendar)!=null?l:""),n==="")return ot("Calendar id missing"),!1;let i=(u=t.recurringEventId)!=null?u:t.id;return!e&&t.recurringEventId&&(i=t.id),!!(yield Zr(`https://www.googleapis.com/calendar/v3/calendars/${n}/events/${i}`,"DELETE",null))})}function sa(t,e){return P(this,null,function*(){if(!Yt())return null;let r=yield Zr(`https://www.googleapis.com/calendar/v3/calendars/${e}/events/${t}`,"GET",null);return r.parent=(yield Or()).find(n=>n.id===e),r||(ot("Could not get Google Event"),null)})}function Vl(t,e=!1){return P(this,null,function*(){if(!Yt())return null;if(e&&t.recurringEventId){console.log("REOCCURING");let i=yield sa(t.recurringEventId,t.parent.id);console.log(i),t=wn(wn({},i),t),t.start.dateTime?(t.start.dateTime=window.moment(t.start.dateTime).date(window.moment(i.start.dateTime).date()).format(),t.end.dateTime=window.moment(t.end.dateTime).date(window.moment(i.end.dateTime).date()).format()):(t.start.date=window.moment(i.start.date).format("YYYY-MM-DD"),t.end.date=window.moment(i.end.date).format("YYYY-MM-DD")),t.id=i.id,t.recurrence=i.recurrence,t.id=i.id,delete t.recurringEventId,delete t.originalStartTime,console.log(t)}let r=t.parent.id;delete t.parent;let n=yield Zr(`https://www.googleapis.com/calendar/v3/calendars/${r}/events/${t.id}`,"PUT",t);return n?(ot("Updated Event",!0),n):(ot("Could not create Google Event"),null)})}function rS(t){return window.moment(t).format("YYYY-MM-DD")}function nS(t){return window.moment(t).format()}function Hl(t){return P(this,null,function*(){var i;let e=Ze.getInstance();if(t.start.date?(t.start.date=rS(t.start.date),t.end.date=rS(t.end.date)):(t.start.dateTime=nS(t.start.dateTime),t.end.dateTime=nS(t.end.dateTime)),!Yt())return null;let r="";if(((i=t==null?void 0:t.parent)==null?void 0:i.id)?(r=t.parent.id,t.start.timeZone=t.parent.timeZone,t.end.timeZone=t.parent.timeZone,delete t.parent):r=e.settings.defaultCalendar,r==="")return ot("Could not create Google Event because no default calendar selected in Settings"),null;let n=yield Zr(`https://www.googleapis.com/calendar/v3/calendars/${r}/events`,"POST",t);return n?(ot(`Google Event ${n.summary} created`,!0),n):(ot("Could not create Google Event"),null)})}var Ah=["MO","TU","WE","TH","FR","SA","SU"],Nr=function(){function t(e,r){if(r===0)throw new Error("Can't create weekday with n == 0");this.weekday=e,this.n=r}return t.fromStr=function(e){return new t(Ah.indexOf(e))},t.prototype.nth=function(e){return this.n===e?this:new t(this.weekday,e)},t.prototype.equals=function(e){return this.weekday===e.weekday&&this.n===e.n},t.prototype.toString=function(){var e=Ah[this.weekday];return this.n&&(e=(this.n>0?"+":"")+String(this.n)+e),e},t.prototype.getJsWeekday=function(){return this.weekday===6?0:this.weekday+1},t}();var sr=function(t){return t!=null},Qn=function(t){return typeof t=="number"},Jm=function(t){return Ah.indexOf(t)>=0},on=Array.isArray,yi=function(t,e){e===void 0&&(e=t),arguments.length===1&&(e=t,t=0);for(var r=[],n=t;n<e;n++)r.push(n);return r};var Rt=function(t,e){var r=0,n=[];if(on(t))for(;r<e;r++)n[r]=[].concat(t);else for(;r<e;r++)n[r]=t;return n},iS=function(t){return on(t)?t:[t]};function _o(t,e,r){r===void 0&&(r=" ");var n=String(t);return e=e>>0,n.length>e?String(n):(e=e-n.length,e>r.length&&(r+=Rt(r,e/r.length)),r.slice(0,e)+String(n))}var aS=function(t,e,r){var n=t.split(e);return r?n.slice(0,r).concat([n.slice(r).join(e)]):n},pn=function(t,e){var r=t%e;return r*e<0?r+e:r},kh=function(t,e){return{div:Math.floor(t/e),mod:pn(t,e)}},Xn=function(t){return!sr(t)||t.length===0},Sr=function(t){return!Xn(t)},Pt=function(t,e){return Sr(t)&&t.indexOf(e)!==-1};var bs;(function(t){t.MONTH_DAYS=[31,28,31,30,31,30,31,31,30,31,30,31],t.ONE_DAY=1e3*60*60*24,t.MAXYEAR=9999,t.ORDINAL_BASE=new Date(Date.UTC(1970,0,1)),t.PY_WEEKDAYS=[6,0,1,2,3,4,5],t.getYearDay=function(e){var r=new Date(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate());return Math.ceil((r.valueOf()-new Date(e.getUTCFullYear(),0,1).valueOf())/t.ONE_DAY)+1},t.isLeapYear=function(e){return e%4==0&&e%100!=0||e%400==0},t.isDate=function(e){return e instanceof Date},t.isValidDate=function(e){return t.isDate(e)&&!isNaN(e.getTime())},t.tzOffset=function(e){return e.getTimezoneOffset()*60*1e3},t.daysBetween=function(e,r){var n=e.getTime()-t.tzOffset(e),i=r.getTime()-t.tzOffset(r),a=n-i;return Math.round(a/t.ONE_DAY)},t.toOrdinal=function(e){return t.daysBetween(e,t.ORDINAL_BASE)},t.fromOrdinal=function(e){return new Date(t.ORDINAL_BASE.getTime()+e*t.ONE_DAY)},t.getMonthDays=function(e){var r=e.getUTCMonth();return r===1&&t.isLeapYear(e.getUTCFullYear())?29:t.MONTH_DAYS[r]},t.getWeekday=function(e){return t.PY_WEEKDAYS[e.getUTCDay()]},t.monthRange=function(e,r){var n=new Date(Date.UTC(e,r,1));return[t.getWeekday(n),t.getMonthDays(n)]},t.combine=function(e,r){return r=r||e,new Date(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),r.getHours(),r.getMinutes(),r.getSeconds(),r.getMilliseconds()))},t.clone=function(e){var r=new Date(e.getTime());return r},t.cloneDates=function(e){for(var r=[],n=0;n<e.length;n++)r.push(t.clone(e[n]));return r},t.sort=function(e){e.sort(function(r,n){return r.getTime()-n.getTime()})},t.timeToUntilString=function(e,r){r===void 0&&(r=!0);var n=new Date(e);return[_o(n.getUTCFullYear().toString(),4,"0"),_o(n.getUTCMonth()+1,2,"0"),_o(n.getUTCDate(),2,"0"),"T",_o(n.getUTCHours(),2,"0"),_o(n.getUTCMinutes(),2,"0"),_o(n.getUTCSeconds(),2,"0"),r?"Z":""].join("")},t.untilStringToDate=function(e){var r=/^(\d{4})(\d{2})(\d{2})(T(\d{2})(\d{2})(\d{2})Z?)?$/,n=r.exec(e);if(!n)throw new Error("Invalid UNTIL value: "+e);return new Date(Date.UTC(parseInt(n[1],10),parseInt(n[2],10)-1,parseInt(n[3],10),parseInt(n[5],10)||0,parseInt(n[6],10)||0,parseInt(n[7],10)||0))}})(bs||(bs={}));var Xe=bs;var Eq=function(){function t(e,r){this.minDate=null,this.maxDate=null,this._result=[],this.total=0,this.method=e,this.args=r,e==="between"?(this.maxDate=r.inc?r.before:new Date(r.before.getTime()-1),this.minDate=r.inc?r.after:new Date(r.after.getTime()+1)):e==="before"?this.maxDate=r.inc?r.dt:new Date(r.dt.getTime()-1):e==="after"&&(this.minDate=r.inc?r.dt:new Date(r.dt.getTime()+1))}return t.prototype.accept=function(e){++this.total;var r=this.minDate&&e<this.minDate,n=this.maxDate&&e>this.maxDate;if(this.method==="between"){if(r)return!0;if(n)return!1}else if(this.method==="before"){if(n)return!1}else if(this.method==="after")return r?!0:(this.add(e),!1);return this.add(e)},t.prototype.add=function(e){return this._result.push(e),!0},t.prototype.getValue=function(){var e=this._result;switch(this.method){case"all":case"between":return e;case"before":case"after":default:return e.length?e[e.length-1]:null}},t.prototype.clone=function(){return new t(this.method,this.args)},t}(),qa=Eq;var AS=gt(SS()),{__extends:jl,__assign:An,__rest:yQ,__decorate:vQ,__param:_Q,__metadata:wQ,__awaiter:EQ,__generator:CQ,__exportStar:bQ,__createBinding:xQ,__values:TQ,__read:SQ,__spread:AQ,__spreadArrays:wo,__await:kQ,__asyncGenerator:IQ,__asyncDelegator:NQ,__asyncValues:RQ,__makeTemplateObject:DQ,__importStar:BQ,__importDefault:OQ,__classPrivateFieldGet:LQ,__classPrivateFieldSet:PQ}=AS.default;var Cq=function(t){jl(e,t);function e(r,n,i){var a=t.call(this,r,n)||this;return a.iterator=i,a}return e.prototype.add=function(r){return this.iterator(r,this._result.length)?(this._result.push(r),!0):!1},e}(qa),$m=Cq;var bq={dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],tokens:{SKIP:/^[ \r\n\t]+|^\.$/,number:/^[1-9][0-9]*/,numberAsText:/^(one|two|three)/i,every:/^every/i,"day(s)":/^days?/i,"weekday(s)":/^weekdays?/i,"week(s)":/^weeks?/i,"hour(s)":/^hours?/i,"minute(s)":/^minutes?/i,"month(s)":/^months?/i,"year(s)":/^years?/i,on:/^(on|in)/i,at:/^(at)/i,the:/^the/i,first:/^first/i,second:/^second/i,third:/^third/i,nth:/^([1-9][0-9]*)(\.|th|nd|rd|st)/i,last:/^last/i,for:/^for/i,"time(s)":/^times?/i,until:/^(un)?til/i,monday:/^mo(n(day)?)?/i,tuesday:/^tu(e(s(day)?)?)?/i,wednesday:/^we(d(n(esday)?)?)?/i,thursday:/^th(u(r(sday)?)?)?/i,friday:/^fr(i(day)?)?/i,saturday:/^sa(t(urday)?)?/i,sunday:/^su(n(day)?)?/i,january:/^jan(uary)?/i,february:/^feb(ruary)?/i,march:/^mar(ch)?/i,april:/^apr(il)?/i,may:/^may/i,june:/^june?/i,july:/^july?/i,august:/^aug(ust)?/i,september:/^sep(t(ember)?)?/i,october:/^oct(ober)?/i,november:/^nov(ember)?/i,december:/^dec(ember)?/i,comma:/^(,\s*|(and|or)\s*)+/i}},Eo=bq;var kS=function(t,e){return t.indexOf(e)!==-1},xq=function(t){return t.toString()},Tq=function(t,e,r){return e+" "+r+", "+t},Sq=function(){function t(e,r,n,i){if(r===void 0&&(r=xq),n===void 0&&(n=Eo),i===void 0&&(i=Tq),this.text=[],this.language=n||Eo,this.gettext=r,this.dateFormatter=i,this.rrule=e,this.options=e.options,this.origOptions=e.origOptions,this.origOptions.bymonthday){var a=[].concat(this.options.bymonthday),s=[].concat(this.options.bynmonthday);a.sort(function(d,h){return d-h}),s.sort(function(d,h){return h-d}),this.bymonthday=a.concat(s),this.bymonthday.length||(this.bymonthday=null)}if(sr(this.origOptions.byweekday)){var l=on(this.origOptions.byweekday)?this.origOptions.byweekday:[this.origOptions.byweekday],u=String(l);this.byweekday={allWeeks:l.filter(function(d){return!d.n}),someWeeks:l.filter(function(d){return Boolean(d.n)}),isWeekdays:u.indexOf("MO")!==-1&&u.indexOf("TU")!==-1&&u.indexOf("WE")!==-1&&u.indexOf("TH")!==-1&&u.indexOf("FR")!==-1&&u.indexOf("SA")===-1&&u.indexOf("SU")===-1,isEveryDay:u.indexOf("MO")!==-1&&u.indexOf("TU")!==-1&&u.indexOf("WE")!==-1&&u.indexOf("TH")!==-1&&u.indexOf("FR")!==-1&&u.indexOf("SA")!==-1&&u.indexOf("SU")!==-1};var f=function(d,h){return d.weekday-h.weekday};this.byweekday.allWeeks.sort(f),this.byweekday.someWeeks.sort(f),this.byweekday.allWeeks.length||(this.byweekday.allWeeks=null),this.byweekday.someWeeks.length||(this.byweekday.someWeeks=null)}else this.byweekday=null}return t.isFullyConvertible=function(e){var r=!0;if(!(e.options.freq in t.IMPLEMENTED)||e.origOptions.until&&e.origOptions.count)return!1;for(var n in e.origOptions){if(kS(["dtstart","wkst","freq"],n))return!0;if(!kS(t.IMPLEMENTED[e.options.freq],n))return!1}return r},t.prototype.isFullyConvertible=function(){return t.isFullyConvertible(this.rrule)},t.prototype.toString=function(){var e=this.gettext;if(!(this.options.freq in t.IMPLEMENTED))return e("RRule error: Unable to fully convert this rrule to text");if(this.text=[e("every")],this[Me.FREQUENCIES[this.options.freq]](),this.options.until){this.add(e("until"));var r=this.options.until;this.add(this.dateFormatter(r.getUTCFullYear(),this.language.monthNames[r.getUTCMonth()],r.getUTCDate()))}else this.options.count&&this.add(e("for")).add(this.options.count.toString()).add(this.plural(this.options.count)?e("times"):e("time"));return this.isFullyConvertible()||this.add(e("(~ approximate)")),this.text.join("")},t.prototype.HOURLY=function(){var e=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?e("hours"):e("hour"))},t.prototype.MINUTELY=function(){var e=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?e("minutes"):e("minute"))},t.prototype.DAILY=function(){var e=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()),this.byweekday&&this.byweekday.isWeekdays?this.add(this.plural(this.options.interval)?e("weekdays"):e("weekday")):this.add(this.plural(this.options.interval)?e("days"):e("day")),this.origOptions.bymonth&&(this.add(e("in")),this._bymonth()),this.bymonthday?this._bymonthday():this.byweekday?this._byweekday():this.origOptions.byhour&&this._byhour()},t.prototype.WEEKLY=function(){var e=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()).add(this.plural(this.options.interval)?e("weeks"):e("week")),this.byweekday&&this.byweekday.isWeekdays?this.options.interval===1?this.add(this.plural(this.options.interval)?e("weekdays"):e("weekday")):this.add(e("on")).add(e("weekdays")):this.byweekday&&this.byweekday.isEveryDay?this.add(this.plural(this.options.interval)?e("days"):e("day")):(this.options.interval===1&&this.add(e("week")),this.origOptions.bymonth&&(this.add(e("in")),this._bymonth()),this.bymonthday?this._bymonthday():this.byweekday&&this._byweekday())},t.prototype.MONTHLY=function(){var e=this.gettext;this.origOptions.bymonth?(this.options.interval!==1&&(this.add(this.options.interval.toString()).add(e("months")),this.plural(this.options.interval)&&this.add(e("in"))),this._bymonth()):(this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?e("months"):e("month"))),this.bymonthday?this._bymonthday():this.byweekday&&this.byweekday.isWeekdays?this.add(e("on")).add(e("weekdays")):this.byweekday&&this._byweekday()},t.prototype.YEARLY=function(){var e=this.gettext;this.origOptions.bymonth?(this.options.interval!==1&&(this.add(this.options.interval.toString()),this.add(e("years"))),this._bymonth()):(this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?e("years"):e("year"))),this.bymonthday?this._bymonthday():this.byweekday&&this._byweekday(),this.options.byyearday&&this.add(e("on the")).add(this.list(this.options.byyearday,this.nth,e("and"))).add(e("day")),this.options.byweekno&&this.add(e("in")).add(this.plural(this.options.byweekno.length)?e("weeks"):e("week")).add(this.list(this.options.byweekno,void 0,e("and")))},t.prototype._bymonthday=function(){var e=this.gettext;this.byweekday&&this.byweekday.allWeeks?this.add(e("on")).add(this.list(this.byweekday.allWeeks,this.weekdaytext,e("or"))).add(e("the")).add(this.list(this.bymonthday,this.nth,e("or"))):this.add(e("on the")).add(this.list(this.bymonthday,this.nth,e("and")))},t.prototype._byweekday=function(){var e=this.gettext;this.byweekday.allWeeks&&!this.byweekday.isWeekdays&&this.add(e("on")).add(this.list(this.byweekday.allWeeks,this.weekdaytext)),this.byweekday.someWeeks&&(this.byweekday.allWeeks&&this.add(e("and")),this.add(e("on the")).add(this.list(this.byweekday.someWeeks,this.weekdaytext,e("and"))))},t.prototype._byhour=function(){var e=this.gettext;this.add(e("at")).add(this.list(this.origOptions.byhour,void 0,e("and")))},t.prototype._bymonth=function(){this.add(this.list(this.options.bymonth,this.monthtext,this.gettext("and")))},t.prototype.nth=function(e){e=parseInt(e.toString(),10);var r,n,i=this.gettext;if(e===-1)return i("last");switch(n=Math.abs(e),n){case 1:case 21:case 31:r=n+i("st");break;case 2:case 22:r=n+i("nd");break;case 3:case 23:r=n+i("rd");break;default:r=n+i("th")}return e<0?r+" "+i("last"):r},t.prototype.monthtext=function(e){return this.language.monthNames[e-1]},t.prototype.weekdaytext=function(e){var r=Qn(e)?(e+1)%7:e.getJsWeekday();return(e.n?this.nth(e.n)+" ":"")+this.language.dayNames[r]},t.prototype.plural=function(e){return e%100!=1},t.prototype.add=function(e){return this.text.push(" "),this.text.push(e),this},t.prototype.list=function(e,r,n,i){i===void 0&&(i=","),on(e)||(e=[e]);var a=function(u,f,d){for(var h="",g=0;g<u.length;g++)g!==0&&(g===u.length-1?h+=" "+d+" ":h+=f+" "),h+=u[g];return h};r=r||function(u){return u.toString()};var s=this,l=function(u){return r&&r.call(s,u)};return n?a(e.map(l),i,n):e.map(l).join(i+" ")},t}(),oa=Sq;var Aq=function(){function t(e){this.done=!0,this.rules=e}return t.prototype.start=function(e){return this.text=e,this.done=!1,this.nextSymbol()},t.prototype.isDone=function(){return this.done&&this.symbol===null},t.prototype.nextSymbol=function(){var e,r,n=this;this.symbol=null,this.value=null;do{if(this.done)return!1;var i=void 0;e=null;for(var a in this.rules){i=this.rules[a];var s=i.exec(n.text);s&&(e===null||s[0].length>e[0].length)&&(e=s,r=a)}if(e!=null&&(this.text=this.text.substr(e[0].length),this.text===""&&(this.done=!0)),e==null){this.done=!0,this.symbol=null,this.value=null;return}}while(r==="SKIP");return this.symbol=r,this.value=e,!0},t.prototype.accept=function(e){if(this.symbol===e){if(this.value){var r=this.value;return this.nextSymbol(),r}return this.nextSymbol(),!0}return!1},t.prototype.acceptNumber=function(){return this.accept("number")},t.prototype.expect=function(e){if(this.accept(e))return!0;throw new Error("expected "+e+" but found "+this.symbol)},t}();function bc(t,e){e===void 0&&(e=Eo);var r={},n=new Aq(e.tokens);if(!n.start(t))return null;return i(),r;function i(){n.expect("every");var g=n.acceptNumber();if(g&&(r.interval=parseInt(g[0],10)),n.isDone())throw new Error("Unexpected end");switch(n.symbol){case"day(s)":r.freq=Me.DAILY,n.nextSymbol()&&(s(),h());break;case"weekday(s)":r.freq=Me.WEEKLY,r.byweekday=[Me.MO,Me.TU,Me.WE,Me.TH,Me.FR],n.nextSymbol(),h();break;case"week(s)":r.freq=Me.WEEKLY,n.nextSymbol()&&(a(),h());break;case"hour(s)":r.freq=Me.HOURLY,n.nextSymbol()&&(a(),h());break;case"minute(s)":r.freq=Me.MINUTELY,n.nextSymbol()&&(a(),h());break;case"month(s)":r.freq=Me.MONTHLY,n.nextSymbol()&&(a(),h());break;case"year(s)":r.freq=Me.YEARLY,n.nextSymbol()&&(a(),h());break;case"monday":case"tuesday":case"wednesday":case"thursday":case"friday":case"saturday":case"sunday":r.freq=Me.WEEKLY;var y=n.symbol.substr(0,2).toUpperCase();if(r.byweekday=[Me[y]],!n.nextSymbol())return;for(;n.accept("comma");){if(n.isDone())throw new Error("Unexpected end");var m=u();if(!m)throw new Error("Unexpected symbol "+n.symbol+", expected weekday");r.byweekday.push(Me[m]),n.nextSymbol()}d(),h();break;case"january":case"february":case"march":case"april":case"may":case"june":case"july":case"august":case"september":case"october":case"november":case"december":if(r.freq=Me.YEARLY,r.bymonth=[l()],!n.nextSymbol())return;for(;n.accept("comma");){if(n.isDone())throw new Error("Unexpected end");var w=l();if(!w)throw new Error("Unexpected symbol "+n.symbol+", expected month");r.bymonth.push(w),n.nextSymbol()}a(),h();break;default:throw new Error("Unknown symbol")}}function a(){var g=n.accept("on"),y=n.accept("the");if(!!(g||y))do{var m=f(),w=u(),_=l();if(m)w?(n.nextSymbol(),r.byweekday||(r.byweekday=[]),r.byweekday.push(Me[w].nth(m))):(r.bymonthday||(r.bymonthday=[]),r.bymonthday.push(m),n.accept("day(s)"));else if(w)n.nextSymbol(),r.byweekday||(r.byweekday=[]),r.byweekday.push(Me[w]);else if(n.symbol==="weekday(s)")n.nextSymbol(),r.byweekday||(r.byweekday=[Me.MO,Me.TU,Me.WE,Me.TH,Me.FR]);else if(n.symbol==="week(s)"){n.nextSymbol();var E=n.acceptNumber();if(!E)throw new Error("Unexpected symbol "+n.symbol+", expected week number");for(r.byweekno=[parseInt(E[0],10)];n.accept("comma");){if(E=n.acceptNumber(),!E)throw new Error("Unexpected symbol "+n.symbol+"; expected monthday");r.byweekno.push(parseInt(E[0],10))}}else if(_)n.nextSymbol(),r.bymonth||(r.bymonth=[]),r.bymonth.push(_);else return}while(n.accept("comma")||n.accept("the")||n.accept("on"))}function s(){var g=n.accept("at");if(!!g)do{var y=n.acceptNumber();if(!y)throw new Error("Unexpected symbol "+n.symbol+", expected hour");for(r.byhour=[parseInt(y[0],10)];n.accept("comma");){if(y=n.acceptNumber(),!y)throw new Error("Unexpected symbol "+n.symbol+"; expected hour");r.byhour.push(parseInt(y[0],10))}}while(n.accept("comma")||n.accept("at"))}function l(){switch(n.symbol){case"january":return 1;case"february":return 2;case"march":return 3;case"april":return 4;case"may":return 5;case"june":return 6;case"july":return 7;case"august":return 8;case"september":return 9;case"october":return 10;case"november":return 11;case"december":return 12;default:return!1}}function u(){switch(n.symbol){case"monday":case"tuesday":case"wednesday":case"thursday":case"friday":case"saturday":case"sunday":return n.symbol.substr(0,2).toUpperCase();default:return!1}}function f(){switch(n.symbol){case"last":return n.nextSymbol(),-1;case"first":return n.nextSymbol(),1;case"second":return n.nextSymbol(),n.accept("last")?-2:2;case"third":return n.nextSymbol(),n.accept("last")?-3:3;case"nth":var g=parseInt(n.value[1],10);if(g<-366||g>366)throw new Error("Nth out of range: "+g);return n.nextSymbol(),n.accept("last")?-g:g;default:return!1}}function d(){n.accept("on"),n.accept("the");var g=f();if(!!g)for(r.bymonthday=[g],n.nextSymbol();n.accept("comma");){if(g=f(),!g)throw new Error("Unexpected symbol "+n.symbol+"; expected monthday");r.bymonthday.push(g),n.nextSymbol()}}function h(){if(n.symbol==="until"){var g=Date.parse(n.text);if(!g)throw new Error("Cannot parse until date:"+n.text);r.until=new Date(g)}else n.accept("for")&&(r.count=parseInt(n.value[0],10),n.expect("number"))}}var Ct;(function(t){t[t.YEARLY=0]="YEARLY",t[t.MONTHLY=1]="MONTHLY",t[t.WEEKLY=2]="WEEKLY",t[t.DAILY=3]="DAILY",t[t.HOURLY=4]="HOURLY",t[t.MINUTELY=5]="MINUTELY",t[t.SECONDLY=6]="SECONDLY"})(Ct||(Ct={}));function xc(t){return t<Ct.HOURLY}var IS=function(t,e){return e===void 0&&(e=Eo),new Me(bc(t,e)||void 0)},Yl=["count","until","interval","byweekday","bymonthday","bymonth"];oa.IMPLEMENTED=[];oa.IMPLEMENTED[Ct.HOURLY]=Yl;oa.IMPLEMENTED[Ct.MINUTELY]=Yl;oa.IMPLEMENTED[Ct.DAILY]=["byhour"].concat(Yl);oa.IMPLEMENTED[Ct.WEEKLY]=Yl;oa.IMPLEMENTED[Ct.MONTHLY]=Yl;oa.IMPLEMENTED[Ct.YEARLY]=["byweekno","byyearday"].concat(Yl);var NS=function(t,e,r,n){return new oa(t,e,r,n).toString()},RS=oa.isFullyConvertible;var Wl=function(){function t(e,r,n,i){this.hour=e,this.minute=r,this.second=n,this.millisecond=i||0}return t.prototype.getHours=function(){return this.hour},t.prototype.getMinutes=function(){return this.minute},t.prototype.getSeconds=function(){return this.second},t.prototype.getMilliseconds=function(){return this.millisecond},t.prototype.getTime=function(){return(this.hour*60*60+this.minute*60+this.second)*1e3+this.millisecond},t}();var DS=function(t){jl(e,t);function e(r,n,i,a,s,l,u){var f=t.call(this,a,s,l,u)||this;return f.year=r,f.month=n,f.day=i,f}return e.fromDate=function(r){return new this(r.getUTCFullYear(),r.getUTCMonth()+1,r.getUTCDate(),r.getUTCHours(),r.getUTCMinutes(),r.getUTCSeconds(),r.valueOf()%1e3)},e.prototype.getWeekday=function(){return bs.getWeekday(new Date(this.getTime()))},e.prototype.getTime=function(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second,this.millisecond)).getTime()},e.prototype.getDay=function(){return this.day},e.prototype.getMonth=function(){return this.month},e.prototype.getYear=function(){return this.year},e.prototype.addYears=function(r){this.year+=r},e.prototype.addMonths=function(r){if(this.month+=r,this.month>12){var n=Math.floor(this.month/12),i=pn(this.month,12);this.month=i,this.year+=n,this.month===0&&(this.month=12,--this.year)}},e.prototype.addWeekly=function(r,n){n>this.getWeekday()?this.day+=-(this.getWeekday()+1+(6-n))+r*7:this.day+=-(this.getWeekday()-n)+r*7,this.fixDay()},e.prototype.addDaily=function(r){this.day+=r,this.fixDay()},e.prototype.addHours=function(r,n,i){for(n&&(this.hour+=Math.floor((23-this.hour)/r)*r);;){this.hour+=r;var a=kh(this.hour,24),s=a.div,l=a.mod;if(s&&(this.hour=l,this.addDaily(s)),Xn(i)||Pt(i,this.hour))break}},e.prototype.addMinutes=function(r,n,i,a){for(n&&(this.minute+=Math.floor((1439-(this.hour*60+this.minute))/r)*r);;){this.minute+=r;var s=kh(this.minute,60),l=s.div,u=s.mod;if(l&&(this.minute=u,this.addHours(l,!1,i)),(Xn(i)||Pt(i,this.hour))&&(Xn(a)||Pt(a,this.minute)))break}},e.prototype.addSeconds=function(r,n,i,a,s){for(n&&(this.second+=Math.floor((86399-(this.hour*3600+this.minute*60+this.second))/r)*r);;){this.second+=r;var l=kh(this.second,60),u=l.div,f=l.mod;if(u&&(this.second=f,this.addMinutes(u,!1,i,a)),(Xn(i)||Pt(i,this.hour))&&(Xn(a)||Pt(a,this.minute))&&(Xn(s)||Pt(s,this.second)))break}},e.prototype.fixDay=function(){if(!(this.day<=28)){var r=bs.monthRange(this.year,this.month-1)[1];if(!(this.day<=r))for(;this.day>r;){if(this.day-=r,++this.month,this.month===13&&(this.month=1,++this.year,this.year>bs.MAXYEAR))return;r=bs.monthRange(this.year,this.month-1)[1]}}},e.prototype.add=function(r,n){var i=r.freq,a=r.interval,s=r.wkst,l=r.byhour,u=r.byminute,f=r.bysecond;switch(i){case Ct.YEARLY:return this.addYears(a);case Ct.MONTHLY:return this.addMonths(a);case Ct.WEEKLY:return this.addWeekly(a,s);case Ct.DAILY:return this.addDaily(a);case Ct.HOURLY:return this.addHours(a,n,l);case Ct.MINUTELY:return this.addMinutes(a,n,l,u);case Ct.SECONDLY:return this.addSeconds(a,n,l,u,f)}},e}(Wl);function ey(t){for(var e=[],r=Object.keys(t),n=0,i=r;n<i.length;n++){var a=i[n];Pt(LS,a)||e.push(a),Xe.isDate(t[a])&&!Xe.isValidDate(t[a])&&e.push(a)}if(e.length)throw new Error("Invalid options: "+e.join(", "));return An({},t)}function BS(t){var e=An(An({},Tc),ey(t));if(sr(e.byeaster)&&(e.freq=Me.YEARLY),!(sr(e.freq)&&Me.FREQUENCIES[e.freq]))throw new Error("Invalid frequency: "+e.freq+" "+t.freq);if(e.dtstart||(e.dtstart=new Date(new Date().setMilliseconds(0))),sr(e.wkst)?Qn(e.wkst)||(e.wkst=e.wkst.weekday):e.wkst=Me.MO.weekday,sr(e.bysetpos)){Qn(e.bysetpos)&&(e.bysetpos=[e.bysetpos]);for(var r=0;r<e.bysetpos.length;r++){var n=e.bysetpos[r];if(n===0||!(n>=-366&&n<=366))throw new Error("bysetpos must be between 1 and 366, or between -366 and -1")}}if(!(Boolean(e.byweekno)||Sr(e.byweekno)||Sr(e.byyearday)||Boolean(e.bymonthday)||Sr(e.bymonthday)||sr(e.byweekday)||sr(e.byeaster)))switch(e.freq){case Me.YEARLY:e.bymonth||(e.bymonth=e.dtstart.getUTCMonth()+1),e.bymonthday=e.dtstart.getUTCDate();break;case Me.MONTHLY:e.bymonthday=e.dtstart.getUTCDate();break;case Me.WEEKLY:e.byweekday=[Xe.getWeekday(e.dtstart)];break}if(sr(e.bymonth)&&!on(e.bymonth)&&(e.bymonth=[e.bymonth]),sr(e.byyearday)&&!on(e.byyearday)&&Qn(e.byyearday)&&(e.byyearday=[e.byyearday]),!sr(e.bymonthday))e.bymonthday=[],e.bynmonthday=[];else if(on(e.bymonthday)){for(var i=[],a=[],r=0;r<e.bymonthday.length;r++){var n=e.bymonthday[r];n>0?i.push(n):n<0&&a.push(n)}e.bymonthday=i,e.bynmonthday=a}else e.bymonthday<0?(e.bynmonthday=[e.bymonthday],e.bymonthday=[]):(e.bynmonthday=[],e.bymonthday=[e.bymonthday]);if(sr(e.byweekno)&&!on(e.byweekno)&&(e.byweekno=[e.byweekno]),!sr(e.byweekday))e.bynweekday=null;else if(Qn(e.byweekday))e.byweekday=[e.byweekday],e.bynweekday=null;else if(Jm(e.byweekday))e.byweekday=[Nr.fromStr(e.byweekday).weekday],e.bynweekday=null;else if(e.byweekday instanceof Nr)!e.byweekday.n||e.freq>Me.MONTHLY?(e.byweekday=[e.byweekday.weekday],e.bynweekday=null):(e.bynweekday=[[e.byweekday.weekday,e.byweekday.n]],e.byweekday=null);else{for(var s=[],l=[],r=0;r<e.byweekday.length;r++){var u=e.byweekday[r];if(Qn(u)){s.push(u);continue}else if(Jm(u)){s.push(Nr.fromStr(u).weekday);continue}!u.n||e.freq>Me.MONTHLY?s.push(u.weekday):l.push([u.weekday,u.n])}e.byweekday=Sr(s)?s:null,e.bynweekday=Sr(l)?l:null}return sr(e.byhour)?Qn(e.byhour)&&(e.byhour=[e.byhour]):e.byhour=e.freq<Me.HOURLY?[e.dtstart.getUTCHours()]:null,sr(e.byminute)?Qn(e.byminute)&&(e.byminute=[e.byminute]):e.byminute=e.freq<Me.MINUTELY?[e.dtstart.getUTCMinutes()]:null,sr(e.bysecond)?Qn(e.bysecond)&&(e.bysecond=[e.bysecond]):e.bysecond=e.freq<Me.SECONDLY?[e.dtstart.getUTCSeconds()]:null,{parsedOptions:e}}function OS(t){var e=t.dtstart.getTime()%1e3;if(!xc(t.freq))return[];var r=[];return t.byhour.forEach(function(n){t.byminute.forEach(function(i){t.bysecond.forEach(function(a){r.push(new Wl(n,i,a,e))})})}),r}function Sc(t){var e=t.split(`
`).map(kq).filter(function(r){return r!==null});return An(An({},e[0]),e[1])}function Ac(t){var e={},r=/DTSTART(?:;TZID=([^:=]+?))?(?::|=)([^;\s]+)/i.exec(t);if(!r)return e;var n=r[0],i=r[1],a=r[2];return i&&(e.tzid=i),e.dtstart=Xe.untilStringToDate(a),e}function kq(t){if(t=t.replace(/^\s+|\s+$/,""),!t.length)return null;var e=/^([A-Z]+?)[:;]/.exec(t.toUpperCase());if(!e)return PS(t);var r=e[0],n=e[1];switch(n.toUpperCase()){case"RRULE":case"EXRULE":return PS(t);case"DTSTART":return Ac(t);default:throw new Error("Unsupported RFC prop "+n+" in "+t)}}function PS(t){var e=t.replace(/^RRULE:/i,""),r=Ac(e),n=t.replace(/^(?:RRULE|EXRULE):/i,"").split(";");return n.forEach(function(i){var a=i.split("="),s=a[0],l=a[1];switch(s.toUpperCase()){case"FREQ":r.freq=Ct[l.toUpperCase()];break;case"WKST":r.wkst=vi[l.toUpperCase()];break;case"COUNT":case"INTERVAL":case"BYSETPOS":case"BYMONTH":case"BYMONTHDAY":case"BYYEARDAY":case"BYWEEKNO":case"BYHOUR":case"BYMINUTE":case"BYSECOND":var u=Iq(l),f=s.toLowerCase();r[f]=u;break;case"BYWEEKDAY":case"BYDAY":r.byweekday=Nq(l);break;case"DTSTART":case"TZID":var d=Ac(t);r.tzid=d.tzid,r.dtstart=d.dtstart;break;case"UNTIL":r.until=Xe.untilStringToDate(l);break;case"BYEASTER":r.byeaster=Number(l);break;default:throw new Error("Unknown RRULE property '"+s+"'")}}),r}function Iq(t){if(t.indexOf(",")!==-1){var e=t.split(",");return e.map(MS)}return MS(t)}function MS(t){return/^[+-]?\d+$/.test(t)?Number(t):t}function Nq(t){var e=t.split(",");return e.map(function(r){if(r.length===2)return vi[r];var n=r.match(/^([+-]?\d{1,2})([A-Z]{2})$/),i=Number(n[1]),a=n[2],s=vi[a].weekday;return new Nr(s,i)})}var Co=function(){function t(e,r){this.date=e,this.tzid=r}return Object.defineProperty(t.prototype,"isUTC",{get:function(){return!this.tzid||this.tzid.toUpperCase()==="UTC"},enumerable:!0,configurable:!0}),t.prototype.toString=function(){var e=Xe.timeToUntilString(this.date.getTime(),this.isUTC);return this.isUTC?":"+e:";TZID="+this.tzid+":"+e},t.prototype.getTime=function(){return this.date.getTime()},t.prototype.rezonedDate=function(){var e;if(this.isUTC)return this.date;var r=Intl.DateTimeFormat().resolvedOptions().timeZone,n=new Date(this.date.toLocaleString(void 0,{timeZone:r})),i=new Date(this.date.toLocaleString(void 0,{timeZone:(e=this.tzid,e!=null?e:"UTC")})),a=i.getTime()-n.getTime();return new Date(this.date.getTime()-a)},t}();function kc(t){for(var e=[],r="",n=Object.keys(t),i=Object.keys(Tc),a=0;a<n.length;a++)if(n[a]!=="tzid"&&!!Pt(i,n[a])){var s=n[a].toUpperCase(),l=t[n[a]],u="";if(!(!sr(l)||on(l)&&!l.length)){switch(s){case"FREQ":u=Me.FREQUENCIES[t.freq];break;case"WKST":Qn(l)?u=new Nr(l).toString():u=l.toString();break;case"BYWEEKDAY":s="BYDAY",u=iS(l).map(function(y){return y instanceof Nr?y:on(y)?new Nr(y[0],y[1]):new Nr(y)}).toString();break;case"DTSTART":r=Rq(l,t.tzid);break;case"UNTIL":u=Xe.timeToUntilString(l,!t.tzid);break;default:if(on(l)){for(var f=[],d=0;d<l.length;d++)f[d]=String(l[d]);u=f.toString()}else u=String(l)}u&&e.push([s,u])}}var h=e.map(function(y){var m=y[0],w=y[1];return m+"="+w.toString()}).join(";"),g="";return h!==""&&(g="RRULE:"+h),[r,g].filter(function(y){return!!y}).join(`
`)}function Rq(t,e){return t?"DTSTART"+new Co(new Date(t),e).toString():""}function Dq(t,e){return Array.isArray(t)?!Array.isArray(e)||t.length!==e.length?!1:t.every(function(r,n){return r.getTime()===e[n].getTime()}):t instanceof Date?e instanceof Date&&t.getTime()===e.getTime():t===e}var US=function(){function t(){this.all=!1,this.before=[],this.after=[],this.between=[]}return t.prototype._cacheAdd=function(e,r,n){r&&(r=r instanceof Date?Xe.clone(r):Xe.cloneDates(r)),e==="all"?this.all=r:(n._value=r,this[e].push(n))},t.prototype._cacheGet=function(e,r){var n=!1,i=r?Object.keys(r):[],a=function(d){for(var h=0;h<i.length;h++){var g=i[h];if(!Dq(r[g],d[g]))return!0}return!1},s=this[e];if(e==="all")n=this.all;else if(on(s))for(var l=0;l<s.length;l++){var u=s[l];if(!(i.length&&a(u))){n=u._value;break}}if(!n&&this.all){for(var f=new qa(e,r),l=0;l<this.all.length&&f.accept(this.all[l]);l++);n=f.getValue(),this._cacheAdd(e,n,r)}return on(n)?Xe.cloneDates(n):n instanceof Date?Xe.clone(n):n},t}();var FS=wo(Rt(1,31),Rt(2,28),Rt(3,31),Rt(4,30),Rt(5,31),Rt(6,30),Rt(7,31),Rt(8,31),Rt(9,30),Rt(10,31),Rt(11,30),Rt(12,31),Rt(1,7)),qS=wo(Rt(1,31),Rt(2,29),Rt(3,31),Rt(4,30),Rt(5,31),Rt(6,30),Rt(7,31),Rt(8,31),Rt(9,30),Rt(10,31),Rt(11,30),Rt(12,31),Rt(1,7)),Bq=yi(1,29),Oq=yi(1,30),xs=yi(1,31),gn=yi(1,32),GS=wo(gn,Oq,gn,xs,gn,xs,gn,gn,xs,gn,xs,gn,gn.slice(0,7)),VS=wo(gn,Bq,gn,xs,gn,xs,gn,gn,xs,gn,xs,gn,gn.slice(0,7)),Lq=yi(-28,0),Pq=yi(-29,0),Ts=yi(-30,0),mn=yi(-31,0),HS=wo(mn,Pq,mn,Ts,mn,Ts,mn,mn,Ts,mn,Ts,mn,mn.slice(0,7)),KS=wo(mn,Lq,mn,Ts,mn,Ts,mn,mn,Ts,mn,Ts,mn,mn.slice(0,7)),jS=[0,31,60,91,121,152,182,213,244,274,305,335,366],YS=[0,31,59,90,120,151,181,212,243,273,304,334,365],ty=function(){for(var t=[],e=0;e<55;e++)t=t.concat(yi(7));return t}();function WS(t,e){var r=new Date(Date.UTC(t,0,1)),n=Xe.isLeapYear(t)?366:365,i=Xe.isLeapYear(t+1)?366:365,a=Xe.toOrdinal(r),s=Xe.getWeekday(r),l=An(An({yearlen:n,nextyearlen:i,yearordinal:a,yearweekday:s},Mq(t)),{wnomask:null});if(Xn(e.byweekno))return l;l.wnomask=Rt(0,n+7);var u,f,d=u=pn(7-s+e.wkst,7);d>=4?(d=0,f=l.yearlen+pn(s-e.wkst,7)):f=n-d;for(var h=Math.floor(f/7),g=pn(f,7),y=Math.floor(h+g/4),m=0;m<e.byweekno.length;m++){var w=e.byweekno[m];if(w<0&&(w+=y+1),w>0&&w<=y){var _=void 0;w>1?(_=d+(w-1)*7,d!==u&&(_-=7-u)):_=d;for(var E=0;E<7&&(l.wnomask[_]=1,_++,l.wdaymask[_]!==e.wkst);E++);}}if(Pt(e.byweekno,1)){var _=d+y*7;if(d!==u&&(_-=7-u),_<n)for(var m=0;m<7&&(l.wnomask[_]=1,_+=1,l.wdaymask[_]!==e.wkst);m++);}if(d){var b=void 0;if(Pt(e.byweekno,-1))b=-1;else{var k=Xe.getWeekday(new Date(Date.UTC(t-1,0,1))),O=pn(7-k.valueOf()+e.wkst,7),R=Xe.isLeapYear(t-1)?366:365,B=void 0;O>=4?(O=0,B=R+pn(k-e.wkst,7)):B=n-d,b=Math.floor(52+pn(B,7)/4)}if(Pt(e.byweekno,b))for(var _=0;_<d;_++)l.wnomask[_]=1}return l}function Mq(t){var e=Xe.isLeapYear(t)?366:365,r=new Date(Date.UTC(t,0,1)),n=Xe.getWeekday(r);return e===365?{mmask:FS,mdaymask:VS,nmdaymask:KS,wdaymask:ty.slice(n),mrange:YS}:{mmask:qS,mdaymask:GS,nmdaymask:HS,wdaymask:ty.slice(n),mrange:jS}}function zS(t,e,r,n,i,a){var s={lastyear:t,lastmonth:e,nwdaymask:[]},l=[];if(a.freq===Me.YEARLY)if(Xn(a.bymonth))l=[[0,r]];else for(var u=0;u<a.bymonth.length;u++)e=a.bymonth[u],l.push(n.slice(e-1,e+1));else a.freq===Me.MONTHLY&&(l=[n.slice(e-1,e+1)]);if(Xn(l))return s;s.nwdaymask=Rt(0,r);for(var u=0;u<l.length;u++)for(var f=l[u],d=f[0],h=f[1]-1,g=0;g<a.bynweekday.length;g++){var y=void 0,m=a.bynweekday[g],w=m[0],_=m[1];_<0?(y=h+(_+1)*7,y-=pn(i[y]-w,7)):(y=d+(_-1)*7,y+=pn(7-i[y]+w,7)),d<=y&&y<=h&&(s.nwdaymask[y]=1)}return s}function QS(t,e){e===void 0&&(e=0);var r=t%19,n=Math.floor(t/100),i=t%100,a=Math.floor(n/4),s=n%4,l=Math.floor((n+8)/25),u=Math.floor((n-l+1)/3),f=Math.floor(19*r+n-a-u+15)%30,d=Math.floor(i/4),h=i%4,g=Math.floor(32+2*s+2*d-f-h)%7,y=Math.floor((r+11*f+22*g)/451),m=Math.floor((f+g-7*y+114)/31),w=(f+g-7*y+114)%31+1,_=Date.UTC(t,m-1,w+e),E=Date.UTC(t,0,1);return[Math.ceil((_-E)/(1e3*60*60*24))]}var Uq=function(){function t(e){this.options=e}return t.prototype.rebuild=function(e,r){var n=this.options;if(e!==this.lastyear&&(this.yearinfo=WS(e,n)),Sr(n.bynweekday)&&(r!==this.lastmonth||e!==this.lastyear)){var i=this.yearinfo,a=i.yearlen,s=i.mrange,l=i.wdaymask;this.monthinfo=zS(e,r,a,s,l,n)}sr(n.byeaster)&&(this.eastermask=QS(e,n.byeaster))},Object.defineProperty(t.prototype,"lastyear",{get:function(){return this.monthinfo?this.monthinfo.lastyear:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lastmonth",{get:function(){return this.monthinfo?this.monthinfo.lastmonth:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"yearlen",{get:function(){return this.yearinfo.yearlen},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"yearordinal",{get:function(){return this.yearinfo.yearordinal},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"mrange",{get:function(){return this.yearinfo.mrange},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"wdaymask",{get:function(){return this.yearinfo.wdaymask},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"mmask",{get:function(){return this.yearinfo.mmask},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"wnomask",{get:function(){return this.yearinfo.wnomask},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nwdaymask",{get:function(){return this.monthinfo?this.monthinfo.nwdaymask:[]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nextyearlen",{get:function(){return this.yearinfo.nextyearlen},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"mdaymask",{get:function(){return this.yearinfo.mdaymask},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nmdaymask",{get:function(){return this.yearinfo.nmdaymask},enumerable:!0,configurable:!0}),t.prototype.ydayset=function(){return[yi(this.yearlen),0,this.yearlen]},t.prototype.mdayset=function(e,r,n){for(var i=this.mrange[r-1],a=this.mrange[r],s=Rt(null,this.yearlen),l=i;l<a;l++)s[l]=l;return[s,i,a]},t.prototype.wdayset=function(e,r,n){for(var i=Rt(null,this.yearlen+7),a=Xe.toOrdinal(new Date(Date.UTC(e,r-1,n)))-this.yearordinal,s=a,l=0;l<7&&(i[a]=a,++a,this.wdaymask[a]!==this.options.wkst);l++);return[i,s,a]},t.prototype.ddayset=function(e,r,n){var i=Rt(null,this.yearlen),a=Xe.toOrdinal(new Date(Date.UTC(e,r-1,n)))-this.yearordinal;return i[a]=a,[i,a,a+1]},t.prototype.htimeset=function(e,r,n,i){var a=this,s=[];return this.options.byminute.forEach(function(l){s=s.concat(a.mtimeset(e,l,n,i))}),Xe.sort(s),s},t.prototype.mtimeset=function(e,r,n,i){var a=this.options.bysecond.map(function(s){return new Wl(e,r,s,i)});return Xe.sort(a),a},t.prototype.stimeset=function(e,r,n,i){return[new Wl(e,r,n,i)]},t.prototype.getdayset=function(e){switch(e){case Ct.YEARLY:return this.ydayset.bind(this);case Ct.MONTHLY:return this.mdayset.bind(this);case Ct.WEEKLY:return this.wdayset.bind(this);case Ct.DAILY:return this.ddayset.bind(this);default:return this.ddayset.bind(this)}},t.prototype.gettimeset=function(e){switch(e){case Ct.HOURLY:return this.htimeset.bind(this);case Ct.MINUTELY:return this.mtimeset.bind(this);case Ct.SECONDLY:return this.stimeset.bind(this)}},t}(),XS=Uq;function JS(t,e,r,n,i,a){for(var s=[],l=0;l<t.length;l++){var u=void 0,f=void 0,d=t[l];d<0?(u=Math.floor(d/e.length),f=pn(d,e.length)):(u=Math.floor((d-1)/e.length),f=pn(d-1,e.length));for(var h=[],g=r;g<n;g++){var y=a[g];!sr(y)||h.push(y)}var m=void 0;u<0?m=h.slice(u)[0]:m=h[u];var w=e[f],_=Xe.fromOrdinal(i.yearordinal+m),E=Xe.combine(_,w);Pt(s,E)||s.push(E)}return Xe.sort(s),s}function Rh(t,e){var r=e.dtstart,n=e.freq,i=e.interval,a=e.until,s=e.bysetpos,l=e.count;if(l===0||i===0)return Ga(t);var u=DS.fromDate(r),f=new XS(e);f.rebuild(u.year,u.month);for(var d=Gq(f,u,e);;){var h=f.getdayset(n)(u.year,u.month,u.day),g=h[0],y=h[1],m=h[2],w=qq(g,y,m,f,e);if(Sr(s))for(var _=JS(s,d,y,m,f,g),E=0;E<_.length;E++){var b=_[E];if(a&&b>a)return Ga(t);if(b>=r){var k=ZS(b,e);if(!t.accept(k)||l&&(--l,!l))return Ga(t)}}else for(var E=y;E<m;E++){var O=g[E];if(!!sr(O))for(var R=Xe.fromOrdinal(f.yearordinal+O),B=0;B<d.length;B++){var ne=d[B],b=Xe.combine(R,ne);if(a&&b>a)return Ga(t);if(b>=r){var k=ZS(b,e);if(!t.accept(k)||l&&(--l,!l))return Ga(t)}}}if(e.interval===0||(u.add(e,w),u.year>Xe.MAXYEAR))return Ga(t);xc(n)||(d=f.gettimeset(n)(u.hour,u.minute,u.second,0)),f.rebuild(u.year,u.month)}}function Fq(t,e,r){var n=r.bymonth,i=r.byweekno,a=r.byweekday,s=r.byeaster,l=r.bymonthday,u=r.bynmonthday,f=r.byyearday;return Sr(n)&&!Pt(n,t.mmask[e])||Sr(i)&&!t.wnomask[e]||Sr(a)&&!Pt(a,t.wdaymask[e])||Sr(t.nwdaymask)&&!t.nwdaymask[e]||s!==null&&!Pt(t.eastermask,e)||(Sr(l)||Sr(u))&&!Pt(l,t.mdaymask[e])&&!Pt(u,t.nmdaymask[e])||Sr(f)&&(e<t.yearlen&&!Pt(f,e+1)&&!Pt(f,-t.yearlen+e)||e>=t.yearlen&&!Pt(f,e+1-t.yearlen)&&!Pt(f,-t.nextyearlen+e-t.yearlen))}function ZS(t,e){return new Co(t,e.tzid).rezonedDate()}function Ga(t){return t.getValue()}function qq(t,e,r,n,i){for(var a=!1,s=e;s<r;s++){var l=t[s];a=Fq(n,l,i),a&&(t[l]=null)}return a}function Gq(t,e,r){var n=r.freq,i=r.byhour,a=r.byminute,s=r.bysecond;return xc(n)?OS(r):n>=Me.HOURLY&&Sr(i)&&!Pt(i,e.hour)||n>=Me.MINUTELY&&Sr(a)&&!Pt(a,e.minute)||n>=Me.SECONDLY&&Sr(s)&&!Pt(s,e.second)?[]:t.gettimeset(n)(e.hour,e.minute,e.second,e.millisecond)}var vi={MO:new Nr(0),TU:new Nr(1),WE:new Nr(2),TH:new Nr(3),FR:new Nr(4),SA:new Nr(5),SU:new Nr(6)},Tc={freq:Ct.YEARLY,dtstart:null,interval:1,wkst:vi.MO,count:null,until:null,tzid:null,bysetpos:null,bymonth:null,bymonthday:null,bynmonthday:null,byyearday:null,byweekno:null,byweekday:null,bynweekday:null,byhour:null,byminute:null,bysecond:null,byeaster:null},LS=Object.keys(Tc),Me=function(){function t(e,r){e===void 0&&(e={}),r===void 0&&(r=!1),this._cache=r?null:new US,this.origOptions=ey(e);var n=BS(e).parsedOptions;this.options=n}return t.parseText=function(e,r){return bc(e,r)},t.fromText=function(e,r){return IS(e,r)},t.fromString=function(e){return new t(t.parseString(e)||void 0)},t.prototype._iter=function(e){return Rh(e,this.options)},t.prototype._cacheGet=function(e,r){return this._cache?this._cache._cacheGet(e,r):!1},t.prototype._cacheAdd=function(e,r,n){if(!!this._cache)return this._cache._cacheAdd(e,r,n)},t.prototype.all=function(e){if(e)return this._iter(new $m("all",{},e));var r=this._cacheGet("all");return r===!1&&(r=this._iter(new qa("all",{})),this._cacheAdd("all",r)),r},t.prototype.between=function(e,r,n,i){if(n===void 0&&(n=!1),!Xe.isValidDate(e)||!Xe.isValidDate(r))throw new Error("Invalid date passed in to RRule.between");var a={before:r,after:e,inc:n};if(i)return this._iter(new $m("between",a,i));var s=this._cacheGet("between",a);return s===!1&&(s=this._iter(new qa("between",a)),this._cacheAdd("between",s,a)),s},t.prototype.before=function(e,r){if(r===void 0&&(r=!1),!Xe.isValidDate(e))throw new Error("Invalid date passed in to RRule.before");var n={dt:e,inc:r},i=this._cacheGet("before",n);return i===!1&&(i=this._iter(new qa("before",n)),this._cacheAdd("before",i,n)),i},t.prototype.after=function(e,r){if(r===void 0&&(r=!1),!Xe.isValidDate(e))throw new Error("Invalid date passed in to RRule.after");var n={dt:e,inc:r},i=this._cacheGet("after",n);return i===!1&&(i=this._iter(new qa("after",n)),this._cacheAdd("after",i,n)),i},t.prototype.count=function(){return this.all().length},t.prototype.toString=function(){return kc(this.origOptions)},t.prototype.toText=function(e,r,n){return NS(this,e,r,n)},t.prototype.isFullyConvertibleToText=function(){return RS(this)},t.prototype.clone=function(){return new t(this.origOptions)},t.FREQUENCIES=["YEARLY","MONTHLY","WEEKLY","DAILY","HOURLY","MINUTELY","SECONDLY"],t.YEARLY=Ct.YEARLY,t.MONTHLY=Ct.MONTHLY,t.WEEKLY=Ct.WEEKLY,t.DAILY=Ct.DAILY,t.HOURLY=Ct.HOURLY,t.MINUTELY=Ct.MINUTELY,t.SECONDLY=Ct.SECONDLY,t.MO=vi.MO,t.TU=vi.TU,t.WE=vi.WE,t.TH=vi.TH,t.FR=vi.FR,t.SA=vi.SA,t.SU=vi.SU,t.parseString=Sc,t.optionsToString=kc,t}();function $S(t,e,r,n,i,a){var s={},l=t.accept;function u(g,y){r.forEach(function(m){m.between(g,y,!0).forEach(function(w){s[Number(w)]=!0})})}i.forEach(function(g){var y=new Co(g,a).rezonedDate();s[Number(y)]=!0}),t.accept=function(g){var y=Number(g);return isNaN(y)?l.call(this,g):!s[y]&&(u(new Date(y-1),new Date(y+1)),!s[y])?(s[y]=!0,l.call(this,g)):!0},t.method==="between"&&(u(t.args.after,t.args.before),t.accept=function(g){var y=Number(g);return s[y]?!0:(s[y]=!0,l.call(this,g))});for(var f=0;f<n.length;f++){var d=new Co(n[f],a).rezonedDate();if(!t.accept(new Date(d.getTime())))break}e.forEach(function(g){Rh(t,g.options)});var h=t._result;switch(Xe.sort(h),t.method){case"all":case"between":return h;case"before":return h.length&&h[h.length-1]||null;case"after":default:return h.length&&h[0]||null}}var eA={dtstart:null,cache:!1,unfold:!1,forceset:!1,compatible:!1,tzid:null};function Vq(t,e){var r=[],n=[],i=[],a=[],s=Ac(t),l=s.dtstart,u=s.tzid,f=Wq(t,e.unfold);return f.forEach(function(d){if(!!d){var h=Yq(d),g=h.name,y=h.parms,m=h.value;switch(g.toUpperCase()){case"RRULE":if(y.length)throw new Error("unsupported RRULE parm: "+y.join(","));r.push(Sc(d));break;case"RDATE":var w=/RDATE(?:;TZID=([^:=]+))?/i.exec(d),_=w[0],E=w[1];E&&!u&&(u=E),n=n.concat(tA(m,y));break;case"EXRULE":if(y.length)throw new Error("unsupported EXRULE parm: "+y.join(","));i.push(Sc(m));break;case"EXDATE":a=a.concat(tA(m,y));break;case"DTSTART":break;default:throw new Error("unsupported property: "+g)}}}),{dtstart:l,tzid:u,rrulevals:r,rdatevals:n,exrulevals:i,exdatevals:a}}function Hq(t,e){var r=Vq(t,e),n=r.rrulevals,i=r.rdatevals,a=r.exrulevals,s=r.exdatevals,l=r.dtstart,u=r.tzid,f=e.cache===!1;if(e.compatible&&(e.forceset=!0,e.unfold=!0),e.forceset||n.length>1||i.length||a.length||s.length){var d=new bo(f);return d.dtstart(l),d.tzid(u||void 0),n.forEach(function(g){d.rrule(new Me(ry(g,l,u),f))}),i.forEach(function(g){d.rdate(g)}),a.forEach(function(g){d.exrule(new Me(ry(g,l,u),f))}),s.forEach(function(g){d.exdate(g)}),e.compatible&&e.dtstart&&d.rdate(l),d}var h=n[0]||{};return new Me(ry(h,h.dtstart||e.dtstart||l,h.tzid||e.tzid||u),f)}function zl(t,e){return e===void 0&&(e={}),Hq(t,Kq(e))}function ry(t,e,r){return An(An({},t),{dtstart:e,tzid:r})}function Kq(t){var e=[],r=Object.keys(t),n=Object.keys(eA);if(r.forEach(function(i){Pt(n,i)||e.push(i)}),e.length)throw new Error("Invalid options: "+e.join(", "));return An(An({},eA),t)}function jq(t){if(t.indexOf(":")===-1)return{name:"RRULE",value:t};var e=aS(t,":",1),r=e[0],n=e[1];return{name:r,value:n}}function Yq(t){var e=jq(t),r=e.name,n=e.value,i=r.split(";");if(!i)throw new Error("empty property name");return{name:i[0].toUpperCase(),parms:i.slice(1),value:n}}function Wq(t,e){if(e===void 0&&(e=!1),t=t&&t.trim(),!t)throw new Error("Invalid empty string");if(!e)return t.split(/\s/);for(var r=t.split(`
`),n=0;n<r.length;){var i=r[n]=r[n].replace(/\s+$/g,"");i?n>0&&i[0]===" "?(r[n-1]+=i.slice(1),r.splice(n,1)):n+=1:r.splice(n,1)}return r}function zq(t){t.forEach(function(e){if(!/(VALUE=DATE(-TIME)?)|(TZID=)/.test(e))throw new Error("unsupported RDATE/EXDATE parm: "+e)})}function tA(t,e){return zq(e),t.split(",").map(function(r){return Xe.untilStringToDate(r)})}function rA(t){var e=this;return function(r){if(r!==void 0&&(e["_"+t]=r),e["_"+t]!==void 0)return e["_"+t];for(var n=0;n<e._rrule.length;n++){var i=e._rrule[n].origOptions[t];if(i)return i}}}var bo=function(t){jl(e,t);function e(r){r===void 0&&(r=!1);var n=t.call(this,{},r)||this;return n.dtstart=rA.apply(n,["dtstart"]),n.tzid=rA.apply(n,["tzid"]),n._rrule=[],n._rdate=[],n._exrule=[],n._exdate=[],n}return e.prototype._iter=function(r){return $S(r,this._rrule,this._exrule,this._rdate,this._exdate,this.tzid())},e.prototype.rrule=function(r){nA(r,this._rrule)},e.prototype.exrule=function(r){nA(r,this._exrule)},e.prototype.rdate=function(r){iA(r,this._rdate)},e.prototype.exdate=function(r){iA(r,this._exdate)},e.prototype.rrules=function(){return this._rrule.map(function(r){return zl(r.toString())})},e.prototype.exrules=function(){return this._exrule.map(function(r){return zl(r.toString())})},e.prototype.rdates=function(){return this._rdate.map(function(r){return new Date(r.getTime())})},e.prototype.exdates=function(){return this._exdate.map(function(r){return new Date(r.getTime())})},e.prototype.valueOf=function(){var r=[];return!this._rrule.length&&this._dtstart&&(r=r.concat(kc({dtstart:this._dtstart}))),this._rrule.forEach(function(n){r=r.concat(n.toString().split(`
`))}),this._exrule.forEach(function(n){r=r.concat(n.toString().split(`
`).map(function(i){return i.replace(/^RRULE:/,"EXRULE:")}).filter(function(i){return!/^DTSTART/.test(i)}))}),this._rdate.length&&r.push(aA("RDATE",this._rdate,this.tzid())),this._exdate.length&&r.push(aA("EXDATE",this._exdate,this.tzid())),r},e.prototype.toString=function(){return this.valueOf().join(`
`)},e.prototype.clone=function(){var r=new e(!!this._cache);return this._rrule.forEach(function(n){return r.rrule(n.clone())}),this._exrule.forEach(function(n){return r.exrule(n.clone())}),this._rdate.forEach(function(n){return r.rdate(new Date(n.getTime()))}),this._exdate.forEach(function(n){return r.exdate(new Date(n.getTime()))}),r},e}(Me);function nA(t,e){if(!(t instanceof Me))throw new TypeError(String(t)+" is not RRule instance");Pt(e.map(String),String(t))||e.push(t)}function iA(t,e){if(!(t instanceof Date))throw new TypeError(String(t)+" is not Date instance");Pt(e.map(Number),Number(t))||(e.push(t),Xe.sort(e))}function aA(t,e,r){var n=!r||r.toUpperCase()==="UTC",i=n?t+":":t+";TZID="+r+":",a=e.map(function(s){return Xe.timeToUntilString(s.valueOf(),n)}).join(",");return""+i+a}var sA=Me;var dA=gt(Pa());var Xl=gt(require("obsidian"));var xo=gt(require("obsidian"));var Bh=gt(Pa());function Ic(t){return t.getHours()/24+t.getMinutes()/(60*24)}function oA(t,e){if(t.start.date||(t==null?void 0:t.eventType)=="multiDay")return 0;let r=Ic(new Date(t.start.dateTime));return e*r}function lA(t,e){if(t.start.date||(t==null?void 0:t.eventType)=="multiDay")return 25;let r=Ic(new Date(t.start.dateTime)),n=Ic(new Date(t.end.dateTime));return e*(n-r)}function ny(t,e){return t/24*e-10}function iy(t,e){return t-t/24*e-10}var Dh=()=>app.vault.config.theme?app.vault.config.theme=="obsidian"?"dark":"light":"dark",ay=t=>t?t.trim().replace("<","lt").replace(">","gt").replace('"',"''").replace("\\","-").replace("/","-").replace(":","-").replace("|","-").replace("*","").replace("?",""):"",uA=(t,e)=>t.reduce(([r,n,i],a)=>{let s=app.metadataCache.getFileCache(a).frontmatter;return(s==null?void 0:s["event-id"])===e?[[...r,a],n,i]:(s==null?void 0:s["event-id"])?[r,n,[...i,a]]:[r,[...n,a],i]},[[],[],[]]),Qq=t=>{let e=app.vault.getFiles().filter(i=>i.basename==ay(t.summary)),[r,n]=uA(e,t.id);return{event:t,file:r[0]||n[0]||null,match:r.length>0?"id":"title"}};var Xq=(t,e)=>{let r=app.vault.getFiles().filter(a=>a.basename.startsWith(e.settings.optionalNotePrefix)),[n,i]=uA(r,t.id);return{event:t,file:n[0]||i[0]||null,match:n.length>0?"id":"title"}},Ql=(t,e)=>{let r=Qq(t);return r.match=="id"&&r.file?r:Xq(t,e)};var sy=t=>P(void 0,null,function*(){var s,l;if(!t.settings.autoCreateEventNotes||!Yt())return;let e=Math.abs(t.settings.importStartOffset),r=Math.abs(t.settings.importEndOffset),n=window.moment().local().subtract(e,"day"),i=window.moment().local().add(r,"day"),a=yield er({startDate:n,endDate:i});for(let u=0;u<a.length;u++){let f=(l=(s=a[u].description)==null?void 0:s.match(/:(.*-)?obsidian-?(.*)?:/))!=null?l:[];f.length==3&&(yield la(a[u],f[1],f[2],!0))}}),cA=(t,e,r)=>{var s,l,u,f;let n=(l=(s=r==null?void 0:r.start)==null?void 0:s.offset)!=null?l:0,i=(f=(u=r==null?void 0:r.end)==null?void 0:u.offset)!=null?f:0,a=e.substring(n,i);return a.contains("event-id:")||(a.contains("---")?a=a.replace("---",`---
event-id: ${t.id}`):a=`---
event-id: ${t.id}
---
`,e=e.substring(0,n)+a+e.substring(i)),e},Jq=(t,e)=>{let r=/{{gEvent\.([^}>]*)}}/gm,n,i=[];do n=r.exec(e),i.push(n);while(n);return i.forEach(a=>{if(a){let s="";if(a[1]=="attendees"){let l=Bh.default.get(t,a[1],"");for(let u=0;u<l.length;u++)l[u].displayName?s+=`- [[@${l[u].displayName}]]
`:s+=`- [[@${l[u].email}]]
`}else if(a[1]=="attachments"){let l=Bh.default.get(t,a[1],"");for(let u=0;u<l.length;u++)l[u].title?s+=`- [${l[u].title}](${l[u].fileUrl})
`:s+=`- [${l[u].fileUrl}](${l[u].fileUrl})
`}else s=Bh.default.get(t,a[1],"");s===Object(s)&&(s=JSON.stringify(s)),e=e.replace(a[0],s!=null?s:"")}}),e};function fA(t,e,r){var n,i,a,s,l;return r=r.replace("{{prefix}}",t.settings.optionalNotePrefix),r=r.replace("{{date}}",window.moment().format("YYYY-MM-DD")),r=r.replace("{{date-year}}",window.moment().format("YYYY")),r=r.replace("{{date-month}}",window.moment().format("MM")),r=r.replace("{{date-day}}",window.moment().format("DD")),r=r.replace("{{event-date}}",window.moment((n=e.start.date)!=null?n:e.start.dateTime).format("YYYY-MM-DD")),r=r.replace("{{event-year}}",window.moment((i=e.start.date)!=null?i:e.start.dateTime).format("YYYY")),r=r.replace("{{event-month}}",window.moment((a=e.start.date)!=null?a:e.start.dateTime).format("MM")),r=r.replace("{{event-day}}",window.moment((s=e.start.date)!=null?s:e.start.dateTime).format("DD")),r=r.replace("{{event-title}}",(l=e.summary)!=null?l:"event-title"),r}function Zq(t,e,r){return P(this,null,function*(){let{adapter:n}=app.vault;r?(r.endsWith("-")&&(r=r.slice(0,-1)),r="/"+r.split(/[/\\]/).join("/"),(yield n.exists(r))||(yield n.mkdir(r))):r=app.fileManager.getNewFileParent("").path;let i=fA(t,e,ay(t.settings.eventNoteNameFormat));return(0,xo.normalizePath)(`${r}/${i}.md`)})}function $q(t,e){return P(this,null,function*(){let{vault:r}=app,{adapter:n}=r;if(yield n.exists(e)){let i=r.getAbstractFileByPath(e);return ot(`EventNote ${t.summary} already exists.`),new ua(t,a=>i=a).open(),i}})}var la=(t,e,r,n=!1)=>P(void 0,null,function*(){let i=Ze.getInstance(),{vault:a}=app,{adapter:s}=a;e&&(e=fA(i,t,e));let l=yield Zq(i,t,e);if(!n){let h=yield $q(t,l);if(h)return h}let u=yield a.create(l,"");if(ot(`EventNote ${t.summary} created.`),!i.coreTemplatePlugin&&!i.templaterPlugin||!r){let h=cA(t,"",null);yield s.write(l,h);let g=a.getAbstractFileByPath(l);return i.settings.autoCreateEventKeepOpen&&(yield app.workspace.getLeaf(!0).openFile(g)),g}r.match(/.*\.md/)||(r=r+".md");let f=yield app.workspace.getLeaf(!0);return yield f.setViewState({type:"MarkdownView"}),yield app.workspace.setActiveLeaf(f,!1,!0),yield f.openFile(u,{state:{mode:"source"},active:!0}),i.templaterPlugin&&i.coreTemplatePlugin?(yield d(!0))||(yield d(!1))||ot("Template not compatible"):i.templaterPlugin?(yield d(!0))||ot("Template not compatible"):i.coreTemplatePlugin&&((yield d(!1))||ot("Template not compatible")),i.settings.autoCreateEventKeepOpen||f.detach(),a.getAbstractFileByPath(l);function d(h){return P(this,null,function*(){var k,O,R,B,ne,M;let g;h?g=(0,xo.normalizePath)((O=(k=i==null?void 0:i.templaterPlugin)==null?void 0:k.settings)==null?void 0:O.templates_folder):g=(0,xo.normalizePath)((ne=(B=(R=i==null?void 0:i.coreTemplatePlugin)==null?void 0:R.instance)==null?void 0:B.options)==null?void 0:ne.folder);let y;if((yield s.exists(r))?y=r:(y=`${g}/${r}`,g==="/"&&(y=r)),!(yield s.exists(y)))return ot(`Template: ${r} doesn't exit.`),!1;let m=a.getAbstractFileByPath(y);if(!(m instanceof xo.TFile))return!1;let w=yield a.cachedRead(m),_=cA(t,w,(M=app.metadataCache.getFileCache(m).frontmatter)==null?void 0:M.position);if(_=Jq(t,_),h&&_.contains("{{")&&_.contains("}}"))return!1;if(!h&&_.contains("<%")&&_.contains("%>"))return!1;let E=m.path+".tmp";yield s.write(E,_);let b=app.vault.getAbstractFileByPath(E);if(!(b instanceof xo.TFile))return!1;try{return h?yield i.templaterPlugin.templater.append_template_to_active_file(b):yield i.coreTemplatePlugin.instance.insertTemplate(b),s.remove(E),!0}catch(G){return s.remove(E),!1}})}});var ua=class extends Xl.Modal{constructor(e,r){super(window.app);this.template=null;this.folder=null;this.plugin=Ze.getInstance();this.event=e,this.onSubmit=r}onOpen(){let{contentEl:e}=this;e.createEl("h1",{text:"You can now select a template to use"}),new Xl.Setting(e).setName("Template").addSearch(r=>{new sc(r.inputEl,this.plugin),r.setPlaceholder("Template").setValue("").onChange(n=>this.template=n),r.containerEl.addClass("templater_search")}),new Xl.Setting(e).setName("Folder").addSearch(r=>{new oc(r.inputEl),r.setPlaceholder("Example: folder1/folder2").setValue(app.vault.config.newFileFolderPath).onChange(n=>this.folder=n),r.containerEl.addClass("templater_search")}),new Xl.Setting(e).setName("").addButton(r=>{r.setButtonText("Create Note"),r.onClick(()=>P(this,null,function*(){let n=yield la(this.event,this.folder,this.template);this.onSubmit(n),this.close()}))})}onClose(){let{contentEl:e}=this;e.empty()}};function eG(t){Pn(t,"svelte-47446l",".buttonRow.svelte-47446l.svelte-47446l{display:flex;flex-direction:row;align-items:center;justify-content:space-around;padding:5px}.summaryInput.svelte-47446l.svelte-47446l{border:none;border-bottom:2px solid;border-radius:0px;height:40px;font-size:35px;text-align:center}label.svelte-47446l.svelte-47446l{margin-top:5px}.googleFullDayContainer.svelte-47446l.svelte-47446l{margin-top:10px;display:flex;flex-direction:row;justify-content:space-between;align-items:center}.googleEventButtonContainer.svelte-47446l.svelte-47446l{margin-top:10px;display:flex;flex-direction:column;justify-content:space-around}.googleEventButtonContainer.svelte-47446l button.svelte-47446l{width:40%}")}function hA(t,e,r){let n=t.slice();return n[29]=e[r],n}function tG(t){let e,r,n,i,a,s,l=t[3],u=[];for(let f=0;f<l.length;f+=1)u[f]=pA(hA(t,l,f));return{c(){var f;e=le("label"),e.textContent="Calendar",r=Ne(),n=le("select");for(let d=0;d<u.length;d+=1)u[d].c();ee(e,"for","calendar"),ee(e,"class","svelte-47446l"),ee(n,"name","calendar"),ee(n,"class","dropdown"),n.disabled=i=((f=t[0])==null?void 0:f.id)!==void 0},m(f,d){be(f,e,d),be(f,r,d),be(f,n,d);for(let h=0;h<u.length;h+=1)u[h].m(n,null);a||(s=Ke(n,"change",t[11]),a=!0)},p(f,d){var h;if(d[0]&9){l=f[3];let g;for(g=0;g<l.length;g+=1){let y=hA(f,l,g);u[g]?u[g].p(y,d):(u[g]=pA(y),u[g].c(),u[g].m(n,null))}for(;g<u.length;g+=1)u[g].d(1);u.length=l.length}d[0]&1&&i!==(i=((h=f[0])==null?void 0:h.id)!==void 0)&&(n.disabled=i)},d(f){f&&Ce(e),f&&Ce(r),f&&Ce(n),nn(u,f),a=!1,s()}}}function rG(t){let e;return{c(){e=le("span"),e.textContent="Loading"},m(r,n){be(r,e,n)},p:At,d(r){r&&Ce(e)}}}function pA(t){let e,r=t[29].summary+"",n,i,a,s;return{c(){var l,u;e=le("option"),n=cr(r),ee(e,"id",i=t[29].id),e.__value=a=t[29].id,e.value=e.__value,e.selected=s=t[29].id==((u=(l=t[0])==null?void 0:l.parent)==null?void 0:u.id)},m(l,u){be(l,e,u),ae(e,n)},p(l,u){var f,d;u[0]&8&&r!==(r=l[29].summary+"")&&Sn(n,r),u[0]&8&&i!==(i=l[29].id)&&ee(e,"id",i),u[0]&8&&a!==(a=l[29].id)&&(e.__value=a,e.value=e.__value),u[0]&9&&s!==(s=l[29].id==((d=(f=l[0])==null?void 0:f.parent)==null?void 0:d.id))&&(e.selected=s)},d(l){l&&Ce(e)}}}function nG(t){let e,r,n,i,a,s,l,u,f,d;return{c(){e=le("label"),e.textContent="Start Date",r=Ne(),n=le("input"),i=Ne(),a=le("label"),a.textContent="End Date",s=Ne(),l=le("input"),ee(e,"for","eventStartDate"),ee(e,"class","svelte-47446l"),ee(n,"type","datetime-local"),ee(n,"name","eventStartDate"),ee(a,"for","eventEndDate"),ee(a,"class","svelte-47446l"),ee(l,"type","datetime-local"),ee(l,"name","eventEndDate"),ee(l,"min",u=window.moment(t[1]).format("YYYY-MM-DDThh:mm"))},m(h,g){be(h,e,g),be(h,r,g),be(h,n,g),Li(n,t[1]),be(h,i,g),be(h,a,g),be(h,s,g),be(h,l,g),Li(l,t[2]),f||(d=[Ke(n,"input",t[24]),Ke(l,"input",t[25])],f=!0)},p(h,g){g[0]&2&&Li(n,h[1]),g[0]&2&&u!==(u=window.moment(h[1]).format("YYYY-MM-DDThh:mm"))&&ee(l,"min",u),g[0]&4&&Li(l,h[2])},d(h){h&&Ce(e),h&&Ce(r),h&&Ce(n),h&&Ce(i),h&&Ce(a),h&&Ce(s),h&&Ce(l),f=!1,zr(d)}}}function iG(t){let e,r,n,i,a;return{c(){e=le("label"),e.textContent="Date",r=Ne(),n=le("input"),ee(e,"for","eventDate"),ee(e,"class","svelte-47446l"),ee(n,"type","date"),ee(n,"name","eventDate")},m(s,l){be(s,e,l),be(s,r,l),be(s,n,l),Li(n,t[6]),i||(a=Ke(n,"input",t[23]),i=!0)},p(s,l){l[0]&64&&Li(n,s[6])},d(s){s&&Ce(e),s&&Ce(r),s&&Ce(n),i=!1,a()}}}function aG(t){let e,r,n,i;return{c(){e=le("div"),r=le("button"),r.textContent="Create",ee(r,"class","svelte-47446l"),ee(e,"class","buttonRow svelte-47446l")},m(a,s){be(a,e,s),ae(e,r),n||(i=Ke(r,"click",t[12]),n=!0)},p:At,d(a){a&&Ce(e),n=!1,i()}}}function sG(t){let e,r,n,i,a,s,l,u,f,d,h;function g(k,O){return k[7]!=""?lG:oG}let y=g(t,[-1,-1]),m=y(t);function w(k,O){return k[8].file?cG:uG}let _=w(t,[-1,-1]),E=_(t),b=t[7]!=""&&mA(t);return{c(){e=le("div"),m.c(),r=Ne(),E.c(),n=Ne(),i=le("div"),a=le("button"),a.textContent="Update",s=Ne(),l=le("button"),l.textContent="Delete",u=Ne(),b&&b.c(),f=mi(),ee(e,"class","buttonRow svelte-47446l"),ee(a,"class","svelte-47446l"),ee(l,"class","svelte-47446l"),ee(i,"class","buttonRow svelte-47446l")},m(k,O){be(k,e,O),m.m(e,null),ae(e,r),E.m(e,null),be(k,n,O),be(k,i,O),ae(i,a),ae(i,s),ae(i,l),be(k,u,O),b&&b.m(k,O),be(k,f,O),d||(h=[Ke(a,"click",t[15]),Ke(l,"click",t[13])],d=!0)},p(k,O){y===(y=g(k,O))&&m?m.p(k,O):(m.d(1),m=y(k),m&&(m.c(),m.m(e,r))),_===(_=w(k,O))&&E?E.p(k,O):(E.d(1),E=_(k),E&&(E.c(),E.m(e,null))),k[7]!=""?b?b.p(k,O):(b=mA(k),b.c(),b.m(f.parentNode,f)):b&&(b.d(1),b=null)},d(k){k&&Ce(e),m.d(),E.d(),k&&Ce(n),k&&Ce(i),k&&Ce(u),b&&b.d(k),k&&Ce(f),d=!1,zr(h)}}}function oG(t){let e,r,n;return{c(){e=le("button"),e.textContent="Show Single Event",ee(e,"class","svelte-47446l")},m(i,a){be(i,e,a),r||(n=Ke(e,"click",t[19]),r=!0)},p:At,d(i){i&&Ce(e),r=!1,n()}}}function lG(t){let e,r,n;return{c(){e=le("button"),e.textContent="Show Recurring Event",ee(e,"class","svelte-47446l")},m(i,a){be(i,e,a),r||(n=Ke(e,"click",t[19]),r=!0)},p:At,d(i){i&&Ce(e),r=!1,n()}}}function uG(t){let e,r,n;return{c(){e=le("button"),e.textContent="Create Event Note",ee(e,"class","svelte-47446l")},m(i,a){be(i,e,a),r||(n=Ke(e,"click",t[18]),r=!0)},p:At,d(i){i&&Ce(e),r=!1,n()}}}function cG(t){let e,r,n,i,a=t[8].match=="title"&&gA(t);return{c(){a&&a.c(),e=Ne(),r=le("button"),r.textContent="Open Event Note",ee(r,"class","svelte-47446l")},m(s,l){a&&a.m(s,l),be(s,e,l),be(s,r,l),n||(i=Ke(r,"click",t[17]),n=!0)},p(s,l){s[8].match=="title"?a?a.p(s,l):(a=gA(s),a.c(),a.m(e.parentNode,e)):a&&(a.d(1),a=null)},d(s){a&&a.d(s),s&&Ce(e),s&&Ce(r),n=!1,i()}}}function gA(t){let e,r,n;return{c(){e=le("button"),e.textContent="Create Event Note for this date",ee(e,"class","svelte-47446l")},m(i,a){be(i,e,a),r||(n=Ke(e,"click",t[18]),r=!0)},p:At,d(i){i&&Ce(e),r=!1,n()}}}function mA(t){let e,r,n,i,a,s;return{c(){e=le("div"),r=le("button"),r.textContent="Update All",n=Ne(),i=le("button"),i.textContent="Delete All",ee(r,"class","svelte-47446l"),ee(i,"class","svelte-47446l"),ee(e,"class","buttonRow svelte-47446l")},m(l,u){be(l,e,u),ae(e,r),ae(e,n),ae(e,i),a||(s=[Ke(r,"click",t[16]),Ke(i,"click",t[14])],a=!0)},p:At,d(l){l&&Ce(e),a=!1,zr(s)}}}function fG(t){let e,r,n,i,a,s,l,u,f,d,h,g,y,m,w,_,E,b,k,O,R,B,ne;function M(te,Fe){return te[4]?rG:tG}let G=M(t,[-1,-1]),re=G(t);function se(te,Fe){return te[5]?iG:nG}let ye=se(t,[-1,-1]),Ae=ye(t);function Je(te,Fe){return te[0].id?sG:aG}let De=Je(t,[-1,-1]),me=De(t);return{c(){e=le("div"),r=le("input"),n=Ne(),i=le("label"),i.textContent="Description",a=Ne(),s=le("textarea"),u=Ne(),re.c(),f=Ne(),d=le("div"),h=le("label"),h.textContent="Full Day",g=Ne(),y=le("input"),m=Ne(),Ae.c(),w=Ne(),_=le("label"),_.textContent="Reoccurring",E=Ne(),b=le("input"),O=Ne(),R=le("div"),me.c(),ee(r,"class","summaryInput svelte-47446l"),ee(r,"name","summary"),ee(r,"type","text"),ee(r,"placeholder","Summary"),ee(i,"for","description"),ee(i,"class","svelte-47446l"),ee(s,"name","description"),s.value=l=t[9](),ee(h,"for","fullDay"),ee(h,"class","svelte-47446l"),ee(y,"type","checkbox"),ee(y,"name","fullDay"),ee(d,"class","googleFullDayContainer svelte-47446l"),ee(_,"for","reoccurring"),ee(_,"class","svelte-47446l"),ee(b,"type","text"),ee(b,"name","Reoccurring"),b.disabled=k=t[0].id!=null,ee(R,"class","googleEventButtonContainer svelte-47446l"),ee(e,"class","googleEventDetails")},m(te,Fe){be(te,e,Fe),ae(e,r),Li(r,t[0].summary),ae(e,n),ae(e,i),ae(e,a),ae(e,s),ae(e,u),re.m(e,null),ae(e,f),ae(e,d),ae(d,h),ae(d,g),ae(d,y),y.checked=t[5],ae(e,m),Ae.m(e,null),ae(e,w),ae(e,_),ae(e,E),ae(e,b),Li(b,t[7]),ae(e,O),ae(e,R),me.m(R,null),B||(ne=[Ke(r,"input",t[21]),Ke(s,"change",t[10]),Ke(y,"change",t[22]),Ke(b,"input",t[26])],B=!0)},p(te,Fe){Fe[0]&1&&r.value!==te[0].summary&&Li(r,te[0].summary),G===(G=M(te,Fe))&&re?re.p(te,Fe):(re.d(1),re=G(te),re&&(re.c(),re.m(e,f))),Fe[0]&32&&(y.checked=te[5]),ye===(ye=se(te,Fe))&&Ae?Ae.p(te,Fe):(Ae.d(1),Ae=ye(te),Ae&&(Ae.c(),Ae.m(e,w))),Fe[0]&1&&k!==(k=te[0].id!=null)&&(b.disabled=k),Fe[0]&128&&b.value!==te[7]&&Li(b,te[7]),De===(De=Je(te,Fe))&&me?me.p(te,Fe):(me.d(1),me=De(te),me&&(me.c(),me.m(R,null)))},i:At,o:At,d(te){te&&Ce(e),re.d(),Ae.d(),me.d(),B=!1,zr(ne)}}}function yA(){let t=15,e=1e3*60*t;return window.moment(new Date(Math.round(new Date().getTime()/e)*e))}function dG(t,e,r){let{event:n}=e,{closeFunction:i}=e,a,s=!0,l,u=Ze.getInstance(),f,d,h,g="",y=Ql(n,u);function m(me){let te=dA.default.cloneDeep(me);return l?(te.start.date=window.moment(h).format("YYYY-MM-DD"),te.end.date=window.moment(h).format("YYYY-MM-DD"),delete te.start.dateTime,delete te.end.dateTime):(te.start.dateTime=window.moment(f).format(),te.end.dateTime=window.moment(d).format(),delete te.start.date,delete te.end.date),te}mo(()=>_r(void 0,void 0,void 0,function*(){var me,te,Fe,et,ct;if(r(5,l=((me=n==null?void 0:n.start)===null||me===void 0?void 0:me.dateTime)==null&&((te=n==null?void 0:n.start)===null||te===void 0?void 0:te.date)!==void 0),r(3,a=yield Or()),r(4,s=!1),n.id==null){r(0,n.summary=(Fe=n.summary)!==null&&Fe!==void 0?Fe:"",n),r(0,n.description=(et=n.description)!==null&&et!==void 0?et:"",n),r(0,n.parent=a.find(ft=>ft.id===u.settings.defaultCalendar),n),n.parent||r(0,n.parent=a[a.length-1],n),r(7,g="");let $e=yA();r(1,f=$e.format("YYYY-MM-DDTHH:mm")),r(2,d=$e.add(1,"hour").format("YYYY-MM-DDTHH:mm")),r(6,h=$e.format("YYYY-MM-DD")),n.start.date&&r(6,h=window.moment(n.start.date).format("YYYY-MM-DD")),n.start.dateTime&&n.end.dateTime&&(r(1,f=window.moment(n.start.dateTime).format("YYYY-MM-DDTHH:mm")),r(2,d=window.moment(n.end.dateTime).format("YYYY-MM-DDTHH:mm")))}else{let $e=yield sa((ct=n.recurringEventId)!==null&&ct!==void 0?ct:n.id,n.parent.id);if($e==null?void 0:$e.recurrence){let ft=zl($e.recurrence[0]);r(7,g=ft.toText())}else r(7,g="");if(l){let ft=yA();r(1,f=ft.format("YYYY-MM-DDTHH:mm")),r(2,d=ft.add(1,"hour").format("YYYY-MM-DDTHH:mm")),r(6,h=window.moment(n.start.date).format("YYYY-MM-DD"))}else r(1,f=window.moment(n.start.dateTime).format("YYYY-MM-DDTHH:mm")),r(2,d=window.moment(n.end.dateTime).format("YYYY-MM-DDTHH:mm")),r(6,h=window.moment().format("YYYY-MM-DD"))}}));let w=()=>n.description?n.description.replace(/<\/?[^>]+(>|$)/g,""):"",_=me=>{me.target instanceof HTMLTextAreaElement&&r(0,n.description=me.target.value,n)},E=me=>{let te=me.target;if(te instanceof HTMLSelectElement){let Fe=te.value;r(0,n.parent.id=Fe,n)}},b=()=>_r(void 0,void 0,void 0,function*(){if(g&&g!="")try{let te=Me.fromText(g),Fe=new bo;Fe.rrule(te);let et=Fe.valueOf();if(g&&et[0]==""){ot("Event not created. Error in recurrence text.",!0);return}r(0,n.recurrence=et,n)}catch(te){ot("Event not created. Error in recurrence text.",!0);return}let me=yield Hl(m(n));(me==null?void 0:me.id)&&i()}),k=me=>_r(void 0,void 0,void 0,function*(){let te=!1;n.recurringEventId?te=yield Gl(n):te=yield Gl(n),te&&i()}),O=()=>_r(void 0,void 0,void 0,function*(){(yield Gl(m(n),!0))&&i()}),R=()=>_r(void 0,void 0,void 0,function*(){let me=m(n),te;me.recurringEventId?te=yield Vl(me):te=yield Vl(me),te.id&&i()}),B=()=>_r(void 0,void 0,void 0,function*(){(yield Vl(m(n),!0)).id&&i()}),ne=()=>_r(void 0,void 0,void 0,function*(){app.workspace.getLeaf(!0).openFile(y.file),i()}),M=()=>_r(void 0,void 0,void 0,function*(){u.settings.useDefaultTemplate&&u.settings.defaultFolder&&u.settings.defaultFolder?la(n,u.settings.defaultFolder,u.settings.defaultTemplate):new ua(n,me=>r(8,y.file=me,y)).open()}),G=()=>{window.open(n.htmlLink)};function re(){n.summary=this.value,r(0,n)}function se(){l=this.checked,r(5,l)}function ye(){h=this.value,r(6,h)}function Ae(){f=this.value,r(1,f)}function Je(){d=this.value,r(2,d),r(1,f)}function De(){g=this.value,r(7,g)}return t.$$set=me=>{"event"in me&&r(0,n=me.event),"closeFunction"in me&&r(20,i=me.closeFunction)},t.$$.update=()=>{if(t.$$.dirty[0]&6){e:{let me=window.moment(f);window.moment(d).isBefore(me)&&r(2,d=me.add(1,"hour").format("YYYY-MM-DDTHH:mm"))}}},[n,f,d,a,s,l,h,g,y,w,_,E,b,k,O,R,B,ne,M,G,i,re,se,ye,Ae,Je,De]}var vA=class extends sn{constructor(e){super();hn(this,e,dG,fG,dn,{event:0,closeFunction:20},eG,[-1,-1])}},_A=vA;var Un=class extends wA.Modal{constructor(e,r){super(Ze.getInstance().app);this.selectedEvent=e,r&&(this.closeFunction=r)}onOpen(){return P(this,null,function*(){let{contentEl:e}=this;new _A({target:e,props:{event:this.selectedEvent,closeFunction:()=>{this.closeFunction&&this.closeFunction(),this.close()}}})})}onClose(){let{contentEl:e}=this;e.empty()}};var CA=gt(mh());var Pi=class extends EA.FuzzySuggestModal{constructor(e,r,n=window.moment(),i=!1,a){super(window.app);this.plugin=Ze.getInstance();this.eventList=[...e],this.modalSelectMode=r,this.setPlaceholder(`${n.format("MM/DD/YYYY")} Arrow left/right to switch day`),this.emptyStateText="No events found enter to create a new one",this.eventsChanged=i,this.currentDate=n.clone(),a&&(this.closeFunction=a),this.inputEl.addEventListener("keydown",s=>P(this,null,function*(){let l=!1;!this.getSuggestions(this.inputEl.value).length&&s.key=="Enter"&&new Un({summary:this.inputEl.value,start:{date:n.format()},end:{}},()=>{this.eventsChanged=!0,this.close()}).open(),s.key=="ArrowRight"?(s.ctrlKey?this.currentDate=this.currentDate.add(1,"month"):s.shiftKey?this.currentDate=this.currentDate.add(1,"week"):this.currentDate=this.currentDate.add(1,"day"),l=!0):s.key=="ArrowLeft"&&(s.ctrlKey?this.currentDate=this.currentDate.subtract(1,"month"):s.shiftKey?this.currentDate=this.currentDate.subtract(1,"week"):this.currentDate=this.currentDate.subtract(1,"day"),l=!0),l&&(this.setPlaceholder("Loading"),this.eventList=yield er({startDate:this.currentDate}),this.inputEl.dispatchEvent(new Event("input")),this.setPlaceholder(`${this.currentDate.format("MM/DD/YYYY")} Arrow left and right to switch day`))}))}getItems(){return this.plugin.settings.activateDailyNoteAddon?[{id:"xxx",start:null,end:null},...this.eventList]:this.eventList}getItemText(e){return e.id=="xxx"?yc(this.currentDate)?"Open daily note":"Create daily note":e.start.date?`${e.start.date}		 | ${e.summary}	`:`${window.moment(e.start.dateTime).format("YYYY-MM-DD HH:mm")}	 | ${e.summary}	`}onChooseItem(e){return P(this,null,function*(){if(e.id=="xxx"){let r=yc(this.currentDate);r||(r=yield(0,CA.createDailyNote)(this.currentDate)),yield app.workspace.getLeaf(!1).openFile(r,{active:!0});return}this.modalSelectMode=="details"?(this.open(),new Un(e,()=>this.eventsChanged=!0).open()):this.modalSelectMode=="createNote"&&(this.plugin.settings.useDefaultTemplate?la(e,this.plugin.settings.defaultFolder,this.plugin.settings.defaultTemplate):new ua(e,()=>{}).open())})}onClose(){this.closeFunction&&this.eventsChanged&&this.closeFunction()}};var Oh=class extends bA.FuzzySuggestModal{constructor(e){super(Ze.getInstance().app);this.calendarList=e,this.setPlaceholder("Select a calendar to view it")}getItems(){return this.calendarList}getItemText(e){return`${e.summary}	`}onChooseItem(e){return P(this,null,function*(){let r=yield er({include:[e.id]});new Pi(r,"details").open()})}};var Va;(function(a){a.web="web",a.month="month",a.day="day",a.schedule="schedule",a.week="week"})(Va||(Va={}));var Jh=gt(require("obsidian"));var kA=gt(AA());function _G(t){Pn(t,"svelte-wqb6le",'.googleCalendarEvent.svelte-wqb6le{display:flex;padding:10px;padding-top:0;position:absolute;cursor:pointer;width:150px;left:40px;border-radius:5px;color:black;font-size:0.5em;box-shadow:3px 2px 8px 4px rgba(0,0,0,0.36);overflow:hidden}.hourLine.svelte-wqb6le::after{content:"";position:absolute;width:90%;left:25px;border-bottom:1px solid white}.hourLineLarge.svelte-wqb6le::after{width:80%;left:50px}.hourText.svelte-wqb6le{display:block;font-family:"consolas"}.timeline.svelte-wqb6le,.hourText.svelte-wqb6le,.hourTextContainer.svelte-wqb6le{overflow:hidden}.timeDisplay.svelte-wqb6le{position:absolute;width:100%;height:3px;background:red;overflow:visible}.timeline.svelte-wqb6le{position:relative;display:flex;flex-direction:row;overflow:visible}')}function IA(t,e,r){let n=t.slice();return n[21]=e[r],n[23]=r,n}function NA(t,e,r){let n=t.slice();return n[24]=e[r],n[23]=r,n}function RA(t,e,r){let n=t.slice();return n[24]=e[r],n[23]=r,n}function wG(t){let e,r,n,i,a=window.moment().isSame(t[0],"day"),s,l=`${t[1]}px`,u=`${t[2]}px`,f=` -${ny(t[1],t[3][0])}px 0px -${iy(t[1],t[3][1])}px 0px`,d={length:24},h=[];for(let _=0;_<d.length;_+=1)h[_]=DA(RA(t,d,_));let g=t[4]&&BA(t),y=a&&LA(t),m=t[7],w=[];for(let _=0;_<m.length;_+=1)w[_]=PA(IA(t,m,_));return{c(){e=le("div"),r=le("div");for(let _=0;_<h.length;_+=1)h[_].c();n=Ne(),g&&g.c(),i=Ne(),y&&y.c(),s=Ne();for(let _=0;_<w.length;_+=1)w[_].c();ee(r,"class","hourLineContainer"),ee(e,"class","timeline svelte-wqb6le"),je(e,"height",l,!1),je(e,"width",u,!1),je(e,"margin",f,!1)},m(_,E){be(_,e,E),ae(e,r);for(let b=0;b<h.length;b+=1)h[b].m(r,null);ae(e,n),g&&g.m(e,null),ae(e,i),y&&y.m(e,null),ae(e,s);for(let b=0;b<w.length;b+=1)w[b].m(e,null)},p(_,E){if(E&258){d={length:24};let b;for(b=0;b<d.length;b+=1){let k=RA(_,d,b);h[b]?h[b].p(k,E):(h[b]=DA(k),h[b].c(),h[b].m(r,null))}for(;b<h.length;b+=1)h[b].d(1);h.length=d.length}if(_[4]?g?g.p(_,E):(g=BA(_),g.c(),g.m(e,i)):g&&(g.d(1),g=null),E&1&&(a=window.moment().isSame(_[0],"day")),a?y?y.p(_,E):(y=LA(_),y.c(),y.m(e,s)):y&&(y.d(1),y=null),E&640){m=_[7];let b;for(b=0;b<m.length;b+=1){let k=IA(_,m,b);w[b]?w[b].p(k,E):(w[b]=PA(k),w[b].c(),w[b].m(e,null))}for(;b<w.length;b+=1)w[b].d(1);w.length=m.length}E&2&&l!==(l=`${_[1]}px`)&&je(e,"height",l,!1),E&4&&u!==(u=`${_[2]}px`)&&je(e,"width",u,!1),E&10&&f!==(f=` -${ny(_[1],_[3][0])}px 0px -${iy(_[1],_[3][1])}px 0px`)&&je(e,"margin",f,!1)},d(_){_&&Ce(e),nn(h,_),g&&g.d(),y&&y.d(),nn(w,_)}}}function EG(t){let e;return{c(){e=le("p"),e.textContent="Loading"},m(r,n){be(r,e,n)},p:At,d(r){r&&Ce(e)}}}function DA(t){let e,r,n=`${t[1]/24}px`;return{c(){e=le("div"),ee(e,"class",r=""+(Pl(t[8]==2?"hourLine hourLineLarge":"hourLine")+" svelte-wqb6le")),je(e,"height",n,!1)},m(i,a){be(i,e,a)},p(i,a){a&256&&r!==(r=""+(Pl(i[8]==2?"hourLine hourLineLarge":"hourLine")+" svelte-wqb6le"))&&ee(e,"class",r),a&2&&n!==(n=`${i[1]/24}px`)&&je(e,"height",n,!1)},d(i){i&&Ce(e)}}}function BA(t){let e,r=`-${t[1]/52}px`,n={length:24},i=[];for(let a=0;a<n.length;a+=1)i[a]=OA(NA(t,n,a));return{c(){e=le("div");for(let a=0;a<i.length;a+=1)i[a].c();ee(e,"class","hourTextContainer svelte-wqb6le"),je(e,"margin-top",r,!1)},m(a,s){be(a,e,s);for(let l=0;l<i.length;l+=1)i[l].m(e,null)},p(a,s){if(s&3330){n={length:24};let l;for(l=0;l<n.length;l+=1){let u=NA(a,n,l);i[l]?i[l].p(u,s):(i[l]=OA(u),i[l].c(),i[l].m(e,null))}for(;l<i.length;l+=1)i[l].d(1);i.length=n.length}s&2&&r!==(r=`-${a[1]/52}px`)&&je(e,"margin-top",r,!1)},d(a){a&&Ce(e),nn(i,a)}}}function OA(t){let e,r=t[11](t[23],t[8])+"",n,i=`${t[1]/24}px`,a=`${t[1]/50}px`,s,l;return{c(){e=le("span"),n=cr(r),ee(e,"class","hourText svelte-wqb6le"),je(e,"height",i,!1),je(e,"font-size",a,!1)},m(u,f){be(u,e,f),ae(e,n),s||(l=Ke(e,"click",t[10]),s=!0)},p(u,f){f&256&&r!==(r=u[11](u[23],u[8])+"")&&Sn(n,r),f&2&&i!==(i=`${u[1]/24}px`)&&je(e,"height",i,!1),f&2&&a!==(a=`${u[1]/50}px`)&&je(e,"font-size",a,!1)},d(u){u&&Ce(e),s=!1,l()}}}function LA(t){let e,r=`${t[6]}px`,n=`${t[2]}px`;return{c(){e=le("div"),ee(e,"class","timeDisplay svelte-wqb6le"),je(e,"top",r,!1),je(e,"width",n,!1)},m(i,a){be(i,e,a)},p(i,a){a&64&&r!==(r=`${i[6]}px`)&&je(e,"top",r,!1),a&4&&n!==(n=`${i[2]}px`)&&je(e,"width",n,!1)},d(i){i&&Ce(e)}}}function PA(t){let e,r,n=t[21].event.summary+"",i,a,s,l,u,f=`${t[21].y}px`,d=`${t[21].x}px`,h=`${t[21].width}px`,g=`${t[21].height}px`,y,m;function w(..._){return t[15](t[21],..._)}return{c(){e=le("div"),r=le("span"),i=cr(n),s=Ne(),ee(r,"class",a="googleCalendarName googleCalendarName_Calendar_Color_"+t[21].event.parent.colorId+" googleCalendarName_Event_Color_"+t[21].event.parent.colorId+" googleCalendarName_Id_"+t[21].event.parent.id+" svelte-wqb6le"),ee(e,"class",l="googleCalendarEvent googleCalendarEvent_Calendar_Color_"+t[21].event.parent.colorId+" googleCalendarEvent_Event_Color_"+t[21].event.parent.colorId+" googleCalendarEvent_Id_"+t[21].event.parent.id+" svelte-wqb6le"),ee(e,"id",u=t[21].event.id),je(e,"top",f,!1),je(e,"left",d,!1),je(e,"width",h,!1),je(e,"height",g,!1),je(e,"background",Zu(t[21].event),!1)},m(_,E){be(_,e,E),ae(e,r),ae(r,i),ae(e,s),y||(m=Ke(e,"click",w),y=!0)},p(_,E){t=_,E&128&&n!==(n=t[21].event.summary+"")&&Sn(i,n),E&128&&a!==(a="googleCalendarName googleCalendarName_Calendar_Color_"+t[21].event.parent.colorId+" googleCalendarName_Event_Color_"+t[21].event.parent.colorId+" googleCalendarName_Id_"+t[21].event.parent.id+" svelte-wqb6le")&&ee(r,"class",a),E&128&&l!==(l="googleCalendarEvent googleCalendarEvent_Calendar_Color_"+t[21].event.parent.colorId+" googleCalendarEvent_Event_Color_"+t[21].event.parent.colorId+" googleCalendarEvent_Id_"+t[21].event.parent.id+" svelte-wqb6le")&&ee(e,"class",l),E&128&&u!==(u=t[21].event.id)&&ee(e,"id",u),E&128&&f!==(f=`${t[21].y}px`)&&je(e,"top",f,!1),E&128&&d!==(d=`${t[21].x}px`)&&je(e,"left",d,!1),E&128&&h!==(h=`${t[21].width}px`)&&je(e,"width",h,!1),E&128&&g!==(g=`${t[21].height}px`)&&je(e,"height",g,!1),E&128&&je(e,"background",Zu(t[21].event),!1)},d(_){_&&Ce(e),y=!1,m()}}}function CG(t){let e;function r(a,s){return a[5]?EG:wG}let n=r(t,-1),i=n(t);return{c(){i.c(),e=mi()},m(a,s){i.m(a,s),be(a,e,s)},p(a,[s]){n===(n=r(a,s))&&i?i.p(a,s):(i.d(1),i=n(a),i&&(i.c(),i.m(e.parentNode,e)))},i:At,o:At,d(a){i.d(a),a&&Ce(e)}}}function bG(t,e,r){let{height:n=700}=e,{width:i=300}=e,{date:a=window.moment()}=e,{include:s}=e,{exclude:l}=e,{hourRange:u=[0,24]}=e,{showTimeDisplay:f=!0}=e,d=!0,h=0,g=[],y=[],m,w=Ze.getInstance(),_=w.settings.timelineHourFormat,E=()=>_r(void 0,void 0,void 0,function*(){r(8,_=w.settings.timelineHourFormat),yield k();let M=Ic(new Date);r(6,h=Math.floor(n*M))}),b=()=>{let M=new kA.default;g.forEach(se=>{let ye=se.start.date||se.start.dateTime;M.has(ye)?M.get(ye).push(se):M.set(ye,[se])});let G=0,re=null;for(let se of M.values()){if(se[0].start.dateTime){let ye=window.moment(se[0].start.dateTime);re&&ye.isBefore(re,"minutes")?G++:G=0,re=window.moment(se[0].end.dateTime)}se.forEach((ye,Ae)=>{let Je=30;_==2&&(Je=50);let De=Je+G*10,me=(i-De)/se.length;r(7,y=[...y,{event:ye,x:De+me*Ae,y:oA(ye,n),width:me,height:lA(ye,n),fullDay:ye.start.date!=null}])})}},k=()=>_r(void 0,void 0,void 0,function*(){if(!a.isValid())return;let M=yield er({startDate:a,include:s,exclude:l});JSON.stringify(M)!=JSON.stringify(g)&&(g=M,r(7,y=[]),b()),r(5,d=!1)}),O=(M,G)=>{G.shiftKey?window.open(M.htmlLink):new Un(M,()=>{zn(),r(0,a),r(14,m)}).open()};yo(()=>{clearInterval(m)});let R=()=>{r(8,_+=1),_>2&&r(8,_=0),w.settings.timelineHourFormat=_,w.saveSettings()},B=(M,G)=>{let re=window.moment(`${M}:00:00`,"H:mm:ss");switch(G){case 0:return re.format("HH");case 1:return re.format("hh");case 2:return re.format("hh A")}},ne=(M,G)=>O(M.event,G);return t.$$set=M=>{"height"in M&&r(1,n=M.height),"width"in M&&r(2,i=M.width),"date"in M&&r(0,a=M.date),"include"in M&&r(12,s=M.include),"exclude"in M&&r(13,l=M.exclude),"hourRange"in M&&r(3,u=M.hourRange),"showTimeDisplay"in M&&r(4,f=M.showTimeDisplay)},t.$$.update=()=>{if(t.$$.dirty&16385){e:r(0,a),r(14,m),m&&clearInterval(m),r(5,d=!0),r(14,m=setInterval(E,5e3)),E()}},[a,n,i,u,f,d,h,y,_,O,R,B,s,l,m,ne]}var MA=class extends sn{constructor(e){super();hn(this,e,bG,CG,dn,{height:1,width:2,date:0,include:12,exclude:13,hourRange:3,showTimeDisplay:4},_G)}},Nc=MA;function xG(t){Pn(t,"svelte-169s007",".fixedSizeButton.svelte-169s007{text-align:center;padding:10px 5%;margin:0}.titleContainer.svelte-169s007{display:flex;flex-direction:row;align-items:center;justify-content:flex-start}.navigationContainer.svelte-169s007{display:flex;flex-direction:row;align-items:center;justify-content:space-around;flex-wrap:wrap;padding-bottom:30px}")}function UA(t){let e,r,n,i,a,s=t[0].format("YYYY-MM-DD")+"",l,u,f,d,h,g,y,m,w,_,E,b,k,O;return{c(){e=le("div"),r=le("button"),r.textContent="+",n=Ne(),i=le("h3"),a=cr("Google Calendar "),l=cr(s),u=Ne(),f=le("div"),d=le("button"),d.textContent="<<",h=Ne(),g=le("button"),g.textContent="<",y=Ne(),m=le("button"),m.textContent="Today",w=Ne(),_=le("button"),_.textContent=">",E=Ne(),b=le("button"),b.textContent=">>",ee(r,"aria-label","Create Event"),ee(e,"class","titleContainer svelte-169s007"),ee(d,"class","fixedSizeButton svelte-169s007"),ee(d,"aria-label","Back 1 week"),ee(g,"class","fixedSizeButton svelte-169s007"),ee(g,"aria-label","Back 1 day"),ee(m,"class","fixedSizeButton svelte-169s007"),ee(m,"aria-label","Jump to today"),ee(_,"class","fixedSizeButton svelte-169s007"),ee(_,"aria-label","Forward 1 day"),ee(b,"class","fixedSizeButton svelte-169s007"),ee(b,"aria-label","Forward 1 week"),ee(f,"class","navigationContainer svelte-169s007")},m(R,B){be(R,e,B),ae(e,r),ae(e,n),ae(e,i),ae(i,a),ae(i,l),be(R,u,B),be(R,f,B),ae(f,d),ae(f,h),ae(f,g),ae(f,y),ae(f,m),ae(f,w),ae(f,_),ae(f,E),ae(f,b),k||(O=[Ke(r,"click",t[12]),Ke(d,"click",t[7]),Ke(g,"click",t[8]),Ke(m,"click",t[9]),Ke(_,"click",t[11]),Ke(b,"click",t[10])],k=!0)},p(R,B){B&1&&s!==(s=R[0].format("YYYY-MM-DD")+"")&&Sn(l,s)},d(R){R&&Ce(e),R&&Ce(u),R&&Ce(f),k=!1,zr(O)}}}function TG(t){let e,r,n,i,a,s,l=t[3]&&t[0]&&UA(t);function u(d){t[14](d)}let f={height:t[1],width:t[2],include:t[4],exclude:t[5],hourRange:t[6]};return t[0]!==void 0&&(f.date=t[0]),i=new Nc({props:f}),Mn.push(()=>Ua(i,"date",u)),{c(){e=le("div"),l&&l.c(),r=Ne(),n=le("div"),Cs(i.$$.fragment),je(n,"overflow","hidden"),je(e,"padding-left","10px")},m(d,h){be(d,e,h),l&&l.m(e,null),ae(e,r),ae(e,n),Fa(i,n,null),s=!0},p(d,[h]){d[3]&&d[0]?l?l.p(d,h):(l=UA(d),l.c(),l.m(e,r)):l&&(l.d(1),l=null);let g={};h&2&&(g.height=d[1]),h&4&&(g.width=d[2]),h&16&&(g.include=d[4]),h&32&&(g.exclude=d[5]),h&64&&(g.hourRange=d[6]),!a&&h&1&&(a=!0,g.date=d[0],Ma(()=>a=!1)),i.$set(g)},i(d){s||(Mr(i.$$.fragment,d),s=!0)},o(d){an(i.$$.fragment,d),s=!1},d(d){d&&Ce(e),l&&l.d(),aa(i)}}}function SG(t,e,r){let{height:n=void 0}=e,{width:i=void 0}=e,{date:a=void 0}=e,{navigation:s=!1}=e,{include:l}=e,{exclude:u}=e,{hourRange:f=void 0}=e,d=0,h=()=>r(13,d-=7),g=()=>r(13,d-=1),y=()=>r(13,d=0),m=()=>r(13,d+=7),w=()=>r(13,d+=1),_=b=>{new Un({start:{},end:{}},()=>{zn(),r(0,a),r(3,s),r(13,d)}).open()};function E(b){a=b,r(0,a),r(3,s),r(13,d)}return t.$$set=b=>{"height"in b&&r(1,n=b.height),"width"in b&&r(2,i=b.width),"date"in b&&r(0,a=b.date),"navigation"in b&&r(3,s=b.navigation),"include"in b&&r(4,l=b.include),"exclude"in b&&r(5,u=b.exclude),"hourRange"in b&&r(6,f=b.hourRange)},t.$$.update=()=>{if(t.$$.dirty&8201){e:r(0,a=s?window.moment().local().add(d,"days"):a)}},[a,n,i,s,l,u,f,h,g,y,m,w,_,d,E]}var FA=class extends sn{constructor(e){super();hn(this,e,SG,TG,dn,{height:1,width:2,date:0,navigation:3,include:4,exclude:5,hourRange:6},xG)}},Ph=FA;function AG(t){Pn(t,"svelte-1ficnkj",".fullSize.svelte-1ficnkj,.content.svelte-1ficnkj,.box.svelte-1ficnkj{width:100%;height:100%;overflow:scoll !important}")}function kG(t){let e,r,n=`${t[0]}px`,i=`${t[1]}px`;return{c(){e=le("webview"),vc(e.src,r=t[3])||ee(e,"src",r),ee(e,"allowpopups",""),je(e,"width",n,!1),je(e,"height",i,!1)},m(a,s){be(a,e,s),t[7](e)},p(a,s){s&8&&!vc(e.src,r=a[3])&&ee(e,"src",r),s&1&&n!==(n=`${a[0]}px`)&&je(e,"width",n,!1),s&2&&i!==(i=`${a[1]}px`)&&je(e,"height",i,!1)},d(a){a&&Ce(e),t[7](null)}}}function IG(t){let e,r;return{c(){e=le("webview"),vc(e.src,r=t[3])||ee(e,"src",r),ee(e,"allowpopups",""),ee(e,"class","fullSize svelte-1ficnkj")},m(n,i){be(n,e,i),t[6](e)},p(n,i){i&8&&!vc(e.src,r=n[3])&&ee(e,"src",r)},d(n){n&&Ce(e),t[6](null)}}}function NG(t){let e,r;function n(s,l){return s[0]==0?IG:kG}let i=n(t,-1),a=i(t);return{c(){e=le("div"),r=le("div"),a.c(),ee(r,"class","content svelte-1ficnkj"),ee(e,"class","box svelte-1ficnkj")},m(s,l){be(s,e,l),ae(e,r),a.m(r,null)},p(s,[l]){i===(i=n(s,l))&&a?a.p(s,l):(a.d(1),a=i(s),a&&(a.c(),a.m(r,null)))},i:At,o:At,d(s){s&&Ce(e),a.d()}}}function RG(t,e,r){let n=Ze.getInstance(),{date:i=window.moment()}=e,{width:a=0}=e,{height:s=0}=e,{theme:l=n.settings.webViewDefaultColorMode}=e,u,f="";i.isValid()?f=`https://calendar.google.com/calendar/u/0/r/day/${i.format("yyyy/M/D")}`:f="https://calendar.google.com/calendar/u/0/r/day/",mo(()=>{l=="auto"&&r(4,l=Dh()),l=="dark"&&u.addEventListener("dom-ready",()=>{u.insertCSS(`
                html {
                    filter: hue-rotate(180deg)invert(100)contrast(93%) !important;
                }
            
            `)})});function d(g){Mn[g?"unshift":"push"](()=>{u=g,r(2,u)})}function h(g){Mn[g?"unshift":"push"](()=>{u=g,r(2,u)})}return t.$$set=g=>{"date"in g&&r(5,i=g.date),"width"in g&&r(0,a=g.width),"height"in g&&r(1,s=g.height),"theme"in g&&r(4,l=g.theme)},[a,s,u,f,l,i,d,h]}var qA=class extends sn{constructor(e){super();hn(this,e,RG,NG,dn,{date:5,width:0,height:1,theme:4},AG)}},Mh=qA;var c$=gt(require("obsidian"));function Qr(){}function Rc(t,e){for(let r in e)t[r]=e[r];return t}function DG(t){return t&&typeof t=="object"&&typeof t.then=="function"}function GA(t){return t()}function VA(){return Object.create(null)}function As(t){t.forEach(GA)}function ca(t){return typeof t=="function"}function ly(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function Uh(t,e){return t!=t?e==e:t!==e}function BG(t){return Object.keys(t).length===0}function HA(t,e,r,n){if(t){let i=KA(t,e,r,n);return t[0](i)}}function KA(t,e,r,n){return t[1]&&n?Rc(r.ctx.slice(),t[1](n(e))):r.ctx}function OG(t,e,r,n){if(t[2]&&n){let i=t[2](n(r));if(e.dirty===void 0)return i;if(typeof i=="object"){let a=[],s=Math.max(e.dirty.length,i.length);for(let l=0;l<s;l+=1)a[l]=e.dirty[l]|i[l];return a}return e.dirty|i}return e.dirty}function jA(t,e,r,n,i,a,s){let l=OG(e,n,i,a);if(l){let u=KA(e,r,n,s);t.p(u,l)}}function Zl(t){return t==null?"":t}function _t(t,e){t.appendChild(e)}function Xr(t,e,r){t.insertBefore(e,r||null)}function Ur(t){t.parentNode.removeChild(t)}function Fh(t,e){for(let r=0;r<t.length;r+=1)t[r]&&t[r].d(e)}function Wt(t){return document.createElement(t)}function $l(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function So(t){return document.createTextNode(t)}function Jn(){return So(" ")}function qh(){return So("")}function Ha(t,e,r,n){return t.addEventListener(e,r,n),()=>t.removeEventListener(e,r,n)}function ut(t,e,r){r==null?t.removeAttribute(e):t.getAttribute(e)!==r&&t.setAttribute(e,r)}function YA(t,e){let r=Object.getOwnPropertyDescriptors(t.__proto__);for(let n in e)e[n]==null?t.removeAttribute(n):n==="style"?t.style.cssText=e[n]:n==="__value"?t.value=t[n]=e[n]:r[n]&&r[n].set?t[n]=e[n]:ut(t,n,e[n])}function LG(t){return Array.from(t.childNodes)}function Dc(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function Ar(t,e,r){t.classList[r?"add":"remove"](e)}var Gh;function ks(t){Gh=t}function PG(){if(!Gh)throw new Error("Function called outside component initialization");return Gh}var Bc=[],WA=[],Vh=[],zA=[],MG=Promise.resolve(),uy=!1;function UG(){uy||(uy=!0,MG.then(hy))}function cy(t){Vh.push(t)}var fy=!1,dy=new Set;function hy(){if(!fy){fy=!0;do{for(let t=0;t<Bc.length;t+=1){let e=Bc[t];ks(e),FG(e.$$)}for(ks(null),Bc.length=0;WA.length;)WA.pop()();for(let t=0;t<Vh.length;t+=1){let e=Vh[t];dy.has(e)||(dy.add(e),e())}Vh.length=0}while(Bc.length);for(;zA.length;)zA.pop()();uy=!1,fy=!1,dy.clear()}}function FG(t){if(t.fragment!==null){t.update(),As(t.before_update);let e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(cy)}}var Hh=new Set,Ao;function ko(){Ao={r:0,c:[],p:Ao}}function Io(){Ao.r||As(Ao.c),Ao=Ao.p}function Jt(t,e){t&&t.i&&(Hh.delete(t),t.i(e))}function pr(t,e,r,n){if(t&&t.o){if(Hh.has(t))return;Hh.add(t),Ao.c.push(()=>{Hh.delete(t),n&&(r&&t.d(1),n())}),t.o(e)}}function QA(t,e){let r=e.token={};function n(i,a,s,l){if(e.token!==r)return;e.resolved=l;let u=e.ctx;s!==void 0&&(u=u.slice(),u[s]=l);let f=i&&(e.current=i)(u),d=!1;e.block&&(e.blocks?e.blocks.forEach((h,g)=>{g!==a&&h&&(ko(),pr(h,1,1,()=>{e.blocks[g]===h&&(e.blocks[g]=null)}),Io())}):e.block.d(1),f.c(),Jt(f,1),f.m(e.mount(),e.anchor),d=!0),e.block=f,e.blocks&&(e.blocks[a]=f),d&&hy()}if(DG(t)){let i=PG();if(t.then(a=>{ks(i),n(e.then,1,e.value,a),ks(null)},a=>{if(ks(i),n(e.catch,2,e.error,a),ks(null),!e.hasCatch)throw a}),e.current!==e.pending)return n(e.pending,0),!0}else{if(e.current!==e.then)return n(e.then,1,e.value,t),!0;e.resolved=t}}function XA(t,e){pr(t,1,1,()=>{e.delete(t.key)})}function JA(t,e,r,n,i,a,s,l,u,f,d,h){let g=t.length,y=a.length,m=g,w={};for(;m--;)w[t[m].key]=m;let _=[],E=new Map,b=new Map;for(m=y;m--;){let B=h(i,a,m),ne=r(B),M=s.get(ne);M?n&&M.p(B,e):(M=f(ne,B),M.c()),E.set(ne,_[m]=M),ne in w&&b.set(ne,Math.abs(m-w[ne]))}let k=new Set,O=new Set;function R(B){Jt(B,1),B.m(l,d),s.set(B.key,B),d=B.first,y--}for(;g&&y;){let B=_[y-1],ne=t[g-1],M=B.key,G=ne.key;B===ne?(d=B.first,g--,y--):E.has(G)?!s.has(M)||k.has(M)?R(B):O.has(G)?g--:b.get(M)>b.get(G)?(O.add(M),R(B)):(k.add(G),g--):(u(ne,s),g--)}for(;g--;){let B=t[g];E.has(B.key)||u(B,s)}for(;y;)R(_[y-1]);return _}function Kh(t,e){let r={},n={},i={$$scope:1},a=t.length;for(;a--;){let s=t[a],l=e[a];if(l){for(let u in s)u in l||(n[u]=1);for(let u in l)i[u]||(r[u]=l[u],i[u]=1);t[a]=l}else for(let u in s)i[u]=1}for(let s in n)s in r||(r[s]=void 0);return r}function py(t){return typeof t=="object"&&t!==null?t:{}}function Ka(t){t&&t.c()}function fa(t,e,r,n){let{fragment:i,on_mount:a,on_destroy:s,after_update:l}=t.$$;i&&i.m(e,r),n||cy(()=>{let u=a.map(GA).filter(ca);s?s.push(...u):As(u),t.$$.on_mount=[]}),l.forEach(cy)}function da(t,e){let r=t.$$;r.fragment!==null&&(As(r.on_destroy),r.fragment&&r.fragment.d(e),r.on_destroy=r.fragment=null,r.ctx=[])}function qG(t,e){t.$$.dirty[0]===-1&&(Bc.push(t),UG(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function No(t,e,r,n,i,a,s=[-1]){let l=Gh;ks(t);let u=t.$$={fragment:null,ctx:null,props:a,update:Qr,not_equal:i,bound:VA(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(l?l.$$.context:[]),callbacks:VA(),dirty:s,skip_bound:!1},f=!1;if(u.ctx=r?r(t,e.props||{},(d,h,...g)=>{let y=g.length?g[0]:h;return u.ctx&&i(u.ctx[d],u.ctx[d]=y)&&(!u.skip_bound&&u.bound[d]&&u.bound[d](y),f&&qG(t,d)),h}):[],u.update(),f=!0,As(u.before_update),u.fragment=n?n(u.ctx):!1,e.target){if(e.hydrate){let d=LG(e.target);u.fragment&&u.fragment.l(d),d.forEach(Ur)}else u.fragment&&u.fragment.c();e.intro&&Jt(t.$$.fragment),fa(t,e.target,e.anchor,e.customElement),hy()}ks(l)}var Is=class{$destroy(){da(this,1),this.$destroy=Qr}$on(e,r){let n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(r),()=>{let i=n.indexOf(r);i!==-1&&n.splice(i,1)}}$set(e){this.$$set&&!BG(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}};function GG(t,e="day"){let r=t.clone().startOf(e).format();return`${e}-${r}`}var jh=GG;function VG(){var t=Wt("style");t.id="svelte-1widvzq-style",t.textContent=".dot.svelte-1widvzq,.hollow.svelte-1widvzq{display:inline-block;height:6px;width:6px;margin:0 1px}.filled.svelte-1widvzq{fill:var(--color-dot)}.active.filled.svelte-1widvzq{fill:var(--text-on-accent)}.hollow.svelte-1widvzq{fill:none;stroke:var(--color-dot)}.active.hollow.svelte-1widvzq{fill:none;stroke:var(--text-on-accent)}",_t(document.head,t)}function HG(t){let e,r,n;return{c(){e=$l("svg"),r=$l("circle"),ut(r,"cx","3"),ut(r,"cy","3"),ut(r,"r","2"),ut(e,"class",n=""+(Zl(`hollow ${t[0]}`)+" svelte-1widvzq")),ut(e,"viewBox","0 0 6 6"),ut(e,"xmlns","http://www.w3.org/2000/svg"),Ar(e,"active",t[2])},m(i,a){Xr(i,e,a),_t(e,r)},p(i,a){a&1&&n!==(n=""+(Zl(`hollow ${i[0]}`)+" svelte-1widvzq"))&&ut(e,"class",n),a&5&&Ar(e,"active",i[2])},d(i){i&&Ur(e)}}}function KG(t){let e,r,n;return{c(){e=$l("svg"),r=$l("circle"),ut(r,"cx","3"),ut(r,"cy","3"),ut(r,"r","2"),ut(e,"class",n=""+(Zl(`dot filled ${t[0]}`)+" svelte-1widvzq")),ut(e,"viewBox","0 0 6 6"),ut(e,"xmlns","http://www.w3.org/2000/svg"),Ar(e,"active",t[2])},m(i,a){Xr(i,e,a),_t(e,r)},p(i,a){a&1&&n!==(n=""+(Zl(`dot filled ${i[0]}`)+" svelte-1widvzq"))&&ut(e,"class",n),a&5&&Ar(e,"active",i[2])},d(i){i&&Ur(e)}}}function jG(t){let e;function r(a,s){return a[1]?KG:HG}let n=r(t),i=n(t);return{c(){i.c(),e=qh()},m(a,s){i.m(a,s),Xr(a,e,s)},p(a,[s]){n===(n=r(a))&&i?i.p(a,s):(i.d(1),i=n(a),i&&(i.c(),i.m(e.parentNode,e)))},i:Qr,o:Qr,d(a){i.d(a),a&&Ur(e)}}}function YG(t,e,r){let{className:n=""}=e,{isFilled:i}=e,{isActive:a}=e;return t.$$set=s=>{"className"in s&&r(0,n=s.className),"isFilled"in s&&r(1,i=s.isFilled),"isActive"in s&&r(2,a=s.isActive)},[n,i,a]}var gy=class extends Is{constructor(e){super();document.getElementById("svelte-1widvzq-style")||VG(),No(this,e,YG,jG,ly,{className:0,isFilled:1,isActive:2})}},WG=t=>({}),ZA=t=>({metadata:null}),zG=t=>({metadata:t&1}),$A=t=>({metadata:t[3]});function QG(t){let e,r=t[2].default,n=HA(r,t,t[1],ZA);return{c(){n&&n.c()},m(i,a){n&&n.m(i,a),e=!0},p(i,a){n&&n.p&&a&2&&jA(n,r,i,i[1],a,WG,ZA)},i(i){e||(Jt(n,i),e=!0)},o(i){pr(n,i),e=!1},d(i){n&&n.d(i)}}}function XG(t){let e,r,n,i={ctx:t,current:null,token:null,hasCatch:!1,pending:$G,then:ZG,catch:JG,value:3,blocks:[,,,]};return QA(r=t[0],i),{c(){e=qh(),i.block.c()},m(a,s){Xr(a,e,s),i.block.m(a,i.anchor=s),i.mount=()=>e.parentNode,i.anchor=e,n=!0},p(a,s){if(t=a,i.ctx=t,!(s&1&&r!==(r=t[0])&&QA(r,i))){let l=t.slice();l[3]=i.resolved,i.block.p(l,s)}},i(a){n||(Jt(i.block),n=!0)},o(a){for(let s=0;s<3;s+=1){let l=i.blocks[s];pr(l)}n=!1},d(a){a&&Ur(e),i.block.d(a),i.token=null,i=null}}}function JG(t){return{c:Qr,m:Qr,p:Qr,i:Qr,o:Qr,d:Qr}}function ZG(t){let e,r=t[2].default,n=HA(r,t,t[1],$A);return{c(){n&&n.c()},m(i,a){n&&n.m(i,a),e=!0},p(i,a){n&&n.p&&a&3&&jA(n,r,i,i[1],a,zG,$A)},i(i){e||(Jt(n,i),e=!0)},o(i){pr(n,i),e=!1},d(i){n&&n.d(i)}}}function $G(t){return{c:Qr,m:Qr,p:Qr,i:Qr,o:Qr,d:Qr}}function e9(t){let e,r,n,i,a=[XG,QG],s=[];function l(u,f){return u[0]?0:1}return e=l(t),r=s[e]=a[e](t),{c(){r.c(),n=qh()},m(u,f){s[e].m(u,f),Xr(u,n,f),i=!0},p(u,[f]){let d=e;e=l(u),e===d?s[e].p(u,f):(ko(),pr(s[d],1,1,()=>{s[d]=null}),Io(),r=s[e],r?r.p(u,f):(r=s[e]=a[e](u),r.c()),Jt(r,1),r.m(n.parentNode,n))},i(u){i||(Jt(r),i=!0)},o(u){pr(r),i=!1},d(u){s[e].d(u),u&&Ur(n)}}}function t9(t,e,r){let{$$slots:n={},$$scope:i}=e,{metadata:a}=e;return t.$$set=s=>{"metadata"in s&&r(0,a=s.metadata),"$$scope"in s&&r(1,i=s.$$scope)},[a,i,n]}var my=class extends Is{constructor(e){super();No(this,e,t9,e9,Uh,{metadata:0})}};function r9(){return navigator.appVersion.indexOf("Mac")!==-1}function Yh(t){return r9()?t.metaKey:t.ctrlKey}function n9(...t){return window.moment.weekdaysShort(!0)}function e2(t){return t.isoWeekday()===6||t.isoWeekday()===7}function i9(t){return t[0].weekday(0)}function a9(t,...e){let r=window.moment().locale(),n=[],i,a=t.clone().locale(r).date(1),s=a.weekday(),l=a.clone().subtract(s,"days");for(let u=0;u<42;u++)u%7==0&&(i={days:[],weekNum:l.week()},n.push(i)),i.days.push(l),l=l.clone().add(1,"days");return n}function s9(){var t=Wt("style");t.id="svelte-q3wqg9-style",t.textContent=".day.svelte-q3wqg9{background-color:var(--color-background-day);border-radius:4px;color:var(--color-text-day);cursor:pointer;font-size:0.8em;height:100%;padding:4px;position:relative;text-align:center;transition:background-color 0.1s ease-in, color 0.1s ease-in;vertical-align:baseline}.day.svelte-q3wqg9:hover{background-color:var(--interactive-hover)}.day.active.svelte-q3wqg9:hover{background-color:var(--interactive-accent-hover)}.adjacent-month.svelte-q3wqg9{opacity:0.25}.today.svelte-q3wqg9{color:var(--color-text-today)}.day.svelte-q3wqg9:active,.active.svelte-q3wqg9,.active.today.svelte-q3wqg9{color:var(--text-on-accent);background-color:var(--interactive-accent)}.dot-container.svelte-q3wqg9{display:flex;flex-wrap:wrap;justify-content:center;line-height:6px;min-height:6px}",_t(document.head,t)}function t2(t,e,r){let n=t.slice();return n[11]=e[r],n}function r2(t){let e,r,n=[t[11]],i={};for(let a=0;a<n.length;a+=1)i=Rc(i,n[a]);return e=new gy({props:i}),{c(){Ka(e.$$.fragment)},m(a,s){fa(e,a,s),r=!0},p(a,s){let l=s&128?Kh(n,[py(a[11])]):{};e.$set(l)},i(a){r||(Jt(e.$$.fragment,a),r=!0)},o(a){pr(e.$$.fragment,a),r=!1},d(a){da(e,a)}}}function o9(t){let e,r=t[0].format("D")+"",n,i,a,s,l,u,f,d=t[7].dots,h=[];for(let w=0;w<d.length;w+=1)h[w]=r2(t2(t,d,w));let g=w=>pr(h[w],1,1,()=>{h[w]=null}),y=[{class:s=`day ${t[7].classes.join(" ")}`},t[7].dataAttributes||{}],m={};for(let w=0;w<y.length;w+=1)m=Rc(m,y[w]);return{c(){e=Wt("div"),n=So(r),i=Jn(),a=Wt("div");for(let w=0;w<h.length;w+=1)h[w].c();ut(a,"class","dot-container svelte-q3wqg9"),YA(e,m),Ar(e,"active",t[6]===jh(t[0],"day")),Ar(e,"adjacent-month",!t[0].isSame(t[5],"month")),Ar(e,"today",t[0].isSame(t[4],"day")),Ar(e,"svelte-q3wqg9",!0)},m(w,_){Xr(w,e,_),_t(e,n),_t(e,i),_t(e,a);for(let E=0;E<h.length;E+=1)h[E].m(a,null);l=!0,u||(f=[Ha(e,"click",function(){ca(t[2]&&t[8])&&(t[2]&&t[8]).apply(this,arguments)}),Ha(e,"contextmenu",function(){ca(t[3]&&t[9])&&(t[3]&&t[9]).apply(this,arguments)}),Ha(e,"pointerover",function(){ca(t[1]&&t[10])&&(t[1]&&t[10]).apply(this,arguments)})],u=!0)},p(w,_){if(t=w,(!l||_&1)&&r!==(r=t[0].format("D")+"")&&Dc(n,r),_&128){d=t[7].dots;let E;for(E=0;E<d.length;E+=1){let b=t2(t,d,E);h[E]?(h[E].p(b,_),Jt(h[E],1)):(h[E]=r2(b),h[E].c(),Jt(h[E],1),h[E].m(a,null))}for(ko(),E=d.length;E<h.length;E+=1)g(E);Io()}YA(e,m=Kh(y,[(!l||_&128&&s!==(s=`day ${t[7].classes.join(" ")}`))&&{class:s},_&128&&(t[7].dataAttributes||{})])),Ar(e,"active",t[6]===jh(t[0],"day")),Ar(e,"adjacent-month",!t[0].isSame(t[5],"month")),Ar(e,"today",t[0].isSame(t[4],"day")),Ar(e,"svelte-q3wqg9",!0)},i(w){if(!l){for(let _=0;_<d.length;_+=1)Jt(h[_]);l=!0}},o(w){h=h.filter(Boolean);for(let _=0;_<h.length;_+=1)pr(h[_]);l=!1},d(w){w&&Ur(e),Fh(h,w),u=!1,As(f)}}}function l9(t){let e,r,n;return r=new my({props:{metadata:t[7],$$slots:{default:[o9,({metadata:i})=>({7:i}),({metadata:i})=>i?128:0]},$$scope:{ctx:t}}}),{c(){e=Wt("td"),Ka(r.$$.fragment)},m(i,a){Xr(i,e,a),fa(r,e,null),n=!0},p(i,[a]){let s={};a&128&&(s.metadata=i[7]),a&16639&&(s.$$scope={dirty:a,ctx:i}),r.$set(s)},i(i){n||(Jt(r.$$.fragment,i),n=!0)},o(i){pr(r.$$.fragment,i),n=!1},d(i){i&&Ur(e),da(r)}}}function u9(t,e,r){let{date:n}=e,{metadata:i}=e,{onHover:a}=e,{onClick:s}=e,{onContextMenu:l}=e,{today:u}=e,{displayedMonth:f=null}=e,{selectedId:d=null}=e,h=m=>s(n,Yh(m)),g=m=>l(n,m),y=m=>a(n,m.target,Yh(m));return t.$$set=m=>{"date"in m&&r(0,n=m.date),"metadata"in m&&r(7,i=m.metadata),"onHover"in m&&r(1,a=m.onHover),"onClick"in m&&r(2,s=m.onClick),"onContextMenu"in m&&r(3,l=m.onContextMenu),"today"in m&&r(4,u=m.today),"displayedMonth"in m&&r(5,f=m.displayedMonth),"selectedId"in m&&r(6,d=m.selectedId)},[n,a,s,l,u,f,d,i,h,g,y]}var n2=class extends Is{constructor(e){super();document.getElementById("svelte-q3wqg9-style")||s9(),No(this,e,u9,l9,Uh,{date:0,metadata:7,onHover:1,onClick:2,onContextMenu:3,today:4,displayedMonth:5,selectedId:6})}};function c9(){var t=Wt("style");t.id="svelte-156w7na-style",t.textContent=".arrow.svelte-156w7na.svelte-156w7na{align-items:center;cursor:pointer;display:flex;justify-content:center;width:24px}.arrow.is-mobile.svelte-156w7na.svelte-156w7na{width:32px}.right.svelte-156w7na.svelte-156w7na{transform:rotate(180deg)}.arrow.svelte-156w7na svg.svelte-156w7na{color:var(--color-arrow);height:16px;width:16px}",_t(document.head,t)}function f9(t){let e,r,n,i,a;return{c(){e=Wt("div"),r=$l("svg"),n=$l("path"),ut(n,"fill","currentColor"),ut(n,"d","M34.52 239.03L228.87 44.69c9.37-9.37 24.57-9.37 33.94 0l22.67 22.67c9.36 9.36 9.37 24.52.04 33.9L131.49 256l154.02 154.75c9.34 9.38 9.32 24.54-.04 33.9l-22.67 22.67c-9.37 9.37-24.57 9.37-33.94 0L34.52 272.97c-9.37-9.37-9.37-24.57 0-33.94z"),ut(r,"focusable","false"),ut(r,"role","img"),ut(r,"xmlns","http://www.w3.org/2000/svg"),ut(r,"viewBox","0 0 320 512"),ut(r,"class","svelte-156w7na"),ut(e,"class","arrow svelte-156w7na"),ut(e,"aria-label",t[1]),Ar(e,"is-mobile",t[3]),Ar(e,"right",t[2]==="right")},m(s,l){Xr(s,e,l),_t(e,r),_t(r,n),i||(a=Ha(e,"click",function(){ca(t[0])&&t[0].apply(this,arguments)}),i=!0)},p(s,[l]){t=s,l&2&&ut(e,"aria-label",t[1]),l&4&&Ar(e,"right",t[2]==="right")},i:Qr,o:Qr,d(s){s&&Ur(e),i=!1,a()}}}function d9(t,e,r){let{onClick:n}=e,{tooltip:i}=e,{direction:a}=e,s=window.app.isMobile;return t.$$set=l=>{"onClick"in l&&r(0,n=l.onClick),"tooltip"in l&&r(1,i=l.tooltip),"direction"in l&&r(2,a=l.direction)},[n,i,a,s]}var yy=class extends Is{constructor(e){super();document.getElementById("svelte-156w7na-style")||c9(),No(this,e,d9,f9,ly,{onClick:0,tooltip:1,direction:2})}};function h9(){var t=Wt("style");t.id="svelte-1vwr9dd-style",t.textContent=".nav.svelte-1vwr9dd.svelte-1vwr9dd{align-items:center;display:flex;margin:0.6em 0 1em;padding:0 8px;width:100%}.nav.is-mobile.svelte-1vwr9dd.svelte-1vwr9dd{padding:0}.title.svelte-1vwr9dd.svelte-1vwr9dd{color:var(--color-text-title);font-size:1.5em;margin:0}.is-mobile.svelte-1vwr9dd .title.svelte-1vwr9dd{font-size:1.3em}.month.svelte-1vwr9dd.svelte-1vwr9dd{font-weight:500;text-transform:capitalize}.year.svelte-1vwr9dd.svelte-1vwr9dd{color:var(--interactive-accent)}.right-nav.svelte-1vwr9dd.svelte-1vwr9dd{display:flex;justify-content:center;margin-left:auto}.reset-button.svelte-1vwr9dd.svelte-1vwr9dd{cursor:pointer;border-radius:4px;color:var(--text-muted);font-size:0.7em;font-weight:600;letter-spacing:1px;margin:0 4px;padding:0px 4px;text-transform:uppercase}.is-mobile.svelte-1vwr9dd .reset-button.svelte-1vwr9dd{display:none}",_t(document.head,t)}function p9(t){let e,r,n,i=t[0].format("MMM")+"",a,s,l,u=t[0].format("YYYY")+"",f,d,h,g,y,m,w,_,E,b,k;return g=new yy({props:{direction:"left",onClick:t[3],tooltip:"Previous Month"}}),_=new yy({props:{direction:"right",onClick:t[2],tooltip:"Next Month"}}),{c(){e=Wt("div"),r=Wt("h3"),n=Wt("span"),a=So(i),s=Jn(),l=Wt("span"),f=So(u),d=Jn(),h=Wt("div"),Ka(g.$$.fragment),y=Jn(),m=Wt("div"),m.textContent=`${t[4]}`,w=Jn(),Ka(_.$$.fragment),ut(n,"class","month svelte-1vwr9dd"),ut(l,"class","year svelte-1vwr9dd"),ut(r,"class","title svelte-1vwr9dd"),ut(m,"class","reset-button svelte-1vwr9dd"),ut(h,"class","right-nav svelte-1vwr9dd"),ut(e,"class","nav svelte-1vwr9dd"),Ar(e,"is-mobile",t[5])},m(O,R){Xr(O,e,R),_t(e,r),_t(r,n),_t(n,a),_t(r,s),_t(r,l),_t(l,f),_t(e,d),_t(e,h),fa(g,h,null),_t(h,y),_t(h,m),_t(h,w),fa(_,h,null),E=!0,b||(k=[Ha(r,"click",function(){ca(t[1])&&t[1].apply(this,arguments)}),Ha(m,"click",function(){ca(t[1])&&t[1].apply(this,arguments)})],b=!0)},p(O,[R]){t=O,(!E||R&1)&&i!==(i=t[0].format("MMM")+"")&&Dc(a,i),(!E||R&1)&&u!==(u=t[0].format("YYYY")+"")&&Dc(f,u);let B={};R&8&&(B.onClick=t[3]),g.$set(B);let ne={};R&4&&(ne.onClick=t[2]),_.$set(ne)},i(O){E||(Jt(g.$$.fragment,O),Jt(_.$$.fragment,O),E=!0)},o(O){pr(g.$$.fragment,O),pr(_.$$.fragment,O),E=!1},d(O){O&&Ur(e),da(g),da(_),b=!1,As(k)}}}function g9(t,e,r){let{displayedMonth:n}=e,{today:i}=e,{resetDisplayedMonth:a}=e,{incrementDisplayedMonth:s}=e,{decrementDisplayedMonth:l}=e,u=i.calendar().split(/\d|\s/)[0],f=window.app.isMobile;return t.$$set=d=>{"displayedMonth"in d&&r(0,n=d.displayedMonth),"today"in d&&r(6,i=d.today),"resetDisplayedMonth"in d&&r(1,a=d.resetDisplayedMonth),"incrementDisplayedMonth"in d&&r(2,s=d.incrementDisplayedMonth),"decrementDisplayedMonth"in d&&r(3,l=d.decrementDisplayedMonth)},[n,a,s,l,u,f,i]}var i2=class extends Is{constructor(e){super();document.getElementById("svelte-1vwr9dd-style")||h9(),No(this,e,g9,p9,ly,{displayedMonth:0,today:6,resetDisplayedMonth:1,incrementDisplayedMonth:2,decrementDisplayedMonth:3})}};function m9(){var t=Wt("style");t.id="svelte-egt0yd-style",t.textContent="td.svelte-egt0yd{border-right:1px solid var(--background-modifier-border)}.week-num.svelte-egt0yd{background-color:var(--color-background-weeknum);border-radius:4px;color:var(--color-text-weeknum);cursor:pointer;font-size:0.65em;height:100%;padding:4px;text-align:center;transition:background-color 0.1s ease-in, color 0.1s ease-in;vertical-align:baseline}.week-num.svelte-egt0yd:hover{background-color:var(--interactive-hover)}.week-num.active.svelte-egt0yd:hover{background-color:var(--interactive-accent-hover)}.active.svelte-egt0yd{color:var(--text-on-accent);background-color:var(--interactive-accent)}.dot-container.svelte-egt0yd{display:flex;flex-wrap:wrap;justify-content:center;line-height:6px;min-height:6px}",_t(document.head,t)}function a2(t,e,r){let n=t.slice();return n[11]=e[r],n}function s2(t){let e,r,n=[t[11]],i={};for(let a=0;a<n.length;a+=1)i=Rc(i,n[a]);return e=new gy({props:i}),{c(){Ka(e.$$.fragment)},m(a,s){fa(e,a,s),r=!0},p(a,s){let l=s&64?Kh(n,[py(a[11])]):{};e.$set(l)},i(a){r||(Jt(e.$$.fragment,a),r=!0)},o(a){pr(e.$$.fragment,a),r=!1},d(a){da(e,a)}}}function y9(t){let e,r,n,i,a,s,l,u,f=t[6].dots,d=[];for(let g=0;g<f.length;g+=1)d[g]=s2(a2(t,f,g));let h=g=>pr(d[g],1,1,()=>{d[g]=null});return{c(){e=Wt("div"),r=So(t[0]),n=Jn(),i=Wt("div");for(let g=0;g<d.length;g+=1)d[g].c();ut(i,"class","dot-container svelte-egt0yd"),ut(e,"class",a=""+(Zl(`week-num ${t[6].classes.join(" ")}`)+" svelte-egt0yd")),Ar(e,"active",t[5]===jh(t[1][0],"week"))},m(g,y){Xr(g,e,y),_t(e,r),_t(e,n),_t(e,i);for(let m=0;m<d.length;m+=1)d[m].m(i,null);s=!0,l||(u=[Ha(e,"click",function(){ca(t[3]&&t[8])&&(t[3]&&t[8]).apply(this,arguments)}),Ha(e,"contextmenu",function(){ca(t[4]&&t[9])&&(t[4]&&t[9]).apply(this,arguments)}),Ha(e,"pointerover",function(){ca(t[2]&&t[10])&&(t[2]&&t[10]).apply(this,arguments)})],l=!0)},p(g,y){if(t=g,(!s||y&1)&&Dc(r,t[0]),y&64){f=t[6].dots;let m;for(m=0;m<f.length;m+=1){let w=a2(t,f,m);d[m]?(d[m].p(w,y),Jt(d[m],1)):(d[m]=s2(w),d[m].c(),Jt(d[m],1),d[m].m(i,null))}for(ko(),m=f.length;m<d.length;m+=1)h(m);Io()}(!s||y&64&&a!==(a=""+(Zl(`week-num ${t[6].classes.join(" ")}`)+" svelte-egt0yd")))&&ut(e,"class",a),y&98&&Ar(e,"active",t[5]===jh(t[1][0],"week"))},i(g){if(!s){for(let y=0;y<f.length;y+=1)Jt(d[y]);s=!0}},o(g){d=d.filter(Boolean);for(let y=0;y<d.length;y+=1)pr(d[y]);s=!1},d(g){g&&Ur(e),Fh(d,g),l=!1,As(u)}}}function v9(t){let e,r,n;return r=new my({props:{metadata:t[6],$$slots:{default:[y9,({metadata:i})=>({6:i}),({metadata:i})=>i?64:0]},$$scope:{ctx:t}}}),{c(){e=Wt("td"),Ka(r.$$.fragment),ut(e,"class","svelte-egt0yd")},m(i,a){Xr(i,e,a),fa(r,e,null),n=!0},p(i,[a]){let s={};a&64&&(s.metadata=i[6]),a&16639&&(s.$$scope={dirty:a,ctx:i}),r.$set(s)},i(i){n||(Jt(r.$$.fragment,i),n=!0)},o(i){pr(r.$$.fragment,i),n=!1},d(i){i&&Ur(e),da(r)}}}function _9(t,e,r){let{weekNum:n}=e,{days:i}=e,{metadata:a}=e,{onHover:s}=e,{onClick:l}=e,{onContextMenu:u}=e,{selectedId:f=null}=e,d,h=m=>l(d,Yh(m)),g=m=>u(i[0],m),y=m=>s(d,m.target,Yh(m));return t.$$set=m=>{"weekNum"in m&&r(0,n=m.weekNum),"days"in m&&r(1,i=m.days),"metadata"in m&&r(6,a=m.metadata),"onHover"in m&&r(2,s=m.onHover),"onClick"in m&&r(3,l=m.onClick),"onContextMenu"in m&&r(4,u=m.onContextMenu),"selectedId"in m&&r(5,f=m.selectedId)},t.$$.update=()=>{t.$$.dirty&2&&r(7,d=i9(i))},[n,i,s,l,u,f,a,d,h,g,y]}var o2=class extends Is{constructor(e){super();document.getElementById("svelte-egt0yd-style")||m9(),No(this,e,_9,v9,Uh,{weekNum:0,days:1,metadata:6,onHover:2,onClick:3,onContextMenu:4,selectedId:5})}};function l2(t){return P(this,null,function*(){let e={dots:[],classes:[],dataAttributes:{}};return(yield Promise.all(t)).reduce((n,i)=>({classes:[...n.classes,...i.classes||[]],dataAttributes:Object.assign(n.dataAttributes,i.dataAttributes),dots:[...n.dots,...i.dots||[]]}),e)})}function u2(t,e,...r){return l2(t.map(n=>n.getDailyMetadata(e)))}function c2(t,e,...r){return l2(t.map(n=>n.getWeeklyMetadata(e)))}function w9(){var t=Wt("style");t.id="svelte-pcimu8-style",t.textContent=".container.svelte-pcimu8{--color-background-heading:transparent;--color-background-day:transparent;--color-background-weeknum:transparent;--color-background-weekend:transparent;--color-dot:var(--text-muted);--color-arrow:var(--text-muted);--color-button:var(--text-muted);--color-text-title:var(--text-normal);--color-text-heading:var(--text-muted);--color-text-day:var(--text-normal);--color-text-today:var(--interactive-accent);--color-text-weeknum:var(--text-muted)}.container.svelte-pcimu8{padding:0 8px}.container.is-mobile.svelte-pcimu8{padding:0}th.svelte-pcimu8{text-align:center}.weekend.svelte-pcimu8{background-color:var(--color-background-weekend)}.calendar.svelte-pcimu8{border-collapse:collapse;width:100%}th.svelte-pcimu8{background-color:var(--color-background-heading);color:var(--color-text-heading);font-size:0.6em;letter-spacing:1px;padding:4px;text-transform:uppercase}",_t(document.head,t)}function f2(t,e,r){let n=t.slice();return n[18]=e[r],n}function d2(t,e,r){let n=t.slice();return n[21]=e[r],n}function h2(t,e,r){let n=t.slice();return n[24]=e[r],n}function p2(t,e,r){let n=t.slice();return n[27]=e[r],n}function g2(t){let e;return{c(){e=Wt("col")},m(r,n){Xr(r,e,n)},d(r){r&&Ur(e)}}}function m2(t){let e;return{c(){e=Wt("col"),ut(e,"class","svelte-pcimu8"),Ar(e,"weekend",e2(t[27]))},m(r,n){Xr(r,e,n)},p(r,n){n&16384&&Ar(e,"weekend",e2(r[27]))},d(r){r&&Ur(e)}}}function y2(t){let e;return{c(){e=Wt("th"),e.textContent="W",ut(e,"class","svelte-pcimu8")},m(r,n){Xr(r,e,n)},d(r){r&&Ur(e)}}}function v2(t){let e,r=t[24]+"",n;return{c(){e=Wt("th"),n=So(r),ut(e,"class","svelte-pcimu8")},m(i,a){Xr(i,e,a),_t(e,n)},p(i,a){a&32768&&r!==(r=i[24]+"")&&Dc(n,r)},d(i){i&&Ur(e)}}}function _2(t){let e,r,n=[t[18],{metadata:c2(t[8],t[18].days[0],t[10])},{onClick:t[7]},{onContextMenu:t[5]},{onHover:t[3]},{selectedId:t[9]}],i={};for(let a=0;a<n.length;a+=1)i=Rc(i,n[a]);return e=new o2({props:i}),{c(){Ka(e.$$.fragment)},m(a,s){fa(e,a,s),r=!0},p(a,s){let l=s&18344?Kh(n,[s&16384&&py(a[18]),s&17664&&{metadata:c2(a[8],a[18].days[0],a[10])},s&128&&{onClick:a[7]},s&32&&{onContextMenu:a[5]},s&8&&{onHover:a[3]},s&512&&{selectedId:a[9]}]):{};e.$set(l)},i(a){r||(Jt(e.$$.fragment,a),r=!0)},o(a){pr(e.$$.fragment,a),r=!1},d(a){da(e,a)}}}function w2(t,e){let r,n,i;return n=new n2({props:{date:e[21],today:e[10],displayedMonth:e[0],onClick:e[6],onContextMenu:e[4],onHover:e[2],metadata:u2(e[8],e[21],e[10]),selectedId:e[9]}}),{key:t,first:null,c(){r=qh(),Ka(n.$$.fragment),this.first=r},m(a,s){Xr(a,r,s),fa(n,a,s),i=!0},p(a,s){e=a;let l={};s&16384&&(l.date=e[21]),s&1024&&(l.today=e[10]),s&1&&(l.displayedMonth=e[0]),s&64&&(l.onClick=e[6]),s&16&&(l.onContextMenu=e[4]),s&4&&(l.onHover=e[2]),s&17664&&(l.metadata=u2(e[8],e[21],e[10])),s&512&&(l.selectedId=e[9]),n.$set(l)},i(a){i||(Jt(n.$$.fragment,a),i=!0)},o(a){pr(n.$$.fragment,a),i=!1},d(a){a&&Ur(r),da(n,a)}}}function E2(t,e){let r,n,i=[],a=new Map,s,l,u=e[1]&&_2(e),f=e[18].days,d=h=>h[21].format();for(let h=0;h<f.length;h+=1){let g=d2(e,f,h),y=d(g);a.set(y,i[h]=w2(y,g))}return{key:t,first:null,c(){r=Wt("tr"),u&&u.c(),n=Jn();for(let h=0;h<i.length;h+=1)i[h].c();s=Jn(),this.first=r},m(h,g){Xr(h,r,g),u&&u.m(r,null),_t(r,n);for(let y=0;y<i.length;y+=1)i[y].m(r,null);_t(r,s),l=!0},p(h,g){e=h,e[1]?u?(u.p(e,g),g&2&&Jt(u,1)):(u=_2(e),u.c(),Jt(u,1),u.m(r,n)):u&&(ko(),pr(u,1,1,()=>{u=null}),Io()),g&18261&&(f=e[18].days,ko(),i=JA(i,g,d,1,e,f,a,r,XA,w2,s,d2),Io())},i(h){if(!l){Jt(u);for(let g=0;g<f.length;g+=1)Jt(i[g]);l=!0}},o(h){pr(u);for(let g=0;g<i.length;g+=1)pr(i[g]);l=!1},d(h){h&&Ur(r),u&&u.d();for(let g=0;g<i.length;g+=1)i[g].d()}}}function E9(t){let e,r,n,i,a,s,l,u,f,d,h,g,y=[],m=new Map,w;r=new i2({props:{today:t[10],displayedMonth:t[0],incrementDisplayedMonth:t[11],decrementDisplayedMonth:t[12],resetDisplayedMonth:t[13]}});let _=t[1]&&g2(),E=t[14][1].days,b=[];for(let M=0;M<E.length;M+=1)b[M]=m2(p2(t,E,M));let k=t[1]&&y2(),O=t[15],R=[];for(let M=0;M<O.length;M+=1)R[M]=v2(h2(t,O,M));let B=t[14],ne=M=>M[18].weekNum;for(let M=0;M<B.length;M+=1){let G=f2(t,B,M),re=ne(G);m.set(re,y[M]=E2(re,G))}return{c(){e=Wt("div"),Ka(r.$$.fragment),n=Jn(),i=Wt("table"),a=Wt("colgroup"),_&&_.c(),s=Jn();for(let M=0;M<b.length;M+=1)b[M].c();l=Jn(),u=Wt("thead"),f=Wt("tr"),k&&k.c(),d=Jn();for(let M=0;M<R.length;M+=1)R[M].c();h=Jn(),g=Wt("tbody");for(let M=0;M<y.length;M+=1)y[M].c();ut(i,"class","calendar svelte-pcimu8"),ut(e,"id","calendar-container"),ut(e,"class","container svelte-pcimu8"),Ar(e,"is-mobile",t[16])},m(M,G){Xr(M,e,G),fa(r,e,null),_t(e,n),_t(e,i),_t(i,a),_&&_.m(a,null),_t(a,s);for(let re=0;re<b.length;re+=1)b[re].m(a,null);_t(i,l),_t(i,u),_t(u,f),k&&k.m(f,null),_t(f,d);for(let re=0;re<R.length;re+=1)R[re].m(f,null);_t(i,h),_t(i,g);for(let re=0;re<y.length;re+=1)y[re].m(g,null);w=!0},p(M,[G]){let re={};if(G&1024&&(re.today=M[10]),G&1&&(re.displayedMonth=M[0]),r.$set(re),M[1]?_||(_=g2(),_.c(),_.m(a,s)):_&&(_.d(1),_=null),G&16384){E=M[14][1].days;let se;for(se=0;se<E.length;se+=1){let ye=p2(M,E,se);b[se]?b[se].p(ye,G):(b[se]=m2(ye),b[se].c(),b[se].m(a,null))}for(;se<b.length;se+=1)b[se].d(1);b.length=E.length}if(M[1]?k||(k=y2(),k.c(),k.m(f,d)):k&&(k.d(1),k=null),G&32768){O=M[15];let se;for(se=0;se<O.length;se+=1){let ye=h2(M,O,se);R[se]?R[se].p(ye,G):(R[se]=v2(ye),R[se].c(),R[se].m(f,null))}for(;se<R.length;se+=1)R[se].d(1);R.length=O.length}G&18431&&(B=M[14],ko(),y=JA(y,G,ne,1,M,B,m,g,XA,E2,null,f2),Io())},i(M){if(!w){Jt(r.$$.fragment,M);for(let G=0;G<B.length;G+=1)Jt(y[G]);w=!0}},o(M){pr(r.$$.fragment,M);for(let G=0;G<y.length;G+=1)pr(y[G]);w=!1},d(M){M&&Ur(e),da(r),_&&_.d(),Fh(b,M),k&&k.d(),Fh(R,M);for(let G=0;G<y.length;G+=1)y[G].d()}}}function C9(t,e,r){let{localeData:n}=e,{showWeekNums:i=!1}=e,{onHoverDay:a}=e,{onHoverWeek:s}=e,{onContextMenuDay:l}=e,{onContextMenuWeek:u}=e,{onClickDay:f}=e,{onClickWeek:d}=e,{sources:h=[]}=e,{selectedId:g}=e,{today:y=window.moment()}=e,{displayedMonth:m=y}=e,w,_,E=window.app.isMobile;function b(){r(0,m=m.clone().add(1,"month"))}function k(){r(0,m=m.clone().subtract(1,"month"))}function O(){r(0,m=y.clone())}return t.$$set=R=>{"localeData"in R&&r(17,n=R.localeData),"showWeekNums"in R&&r(1,i=R.showWeekNums),"onHoverDay"in R&&r(2,a=R.onHoverDay),"onHoverWeek"in R&&r(3,s=R.onHoverWeek),"onContextMenuDay"in R&&r(4,l=R.onContextMenuDay),"onContextMenuWeek"in R&&r(5,u=R.onContextMenuWeek),"onClickDay"in R&&r(6,f=R.onClickDay),"onClickWeek"in R&&r(7,d=R.onClickWeek),"sources"in R&&r(8,h=R.sources),"selectedId"in R&&r(9,g=R.selectedId),"today"in R&&r(10,y=R.today),"displayedMonth"in R&&r(0,m=R.displayedMonth)},t.$$.update=()=>{t.$$.dirty&131073&&r(14,w=a9(m,n)),t.$$.dirty&132096&&r(15,_=n9(y,n))},[m,i,a,s,l,u,f,d,h,g,y,b,k,O,w,_,E,n]}var Wh=class extends Is{constructor(e){super();document.getElementById("svelte-pcimu8-style")||w9(),No(this,e,C9,E9,Uh,{localeData:17,showWeekNums:1,onHoverDay:2,onHoverWeek:3,onContextMenuDay:4,onContextMenuWeek:5,onClickDay:6,onClickWeek:7,sources:8,selectedId:9,today:10,displayedMonth:0,incrementDisplayedMonth:11,decrementDisplayedMonth:12,resetDisplayedMonth:13})}get incrementDisplayedMonth(){return this.$$.ctx[11]}get decrementDisplayedMonth(){return this.$$.ctx[12]}get resetDisplayedMonth(){return this.$$.ctx[13]}};var zh=gt(Pa());var C2=gt(mh());function b9(t){let e,r,n,i=`${t[1]}px`,a=`${t[2]}px`,s,l=[S9,T9],u=[];function f(d,h){return d[3]?0:1}return r=f(t,-1),n=u[r]=l[r](t),{c(){e=le("div"),n.c(),ee(e,"class","calendarContainer"),je(e,"width",i,!1),je(e,"height",a,!1)},m(d,h){be(d,e,h),u[r].m(e,null),s=!0},p(d,h){let g=r;r=f(d,h),r===g?u[r].p(d,h):(Ul(),an(u[g],1,1,()=>{u[g]=null}),Fl(),n=u[r],n?n.p(d,h):(n=u[r]=l[r](d),n.c()),Mr(n,1),n.m(e,null)),h&2&&i!==(i=`${d[1]}px`)&&je(e,"width",i,!1),h&4&&a!==(a=`${d[2]}px`)&&je(e,"height",a,!1)},i(d){s||(Mr(n),s=!0)},o(d){an(n),s=!1},d(d){d&&Ce(e),u[r].d()}}}function x9(t){let e,r,n,i,a=[k9,A9],s=[];function l(u,f){return u[3]?0:1}return r=l(t,-1),n=s[r]=a[r](t),{c(){e=le("div"),n.c(),ee(e,"class","calendarContainer")},m(u,f){be(u,e,f),s[r].m(e,null),i=!0},p(u,f){let d=r;r=l(u,f),r===d?s[r].p(u,f):(Ul(),an(s[d],1,1,()=>{s[d]=null}),Fl(),n=s[r],n?n.p(u,f):(n=s[r]=a[r](u),n.c()),Mr(n,1),n.m(e,null))},i(u){i||(Mr(n),i=!0)},o(u){an(n),i=!1},d(u){u&&Ce(e),s[r].d()}}}function T9(t){let e,r,n,i,a,s;function l(h){t[16](h)}function u(h){t[17](h)}function f(h){t[18](h)}let d={showWeekNums:!1,onClickDay:t[7]};return t[4]!==void 0&&(d.sources=t[4]),t[0]!==void 0&&(d.displayedMonth=t[0]),t[5]!==void 0&&(d.today=t[5]),r=new Wh({props:d}),Mn.push(()=>Ua(r,"sources",l)),Mn.push(()=>Ua(r,"displayedMonth",u)),Mn.push(()=>Ua(r,"today",f)),{c(){e=le("div"),Cs(r.$$.fragment),je(e,"--theme-color",t[6].settings.dailyNoteDotColor)},m(h,g){be(h,e,g),Fa(r,e,null),s=!0},p(h,g){let y={};!n&&g&16&&(n=!0,y.sources=h[4],Ma(()=>n=!1)),!i&&g&1&&(i=!0,y.displayedMonth=h[0],Ma(()=>i=!1)),!a&&g&32&&(a=!0,y.today=h[5],Ma(()=>a=!1)),r.$set(y),(!s||g&64)&&je(e,"--theme-color",h[6].settings.dailyNoteDotColor)},i(h){s||(Mr(r.$$.fragment,h),s=!0)},o(h){an(r.$$.fragment,h),s=!1},d(h){h&&Ce(e),aa(r)}}}function S9(t){let e;return{c(){e=le("p"),e.textContent="Loading..."},m(r,n){be(r,e,n)},p:At,i:At,o:At,d(r){r&&Ce(e)}}}function A9(t){let e,r,n,i,a,s;function l(h){t[13](h)}function u(h){t[14](h)}function f(h){t[15](h)}let d={showWeekNums:t[6].settings.useWeeklyNotes,onClickDay:t[7],onClickWeek:t[8]};return t[4]!==void 0&&(d.sources=t[4]),t[0]!==void 0&&(d.displayedMonth=t[0]),t[5]!==void 0&&(d.today=t[5]),r=new Wh({props:d}),Mn.push(()=>Ua(r,"sources",l)),Mn.push(()=>Ua(r,"displayedMonth",u)),Mn.push(()=>Ua(r,"today",f)),{c(){e=le("div"),Cs(r.$$.fragment),je(e,"--daily-dot-color",t[6].settings.dailyNoteDotColor)},m(h,g){be(h,e,g),Fa(r,e,null),s=!0},p(h,g){let y={};g&64&&(y.showWeekNums=h[6].settings.useWeeklyNotes),!n&&g&16&&(n=!0,y.sources=h[4],Ma(()=>n=!1)),!i&&g&1&&(i=!0,y.displayedMonth=h[0],Ma(()=>i=!1)),!a&&g&32&&(a=!0,y.today=h[5],Ma(()=>a=!1)),r.$set(y),(!s||g&64)&&je(e,"--daily-dot-color",h[6].settings.dailyNoteDotColor)},i(h){s||(Mr(r.$$.fragment,h),s=!0)},o(h){an(r.$$.fragment,h),s=!1},d(h){h&&Ce(e),aa(r)}}}function k9(t){let e;return{c(){e=le("p"),e.textContent="Loading..."},m(r,n){be(r,e,n)},p:At,i:At,o:At,d(r){r&&Ce(e)}}}function I9(t){let e,r,n,i,a=[x9,b9],s=[];function l(u,f){return u[1]==0||u[2]==0?0:1}return e=l(t,-1),r=s[e]=a[e](t),{c(){r.c(),n=mi()},m(u,f){s[e].m(u,f),be(u,n,f),i=!0},p(u,[f]){let d=e;e=l(u,f),e===d?s[e].p(u,f):(Ul(),an(s[d],1,1,()=>{s[d]=null}),Fl(),r=s[e],r?r.p(u,f):(r=s[e]=a[e](u),r.c()),Mr(r,1),r.m(n.parentNode,n))},i(u){i||(Mr(r),i=!0)},o(u){an(r),i=!1},d(u){s[e].d(u),u&&Ce(n)}}}function N9(t,e,r){let{displayedMonth:n=window.moment()}=e,{width:i=0}=e,{height:a=0}=e,{include:s}=e,{exclude:l}=e,u=vh(),f,d,h,g=!0,y,m=window.moment(),w=Ze.getInstance();function _(re){return _r(this,void 0,void 0,function*(){r(6,w);let se=re.clone().startOf("month").subtract(6,"days"),ye=re.clone().endOf("month").add(12,"days"),Ae=yield er({startDate:se,endDate:ye,include:s,exclude:l});if(zh.default.isEqual(Ae,h)&&zh.default.isEqual(u,vh()))return;u=vh();let Je=zh.default.groupBy(Ae,me=>{var te;return window.moment((te=me.start.date)!==null&&te!==void 0?te:me.start.dateTime).startOf("day").format()});h=Ae;let De={getWeeklyMetadata:me=>_r(this,void 0,void 0,function*(){let te=[];return w.settings.activateDailyNoteAddon&&w.settings.useWeeklyNotes&&Vm(me)&&(te=[{isFilled:!0,className:"googleCalendarDailyDot",color:"default"}]),{dataAttributes:{amount:te.length+""},dots:te}}),getDailyMetadata:me=>_r(this,void 0,void 0,function*(){let te=[];w.settings.activateDailyNoteAddon&&yc(me)&&(te=[{isFilled:!0,className:"googleCalendarDailyDot",color:"default"}]);let Fe=Je[me.startOf("day").format()];return Fe?(te=[...te,...Array(Fe.length).fill({isFilled:!0,className:"googleCalendarDot",color:"default"})],{dataAttributes:{amount:Fe.length+""},dots:te}):{dataAttributes:{amount:te.length+""},dots:te}})};r(3,g=!1),r(4,y=null),r(4,y=[De])})}let E=(re,se)=>re.filter(ye=>ye.start.date?window.moment(ye.start.date).isSame(se,"day"):window.moment(ye.start.dateTime).isSame(se,"day")),b=(re,se)=>{new Pi(E(h,re),"details",re,!1,()=>{zn(),r(0,n)}).open()},k=(re,se)=>_r(void 0,void 0,void 0,function*(){let ye=Vm(re);ye||(ye=yield(0,C2.createWeeklyNote)(re)),yield app.workspace.getLeaf(!1).openFile(ye,{active:!0})});yo(()=>{clearInterval(f),clearInterval(d)});function O(re){y=re,r(4,y)}function R(re){n=re,r(0,n)}function B(re){m=re,r(5,m),r(11,f),r(0,n),r(12,d)}function ne(re){y=re,r(4,y)}function M(re){n=re,r(0,n)}function G(re){m=re,r(5,m),r(11,f),r(0,n),r(12,d)}return t.$$set=re=>{"displayedMonth"in re&&r(0,n=re.displayedMonth),"width"in re&&r(1,i=re.width),"height"in re&&r(2,a=re.height),"include"in re&&r(9,s=re.include),"exclude"in re&&r(10,l=re.exclude)},t.$$.update=()=>{if(t.$$.dirty&6145){e:f&&clearInterval(f),r(11,f=setInterval(()=>_(n),1e3)),d&&clearInterval(d),r(12,d=setInterval(()=>r(5,m=window.moment()),6e4)),_(n)}},[n,i,a,g,y,m,w,b,k,s,l,f,d,O,R,B,ne,M,G]}var b2=class extends sn{constructor(e){super();hn(this,e,N9,I9,dn,{displayedMonth:0,width:1,height:2,include:9,exclude:10})}},Qh=b2;function R9(t){Pn(t,"svelte-1f1t9un",'.scheduleContainer.svelte-1f1t9un{padding:10px}.scheduleContent.svelte-1f1t9un{display:flex;flex-direction:column;align-items:flex-start;white-space:nowrap}.dayContainer.svelte-1f1t9un{display:flex;flex-direction:row;align-items:flex-start;justify-content:flex-start;border-bottom:1px solid white;margin:2px 0px;padding:2px 0px;flex-wrap:wrap}.dateDisplay.svelte-1f1t9un{display:flex;flex-direction:row;align-items:flex-end;width:105px;min-width:105px}.dayNumber.svelte-1f1t9un{border-radius:50%;-moz-border-radius:50%;-webkit-border-radius:50%;display:inline-block;font-weight:bold;line-height:40px;text-align:center;width:40px;min-width:40px;cursor:pointer}.today.svelte-1f1t9un{color:white;background:#4285f4;text-decoration:none}.dayText.svelte-1f1t9un{font-size:15px}.dayEvents.svelte-1f1t9un{display:flex;flex-direction:column;flex:1}.dayEvent.svelte-1f1t9un{display:flex;flex:1;flex-direction:row;align-items:center;padding:5px;border-radius:10px;cursor:pointer;flex-wrap:wrap}.dayEvent.svelte-1f1t9un:hover{background-color:rgba(128, 128, 128, 0.129)}.circleTime.svelte-1f1t9un{display:flex;flex-direction:row;width:220px;min-width:220px}.recurringCircleContainer.svelte-1f1t9un,.circleContainer.svelte-1f1t9un{position:relative;display:flex;width:30px;min-width:30px;height:30px;align-items:center;justify-content:center}.recurringCircleContainer.svelte-1f1t9un::after{content:"\u21BA";position:absolute;width:30px;height:30px;text-align:center;line-height:30px;font-size:30px;color:rgb(164, 164, 164);white-space:nowrap}.circle.svelte-1f1t9un{width:10px;min-width:10px;height:10px;border-radius:50%}.timeContainer.svelte-1f1t9un{width:150px;min-width:150px}.eventTitleContainer.svelte-1f1t9un{white-space:nowrap}')}function x2(t,e,r){let n=t.slice();return n[15]=e[r][0],n[1]=e[r][1],n}function T2(t,e,r){let n=t.slice();return n[18]=e[r],n}function D9(t){let e,r=[...t[2]],n=[];for(let i=0;i<r.length;i+=1)n[i]=A2(x2(t,r,i));return{c(){e=le("div");for(let i=0;i<n.length;i+=1)n[i].c();ee(e,"class","scheduleContent svelte-1f1t9un")},m(i,a){be(i,e,a);for(let s=0;s<n.length;s+=1)n[s].m(e,null)},p(i,a){if(a&124){r=[...i[2]];let s;for(s=0;s<r.length;s+=1){let l=x2(i,r,s);n[s]?n[s].p(l,a):(n[s]=A2(l),n[s].c(),n[s].m(e,null))}for(;s<n.length;s+=1)n[s].d(1);n.length=r.length}},d(i){i&&Ce(e),nn(n,i)}}}function B9(t){let e;return{c(){e=le("span"),e.textContent="LOADING"},m(r,n){be(r,e,n)},p:At,d(r){r&&Ce(e)}}}function S2(t){let e,r,n,i,a,s,l,u,f=t[3](t[18])+"",d,h,g,y,m=t[18].summary+"",w,_,E,b;function k(...O){return t[13](t[18],...O)}return{c(){e=le("div"),r=le("div"),n=le("div"),i=le("div"),s=Ne(),l=le("div"),u=le("span"),d=cr(f),h=Ne(),g=le("div"),y=le("span"),w=cr(m),_=Ne(),ee(i,"class","circle svelte-1f1t9un"),je(i,"background",Zu(t[18]),!1),ee(n,"class",a=""+(Pl(t[18].recurringEventId?"recurringCircleContainer":"circleContainer")+" svelte-1f1t9un")),ee(l,"class","timeContainer svelte-1f1t9un"),ee(r,"class","circleTime svelte-1f1t9un"),ee(g,"class","eventTitleContainer svelte-1f1t9un"),ee(e,"class","dayEvent svelte-1f1t9un")},m(O,R){be(O,e,R),ae(e,r),ae(r,n),ae(n,i),ae(r,s),ae(r,l),ae(l,u),ae(u,d),ae(e,h),ae(e,g),ae(g,y),ae(y,w),ae(e,_),E||(b=Ke(e,"click",k),E=!0)},p(O,R){t=O},d(O){O&&Ce(e),E=!1,b()}}}function A2(t){let e,r,n,i,a=t[15].slice(0,2)+"",s,l,u,f,d=t[15].slice(2)+"",h,g,y,m,w,_;function E(){return t[12](t[1])}let b=t[1],k=[];for(let O=0;O<b.length;O+=1)k[O]=S2(T2(t,b,O));return{c(){e=le("div"),r=le("div"),n=le("div"),i=le("span"),s=cr(a),u=Ne(),f=le("span"),h=cr(d),g=Ne(),y=le("div");for(let O=0;O<k.length;O+=1)k[O].c();m=Ne(),ee(n,"class",l=""+(Pl(t[6](t[1][0])?"dayNumber today":"dayNumber")+" svelte-1f1t9un")),ee(f,"class","dayText svelte-1f1t9un"),ee(r,"class","dateDisplay svelte-1f1t9un"),ee(y,"class","dayEvents svelte-1f1t9un"),ee(e,"class","dayContainer svelte-1f1t9un")},m(O,R){be(O,e,R),ae(e,r),ae(r,n),ae(n,i),ae(i,s),ae(r,u),ae(r,f),ae(f,h),ae(e,g),ae(e,y);for(let B=0;B<k.length;B+=1)k[B].m(y,null);ae(e,m),w||(_=Ke(n,"click",E),w=!0)},p(O,R){if(t=O,R&28){b=t[1];let B;for(B=0;B<b.length;B+=1){let ne=T2(t,b,B);k[B]?k[B].p(ne,R):(k[B]=S2(ne),k[B].c(),k[B].m(y,null))}for(;B<k.length;B+=1)k[B].d(1);k.length=b.length}},d(O){O&&Ce(e),nn(k,O),w=!1,_()}}}function O9(t){let e;function r(a,s){return a[0]?B9:D9}let n=r(t,-1),i=n(t);return{c(){e=le("div"),i.c(),ee(e,"class","scheduleContainer svelte-1f1t9un")},m(a,s){be(a,e,s),i.m(e,null)},p(a,[s]){n===(n=r(a,s))&&i?i.p(a,s):(i.d(1),i=n(a),i&&(i.c(),i.m(e,null)))},i:At,o:At,d(a){a&&Ce(e),i.d()}}}function L9(t,e,r){let{timeSpan:n=7}=e,{date:i=window.moment()}=e,{include:a}=e,{exclude:s}=e,l,u=new Map,f=!1,d=[],h=()=>_r(void 0,void 0,void 0,function*(){let b=yield er({startDate:i,endDate:i.clone().add(n,"day"),include:a,exclude:s});if(JSON.stringify(b)==JSON.stringify(d)){r(0,f=!1);return}u.clear(),r(1,d=b),d.forEach(k=>{let O=k.start.date?window.moment(k.start.date).format("DD MMM, ddd"):window.moment(k.start.dateTime).format("DD MMM, ddd");u.has(O)?u.get(O).push(k):u.set(O,[k])}),r(0,f=!1)}),g=b=>{if(b.start.date)return"All day";{let k=window.moment(b.start.dateTime).format("hh:mma"),O=window.moment(b.end.dateTime).format("hh:mma");return`${k}-${O}`}},y=(b,k)=>{k.shiftKey?window.open(b.htmlLink):new Un(b,()=>{zn(),r(7,i),r(11,l)}).open()},m=b=>_r(void 0,void 0,void 0,function*(){let k=window.moment(b.start.date||b.start.dateTime),O=yield er({startDate:k});new Pi(O,"details",k,!1,()=>{zn(),r(7,i),r(11,l)}).open()}),w=b=>{let k=window.moment(b.start.date||b.start.dateTime);return window.moment().local().isSame(k,"day")};yo(()=>{clearInterval(l)});let _=b=>m(b[0]),E=(b,k)=>y(b,k);return t.$$set=b=>{"timeSpan"in b&&r(8,n=b.timeSpan),"date"in b&&r(7,i=b.date),"include"in b&&r(9,a=b.include),"exclude"in b&&r(10,s=b.exclude)},t.$$.update=()=>{if(t.$$.dirty&2176){e:r(7,i),r(11,l),l&&clearInterval(l),r(0,f=!0),r(11,l=setInterval(h,5e3)),h()}},[f,d,u,g,y,m,w,i,n,a,s,l,_,E]}var k2=class extends sn{constructor(e){super();hn(this,e,L9,O9,dn,{timeSpan:8,date:7,include:9,exclude:10},R9)}},Xh=k2;function P9(t){Pn(t,"svelte-wwuc5n",".googleWeekContainer.svelte-wwuc5n{position:relative;display:flex;flex-direction:row;overflow-x:scroll;overflow-y:hidden;height:100%}")}function I2(t,e,r){let n=t.slice();return n[17]=e[r],n[19]=r,n}function N2(t){let e,r,n,i,a,s=t[0].format("YYYY-MM-DD")+"",l,u,f,d,h,g,y,m,w,_,E,b,k,O;return{c(){e=le("div"),r=le("button"),r.textContent="+",n=Ne(),i=le("h3"),a=cr("Google Calendar "),l=cr(s),u=Ne(),f=le("div"),d=le("button"),d.textContent="<<",h=Ne(),g=le("button"),g.textContent="<",y=Ne(),m=le("button"),m.textContent="Today",w=Ne(),_=le("button"),_.textContent=">",E=Ne(),b=le("button"),b.textContent=">>",ee(r,"aria-label","Create Event"),ee(e,"class","titleContainer"),ee(d,"class","fixedSizeButton"),ee(d,"aria-label","Back 1 week"),ee(g,"class","fixedSizeButton"),ee(g,"aria-label","Back 1 day"),ee(m,"class","fixedSizeButton"),ee(m,"aria-label","Jump to today"),ee(_,"class","fixedSizeButton"),ee(_,"aria-label","Forward 1 day"),ee(b,"class","fixedSizeButton"),ee(b,"aria-label","Forward 1 week"),ee(f,"class","navigationContainer")},m(R,B){be(R,e,B),ae(e,r),ae(e,n),ae(e,i),ae(i,a),ae(i,l),be(R,u,B),be(R,f,B),ae(f,d),ae(f,h),ae(f,g),ae(f,y),ae(f,m),ae(f,w),ae(f,_),ae(f,E),ae(f,b),k||(O=[Ke(r,"click",t[12]),Ke(d,"click",t[7]),Ke(g,"click",t[8]),Ke(m,"click",t[9]),Ke(_,"click",t[11]),Ke(b,"click",t[10])],k=!0)},p(R,B){B&1&&s!==(s=R[0].format("YYYY-MM-DD")+"")&&Sn(l,s)},d(R){R&&Ce(e),R&&Ce(u),R&&Ce(f),k=!1,zr(O)}}}function M9(t){let e,r;return e=new Nc({props:{date:t[17],height:t[1],width:t[2],include:t[4],exclude:t[5],hourRange:t[6],showTimeDisplay:!1}}),{c(){Cs(e.$$.fragment)},m(n,i){Fa(e,n,i),r=!0},p(n,i){let a={};i&1&&(a.date=n[17]),i&2&&(a.height=n[1]),i&4&&(a.width=n[2]),i&16&&(a.include=n[4]),i&32&&(a.exclude=n[5]),i&64&&(a.hourRange=n[6]),e.$set(a)},i(n){r||(Mr(e.$$.fragment,n),r=!0)},o(n){an(e.$$.fragment,n),r=!1},d(n){aa(e,n)}}}function U9(t){let e,r;return e=new Nc({props:{date:t[17],height:t[1],width:t[2],include:t[4],exclude:t[5],hourRange:t[6]}}),{c(){Cs(e.$$.fragment)},m(n,i){Fa(e,n,i),r=!0},p(n,i){let a={};i&1&&(a.date=n[17]),i&2&&(a.height=n[1]),i&4&&(a.width=n[2]),i&16&&(a.include=n[4]),i&32&&(a.exclude=n[5]),i&64&&(a.hourRange=n[6]),e.$set(a)},i(n){r||(Mr(e.$$.fragment,n),r=!0)},o(n){an(e.$$.fragment,n),r=!1},d(n){aa(e,n)}}}function R2(t){let e,r=t[17].format("D")+"",n,i,a,s,l,u,f=[U9,M9],d=[];function h(g,y){return g[19]==0?0:1}return a=h(t,-1),s=d[a]=f[a](t),{c(){e=le("span"),n=cr(r),i=Ne(),s.c(),l=mi(),ee(e,"class","dayDisplay")},m(g,y){be(g,e,y),ae(e,n),be(g,i,y),d[a].m(g,y),be(g,l,y),u=!0},p(g,y){(!u||y&1)&&r!==(r=g[17].format("D")+"")&&Sn(n,r),s.p(g,y)},i(g){u||(Mr(s),u=!0)},o(g){an(s),u=!1},d(g){g&&Ce(e),g&&Ce(i),d[a].d(g),g&&Ce(l)}}}function F9(t){let e,r,n,i,a=t[3]&&t[0]&&N2(t),s=t[13](t[0]),l=[];for(let f=0;f<s.length;f+=1)l[f]=R2(I2(t,s,f));let u=f=>an(l[f],1,1,()=>{l[f]=null});return{c(){e=le("div"),a&&a.c(),r=Ne(),n=le("div");for(let f=0;f<l.length;f+=1)l[f].c();ee(n,"class","googleWeekContainer svelte-wwuc5n"),je(n,"overflow","hidden"),je(e,"padding-left","10px")},m(f,d){be(f,e,d),a&&a.m(e,null),ae(e,r),ae(e,n);for(let h=0;h<l.length;h+=1)l[h].m(n,null);i=!0},p(f,[d]){if(f[3]&&f[0]?a?a.p(f,d):(a=N2(f),a.c(),a.m(e,r)):a&&(a.d(1),a=null),d&8311){s=f[13](f[0]);let h;for(h=0;h<s.length;h+=1){let g=I2(f,s,h);l[h]?(l[h].p(g,d),Mr(l[h],1)):(l[h]=R2(g),l[h].c(),Mr(l[h],1),l[h].m(n,null))}for(Ul(),h=s.length;h<l.length;h+=1)u(h);Fl()}},i(f){if(!i){for(let d=0;d<s.length;d+=1)Mr(l[d]);i=!0}},o(f){l=l.filter(Boolean);for(let d=0;d<l.length;d+=1)an(l[d]);i=!1},d(f){f&&Ce(e),a&&a.d(),nn(l,f)}}}function q9(t,e,r){let{height:n=void 0}=e,{width:i=void 0}=e,{date:a=window.moment()}=e,{navigation:s=!1}=e,{include:l}=e,{exclude:u}=e,{hourRange:f=void 0}=e,{dayOffset:d=0}=e,{timespan:h=7}=e,g=0,y=()=>r(16,g-=7),m=()=>r(16,g-=1),w=()=>r(16,g=0),_=()=>r(16,g+=7),E=()=>r(16,g+=1),b=O=>{new Un({start:{},end:{}},()=>{zn(),r(0,a),r(3,s),r(16,g)}).open()},k=O=>{let R=[];for(let B=0;B<h;B++)R=[...R,O.clone().add(B+d,"days")];return R};return t.$$set=O=>{"height"in O&&r(1,n=O.height),"width"in O&&r(2,i=O.width),"date"in O&&r(0,a=O.date),"navigation"in O&&r(3,s=O.navigation),"include"in O&&r(4,l=O.include),"exclude"in O&&r(5,u=O.exclude),"hourRange"in O&&r(6,f=O.hourRange),"dayOffset"in O&&r(14,d=O.dayOffset),"timespan"in O&&r(15,h=O.timespan)},t.$$.update=()=>{if(t.$$.dirty&65545){e:r(0,a=s?window.moment().local().add(g,"days"):a)}},[a,n,i,s,l,u,f,y,m,w,_,E,b,k,d,h,g]}var D2=class extends sn{constructor(e){super();hn(this,e,q9,F9,dn,{height:1,width:2,date:0,navigation:3,include:4,exclude:5,hourRange:6,dayOffset:14,timespan:15},P9)}},B2=D2;var O2=gt(require("obsidian")),Ro=class extends O2.MarkdownRenderChild{constructor(e,r,n){super(r);this.a=e,this.b=n}load(){this.comp=new this.a({target:this.containerEl,props:this.b})}unload(){this.comp.$destroy()}};function L2(t,e,r){return P(this,null,function*(){let n=(0,Jh.parseYaml)(t),{height:i,width:a,date:s,navigation:l,timespan:u,exclude:f,include:d,theme:h,hourRange:g,dayOffset:y}=n,{type:m}=n;m||(m=Va.day);let w=["YYYY-MM-DD","YYYY.MM.DD","YYYY/MM/DD","MM-DD-YYYY","MM.DD.YYYY","MM/DD/YYYY","DD-MM-YYYY","DD.MM.YYYY","DD/MM/YYYY"];if(s==null||s=="today"||s=="tomorrow"||s=="yesterday"||window.moment(s,w,!0).isValid()){let _;s==null?_=void 0:s=="today"?_=window.moment():s=="tomorrow"?_=window.moment().add(1,"day"):s=="yesterday"?_=window.moment().subtract(1,"day"):_=window.moment(s),e.style.padding="10px",m==Va.web?Jh.Platform.isDesktopApp&&r.addChild(new Ro(Mh,e,{height:i!=null?i:500,width:a!=null?a:500,date:_,theme:h!=null?h:"auto"})):m==Va.day?r.addChild(new Ro(Ph,e,{height:i,width:a,date:_,navigation:l,include:d,exclude:f,hourRange:g})):m==Va.month?r.addChild(new Ro(Qh,e,{height:i,width:a,displayedMonth:_,include:d,exclude:f})):m==Va.schedule?r.addChild(new Ro(Xh,e,{timeSpan:u,date:_,include:d,exclude:f})):m==Va.week&&r.addChild(new Ro(B2,e,{height:i,width:a,date:_,navigation:l,include:d,exclude:f,hourRange:g,dayOffset:y,timespan:u}))}})}var P2=gt(require("obsidian"));var Oc="google-calendar-view-day",vy=class extends P2.ItemView{constructor(e){super(e)}getViewType(){return Oc}getDisplayText(){return"Timeline View"}getIcon(){return"calendar-with-checkmark"}onOpen(){return P(this,null,function*(){this.timeline=new Ph({target:this.contentEl,props:{navigation:!0}})})}onClose(){return P(this,null,function*(){this.timeline.$destroy()})}};var M2=gt(require("obsidian"));var Lc="google-calendar-view-month",_y=class extends M2.ItemView{constructor(e){super(e)}getViewType(){return Lc}getDisplayText(){return"Calendar Month View"}getIcon(){return"calendar-with-checkmark"}onOpen(){return P(this,null,function*(){this.calendar=new Qh({target:this.contentEl,props:{}})})}onClose(){return P(this,null,function*(){this.calendar.$destroy()})}};var U2=gt(require("obsidian"));var Pc="google-calendar-view-web",wy=class extends U2.ItemView{constructor(e){super(e)}getViewType(){return Pc}getDisplayText(){return"Calendar Web View"}getIcon(){return"calendar-with-checkmark"}onOpen(){return P(this,null,function*(){this.calendar=new Mh({target:this.contentEl})})}onClose(){return P(this,null,function*(){this.calendar.$destroy()})}};var F2=gt(require("obsidian"));var Mc="google-calendar-view-schedule",Ey=class extends F2.ItemView{constructor(e){super(e)}getViewType(){return Mc}getDisplayText(){return"Schedule View"}getIcon(){return"calendar-with-checkmark"}onOpen(){return P(this,null,function*(){this.calendar=new Xh({target:this.contentEl,props:{}})})}onClose(){return P(this,null,function*(){this.calendar.$destroy()})}};var q2=gt(require("obsidian")),Cy=class extends q2.FuzzySuggestModal{constructor(e,r,n,i,a){super(Ze.getInstance().app);this.eventList=e,this.setPlaceholder("Select an event to insert"),this.editor=r,this.start=n,this.end=i,this.word=a}getItems(){return this.eventList}getItemText(e){return`${e.summary}	`}onChooseItem(e){return P(this,null,function*(){let r=`[${e.summary}](${e.htmlLink}&cal=${e.parent.id})`;this.editor.replaceRange(r,this.start,this.end,this.word)})}};function G2(t,e){e.settings.atAnnotationEnabled!=!1&&(Uc("@today",t,e)||Uc("@tomorrow",t,e)||Uc("@yesterday",t,e)||Uc("@REGEX",t,e)||Uc("@YYYY-MM-DD",t,e))}function Uc(t,e,r){var l;let n=e.getCursor(),i=e.getCursor(),a="",s=window.moment();if(t==="@REGEX"){let u=e.getLine(n.line);if(u.length>2e3)return!1;let f=(l=u.match(/.*@([+,-])(\d+) /))!=null?l:[];if(f.length!=3||e.getCursor().ch!=f.index+f[0].length)return!1;if(i=Vi(wn({},n),{ch:n.ch-f[1].length-f[2].length-1}),i.ch<0)return;a=e.getRange(i,n),f[1]=="+"?s=window.moment().add(f[2],"day"):s=window.moment().subtract(f[2],"day")}else if(t==="@YYYY-MM-DD"){if(i=Vi(wn({},n),{ch:n.ch-t.length}),a=e.getRange(i,n),!a.startsWith("@")||a.length!="@YYYY-MM-DD".length)return!1;let u=["YYYY-MM-DD","YYYY/MM/DD","YYYY.MM.DD","YYYY MM DD","MM-DD-YYYY","MM/DD/YYYY","MM.DD.YYYY","MM DD YYYY","DD-MM-YYYY","DD/MM/YYYY","DD.MM.YYYY","DD MM YYYY"],f=["DD-MM-YYYY","DD/MM/YYYY","DD.MM.YYYY","DD MM YYYY","YYYY-MM-DD","YYYY/MM/DD","YYYY.MM.DD","YYYY MM DD","MM-DD-YYYY","MM/DD/YYYY","MM.DD.YYYY","MM DD YYYY"],d=window.moment(a.substring(1),r.settings.usDateFormat?u:f,!0);if(d.isValid())s=d;else return!1}else{if(i=Vi(wn({},n),{ch:n.ch-t.length}),i.ch<0||e.getRange(i,n)!=t)return!1;switch(t){case"@today":s=window.moment();break;case"@tomorrow":s=window.moment().add(1,"day");break;case"@yesterday":s=window.moment().add(-1,"day");break;default:return!1}}return er({startDate:s}).then(u=>{new Cy(u,e,i,n,a).open()}),!0}var V2=gt(Pa());function G9(t){return P(this,null,function*(){let e=/\[.*]\(https:\/\/www\.google\.com\/calendar\/event\?eid=(.*)&cal=(.*)\)/g,r,n=[];do r=e.exec(t),r&&n.push(r);while(r);return n.length?yield Promise.all(n.map(a=>P(this,null,function*(){if(a){let s=atob(a[1]).split(" ")[0];return yield sa(s,a[2])}}))):[]})}function H2(t){return P(this,null,function*(){let e=t.getCursor(),r=t.getValue(),n=/{{gEvent(\d?).(.*)}} /g,i,a=[];do i=n.exec(r),i&&a.push(i);while(i);if(!a.length)return;let s=yield G9(r);!s.length||a.forEach(l=>P(this,null,function*(){let u=l[1]?parseInt(l[1]):0,f=t.getCursor();if(f.ch-=3,t.getRange(f,t.getCursor())!="}} ")return!1;let d=V2.default.get(s[u],l[2],"");d===Object(d)&&(d=JSON.stringify(d)),r=r.replace(l[0],d!=null?d:""),t.setValue(r),e.ch+=d.length-l[0].length,t.setCursor(e)}))})}var K2=gt(require("obsidian"));var eu=[".anyoneCanAddSelf",".attachments",".attachments[0]",".attachments[0]fileId",".attachments[0]fileUrl",".attachments[0]iconLink",".attachments[0]mimeType",".attachments[0]title",".attendees",".attendeesOmitted",".attendees[0]",".attendees[0].additionalGuests",".attendees[0].comment",".attendees[0].displayName",".attendees[0].email",".attendees[0].id",".attendees[0].optional",".attendees[0].organizer",".attendees[0].resource",".attendees[0].responseStatus",".attendees[0].self",".colorId",".conferenceData",".conferenceData.conferenceId",".conferenceData.conferenceSolution",".conferenceData.conferenceSolution.iconUri",".conferenceData.conferenceSolution.key",".conferenceData.conferenceSolution.key.type",".conferenceData.conferenceSolution.name",".conferenceData.createRequest",".conferenceData.createRequest.conferenceSolutionKey",".conferenceData.createRequest.conferenceSolutionKey.type",".conferenceData.createRequest.requestId",".conferenceData.createRequest.status",".conferenceData.createRequest.status.statusCode",".conferenceData.entryPoints",".conferenceData.entryPoints[0]",".conferenceData.entryPoints[0].accessCode",".conferenceData.entryPoints[0].entryPointType",".conferenceData.entryPoints[0].label",".conferenceData.entryPoints[0].meetingCode",".conferenceData.entryPoints[0].passcode",".conferenceData.entryPoints[0].password",".conferenceData.entryPoints[0].pin",".conferenceData.entryPoints[0].uri",".conferenceData.notes",".conferenceData.signature",".created",".creator",".creator.displayName",".creator.email",".creator.id",".creator.self",".description",".end",".end.date",".end.dateTime",".end.timeZone",".endTimeUnspecified",".etag",".eventType",".extendedProperties",".extendedProperties.private",".extendedProperties.shared",".gadget",".gadget.display",".gadget.height",".gadget.iconLink",".gadget.link",".gadget.preferences",".gadget.title",".gadget.type",".gadget.width",".guestsCanInviteOthers",".guestsCanModify",".guestsCanSeeOtherGuests",".hangoutLink",".htmlLink",".iCalUID",".id",".kind",".location",".locked",".organizer",".organizer.displayName",".organizer.email",".organizer.id",".organizer.self",".originalStartTime",".originalStartTime.date",".originalStartTime.dateTime",".originalStartTime.timeZone",".privateCopy",".parent",".parent.kind",".parent.id",".parent.summary",".parent.description",".parent.location",".parent.timeZone",".parent.conferenceProperties",".parent.conferenceProperties.allowedConferenceSolutionTypes",".recurrence",".recurrence[0]",".recurringEventId",".reminders",".reminders.overrides",".reminders.overrides[0]",".reminders.overrides[0].method",".reminders.overrides[0].minutes",".reminders.useDefault",".sequence",".source",".source.title",".source.url",".start",".start.date",".start.dateTime",".start.timeZone",".status",".summary",".transparency",".updated",".visibility"];var by=class extends K2.EditorSuggest{constructor(e){super(e)}onTrigger(e,r){let i=r.getLine(e.line).substring(0,e.ch).match(/{{gEvent(\d)?(\S+$)/);if(i){let a="{{gEvent".length;return i[1]&&a++,{end:e,start:{ch:i.index+a,line:e.line},query:i[2]}}}getSuggestions(e){return eu.filter(r=>e.query===r.substring(0,e.query.length))}renderSuggestion(e,r){r.createEl("span",{text:e,cls:"suggestionText"})}selectSuggestion(e){if(!this.context)return;let{editor:r}=this.context;if(r.replaceRange(e,this.context.start,this.context.end),eu.filter(i=>i.startsWith(`${e}.`)).length==0){let i=r.getCursor(),a=structuredClone(i);a.ch+=2,(r.getLine(a.line).length<a.ch||r.getRange(i,a)!="}}")&&r.replaceRange("}}",i),r.setCursor(a)}}};var ak=gt(require("obsidian"));var Fc=gt(require("obsidian")),xy=class extends Fc.Modal{constructor(e,r){super(e);this.onSubmit=r}onOpen(){let{contentEl:e}=this;e.createEl("h1",{text:"Enter a name for the template"}),new Fc.Setting(e).setName("Name").addText(r=>r.onChange(n=>{this.result=n})),new Fc.Setting(e).addButton(r=>r.setButtonText("Save").setCta().onClick(()=>{this.close(),this.onSubmit(this.result)}))}onClose(){let{contentEl:e}=this;e.empty()}};function V9(t){Pn(t,"svelte-6isfqn",".optionContainer.svelte-6isfqn{display:flex;flex-direction:column}.header.svelte-6isfqn{display:grid;grid-template-columns:[first] 30% auto [last] 30%}.center.svelte-6isfqn{text-align:center}.settingsContainer.svelte-6isfqn{display:flex;flex-direction:row;flex:1 1;gap:20px}.optionItem.svelte-6isfqn{display:flex;flex-direction:row;justify-content:space-between;align-items:center}.input.svelte-6isfqn,.eventList.svelte-6isfqn,.optionList.svelte-6isfqn,.calendarList.svelte-6isfqn{width:100%;display:flex;flex-direction:column}.eventList.svelte-6isfqn,.optionList.svelte-6isfqn,.calendarList.svelte-6isfqn{padding-left:16px}button.svelte-6isfqn{align-self:center}")}function j2(t,e,r){let n=t.slice();return n[21]=e[r],n}function Y2(t,e,r){let n=t.slice();return n[21]=e[r],n}function W2(t,e,r){let n=t.slice();return n[26]=e[r],n[27]=e,n[28]=r,n}function z2(t,e,r){let n=t.slice();return n[29]=e[r],n[30]=e,n[31]=r,n}function Q2(t,e,r){let n=t.slice();return n[32]=e[r],n}function X2(t){let e,r=t[0].settings.insertTemplates,n=[];for(let i=0;i<r.length;i+=1)n[i]=J2(Q2(t,r,i));return{c(){for(let i=0;i<n.length;i+=1)n[i].c();e=mi()},m(i,a){for(let s=0;s<n.length;s+=1)n[s].m(i,a);be(i,e,a)},p(i,a){if(a[0]&1){r=i[0].settings.insertTemplates;let s;for(s=0;s<r.length;s+=1){let l=Q2(i,r,s);n[s]?n[s].p(l,a):(n[s]=J2(l),n[s].c(),n[s].m(e.parentNode,e))}for(;s<n.length;s+=1)n[s].d(1);n.length=r.length}},d(i){nn(n,i),i&&Ce(e)}}}function J2(t){let e,r=t[32].name+"",n,i;return{c(){e=le("option"),n=cr(r),e.__value=i=t[32].name,e.value=e.__value},m(a,s){be(a,e,s),ae(e,n)},p(a,s){s[0]&1&&r!==(r=a[32].name+"")&&Sn(n,r),s[0]&1&&i!==(i=a[32].name)&&(e.__value=i,e.value=e.__value)},d(a){a&&Ce(e)}}}function H9(t){let e;return{c(){e=le("span"),e.textContent="Loading..."},m(r,n){be(r,e,n)},p:At,d(r){r&&Ce(e)}}}function K9(t){let e,r=t[4],n=[];for(let i=0;i<r.length;i+=1)n[i]=Z2(z2(t,r,i));return{c(){for(let i=0;i<n.length;i+=1)n[i].c();e=mi()},m(i,a){for(let s=0;s<n.length;s+=1)n[s].m(i,a);be(i,e,a)},p(i,a){if(a[0]&144){r=i[4];let s;for(s=0;s<r.length;s+=1){let l=z2(i,r,s);n[s]?n[s].p(l,a):(n[s]=Z2(l),n[s].c(),n[s].m(e.parentNode,e))}for(;s<n.length;s+=1)n[s].d(1);n.length=r.length}},d(i){nn(n,i),i&&Ce(e)}}}function Z2(t){let e,r,n=t[29][0].summary+"",i,a,s,l,u,f,d,h;function g(){t[17].call(l,t[30],t[31])}return{c(){e=le("div"),r=le("label"),i=cr(n),s=Ne(),l=le("input"),f=Ne(),ee(r,"for",a=t[29][0].id),ee(l,"type","checkbox"),ee(l,"id",u=t[29][0].id),ee(e,"class","optionItem svelte-6isfqn")},m(y,m){be(y,e,m),ae(e,r),ae(r,i),ae(e,s),ae(e,l),l.checked=t[29][1],ae(e,f),d||(h=[Ke(l,"change",g),Ke(l,"change",t[7])],d=!0)},p(y,m){t=y,m[0]&16&&n!==(n=t[29][0].summary+"")&&Sn(i,n),m[0]&16&&a!==(a=t[29][0].id)&&ee(r,"for",a),m[0]&16&&u!==(u=t[29][0].id)&&ee(l,"id",u),m[0]&16&&(l.checked=t[29][1])},d(y){y&&Ce(e),d=!1,zr(h)}}}function j9(t){let e;return{c(){e=le("span"),e.textContent="Loading..."},m(r,n){be(r,e,n)},p:At,d(r){r&&Ce(e)}}}function Y9(t){let e,r=t[3],n=[];for(let i=0;i<r.length;i+=1)n[i]=$2(W2(t,r,i));return{c(){for(let i=0;i<n.length;i+=1)n[i].c();e=mi()},m(i,a){for(let s=0;s<n.length;s+=1)n[s].m(i,a);be(i,e,a)},p(i,a){if(a[0]&8){r=i[3];let s;for(s=0;s<r.length;s+=1){let l=W2(i,r,s);n[s]?n[s].p(l,a):(n[s]=$2(l),n[s].c(),n[s].m(e.parentNode,e))}for(;s<n.length;s+=1)n[s].d(1);n.length=r.length}},d(i){nn(n,i),i&&Ce(e)}}}function $2(t){let e,r,n=t[26][0].summary+"",i,a,s,l,u,f,d,h;function g(){t[18].call(l,t[27],t[28])}return{c(){e=le("div"),r=le("label"),i=cr(n),s=Ne(),l=le("input"),f=Ne(),ee(r,"for",a=t[26][0].id),ee(l,"type","checkbox"),ee(l,"id",u=t[26][0].id),ee(e,"class","optionItem svelte-6isfqn")},m(y,m){be(y,e,m),ae(e,r),ae(r,i),ae(e,s),ae(e,l),l.checked=t[26][1],ae(e,f),d||(h=Ke(l,"change",g),d=!0)},p(y,m){t=y,m[0]&8&&n!==(n=t[26][0].summary+"")&&Sn(i,n),m[0]&8&&a!==(a=t[26][0].id)&&ee(r,"for",a),m[0]&8&&u!==(u=t[26][0].id)&&ee(l,"id",u),m[0]&8&&(l.checked=t[26][1])},d(y){y&&Ce(e),d=!1,h()}}}function ek(t){let e,r,n,i,a,s,l,u=eu,f=[];for(let g=0;g<u.length;g+=1)f[g]=tk(Y2(t,u,g));let d=t[5],h=[];for(let g=0;g<d.length;g+=1)h[g]=rk(j2(t,d,g));return{c(){e=le("h4"),e.textContent="Table structure",r=Ne(),n=le("select");for(let g=0;g<f.length;g+=1)f[g].c();i=Ne(),a=le("div");for(let g=0;g<h.length;g+=1)h[g].c();ee(n,"name","tableOptions"),ee(n,"class","dropdown"),ee(a,"class","optionList svelte-6isfqn")},m(g,y){be(g,e,y),be(g,r,y),be(g,n,y);for(let m=0;m<f.length;m+=1)f[m].m(n,null);be(g,i,y),be(g,a,y);for(let m=0;m<h.length;m+=1)h[m].m(a,null);s||(l=Ke(n,"change",t[8]),s=!0)},p(g,y){if(y&0){u=eu;let m;for(m=0;m<u.length;m+=1){let w=Y2(g,u,m);f[m]?f[m].p(w,y):(f[m]=tk(w),f[m].c(),f[m].m(n,null))}for(;m<f.length;m+=1)f[m].d(1);f.length=u.length}if(y[0]&544){d=g[5];let m;for(m=0;m<d.length;m+=1){let w=j2(g,d,m);h[m]?h[m].p(w,y):(h[m]=rk(w),h[m].c(),h[m].m(a,null))}for(;m<h.length;m+=1)h[m].d(1);h.length=d.length}},d(g){g&&Ce(e),g&&Ce(r),g&&Ce(n),nn(f,g),g&&Ce(i),g&&Ce(a),nn(h,g),s=!1,l()}}}function tk(t){let e,r=t[21]+"",n,i;return{c(){e=le("option"),n=cr(r),e.__value=i=t[21],e.value=e.__value},m(a,s){be(a,e,s),ae(e,n)},p:At,d(a){a&&Ce(e)}}}function rk(t){let e,r,n=t[21]+"",i,a,s,l,u,f,d;function h(){return t[19](t[21])}return{c(){e=le("div"),r=le("span"),i=cr(n),a=Ne(),s=le("input"),u=Ne(),ee(s,"type","checkbox"),ee(s,"id",l=t[21]),s.checked=!0,ee(e,"class","optionItem svelte-6isfqn")},m(g,y){be(g,e,y),ae(e,r),ae(r,i),ae(e,a),ae(e,s),ae(e,u),f||(d=Ke(s,"click",h),f=!0)},p(g,y){t=g,y[0]&32&&n!==(n=t[21]+"")&&Sn(i,n),y[0]&32&&l!==(l=t[21])&&ee(s,"id",l)},d(g){g&&Ce(e),f=!1,d()}}}function W9(t){let e,r,n,i,a,s,l,u,f,d,h,g,y,m,w,_,E,b,k,O,R,B,ne,M,G,re,se,ye,Ae,Je,De,me,te,Fe,et,ct,$e,ft,ue=t[0].settings.insertTemplates.length&&X2(t);function Dt(L,j){return L[4]?K9:H9}let Bt=Dt(t,[-1,-1]),rt=Bt(t);function nt(L,j){return L[3]?Y9:j9}let dt=nt(t,[-1,-1]),I=dt(t),D=t[2]=="table"&&ek(t);return{c(){e=le("div"),r=le("div"),n=le("select"),i=le("option"),i.textContent="None",ue&&ue.c(),a=Ne(),s=le("h1"),s.textContent="Insert Options",l=Ne(),u=le("button"),u.textContent="Save as template",f=Ne(),d=le("hr"),h=Ne(),g=le("div"),y=le("div"),m=le("label"),m.textContent="Insert type",w=Ne(),_=le("select"),E=le("option"),E.textContent="Bullet",k=le("option"),k.textContent="Table",O=Ne(),R=le("div"),B=le("label"),B.textContent="Insert date",ne=Ne(),M=le("input"),re=Ne(),se=le("h4"),se.textContent="Calendars",ye=Ne(),Ae=le("div"),rt.c(),Je=Ne(),De=le("h4"),De.textContent="Events",me=Ne(),te=le("div"),I.c(),Fe=Ne(),D&&D.c(),et=Ne(),ct=le("button"),ct.textContent="Insert",i.__value="None",i.value=i.__value,ee(n,"class","dropdown left"),t[1]===void 0&&Ml(()=>t[15].call(n)),ee(s,"class","center svelte-6isfqn"),ee(u,"class","right svelte-6isfqn"),ee(r,"class","header svelte-6isfqn"),ee(m,"for","insertType"),E.selected=b=!0,E.__value="bullet",E.value=E.__value,k.__value="table",k.value=k.__value,ee(_,"class","dropdown"),t[2]===void 0&&Ml(()=>t[16].call(_)),ee(y,"class","input svelte-6isfqn"),ee(B,"for","date"),ee(M,"type","date"),ee(M,"name","date"),ee(M,"id","date"),M.value=G=window.moment().format("YYYY-MM-DD"),ee(R,"class","input svelte-6isfqn"),ee(g,"class","settingsContainer svelte-6isfqn"),ee(Ae,"class","calendarList svelte-6isfqn"),ee(te,"class","eventList svelte-6isfqn"),ee(ct,"class","svelte-6isfqn"),ee(e,"class","optionContainer svelte-6isfqn")},m(L,j){be(L,e,j),ae(e,r),ae(r,n),ae(n,i),ue&&ue.m(n,null),_c(n,t[1]),ae(r,a),ae(r,s),ae(r,l),ae(r,u),ae(e,f),ae(e,d),ae(e,h),ae(e,g),ae(g,y),ae(y,m),ae(y,w),ae(y,_),ae(_,E),ae(_,k),_c(_,t[2]),ae(g,O),ae(g,R),ae(R,B),ae(R,ne),ae(R,M),ae(e,re),ae(e,se),ae(e,ye),ae(e,Ae),rt.m(Ae,null),ae(e,Je),ae(e,De),ae(e,me),ae(e,te),I.m(te,null),ae(e,Fe),D&&D.m(e,null),ae(e,et),ae(e,ct),$e||(ft=[Ke(n,"change",t[15]),Ke(n,"change",t[12]),Ke(u,"click",t[11]),Ke(_,"change",t[16]),Ke(M,"change",t[10]),Ke(ct,"click",t[6])],$e=!0)},p(L,j){L[0].settings.insertTemplates.length?ue?ue.p(L,j):(ue=X2(L),ue.c(),ue.m(n,null)):ue&&(ue.d(1),ue=null),j[0]&3&&_c(n,L[1]),j[0]&4&&_c(_,L[2]),Bt===(Bt=Dt(L,j))&&rt?rt.p(L,j):(rt.d(1),rt=Bt(L),rt&&(rt.c(),rt.m(Ae,null))),dt===(dt=nt(L,j))&&I?I.p(L,j):(I.d(1),I=dt(L),I&&(I.c(),I.m(te,null))),L[2]=="table"?D?D.p(L,j):(D=ek(L),D.c(),D.m(e,et)):D&&(D.d(1),D=null)},i:At,o:At,d(L){L&&Ce(e),ue&&ue.d(),rt.d(),I.d(),D&&D.d(),$e=!1,zr(ft)}}}function z9(t,e,r){let{onSubmit:n}=e,{insertEventsModal:i}=e,a=Ze.getInstance(),s,l,u,f,d=[".summary",".description"];mo(()=>_r(void 0,void 0,void 0,function*(){let M=yield Or();r(4,f=M.map(re=>[re,!0]));let G=yield er();r(3,u=G.map(re=>[re,!0]))}));let h=()=>{let M=u.filter(G=>G[1]).map(G=>G[0]);n(l,M,d,i)},g=M=>{u.forEach(G=>{G[0].parent.id==M.target.id&&(G[1]=M.target.checked)}),r(3,u)},y=M=>{let G=M.target.value;G=="on"&&(G=M.target.id),d.contains(G)?d.remove(G):d.push(G),r(5,d)},m=M=>{d.contains(M)&&d.remove(M),r(5,d)},w=M=>_r(void 0,void 0,void 0,function*(){let G=yield Or();r(4,f=G.map(se=>[se,!0]));let re=yield er({startDate:window.moment(M.target.value).local()});r(3,u=re.map(se=>[se,!0])),r(3,u)}),_=()=>f.filter(M=>M[1]).map(M=>M[0].id),E=()=>{new xy(app,M=>{let G={name:M,insertType:l,tableOptions:d,calendarList:_()};r(0,a.settings.insertTemplates=[...a.settings.insertTemplates,G],a),a.saveSettings(),ot("Added template")}).open()},b=M=>{let G=M.target.value;if(G=="None")return;let se=a.settings.insertTemplates.find(ye=>ye.name==G);!se||(r(2,l=se.insertType),r(5,d=se.tableOptions),f.forEach(ye=>ye[1]=se.calendarList.contains(ye[0].id)),u.forEach(ye=>ye[1]=se.calendarList.contains(ye[0].parent.id)),r(4,f),r(3,u))};function k(){s=jm(this),r(1,s),r(0,a)}function O(){l=jm(this),r(2,l)}function R(M,G){M[G][1]=this.checked,r(4,f)}function B(M,G){M[G][1]=this.checked,r(3,u)}let ne=M=>m(M);return t.$$set=M=>{"onSubmit"in M&&r(13,n=M.onSubmit),"insertEventsModal"in M&&r(14,i=M.insertEventsModal)},[a,s,l,u,f,d,h,g,y,m,w,E,b,n,i,k,O,R,B,ne]}var nk=class extends sn{constructor(e){super();hn(this,e,z9,W9,dn,{onSubmit:13,insertEventsModal:14},V9,[-1,-1])}},ik=nk;var sk=gt(Pa()),Ty=class extends ak.Modal{constructor(e){super(Ze.getInstance().app);this.editor=e}onOpen(){return P(this,null,function*(){let{contentEl:e}=this;new ik({target:e,props:{onSubmit:this.onSubmit,insertEventsModal:this}})})}onClose(){let{contentEl:e}=this;e.empty()}onSubmit(e,r,n,i){let a="",s="",l="";e=="bullet"?(r.forEach(u=>{l+=`
- ${`[${u.summary}](${u.htmlLink}&cal=${u.parent.id})`}`}),i.editor.replaceRange(l,i.editor.getCursor())):e=="table"&&(n.forEach(u=>{u=u.split(".").join(" ").toLocaleUpperCase(),a+=`| ${u} `,s+="| --- "}),a+=`|
`,s+=`|
`,r.forEach(u=>{n.forEach(f=>{let d=sk.default.get(u,f.substring(1),"");f==".summary"&&(d=`[${d}](${u.htmlLink}&cal=${u.parent.id})`),f.startsWith(".start")&&!f.contains("timeZone")&&(d=(u.start.date?window.moment(u.start.date):window.moment(u.start.dateTime)).format("YYYY-MM-DD HH:mm")),f.startsWith(".end")&&!f.contains("timeZone")&&(d=(u.start.date?window.moment(u.end.date):window.moment(u.end.dateTime)).format("YYYY-MM-DD HH:mm")),l+=`| ${d} `}),l+=`|
`}),i.editor.replaceRange(a+s+l,i.editor.getCursor())),i.close()}};var Sy=class{constructor(){}make(){return{getCalendars:()=>Or(),getEvent:(e,r)=>sa(e,r),getEvents:e=>er(e),createEvent:e=>Hl(e),deleteEvent:(e,r=!1)=>Gl(e,r),updateEvent:(e,r=!1)=>Vl(e,r)}}};var Iy=gt(require("obsidian"));var qc=gt(Pa());function ok(){return{async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}var tu=ok();function Q9(t){tu=t}var lk=/[&<>"']/,X9=new RegExp(lk.source,"g"),uk=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,J9=new RegExp(uk.source,"g"),Z9={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},ck=t=>Z9[t];function ln(t,e){if(e){if(lk.test(t))return t.replace(X9,ck)}else if(uk.test(t))return t.replace(J9,ck);return t}var $9=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function fk(t){return t.replace($9,(e,r)=>(r=r.toLowerCase(),r==="colon"?":":r.charAt(0)==="#"?r.charAt(1)==="x"?String.fromCharCode(parseInt(r.substring(2),16)):String.fromCharCode(+r.substring(1)):""))}var eV=/(^|[^\[])\^/g;function tr(t,e){t=typeof t=="string"?t:t.source,e=e||"";let r={replace:(n,i)=>(i=i.source||i,i=i.replace(eV,"$1"),t=t.replace(n,i),r),getRegex:()=>new RegExp(t,e)};return r}var tV=/[^\w:]/g,rV=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function dk(t,e,r){if(t){let n;try{n=decodeURIComponent(fk(r)).replace(tV,"").toLowerCase()}catch(i){return null}if(n.indexOf("javascript:")===0||n.indexOf("vbscript:")===0||n.indexOf("data:")===0)return null}e&&!rV.test(r)&&(r=sV(e,r));try{r=encodeURI(r).replace(/%25/g,"%")}catch(n){return null}return r}var Zh={},nV=/^[^:]+:\/*[^/]*$/,iV=/^([^:]+:)[\s\S]*$/,aV=/^([^:]+:\/*[^/]*)[\s\S]*$/;function sV(t,e){Zh[" "+t]||(nV.test(t)?Zh[" "+t]=t+"/":Zh[" "+t]=ep(t,"/",!0)),t=Zh[" "+t];let r=t.indexOf(":")===-1;return e.substring(0,2)==="//"?r?e:t.replace(iV,"$1")+e:e.charAt(0)==="/"?r?e:t.replace(aV,"$1")+e:t+e}var $h={exec:function(){}};function Mi(t){let e=1,r,n;for(;e<arguments.length;e++){r=arguments[e];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}function hk(t,e){let r=t.replace(/\|/g,(a,s,l)=>{let u=!1,f=s;for(;--f>=0&&l[f]==="\\";)u=!u;return u?"|":" |"}),n=r.split(/ \|/),i=0;if(n[0].trim()||n.shift(),n.length>0&&!n[n.length-1].trim()&&n.pop(),n.length>e)n.splice(e);else for(;n.length<e;)n.push("");for(;i<n.length;i++)n[i]=n[i].trim().replace(/\\\|/g,"|");return n}function ep(t,e,r){let n=t.length;if(n===0)return"";let i=0;for(;i<n;){let a=t.charAt(n-i-1);if(a===e&&!r)i++;else if(a!==e&&r)i++;else break}return t.slice(0,n-i)}function oV(t,e){if(t.indexOf(e[1])===-1)return-1;let r=t.length,n=0,i=0;for(;i<r;i++)if(t[i]==="\\")i++;else if(t[i]===e[0])n++;else if(t[i]===e[1]&&(n--,n<0))return i;return-1}function pk(t){t&&t.sanitize&&!t.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function gk(t,e){if(e<1)return"";let r="";for(;e>1;)e&1&&(r+=t),e>>=1,t+=t;return r+t}function mk(t,e,r,n){let i=e.href,a=e.title?ln(e.title):null,s=t[1].replace(/\\([\[\]])/g,"$1");if(t[0].charAt(0)!=="!"){n.state.inLink=!0;let l={type:"link",raw:r,href:i,title:a,text:s,tokens:n.inlineTokens(s)};return n.state.inLink=!1,l}return{type:"image",raw:r,href:i,title:a,text:ln(s)}}function lV(t,e){let r=t.match(/^(\s+)(?:```)/);if(r===null)return e;let n=r[1];return e.split(`
`).map(i=>{let a=i.match(/^\s+/);if(a===null)return i;let[s]=a;return s.length>=n.length?i.slice(n.length):i}).join(`
`)}var tp=class{constructor(e){this.options=e||tu}space(e){let r=this.rules.block.newline.exec(e);if(r&&r[0].length>0)return{type:"space",raw:r[0]}}code(e){let r=this.rules.block.code.exec(e);if(r){let n=r[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:r[0],codeBlockStyle:"indented",text:this.options.pedantic?n:ep(n,`
`)}}}fences(e){let r=this.rules.block.fences.exec(e);if(r){let n=r[0],i=lV(n,r[3]||"");return{type:"code",raw:n,lang:r[2]?r[2].trim().replace(this.rules.inline._escapes,"$1"):r[2],text:i}}}heading(e){let r=this.rules.block.heading.exec(e);if(r){let n=r[2].trim();if(/#$/.test(n)){let i=ep(n,"#");(this.options.pedantic||!i||/ $/.test(i))&&(n=i.trim())}return{type:"heading",raw:r[0],depth:r[1].length,text:n,tokens:this.lexer.inline(n)}}}hr(e){let r=this.rules.block.hr.exec(e);if(r)return{type:"hr",raw:r[0]}}blockquote(e){let r=this.rules.block.blockquote.exec(e);if(r){let n=r[0].replace(/^ *>[ \t]?/gm,""),i=this.lexer.state.top;this.lexer.state.top=!0;let a=this.lexer.blockTokens(n);return this.lexer.state.top=i,{type:"blockquote",raw:r[0],tokens:a,text:n}}}list(e){let r=this.rules.block.list.exec(e);if(r){let n,i,a,s,l,u,f,d,h,g,y,m,w=r[1].trim(),_=w.length>1,E={type:"list",raw:"",ordered:_,start:_?+w.slice(0,-1):"",loose:!1,items:[]};w=_?`\\d{1,9}\\${w.slice(-1)}`:`\\${w}`,this.options.pedantic&&(w=_?w:"[*+-]");let b=new RegExp(`^( {0,3}${w})((?:[	 ][^\\n]*)?(?:\\n|$))`);for(;e&&(m=!1,!(!(r=b.exec(e))||this.rules.block.hr.test(e)));){if(n=r[0],e=e.substring(n.length),d=r[2].split(`
`,1)[0],h=e.split(`
`,1)[0],this.options.pedantic?(s=2,y=d.trimLeft()):(s=r[2].search(/[^ ]/),s=s>4?1:s,y=d.slice(s),s+=r[1].length),u=!1,!d&&/^ *$/.test(h)&&(n+=h+`
`,e=e.substring(h.length+1),m=!0),!m){let O=new RegExp(`^ {0,${Math.min(3,s-1)}}(?:[*+-]|\\d{1,9}[.)])((?: [^\\n]*)?(?:\\n|$))`),R=new RegExp(`^ {0,${Math.min(3,s-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),B=new RegExp(`^ {0,${Math.min(3,s-1)}}(?:\`\`\`|~~~)`),ne=new RegExp(`^ {0,${Math.min(3,s-1)}}#`);for(;e&&(g=e.split(`
`,1)[0],d=g,this.options.pedantic&&(d=d.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!(B.test(d)||ne.test(d)||O.test(d)||R.test(e)));){if(d.search(/[^ ]/)>=s||!d.trim())y+=`
`+d.slice(s);else if(!u)y+=`
`+d;else break;!u&&!d.trim()&&(u=!0),n+=g+`
`,e=e.substring(g.length+1)}}E.loose||(f?E.loose=!0:/\n *\n *$/.test(n)&&(f=!0)),this.options.gfm&&(i=/^\[[ xX]\] /.exec(y),i&&(a=i[0]!=="[ ] ",y=y.replace(/^\[[ xX]\] +/,""))),E.items.push({type:"list_item",raw:n,task:!!i,checked:a,loose:!1,text:y}),E.raw+=n}E.items[E.items.length-1].raw=n.trimRight(),E.items[E.items.length-1].text=y.trimRight(),E.raw=E.raw.trimRight();let k=E.items.length;for(l=0;l<k;l++)if(this.lexer.state.top=!1,E.items[l].tokens=this.lexer.blockTokens(E.items[l].text,[]),!E.loose){let O=E.items[l].tokens.filter(B=>B.type==="space"),R=O.length>0&&O.some(B=>/\n.*\n/.test(B.raw));E.loose=R}if(E.loose)for(l=0;l<k;l++)E.items[l].loose=!0;return E}}html(e){let r=this.rules.block.html.exec(e);if(r){let n={type:"html",raw:r[0],pre:!this.options.sanitizer&&(r[1]==="pre"||r[1]==="script"||r[1]==="style"),text:r[0]};if(this.options.sanitize){let i=this.options.sanitizer?this.options.sanitizer(r[0]):ln(r[0]);n.type="paragraph",n.text=i,n.tokens=this.lexer.inline(i)}return n}}def(e){let r=this.rules.block.def.exec(e);if(r){let n=r[1].toLowerCase().replace(/\s+/g," "),i=r[2]?r[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline._escapes,"$1"):"",a=r[3]?r[3].substring(1,r[3].length-1).replace(this.rules.inline._escapes,"$1"):r[3];return{type:"def",tag:n,raw:r[0],href:i,title:a}}}table(e){let r=this.rules.block.table.exec(e);if(r){let n={type:"table",header:hk(r[1]).map(i=>({text:i})),align:r[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:r[3]&&r[3].trim()?r[3].replace(/\n[ \t]*$/,"").split(`
`):[]};if(n.header.length===n.align.length){n.raw=r[0];let i=n.align.length,a,s,l,u;for(a=0;a<i;a++)/^ *-+: *$/.test(n.align[a])?n.align[a]="right":/^ *:-+: *$/.test(n.align[a])?n.align[a]="center":/^ *:-+ *$/.test(n.align[a])?n.align[a]="left":n.align[a]=null;for(i=n.rows.length,a=0;a<i;a++)n.rows[a]=hk(n.rows[a],n.header.length).map(f=>({text:f}));for(i=n.header.length,s=0;s<i;s++)n.header[s].tokens=this.lexer.inline(n.header[s].text);for(i=n.rows.length,s=0;s<i;s++)for(u=n.rows[s],l=0;l<u.length;l++)u[l].tokens=this.lexer.inline(u[l].text);return n}}}lheading(e){let r=this.rules.block.lheading.exec(e);if(r)return{type:"heading",raw:r[0],depth:r[2].charAt(0)==="="?1:2,text:r[1],tokens:this.lexer.inline(r[1])}}paragraph(e){let r=this.rules.block.paragraph.exec(e);if(r){let n=r[1].charAt(r[1].length-1)===`
`?r[1].slice(0,-1):r[1];return{type:"paragraph",raw:r[0],text:n,tokens:this.lexer.inline(n)}}}text(e){let r=this.rules.block.text.exec(e);if(r)return{type:"text",raw:r[0],text:r[0],tokens:this.lexer.inline(r[0])}}escape(e){let r=this.rules.inline.escape.exec(e);if(r)return{type:"escape",raw:r[0],text:ln(r[1])}}tag(e){let r=this.rules.inline.tag.exec(e);if(r)return!this.lexer.state.inLink&&/^<a /i.test(r[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(r[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(r[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(r[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:r[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(r[0]):ln(r[0]):r[0]}}link(e){let r=this.rules.inline.link.exec(e);if(r){let n=r[2].trim();if(!this.options.pedantic&&/^</.test(n)){if(!/>$/.test(n))return;let s=ep(n.slice(0,-1),"\\");if((n.length-s.length)%2==0)return}else{let s=oV(r[2],"()");if(s>-1){let u=(r[0].indexOf("!")===0?5:4)+r[1].length+s;r[2]=r[2].substring(0,s),r[0]=r[0].substring(0,u).trim(),r[3]=""}}let i=r[2],a="";if(this.options.pedantic){let s=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(i);s&&(i=s[1],a=s[3])}else a=r[3]?r[3].slice(1,-1):"";return i=i.trim(),/^</.test(i)&&(this.options.pedantic&&!/>$/.test(n)?i=i.slice(1):i=i.slice(1,-1)),mk(r,{href:i&&i.replace(this.rules.inline._escapes,"$1"),title:a&&a.replace(this.rules.inline._escapes,"$1")},r[0],this.lexer)}}reflink(e,r){let n;if((n=this.rules.inline.reflink.exec(e))||(n=this.rules.inline.nolink.exec(e))){let i=(n[2]||n[1]).replace(/\s+/g," ");if(i=r[i.toLowerCase()],!i){let a=n[0].charAt(0);return{type:"text",raw:a,text:a}}return mk(n,i,n[0],this.lexer)}}emStrong(e,r,n=""){let i=this.rules.inline.emStrong.lDelim.exec(e);if(!i||i[3]&&n.match(/[\p{L}\p{N}]/u))return;let a=i[1]||i[2]||"";if(!a||a&&(n===""||this.rules.inline.punctuation.exec(n))){let s=i[0].length-1,l,u,f=s,d=0,h=i[0][0]==="*"?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(h.lastIndex=0,r=r.slice(-1*e.length+s);(i=h.exec(r))!=null;){if(l=i[1]||i[2]||i[3]||i[4]||i[5]||i[6],!l)continue;if(u=l.length,i[3]||i[4]){f+=u;continue}else if((i[5]||i[6])&&s%3&&!((s+u)%3)){d+=u;continue}if(f-=u,f>0)continue;u=Math.min(u,u+f+d);let g=e.slice(0,s+i.index+(i[0].length-l.length)+u);if(Math.min(s,u)%2){let m=g.slice(1,-1);return{type:"em",raw:g,text:m,tokens:this.lexer.inlineTokens(m)}}let y=g.slice(2,-2);return{type:"strong",raw:g,text:y,tokens:this.lexer.inlineTokens(y)}}}}codespan(e){let r=this.rules.inline.code.exec(e);if(r){let n=r[2].replace(/\n/g," "),i=/[^ ]/.test(n),a=/^ /.test(n)&&/ $/.test(n);return i&&a&&(n=n.substring(1,n.length-1)),n=ln(n,!0),{type:"codespan",raw:r[0],text:n}}}br(e){let r=this.rules.inline.br.exec(e);if(r)return{type:"br",raw:r[0]}}del(e){let r=this.rules.inline.del.exec(e);if(r)return{type:"del",raw:r[0],text:r[2],tokens:this.lexer.inlineTokens(r[2])}}autolink(e,r){let n=this.rules.inline.autolink.exec(e);if(n){let i,a;return n[2]==="@"?(i=ln(this.options.mangle?r(n[1]):n[1]),a="mailto:"+i):(i=ln(n[1]),a=i),{type:"link",raw:n[0],text:i,href:a,tokens:[{type:"text",raw:i,text:i}]}}}url(e,r){let n;if(n=this.rules.inline.url.exec(e)){let i,a;if(n[2]==="@")i=ln(this.options.mangle?r(n[0]):n[0]),a="mailto:"+i;else{let s;do s=n[0],n[0]=this.rules.inline._backpedal.exec(n[0])[0];while(s!==n[0]);i=ln(n[0]),n[1]==="www."?a="http://"+n[0]:a=n[0]}return{type:"link",raw:n[0],text:i,href:a,tokens:[{type:"text",raw:i,text:i}]}}}inlineText(e,r){let n=this.rules.inline.text.exec(e);if(n){let i;return this.lexer.state.inRawBlock?i=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(n[0]):ln(n[0]):n[0]:i=ln(this.options.smartypants?r(n[0]):n[0]),{type:"text",raw:n[0],text:i}}}},Ve={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:$h,lheading:/^((?:.|\n(?!\n))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/};Ve._label=/(?!\s*\])(?:\\.|[^\[\]\\])+/;Ve._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/;Ve.def=tr(Ve.def).replace("label",Ve._label).replace("title",Ve._title).getRegex();Ve.bullet=/(?:[*+-]|\d{1,9}[.)])/;Ve.listItemStart=tr(/^( *)(bull) */).replace("bull",Ve.bullet).getRegex();Ve.list=tr(Ve.list).replace(/bull/g,Ve.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+Ve.def.source+")").getRegex();Ve._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul";Ve._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/;Ve.html=tr(Ve.html,"i").replace("comment",Ve._comment).replace("tag",Ve._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex();Ve.paragraph=tr(Ve._paragraph).replace("hr",Ve.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Ve._tag).getRegex();Ve.blockquote=tr(Ve.blockquote).replace("paragraph",Ve.paragraph).getRegex();Ve.normal=Mi({},Ve);Ve.gfm=Mi({},Ve.normal,{table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"});Ve.gfm.table=tr(Ve.gfm.table).replace("hr",Ve.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Ve._tag).getRegex();Ve.gfm.paragraph=tr(Ve._paragraph).replace("hr",Ve.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",Ve.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Ve._tag).getRegex();Ve.pedantic=Mi({},Ve.normal,{html:tr(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",Ve._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:$h,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:tr(Ve.normal._paragraph).replace("hr",Ve.hr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",Ve.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});var Oe={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:$h,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/^(?:[^_*\\]|\\.)*?\_\_(?:[^_*\\]|\\.)*?\*(?:[^_*\\]|\\.)*?(?=\_\_)|(?:[^*\\]|\\.)+(?=[^*])|[punct_](\*+)(?=[\s]|$)|(?:[^punct*_\s\\]|\\.)(\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|(?:[^punct*_\s\\]|\\.)(\*+)(?=[^punct*_\s])/,rDelimUnd:/^(?:[^_*\\]|\\.)*?\*\*(?:[^_*\\]|\\.)*?\_(?:[^_*\\]|\\.)*?(?=\*\*)|(?:[^_\\]|\\.)+(?=[^_])|[punct*](\_+)(?=[\s]|$)|(?:[^punct*_\s\\]|\\.)(\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:$h,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};Oe._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~";Oe.punctuation=tr(Oe.punctuation).replace(/punctuation/g,Oe._punctuation).getRegex();Oe.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g;Oe.escapedEmSt=/(?:^|[^\\])(?:\\\\)*\\[*_]/g;Oe._comment=tr(Ve._comment).replace("(?:-->|$)","-->").getRegex();Oe.emStrong.lDelim=tr(Oe.emStrong.lDelim).replace(/punct/g,Oe._punctuation).getRegex();Oe.emStrong.rDelimAst=tr(Oe.emStrong.rDelimAst,"g").replace(/punct/g,Oe._punctuation).getRegex();Oe.emStrong.rDelimUnd=tr(Oe.emStrong.rDelimUnd,"g").replace(/punct/g,Oe._punctuation).getRegex();Oe._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g;Oe._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/;Oe._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/;Oe.autolink=tr(Oe.autolink).replace("scheme",Oe._scheme).replace("email",Oe._email).getRegex();Oe._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/;Oe.tag=tr(Oe.tag).replace("comment",Oe._comment).replace("attribute",Oe._attribute).getRegex();Oe._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/;Oe._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/;Oe._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/;Oe.link=tr(Oe.link).replace("label",Oe._label).replace("href",Oe._href).replace("title",Oe._title).getRegex();Oe.reflink=tr(Oe.reflink).replace("label",Oe._label).replace("ref",Ve._label).getRegex();Oe.nolink=tr(Oe.nolink).replace("ref",Ve._label).getRegex();Oe.reflinkSearch=tr(Oe.reflinkSearch,"g").replace("reflink",Oe.reflink).replace("nolink",Oe.nolink).getRegex();Oe.normal=Mi({},Oe);Oe.pedantic=Mi({},Oe.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:tr(/^!?\[(label)\]\((.*?)\)/).replace("label",Oe._label).getRegex(),reflink:tr(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Oe._label).getRegex()});Oe.gfm=Mi({},Oe.normal,{escape:tr(Oe.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/});Oe.gfm.url=tr(Oe.gfm.url,"i").replace("email",Oe.gfm._extended_email).getRegex();Oe.breaks=Mi({},Oe.gfm,{br:tr(Oe.br).replace("{2,}","*").getRegex(),text:tr(Oe.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});function uV(t){return t.replace(/---/g,"\u2014").replace(/--/g,"\u2013").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1\u2018").replace(/'/g,"\u2019").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1\u201C").replace(/"/g,"\u201D").replace(/\.{3}/g,"\u2026")}function yk(t){let e="",r,n,i=t.length;for(r=0;r<i;r++)n=t.charCodeAt(r),Math.random()>.5&&(n="x"+n.toString(16)),e+="&#"+n+";";return e}var ha=class{constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||tu,this.options.tokenizer=this.options.tokenizer||new tp,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let r={block:Ve.normal,inline:Oe.normal};this.options.pedantic?(r.block=Ve.pedantic,r.inline=Oe.pedantic):this.options.gfm&&(r.block=Ve.gfm,this.options.breaks?r.inline=Oe.breaks:r.inline=Oe.gfm),this.tokenizer.rules=r}static get rules(){return{block:Ve,inline:Oe}}static lex(e,r){return new ha(r).lex(e)}static lexInline(e,r){return new ha(r).inlineTokens(e)}lex(e){e=e.replace(/\r\n|\r/g,`
`),this.blockTokens(e,this.tokens);let r;for(;r=this.inlineQueue.shift();)this.inlineTokens(r.src,r.tokens);return this.tokens}blockTokens(e,r=[]){this.options.pedantic?e=e.replace(/\t/g,"    ").replace(/^ +$/gm,""):e=e.replace(/^( *)(\t+)/gm,(l,u,f)=>u+"    ".repeat(f.length));let n,i,a,s;for(;e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(l=>(n=l.call({lexer:this},e,r))?(e=e.substring(n.raw.length),r.push(n),!0):!1))){if(n=this.tokenizer.space(e)){e=e.substring(n.raw.length),n.raw.length===1&&r.length>0?r[r.length-1].raw+=`
`:r.push(n);continue}if(n=this.tokenizer.code(e)){e=e.substring(n.raw.length),i=r[r.length-1],i&&(i.type==="paragraph"||i.type==="text")?(i.raw+=`
`+n.raw,i.text+=`
`+n.text,this.inlineQueue[this.inlineQueue.length-1].src=i.text):r.push(n);continue}if(n=this.tokenizer.fences(e)){e=e.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.heading(e)){e=e.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.hr(e)){e=e.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.blockquote(e)){e=e.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.list(e)){e=e.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.html(e)){e=e.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.def(e)){e=e.substring(n.raw.length),i=r[r.length-1],i&&(i.type==="paragraph"||i.type==="text")?(i.raw+=`
`+n.raw,i.text+=`
`+n.raw,this.inlineQueue[this.inlineQueue.length-1].src=i.text):this.tokens.links[n.tag]||(this.tokens.links[n.tag]={href:n.href,title:n.title});continue}if(n=this.tokenizer.table(e)){e=e.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.lheading(e)){e=e.substring(n.raw.length),r.push(n);continue}if(a=e,this.options.extensions&&this.options.extensions.startBlock){let l=1/0,u=e.slice(1),f;this.options.extensions.startBlock.forEach(function(d){f=d.call({lexer:this},u),typeof f=="number"&&f>=0&&(l=Math.min(l,f))}),l<1/0&&l>=0&&(a=e.substring(0,l+1))}if(this.state.top&&(n=this.tokenizer.paragraph(a))){i=r[r.length-1],s&&i.type==="paragraph"?(i.raw+=`
`+n.raw,i.text+=`
`+n.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):r.push(n),s=a.length!==e.length,e=e.substring(n.raw.length);continue}if(n=this.tokenizer.text(e)){e=e.substring(n.raw.length),i=r[r.length-1],i&&i.type==="text"?(i.raw+=`
`+n.raw,i.text+=`
`+n.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):r.push(n);continue}if(e){let l="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(l);break}else throw new Error(l)}}return this.state.top=!0,r}inline(e,r=[]){return this.inlineQueue.push({src:e,tokens:r}),r}inlineTokens(e,r=[]){let n,i,a,s=e,l,u,f;if(this.tokens.links){let d=Object.keys(this.tokens.links);if(d.length>0)for(;(l=this.tokenizer.rules.inline.reflinkSearch.exec(s))!=null;)d.includes(l[0].slice(l[0].lastIndexOf("[")+1,-1))&&(s=s.slice(0,l.index)+"["+gk("a",l[0].length-2)+"]"+s.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(l=this.tokenizer.rules.inline.blockSkip.exec(s))!=null;)s=s.slice(0,l.index)+"["+gk("a",l[0].length-2)+"]"+s.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(l=this.tokenizer.rules.inline.escapedEmSt.exec(s))!=null;)s=s.slice(0,l.index+l[0].length-2)+"++"+s.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex),this.tokenizer.rules.inline.escapedEmSt.lastIndex--;for(;e;)if(u||(f=""),u=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(d=>(n=d.call({lexer:this},e,r))?(e=e.substring(n.raw.length),r.push(n),!0):!1))){if(n=this.tokenizer.escape(e)){e=e.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.tag(e)){e=e.substring(n.raw.length),i=r[r.length-1],i&&n.type==="text"&&i.type==="text"?(i.raw+=n.raw,i.text+=n.text):r.push(n);continue}if(n=this.tokenizer.link(e)){e=e.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(n.raw.length),i=r[r.length-1],i&&n.type==="text"&&i.type==="text"?(i.raw+=n.raw,i.text+=n.text):r.push(n);continue}if(n=this.tokenizer.emStrong(e,s,f)){e=e.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.codespan(e)){e=e.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.br(e)){e=e.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.del(e)){e=e.substring(n.raw.length),r.push(n);continue}if(n=this.tokenizer.autolink(e,yk)){e=e.substring(n.raw.length),r.push(n);continue}if(!this.state.inLink&&(n=this.tokenizer.url(e,yk))){e=e.substring(n.raw.length),r.push(n);continue}if(a=e,this.options.extensions&&this.options.extensions.startInline){let d=1/0,h=e.slice(1),g;this.options.extensions.startInline.forEach(function(y){g=y.call({lexer:this},h),typeof g=="number"&&g>=0&&(d=Math.min(d,g))}),d<1/0&&d>=0&&(a=e.substring(0,d+1))}if(n=this.tokenizer.inlineText(a,uV)){e=e.substring(n.raw.length),n.raw.slice(-1)!=="_"&&(f=n.raw.slice(-1)),u=!0,i=r[r.length-1],i&&i.type==="text"?(i.raw+=n.raw,i.text+=n.text):r.push(n);continue}if(e){let d="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(d);break}else throw new Error(d)}}return r}},rp=class{constructor(e){this.options=e||tu}code(e,r,n){let i=(r||"").match(/\S*/)[0];if(this.options.highlight){let a=this.options.highlight(e,i);a!=null&&a!==e&&(n=!0,e=a)}return e=e.replace(/\n$/,"")+`
`,i?'<pre><code class="'+this.options.langPrefix+ln(i)+'">'+(n?e:ln(e,!0))+`</code></pre>
`:"<pre><code>"+(n?e:ln(e,!0))+`</code></pre>
`}blockquote(e){return`<blockquote>
${e}</blockquote>
`}html(e){return e}heading(e,r,n,i){if(this.options.headerIds){let a=this.options.headerPrefix+i.slug(n);return`<h${r} id="${a}">${e}</h${r}>
`}return`<h${r}>${e}</h${r}>
`}hr(){return this.options.xhtml?`<hr/>
`:`<hr>
`}list(e,r,n){let i=r?"ol":"ul",a=r&&n!==1?' start="'+n+'"':"";return"<"+i+a+`>
`+e+"</"+i+`>
`}listitem(e){return`<li>${e}</li>
`}checkbox(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "}paragraph(e){return`<p>${e}</p>
`}table(e,r){return r&&(r=`<tbody>${r}</tbody>`),`<table>
<thead>
`+e+`</thead>
`+r+`</table>
`}tablerow(e){return`<tr>
${e}</tr>
`}tablecell(e,r){let n=r.header?"th":"td";return(r.align?`<${n} align="${r.align}">`:`<${n}>`)+e+`</${n}>
`}strong(e){return`<strong>${e}</strong>`}em(e){return`<em>${e}</em>`}codespan(e){return`<code>${e}</code>`}br(){return this.options.xhtml?"<br/>":"<br>"}del(e){return`<del>${e}</del>`}link(e,r,n){if(e=dk(this.options.sanitize,this.options.baseUrl,e),e===null)return n;let i='<a href="'+e+'"';return r&&(i+=' title="'+r+'"'),i+=">"+n+"</a>",i}image(e,r,n){if(e=dk(this.options.sanitize,this.options.baseUrl,e),e===null)return n;let i=`<img src="${e}" alt="${n}"`;return r&&(i+=` title="${r}"`),i+=this.options.xhtml?"/>":">",i}text(e){return e}},Ay=class{strong(e){return e}em(e){return e}codespan(e){return e}del(e){return e}html(e){return e}text(e){return e}link(e,r,n){return""+n}image(e,r,n){return""+n}br(){return""}},ky=class{constructor(){this.seen={}}serialize(e){return e.toLowerCase().trim().replace(/<[!\/a-z].*?>/ig,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")}getNextSafeSlug(e,r){let n=e,i=0;if(this.seen.hasOwnProperty(n)){i=this.seen[e];do i++,n=e+"-"+i;while(this.seen.hasOwnProperty(n))}return r||(this.seen[e]=i,this.seen[n]=0),n}slug(e,r={}){let n=this.serialize(e);return this.getNextSafeSlug(n,r.dryrun)}},Ui=class{constructor(e){this.options=e||tu,this.options.renderer=this.options.renderer||new rp,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new Ay,this.slugger=new ky}static parse(e,r){return new Ui(r).parse(e)}static parseInline(e,r){return new Ui(r).parseInline(e)}parse(e,r=!0){let n="",i,a,s,l,u,f,d,h,g,y,m,w,_,E,b,k,O,R,B,ne=e.length;for(i=0;i<ne;i++){if(y=e[i],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[y.type]&&(B=this.options.extensions.renderers[y.type].call({parser:this},y),B!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(y.type))){n+=B||"";continue}switch(y.type){case"space":continue;case"hr":{n+=this.renderer.hr();continue}case"heading":{n+=this.renderer.heading(this.parseInline(y.tokens),y.depth,fk(this.parseInline(y.tokens,this.textRenderer)),this.slugger);continue}case"code":{n+=this.renderer.code(y.text,y.lang,y.escaped);continue}case"table":{for(h="",d="",l=y.header.length,a=0;a<l;a++)d+=this.renderer.tablecell(this.parseInline(y.header[a].tokens),{header:!0,align:y.align[a]});for(h+=this.renderer.tablerow(d),g="",l=y.rows.length,a=0;a<l;a++){for(f=y.rows[a],d="",u=f.length,s=0;s<u;s++)d+=this.renderer.tablecell(this.parseInline(f[s].tokens),{header:!1,align:y.align[s]});g+=this.renderer.tablerow(d)}n+=this.renderer.table(h,g);continue}case"blockquote":{g=this.parse(y.tokens),n+=this.renderer.blockquote(g);continue}case"list":{for(m=y.ordered,w=y.start,_=y.loose,l=y.items.length,g="",a=0;a<l;a++)b=y.items[a],k=b.checked,O=b.task,E="",b.task&&(R=this.renderer.checkbox(k),_?b.tokens.length>0&&b.tokens[0].type==="paragraph"?(b.tokens[0].text=R+" "+b.tokens[0].text,b.tokens[0].tokens&&b.tokens[0].tokens.length>0&&b.tokens[0].tokens[0].type==="text"&&(b.tokens[0].tokens[0].text=R+" "+b.tokens[0].tokens[0].text)):b.tokens.unshift({type:"text",text:R}):E+=R),E+=this.parse(b.tokens,_),g+=this.renderer.listitem(E,O,k);n+=this.renderer.list(g,m,w);continue}case"html":{n+=this.renderer.html(y.text);continue}case"paragraph":{n+=this.renderer.paragraph(this.parseInline(y.tokens));continue}case"text":{for(g=y.tokens?this.parseInline(y.tokens):y.text;i+1<ne&&e[i+1].type==="text";)y=e[++i],g+=`
`+(y.tokens?this.parseInline(y.tokens):y.text);n+=r?this.renderer.paragraph(g):g;continue}default:{let M='Token with "'+y.type+'" type was not found.';if(this.options.silent){console.error(M);return}else throw new Error(M)}}}return n}parseInline(e,r){r=r||this.renderer;let n="",i,a,s,l=e.length;for(i=0;i<l;i++){if(a=e[i],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[a.type]&&(s=this.options.extensions.renderers[a.type].call({parser:this},a),s!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(a.type))){n+=s||"";continue}switch(a.type){case"escape":{n+=r.text(a.text);break}case"html":{n+=r.html(a.text);break}case"link":{n+=r.link(a.href,a.title,this.parseInline(a.tokens,r));break}case"image":{n+=r.image(a.href,a.title,a.text);break}case"strong":{n+=r.strong(this.parseInline(a.tokens,r));break}case"em":{n+=r.em(this.parseInline(a.tokens,r));break}case"codespan":{n+=r.codespan(a.text);break}case"br":{n+=r.br();break}case"del":{n+=r.del(this.parseInline(a.tokens,r));break}case"text":{n+=r.text(a.text);break}default:{let u='Token with "'+a.type+'" type was not found.';if(this.options.silent){console.error(u);return}else throw new Error(u)}}}return n}};function Ye(t,e,r){if(typeof t=="undefined"||t===null)throw new Error("marked(): input parameter is undefined or null");if(typeof t!="string")throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected");if(typeof e=="function"&&(r=e,e=null),e=Mi({},Ye.defaults,e||{}),pk(e),r){let i=e.highlight,a;try{a=ha.lex(t,e)}catch(u){return r(u)}let s=function(u){let f;if(!u)try{e.walkTokens&&Ye.walkTokens(a,e.walkTokens),f=Ui.parse(a,e)}catch(d){u=d}return e.highlight=i,u?r(u):r(null,f)};if(!i||i.length<3||(delete e.highlight,!a.length))return s();let l=0;Ye.walkTokens(a,function(u){u.type==="code"&&(l++,setTimeout(()=>{i(u.text,u.lang,function(f,d){if(f)return s(f);d!=null&&d!==u.text&&(u.text=d,u.escaped=!0),l--,l===0&&s()})},0))}),l===0&&s();return}function n(i){if(i.message+=`
Please report this to https://github.com/markedjs/marked.`,e.silent)return"<p>An error occurred:</p><pre>"+ln(i.message+"",!0)+"</pre>";throw i}try{let i=ha.lex(t,e);if(e.walkTokens){if(e.async)return Promise.all(Ye.walkTokens(i,e.walkTokens)).then(()=>Ui.parse(i,e)).catch(n);Ye.walkTokens(i,e.walkTokens)}return Ui.parse(i,e)}catch(i){n(i)}}Ye.options=Ye.setOptions=function(t){return Mi(Ye.defaults,t),Q9(Ye.defaults),Ye};Ye.getDefaults=ok;Ye.defaults=tu;Ye.use=function(...t){let e=Ye.defaults.extensions||{renderers:{},childTokens:{}};t.forEach(r=>{let n=Mi({},r);if(n.async=Ye.defaults.async||n.async,r.extensions&&(r.extensions.forEach(i=>{if(!i.name)throw new Error("extension name required");if(i.renderer){let a=e.renderers[i.name];a?e.renderers[i.name]=function(...s){let l=i.renderer.apply(this,s);return l===!1&&(l=a.apply(this,s)),l}:e.renderers[i.name]=i.renderer}if(i.tokenizer){if(!i.level||i.level!=="block"&&i.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");e[i.level]?e[i.level].unshift(i.tokenizer):e[i.level]=[i.tokenizer],i.start&&(i.level==="block"?e.startBlock?e.startBlock.push(i.start):e.startBlock=[i.start]:i.level==="inline"&&(e.startInline?e.startInline.push(i.start):e.startInline=[i.start]))}i.childTokens&&(e.childTokens[i.name]=i.childTokens)}),n.extensions=e),r.renderer){let i=Ye.defaults.renderer||new rp;for(let a in r.renderer){let s=i[a];i[a]=(...l)=>{let u=r.renderer[a].apply(i,l);return u===!1&&(u=s.apply(i,l)),u}}n.renderer=i}if(r.tokenizer){let i=Ye.defaults.tokenizer||new tp;for(let a in r.tokenizer){let s=i[a];i[a]=(...l)=>{let u=r.tokenizer[a].apply(i,l);return u===!1&&(u=s.apply(i,l)),u}}n.tokenizer=i}if(r.walkTokens){let i=Ye.defaults.walkTokens;n.walkTokens=function(a){let s=[];return s.push(r.walkTokens.call(this,a)),i&&(s=s.concat(i.call(this,a))),s}}Ye.setOptions(n)})};Ye.walkTokens=function(t,e){let r=[];for(let n of t)switch(r=r.concat(e.call(Ye,n)),n.type){case"table":{for(let i of n.header)r=r.concat(Ye.walkTokens(i.tokens,e));for(let i of n.rows)for(let a of i)r=r.concat(Ye.walkTokens(a.tokens,e));break}case"list":{r=r.concat(Ye.walkTokens(n.items,e));break}default:Ye.defaults.extensions&&Ye.defaults.extensions.childTokens&&Ye.defaults.extensions.childTokens[n.type]?Ye.defaults.extensions.childTokens[n.type].forEach(function(i){r=r.concat(Ye.walkTokens(n[i],e))}):n.tokens&&(r=r.concat(Ye.walkTokens(n.tokens,e)))}return r};Ye.parseInline=function(t,e){if(typeof t=="undefined"||t===null)throw new Error("marked.parseInline(): input parameter is undefined or null");if(typeof t!="string")throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected");e=Mi({},Ye.defaults,e||{}),pk(e);try{let r=ha.lexInline(t,e);return e.walkTokens&&Ye.walkTokens(r,e.walkTokens),Ui.parseInline(r,e)}catch(r){if(r.message+=`
Please report this to https://github.com/markedjs/marked.`,e.silent)return"<p>An error occurred:</p><pre>"+ln(r.message+"",!0)+"</pre>";throw r}};Ye.Parser=Ui;Ye.parser=Ui.parse;Ye.Renderer=rp;Ye.TextRenderer=Ay;Ye.Lexer=ha;Ye.lexer=ha.lex;Ye.Tokenizer=tp;Ye.Slugger=ky;Ye.parse=Ye;var jee=Ye.options,Yee=Ye.setOptions,Wee=Ye.use,zee=Ye.walkTokens,Qee=Ye.parseInline;var Xee=Ui.parse,Jee=ha.lex;var vk=(t,e,r)=>{if(t<0&&(t=e.length+t),!(t>=e.length&&t>=0))return t+1<e.length?r.substring(e[t].position.start.offset,e[t+1].position.start.offset-1):r.substring(e[t].position.start.offset,r.length)},_k=t=>P(void 0,null,function*(){var h,g,y,m,w,_;let e=Ze.getInstance(),r=yield app.vault.adapter.read((0,Iy.normalizePath)(t.file.path)),n=(g=qc.default.cloneDeep((h=app==null?void 0:app.metadataCache)==null?void 0:h.getFileCache(t.file).frontmatter))!=null?g:{},i=/\[([^[]*)::([^[]*)\]/gm,a,s=[];do a=i.exec(r),s.push(a);while(a);if(s.forEach(E=>{E&&qc.default.set(n,E[1].trim(),E[2].trim())}),!n){ot("No frontmatter found in note",!0);return}let l=cV(n);for(let[E,b]of Object.entries(l)){let k=qc.default.get(n,E,null);k&&qc.default.set(n,b,k)}let u=yield Or(),f=n.position;delete n.position;let d=u.find(E=>{var b,k;return E.id==((b=n.calendar)!=null?b:e.settings.defaultCalendar)||E.summary==((k=n.calendar)!=null?k:e.settings.defaultCalendar)});if(!d){ot("Event not created. Calendar not defined. Set a default calendar in the settings or set the field calendar");return}if(n.parent=d,n.summary||(n.summary=t.file.basename),n.description){if(typeof n.description=="string"){if(((y=n.description)==null?void 0:y.toLowerCase())=="header"&&(n.description="",((m=app==null?void 0:app.metadataCache)==null?void 0:m.getFileCache(t.file).headings).forEach(b=>{n.description+=`<h${b.level}>${b.heading}</h${b.level}>`})),((w=n.description)==null?void 0:w.toLowerCase())=="file"){let E=Ye.parse(r.substring(f.end.offset));n.description=E}}else if(typeof n.description=="object"){let E=(_=app==null?void 0:app.metadataCache)==null?void 0:_.getFileCache(t.file).headings,b=n.description.map(O=>{if(typeof O=="number"){let R=vk(O,E,r);return R||-1}else if(typeof O=="object"){if(O.length!=2)return-1;let[R,B]=O;if(R<0&&(R=E.length+R),B<0&&(B=E.length+B),R>=E.length||B>=E.length||R<0||B<0||R>B)return-1;let ne="";for(let M=R;M<=B;M++){let G=vk(M,E,r);if(!G)return-1;ne+=G+`
`}return ne}});if(b.contains(-1)){ot("Event not created.A Header in the header list is out of range",!0);return}let k=Ye.parse(b.join(`
`));n.description=k}}if(!n.start&&!n.startTime&&(n.start={date:window.moment()}),!n.end&&!n.endTime&&(n.end=n.start),n.start.date?(n.start.date=window.moment(n.start.date).format("YYYY-MM-DD"),n.end.date=window.moment(n.end.date).format("YYYY-MM-DD")):(n.start.dateTime=window.moment(n.start.dateTime).format(),n.end.dateTime=window.moment(n.end.dateTime).format()),n.recurrence)try{let E=sA.fromText(n.recurrence),b=new bo;b.rrule(E),n.recurrence=b.valueOf()}catch(E){ot("Event not created. Error in recurrence text.",!0);return}return n}),cV=t=>{var r;let e=new Map;if(typeof t.mapping=="string"){t.mapping.endsWith(".md")||(t.mapping+=".md");let n=(0,Iy.normalizePath)(t.mapping),i=app.vault.getAbstractFileByPath(n);if(!i)return ot(`Mapping Error, file "${n}" not found.`),e;if(t=(r=app==null?void 0:app.metadataCache)==null?void 0:r.getFileCache(i).frontmatter,!t)return ot(`Mapping Error, file "${n}" does not contain frontmatter.`),e}return t.mapping?t.mapping:e};var wk=gt(require("obsidian"));var Ek=t=>P(void 0,null,function*(){var u,f;if(wk.Platform.isMobile)return;let e=Ze.getInstance(),{remote:r}=require("electron"),{file:n}=Ql(t,e),i=n?"Open Note":"Create Note",a=(u=t.summary)!=null?u:"Event started",s=(f=t.description)!=null?f:"",l;process.platform==="win32"?l=new r.Notification({toastXml:`
            <toast 
                content="Open Note"
                arguments="obsidian://googleOpenNote?event=${t.id}::${t.parent.id}"
                activationType="protocol"
            >
                <visual>
                    <binding template="ToastGeneric">
                        <text>Google event now</text>
                        <text>Title: ${a}</text>
                        <text>Description: ${s}</text>
                    </binding>
                </visual>

                <actions>
                    <action
                        content="${i}"
                        arguments="obsidian://googleOpenNote?event=${t.id}::${t.parent.id}"
                        activationType="protocol"/>

                    <action activationType="background" content="Dismiss" arguments="dismiss"/>
                </actions>
            </toast>`}):process.platform==="darwin"&&(l=new r.Notification({title:a,body:s,actions:[{type:"button",text:i},{type:"button",text:"Dismiss"}]}),l.on("action",(d,h)=>{h===0&&window.open(`obsidian://googleOpenNote?event=${t.id}::${t.parent.id}`)})),l.show()});var Ck=gt(require("obsidian"));var fV=(...e)=>P(void 0,[...e],function*(t={}){return(yield er(t)).map(i=>{var u;if(!((u=i.description)==null?void 0:u.includes("~obsidianTask~")))return null;let a=i.description.replace(/<br>/g,`
`).replace(/<\/?[^>]+(>|$)/g,""),s=(0,Ck.parseYaml)(a);return console.log(s),{event:i,current:s.current||0,steps:s.steps||0,goal:s.goal||0,done:s.done||!1}}).filter(i=>i!==null)}),bk=()=>P(void 0,null,function*(){return yield fV()});var dV={googleClientId:"",googleClientSecret:"",googleRefreshToken:"",useCustomClient:!0,googleOAuthServer:"https://obsidian-google-calendar.vercel.app",refreshInterval:10,useNotification:!1,showNotice:!0,autoCreateEventNotes:!0,autoCreateEventKeepOpen:!1,importStartOffset:1,importEndOffset:1,optionalNotePrefix:"",eventNoteNameFormat:"{{prefix}}{{event-title}}",defaultCalendar:"",calendarBlackList:[],insertTemplates:[],webViewDefaultColorMode:Dh(),useDefaultTemplate:!1,defaultTemplate:"",defaultFolder:app.vault.config.newFileFolderPath,activateDailyNoteAddon:!1,dailyNoteDotColor:"#6aa1d8",useWeeklyNotes:!1,debugMode:!1,timelineHourFormat:0,atAnnotationEnabled:!0,usDateFormat:!0},Ze=class extends ru.Plugin{constructor(){super(...arguments);this.events=[];this.initView=e=>P(this,null,function*(){this.app.workspace.getLeavesOfType(e).length===0&&(yield this.app.workspace.getRightLeaf(!1).setViewState({type:e})),this.app.workspace.revealLeaf(this.app.workspace.getLeavesOfType(e).first())});this.onLayoutReady=()=>{var n;mc(this),go(this);let e=(n=this.app.internalPlugins)==null?void 0:n.plugins.templates;e&&e.enabled&&(this.coreTemplatePlugin=e);let r=this.app.plugins.plugins["templater-obsidian"];r&&r._loaded&&(this.templaterPlugin=r),sy(this)}}static getInstance(){return Ze.instance}onload(){return P(this,null,function*(){if(Ze.instance=this,this.api=new Sy().make(),yield this.loadSettings(),this.app.workspace.onLayoutReady(this.onLayoutReady),this.events.push(this.app.vault.on("create",()=>{mc(this),go(this)})),this.events.push(this.app.vault.on("delete",()=>{mc(this),go(this)})),this.events.push(this.app.vault.on("rename",()=>{mc(this),go(this)})),this.events.forEach(e=>{this.registerEvent(e)}),this.settings.useNotification){let e=window.setInterval(()=>P(this,null,function*(){let r=yield er(),n=window.moment();r.filter(a=>a.start.date?!1:window.moment(a.start.dateTime).isSame(n,"minute")).forEach(a=>{Ek(a)})}),1e3*60);this.registerInterval(e)}this.registerMarkdownCodeBlockProcessor("gEvent",(e,r,n)=>L2(e,r,n)),this.registerEditorSuggest(new by(this.app)),this.registerView(Oc,e=>new vy(e)),this.registerView(Lc,e=>new _y(e)),this.registerView(Pc,e=>new wy(e)),this.registerView(Mc,e=>new Ey(e)),this.registerEvent(this.app.workspace.on("editor-change",e=>{G2(e,this),H2(e)})),this.addCommand({id:"open-google-calendar-timline-view",name:"Open Google Calendar timeline view",callback:()=>this.initView(Oc)}),this.addCommand({id:"open-google-calendar-month-view",name:"Open Google Calendar month view",callback:()=>this.initView(Lc)}),this.addCommand({id:"open-google-calendar-web-view",name:"Open Google Calendar web view",callback:()=>this.initView(Pc)}),this.addCommand({id:"open-google-calendar-schedule-view",name:"Open Google Calendar schedule view",callback:()=>this.initView(Mc)}),this.addCommand({id:"list-google-calendars",name:"List Google Calendars",checkCallback:e=>{let r=Yt();if(e)return r;!r||Or().then(n=>{new Oh(n).open()})}}),this.addCommand({id:"create-google-calendar-event",name:"Create Google Calendar Event",checkCallback:e=>{let r=Yt();if(e)return r;!r||new Un({start:{},end:{}},()=>{zn()}).open()}}),this.addCommand({id:"list-google-calendars",name:"List Google Calendars",checkCallback:e=>{let r=Yt();if(e)return r;!r||Or().then(n=>{new Oh(n).open()})}}),this.addCommand({id:"list-google-events",name:"List Google Events",checkCallback:e=>{let r=Yt();if(e)return r;!r||er().then(n=>{new Pi(n,"details").open()})}}),this.addCommand({id:"google-calendar-trigger-auto-import",name:"Google Calendar Trigger Auto Import",checkCallback:e=>{let r=Yt();if(e)return r;!r||sy(this)}}),this.addCommand({id:"google-calendar-create-event-note",name:"Create Event Note",checkCallback:e=>{let r=Yt();if(e)return r;!r||er().then(n=>{new Pi(n,"createNote").open()})}}),this.addCommand({id:"google-calendar-get-todays-tasks",name:"Get todays google calendar tasks",checkCallback:e=>{let r=Yt();if(e)return r;!r||bk().then(n=>{console.log(n)})}}),this.addCommand({id:"google-calendar-create-event-note-current-event",name:"Create Event Note for current event",checkCallback:e=>{let r=Yt();if(e)return r;!r||er().then(n=>{let i=n.filter(a=>{if(a.start.date)return!1;let s=window.moment(a.start.dateTime),l=window.moment(a.end.dateTime),u=window.moment();return!(u.isBefore(s)||u.isAfter(l))});i.length==0&&(i=n.filter(a=>{if(a.start.date)return!1;let s=window.moment(a.start.dateTime).subtract(1,"hour"),l=window.moment(a.end.dateTime),u=window.moment();return!(u.isBefore(s)||u.isAfter(l))})),i.length==0&&(i=n.filter(a=>!!a.start.date)),i.length==1?this.settings.useDefaultTemplate&&this.settings.defaultFolder&&this.settings.defaultFolder?la(i[0],this.settings.defaultFolder,this.settings.defaultTemplate):new ua(i[0],()=>{}).open():new Pi(i,"createNote").open()})}}),this.addCommand({id:"insert-google-event-codeblock",name:"Insert Google Event CodeBlock",editorCallback:e=>{e.replaceRange("```gEvent\ndate: "+window.moment().format("YYYY-MM-DD")+"\ntype: day\n```",e.getCursor())}}),this.addCommand({id:"insert-google-event-template",name:"Insert Google Event Template",editorCallback:e=>{e.replaceRange("{{gEvent.}}",e.getCursor());let r=e.getCursor();r.ch+="{{gEvent.".length,e.setCursor(r)}}),this.addCommand({id:"insert-google-events",name:"Insert Google events",editorCheckCallback:(e,r)=>{let n=Yt();if(e)return n;!n||new Ty(r).open()}}),this.addCommand({id:"create-google-calendar-event-from-frontmatter ",name:"Create Google Calendar Event from frontmatter",editorCheckCallback:(e,r,n)=>{let i=Yt();if(e)return i;!i||!n.file||_k(n).then(a=>{!a||Hl(a)})}}),this.addCommand({id:"copy-google-calendar-refresh-token",name:"Copy Google Calendar Refresh Token to Clipboard",callback:()=>{let e=xa();if(e==null||e==""){new ru.Notice("No Refresh Token. Please Login.");return}navigator.clipboard.writeText(e),new ru.Notice("Token copied")}}),this.settingsTab=new Hm(this.app,this),this.addSettingTab(this.settingsTab),this.registerObsidianProtocolHandler("googleLogin",e=>P(this,null,function*(){this.settings.useCustomClient||(Bf(e.uid),rs(e.at),ns(+new Date+36e5),new ru.Notice("Login successful!"),this.settingsTab.display())})),this.registerObsidianProtocolHandler("googleOpenNote",e=>P(this,null,function*(){if(!e.event)return;let[r,n]=e.event.split("::"),i=yield sa(r,n),{file:a}=Ql(i,this);a?app.workspace.getLeaf(!0).openFile(a):this.settings.useDefaultTemplate&&this.settings.defaultFolder&&this.settings.defaultFolder?la(i,this.settings.defaultFolder,this.settings.defaultTemplate):new ua(i,s=>a=s).open()}))})}onunload(){this.app.workspace.detachLeavesOfType(Oc),this.app.workspace.detachLeavesOfType(Lc),this.app.workspace.detachLeavesOfType(Pc),this.app.workspace.detachLeavesOfType(Mc);for(let e in this.events)this.app.vault.offref(e);this.events=[]}loadSettings(){return P(this,null,function*(){this.settings=Object.assign({},dV,yield this.loadData())})}saveSettings(){return P(this,null,function*(){yield this.saveData(this.settings)})}};
/*!
 * rrule.js - Library for working with recurrence rules for calendar dates.
 * https://github.com/jakubroztocil/rrule
 *
 * Copyright 2010, Jakub Roztocil and Lars Schoning
 * Licenced under the BSD licence.
 * https://github.com/jakubroztocil/rrule/blob/master/LICENCE
 *
 * Based on:
 * python-dateutil - Extensions to the standard Python datetime module.
 * Copyright (c) 2003-2011 - Gustavo Niemeyer <gustavo@niemeyer.net>
 * Copyright (c) 2012 - Tomi Pievilinen <tomi.pievilainen@iki.fi>
 * https://github.com/jakubroztocil/rrule/blob/master/LICENCE
 *
 */
/*!
* rrule.js - Library for working with recurrence rules for calendar dates.
* https://github.com/jakubroztocil/rrule
*
* Copyright 2010, Jakub Roztocil and Lars Schoning
* Licenced under the BSD licence.
* https://github.com/jakubroztocil/rrule/blob/master/LICENCE
*
*/
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */
